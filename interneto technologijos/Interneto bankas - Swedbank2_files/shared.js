String.prototype.supplementWith=function(){var data={};jQuery.each(arguments,function(index,object){jQuery.extend(data,object)});return this.replace(/\{([\w\.]*)\}/g,function(match,variable){var keys=variable.split("."),value=data[keys.shift()];keys.forEach(function(key){value=value[key]});return typeof value!=="undefined"&&value!==null?value:""})};
/*
 jQuery JavaScript Library v1.12.4
 http://jquery.com/

 Includes Sizzle.js
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2016-05-20T17:17Z
 Sizzle CSS Selector Engine v2.2.1
 http://sizzlejs.com/

 Copyright jQuery Foundation and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2015-10-17
*/
(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object")module.exports=global.document?factory(global,true):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)};else factory(global)})(typeof window!=="undefined"?window:this,function(window,noGlobal){var deletedIds=[];var document=window.document;var slice=deletedIds.slice;var concat=deletedIds.concat;var push=deletedIds.push;var indexOf=deletedIds.indexOf;var class2type=
{};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var version="1.12.4",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<
0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=
this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:deletedIds.sort,splice:deletedIds.splice};jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target))target={};if(i===length){target=
this;i--}for(;i<length;i++)if((options=arguments[i])!=null)for(name in options){src=target[name];copy=options[name];if(target===copy)continue;if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined)target[name]=copy}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,
""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&realStringObj-parseFloat(realStringObj)+1>=0},isEmptyObject:function(obj){var name;for(name in obj)return false;return true},isPlainObject:function(obj){var key;
if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj))return false;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return false}catch(e){return false}if(!support.ownFirst)for(key in obj)return hasOwn.call(obj,key);for(key in obj);return key===undefined||hasOwn.call(obj,key)},type:function(obj){if(obj==null)return obj+"";return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":
typeof obj},globalEval:function(data){if(data&&jQuery.trim(data))(window.execScript||function(data){window["eval"].call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++)if(callback.call(obj[i],i,obj[i])===false)break}else for(i in obj)if(callback.call(obj[i],
i,obj[i])===false)break;return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null)if(isArrayLike(Object(arr)))jQuery.merge(ret,typeof arr==="string"?[arr]:arr);else push.call(ret,arr);return ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var len=
+second.length,j=0,i=first.length;while(j<len)first[i++]=second[j++];if(len!==len)while(second[j]!==undefined)first[i++]=second[j++];first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect)matches.push(elems[i])}return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;
for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null)ret.push(value)}}else for(i in elems){value=callback(elems[i],i,arg);if(value!=null)ret.push(value)}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn))return undefined;args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;
return proxy},now:function(){return+new Date},support:support});if(typeof Symbol==="function")jQuery.fn[Symbol.iterator]=deletedIds[Symbol.iterator];jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj))return false;return type==="array"||length===0||typeof length===
"number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b)hasDuplicate=true;return 0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,
arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?\x3d)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+
identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\x3e+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("\x3d"+whitespace+"*([^\\]'\"]*?)"+
whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+identifier+")"),"CLASS":new RegExp("^\\.("+identifier+")"),"TAG":new RegExp("^("+identifier+"|[*])"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+
booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[\x3e+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?\x3d[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+
escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]);target.length=j-
1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,nidselect,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11)return results;if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document)setDocument(context);context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector)))if(m=
match[1])if(nodeType===9)if(elem=context.getElementById(m)){if(elem.id===m){results.push(elem);return results}}else return results;else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}if(support.qsa&&
!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector}else if(context.nodeName.toLowerCase()!=="object"){if(nid=context.getAttribute("id"))nid=nid.replace(rescape,"\\$\x26");else context.setAttribute("id",nid=expando);groups=tokenize(selector);i=groups.length;nidselect=ridentifier.test(nid)?"#"+nid:"[id\x3d'"+nid+"']";while(i--)groups[i]=nidselect+" "+toSelector(groups[i]);newSelector=groups.join(",");newContext=rsibling.test(selector)&&
testContext(context.parentNode)||context}if(newSelector)try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(nid===expando)context.removeAttribute("id")}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength)delete cache[keys.shift()];return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=
document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode)div.parentNode.removeChild(div);div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)while(cur=cur.nextSibling)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=
elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--)if(seed[j=matchIndexes[i]])seed[j]=!(matches[j]=seed[j])})})}function testContext(context){return context&&
typeof context.getElementsByTagName!=="undefined"&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement)return document;document=doc;docElem=document.documentElement;documentIsHTML=
!isXML(document);if((parent=document.defaultView)&&parent.top!==parent)if(parent.addEventListener)parent.addEventListener("unload",unloadHandler,false);else if(parent.attachEvent)parent.attachEvent("onunload",unloadHandler);support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(document.getElementsByClassName);
support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=
function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined")return context.getElementsByTagName(tag);else if(support.qsa)return context.querySelectorAll(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag===
"*"){while(elem=results[i++])if(elem.nodeType===1)tmp.push(elem);return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML)return context.getElementsByClassName(className)};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(document.querySelectorAll)){assert(function(div){docElem.appendChild(div).innerHTML="\x3ca id\x3d'"+expando+"'\x3e\x3c/a\x3e"+"\x3cselect id\x3d'"+expando+
"-\r\\' msallowcapture\x3d''\x3e"+"\x3coption selected\x3d''\x3e\x3c/option\x3e\x3c/select\x3e";if(div.querySelectorAll("[msallowcapture^\x3d'']").length)rbuggyQSA.push("[*^$]\x3d"+whitespace+"*(?:''|\"\")");if(!div.querySelectorAll("[selected]").length)rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");if(!div.querySelectorAll("[id~\x3d"+expando+"-]").length)rbuggyQSA.push("~\x3d");if(!div.querySelectorAll(":checked").length)rbuggyQSA.push(":checked");if(!div.querySelectorAll("a#"+expando+
"+*").length)rbuggyQSA.push(".#.+[+~]")});assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name\x3dd]").length)rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?\x3d");if(!div.querySelectorAll(":enabled").length)rbuggyQSA.push(":enabled",":disabled");div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||
docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!\x3d'']:x");rbuggyMatches.push("!\x3d",pseudos)});rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===
9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return true;return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare)return compare;compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):
1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a))return-1;if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b))return 1;return sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===document?-1:b===document?1:aup?-1:bup?
1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;else if(aup===bup)return siblingCheck(a,b);cur=a;while(cur=cur.parentNode)ap.unshift(cur);cur=b;while(cur=cur.parentNode)bp.unshift(cur);while(ap[i]===bp[i])i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document)setDocument(elem);expr=
expr.replace(rattributeQuotes,"\x3d'$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document)setDocument(context);return contains(context,
elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document)setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,
duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++])if(elem===results[i])j=duplicates.push(i);while(j--)results.splice(duplicates[j],1)}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType)while(node=elem[i++])ret+=getText(node);else if(nodeType===1||nodeType===9||nodeType===11)if(typeof elem.textContent===
"string")return elem.textContent;else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else if(nodeType===3||nodeType===4)return elem.nodeValue;return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{"\x3e":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=
(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~\x3d")match[3]=" "+match[3]+" ";return match.slice(0,4)},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3])Sizzle.error(match[0]);match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3])Sizzle.error(match[0]);return match},"PSEUDO":function(match){var excess,unquoted=!match[6]&&
match[2];if(matchExpr["CHILD"].test(match[0]))return null;if(match[3])match[2]=match[4]||match[5]||"";else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:
function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,
name);if(result==null)return operator==="!\x3d";if(!operator)return true;result+="";return operator==="\x3d"?result===check:operator==="!\x3d"?result!==check:operator==="^\x3d"?check&&result.indexOf(check)===0:operator==="*\x3d"?check&&result.indexOf(check)>-1:operator==="$\x3d"?check&&result.slice(-check.length)===check:operator==="~\x3d"?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|\x3d"?result===check||result.slice(0,check.length+1)===check+"-":false}},"CHILD":function(type,
what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while(node=node[dir])if(ofType?node.nodeName.toLowerCase()===
name:node.nodeType===1)return false;start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())if(node.nodeType===
1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex}if(diff===false)while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||
(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff]}if(node===elem)break}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando])return fn(argument);if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?
markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--)if(elem=unmatched[i])seed[i]=
!(matches[i]=elem)}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop()}}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),"contains":markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||""))Sizzle.error("unsupported lang: "+
lang);lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},"root":function(elem){return elem===docElem},"focus":function(elem){return elem===
document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},"enabled":function(elem){return elem.disabled===false},"disabled":function(elem){return elem.disabled===true},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},"selected":function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===true},"empty":function(elem){for(elem=
elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return false;return true},"parent":function(elem){return!Expr.pseudos["empty"](elem)},"header":function(elem){return rheader.test(elem.nodeName)},"input":function(elem){return rinputs.test(elem.nodeName)},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==
null||attr.toLowerCase()==="text")},"first":createPositionalPseudo(function(){return[0]}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1]}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2)matchIndexes.push(i);
return matchIndexes}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;)matchIndexes.push(i);return matchIndexes}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;)matchIndexes.push(i);return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true})Expr.pseudos[i]=createInputPseudo(i);
for(i in{submit:true,reset:true})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match)soFar=soFar.slice(match[0].length)||
soFar;groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,
groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir])if(elem.nodeType===1||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];
if(xml)while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements)if(matcher(elem,context,xml))return true}else while(elem=elem[dir])if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if((oldCache=uniqueCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];else{uniqueCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml))return true}}}}function elementMatcher(matchers){return matchers.length>
1?function(elem,context,xml){var i=matchers.length;while(i--)if(!matchers[i](elem,context,xml))return false;return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++)if(elem=unmatched[i])if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped)map.push(i)}return newUnmatched}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando])postFilter=setMatcher(postFilter);if(postFinder&&!postFinder[expando])postFinder=setMatcher(postFinder,postSelector);return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,
context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher)matcher(matcherIn,matcherOut,context,xml);if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--)if(elem=temp[i])matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--)if(elem=matcherOut[i])temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=
[],temp,xml)}i=matcherOut.length;while(i--)if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1)seed[temp]=!(results[temp]=elem)}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder)postFinder(null,results,matcherOut,xml);else push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||
Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=
[addCombinator(elementMatcher(matchers),matcher)];else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++)if(Expr.relative[tokens[j].type])break;return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost)outermostContext=context===document||context||outermost;for(;i!==
len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML}while(matcher=elementMatchers[j++])if(matcher(elem,context||document,xml)){results.push(elem);break}if(outermost)dirruns=dirrunsUnique}if(bySet){if(elem=!matcher&&elem)matchedCount--;if(seed)unmatched.push(elem)}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++])matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)while(i--)if(!(unmatched[i]||
setMatched[i]))setMatched[i]=pop.call(results);setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1)Sizzle.uniqueSort(results)}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match)match=
tokenize(selector);i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando])setMatchers.push(cached);else elementMatchers.push(cached)}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];
if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context)return results;else if(compiled)context=context.parentNode;selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=
token.type])break;if(find=Expr.find[type])if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===
expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="\x3ca href\x3d'#'\x3e\x3c/a\x3e";return div.firstChild.getAttribute("href")==="#"}))addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)});if(!support.attributes||!assert(function(div){div.innerHTML="\x3cinput/\x3e";
div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""}))addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input")return elem.defaultValue});if(!assert(function(div){return div.getAttribute("disabled")==null}))addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null});return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=
Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9)if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling)if(n.nodeType===1&&n!==elem)matched.push(n);
return matched};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if(typeof qualifier==="string"){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,
not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>-1!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not)expr=":not("+expr+")";return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if(typeof selector!==
"string")return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return true}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,
typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector)return this;root=root||rootjQuery;if(typeof selector==="string"){if(selector.charAt(0)==="\x3c"&&selector.charAt(selector.length-1)==="\x3e"&&selector.length>=3)match=[null,selector,null];else match=rquickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){context=
context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)if(jQuery.isFunction(this[match]))this[match](context[match]);else this.attr(match,context[match]);return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1;this[0]=
elem}this.context=document;this.selector=selector;return this}else if(!context||context.jquery)return(context||root).find(selector);else return this.constructor(context).find(selector)}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector))return typeof root.ready!=="undefined"?root.ready(selector):selector(jQuery);if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,
this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return true})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?
jQuery(selectors,context||this.context):0;for(;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){if(!elem)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if(typeof elem==="string")return jQuery.inArray(this[0],jQuery(elem));return jQuery.inArray(elem.jquery?
elem[0]:elem,this)},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){do cur=cur[dir];while(cur&&cur.nodeType!==1);return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return dir(elem,"parentNode")},
parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||
{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until")selector=until;if(selector&&typeof selector==="string")ret=jQuery.filter(selector,ret);if(this.length>1){if(!guaranteedUnique[name])ret=jQuery.uniqueSort(ret);
if(rparentsprev.test(name))ret=ret.reverse()}return this.pushStack(ret)}});var rnotwhite=/\S+/g;function createOptions(options){var object={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=
queue.shift();while(++firingIndex<list.length)if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false}}if(!options.memory)memory=false;firing=false;if(locked)if(memory)list=[];else list=""},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory)}(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg))list.push(arg)}else if(arg&&arg.length&&jQuery.type(arg)!==
"string")add(arg)})})(arguments);if(memory&&!firing)fire()}return this},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex)firingIndex--}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){if(list)list=[];return this},disable:function(){locked=queue=[];list=memory="";return this},disabled:function(){return!list},lock:function(){locked=true;if(!memory)self.disable();
return this},locked:function(){return!!locked},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing)fire()}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],
state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject);else newDefer[tuple[0]+
"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString)list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);
return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func)func.call(deferred,deferred);return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;
if(values===progressValues)deferred.notifyWith(contexts,values);else if(!--remaining)deferred.resolveWith(contexts,values)}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++)if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise))resolveValues[i].promise().progress(updateFunc(i,progressContexts,progressValues)).done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject);
else--remaining}if(!remaining)deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(true)},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");
jQuery(document).off("ready")}}});function detach(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed)}else{document.detachEvent("onreadystatechange",completed);window.detachEvent("onload",completed)}}function completed(){if(document.addEventListener||window.event.type==="load"||document.readyState==="complete"){detach();jQuery.ready()}}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState===
"complete"||document.readyState!=="loading"&&!document.documentElement.doScroll)window.setTimeout(jQuery.ready);else if(document.addEventListener){document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed)}else{document.attachEvent("onreadystatechange",completed);window.attachEvent("onload",completed);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll)(function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return window.setTimeout(doScrollCheck,
50)}detach();jQuery.ready()}})()}}return readyList.promise(obj)};jQuery.ready.promise();var i;for(i in jQuery(support))break;support.ownFirst=i==="0";support.inlineBlockNeedsLayout=false;jQuery(function(){var val,div,body,container;body=document.getElementsByTagName("body")[0];if(!body||!body.style)return;div=document.createElement("div");container=document.createElement("div");container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";body.appendChild(container).appendChild(div);
if(typeof div.style.zoom!=="undefined"){div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";support.inlineBlockNeedsLayout=val=div.offsetWidth===3;if(val)body.style.zoom=1}body.removeChild(container)});(function(){var div=document.createElement("div");support.deleteExpando=true;try{delete div.test}catch(e){support.deleteExpando=false}div=null})();var acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return nodeType!==
1&&nodeType!==9?false:!noData||noData!==true&&elem.getAttribute("classid")===noData};var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,
key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name]))continue;if(name!=="toJSON")return false}return true}function internalData(elem,name,data,pvt){if(!acceptData(elem))return;var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||!pvt&&!cache[id].data)&&data===undefined&&typeof name===
"string")return;if(!id)if(isNode)id=elem[internalKey]=deletedIds.pop()||jQuery.guid++;else id=internalKey;if(!cache[id])cache[id]=isNode?{}:{toJSON:jQuery.noop};if(typeof name==="object"||typeof name==="function")if(pvt)cache[id]=jQuery.extend(cache[id],name);else cache[id].data=jQuery.extend(cache[id].data,name);thisCache=cache[id];if(!pvt){if(!thisCache.data)thisCache.data={};thisCache=thisCache.data}if(data!==undefined)thisCache[jQuery.camelCase(name)]=data;if(typeof name==="string"){ret=thisCache[name];
if(ret==null)ret=thisCache[jQuery.camelCase(name)]}else ret=thisCache;return ret}function internalRemoveData(elem,name,pvt){if(!acceptData(elem))return;var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id])return;if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name))if(name in thisCache)name=[name];else{name=jQuery.camelCase(name);if(name in thisCache)name=[name];else name=name.split(" ")}else name=
name.concat(jQuery.map(name,jQuery.camelCase));i=name.length;while(i--)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id]))return}if(isNode)jQuery.cleanData([elem],true);else if(support.deleteExpando||cache!=cache.window)delete cache[id];else cache[id]=undefined}jQuery.extend({cache:{},noData:{"applet ":true,"embed ":true,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){elem=
elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,true)},_removeData:function(elem,name){return internalRemoveData(elem,name,true)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===
undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){i=attrs.length;while(i--)if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}jQuery._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object")return this.each(function(){jQuery.data(this,key)});return arguments.length>1?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,
key)):undefined},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data)if(!queue||jQuery.isArray(data))queue=jQuery._data(elem,type,jQuery.makeArray(data));else queue.push(data);return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,
type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx")queue.unshift("inprogress");delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks)hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue");jQuery._removeData(elem,key)})})}});jQuery.fn.extend({queue:function(type,
data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter)return jQuery.queue(this[0],type);return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress")jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=
1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count)defer.resolveWith(elements,[elements])};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});(function(){var shrinkWrapBlocksVal;support.shrinkWrapBlocks=function(){if(shrinkWrapBlocksVal!=null)return shrinkWrapBlocksVal;shrinkWrapBlocksVal=false;var div,
body,container;body=document.getElementsByTagName("body")[0];if(!body||!body.style)return;div=document.createElement("div");container=document.createElement("div");container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px";body.appendChild(container).appendChild(div);if(typeof div.style.zoom!=="undefined"){div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;"+"padding:1px;width:1px;zoom:1";
div.appendChild(document.createElement("div")).style.width="5px";shrinkWrapBlocksVal=div.offsetWidth!==3}body.removeChild(container);return shrinkWrapBlocksVal}})();var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rcssNum=new RegExp("^(?:([+-])\x3d|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};function adjustCSS(elem,prop,valueParts,
tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit/scale;
jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&scale!==1&&--maxIterations)}if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted}}return adjusted}var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key)access(elems,
fn,i,key[i],true,emptyGet,raw)}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value))raw=true;if(bulk)if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}if(fn)for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet};var rcheckableType=/^(?:checkbox|radio)$/i;var rtagName=/<([\w:-]+)/;var rscriptType=/^$|\/(?:java|ecma)script/i;
var rleadingWhitespace=/^\s+/;var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|"+"details|dialog|figcaption|figure|footer|header|hgroup|main|"+"mark|meter|nav|output|picture|progress|section|summary|template|time|video";function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)while(list.length)safeFrag.createElement(list.pop());return safeFrag}(function(){var div=document.createElement("div"),fragment=
document.createDocumentFragment(),input=document.createElement("input");div.innerHTML="  \x3clink/\x3e\x3ctable\x3e\x3c/table\x3e\x3ca href\x3d'/a'\x3ea\x3c/a\x3e\x3cinput type\x3d'checkbox'/\x3e";support.leadingWhitespace=div.firstChild.nodeType===3;support.tbody=!div.getElementsByTagName("tbody").length;support.htmlSerialize=!!div.getElementsByTagName("link").length;support.html5Clone=document.createElement("nav").cloneNode(true).outerHTML!=="\x3c:nav\x3e\x3c/:nav\x3e";input.type="checkbox";input.checked=
true;fragment.appendChild(input);support.appendChecked=input.checked;div.innerHTML="\x3ctextarea\x3ex\x3c/textarea\x3e";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue;fragment.appendChild(div);input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;support.noCloneEvent=!!div.addEventListener;div[jQuery.expando]=
1;support.attributes=!div.getAttribute(jQuery.expando)})();var wrapMap={option:[1,"\x3cselect multiple\x3d'multiple'\x3e","\x3c/select\x3e"],legend:[1,"\x3cfieldset\x3e","\x3c/fieldset\x3e"],area:[1,"\x3cmap\x3e","\x3c/map\x3e"],param:[1,"\x3cobject\x3e","\x3c/object\x3e"],thead:[1,"\x3ctable\x3e","\x3c/table\x3e"],tr:[2,"\x3ctable\x3e\x3ctbody\x3e","\x3c/tbody\x3e\x3c/table\x3e"],col:[2,"\x3ctable\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3ccolgroup\x3e","\x3c/colgroup\x3e\x3c/table\x3e"],td:[3,"\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e",
"\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e"],_default:support.htmlSerialize?[0,"",""]:[1,"X\x3cdiv\x3e","\x3c/div\x3e"]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!=="undefined"?context.querySelectorAll(tag||"*"):undefined;if(!found)for(found=
[],elems=context.childNodes||context;(elem=elems[i])!=null;i++)if(!tag||jQuery.nodeName(elem,tag))found.push(elem);else jQuery.merge(found,getAll(elem,tag));return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function setGlobalEval(elems,refElements){var elem,i=0;for(;(elem=elems[i])!=null;i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}var rhtml=/<|&#?\w+;/,rtbody=/<tbody/i;function fixDefaultChecked(elem){if(rcheckableType.test(elem.type))elem.defaultChecked=
elem.checked}function buildFragment(elems,context,scripts,selection,ignored){var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;for(;i<l;i++){elem=elems[i];if(elem||elem===0)if(jQuery.type(elem)==="object")jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(!rhtml.test(elem))nodes.push(context.createTextNode(elem));else{tmp=tmp||safe.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;
tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem))nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]));if(!support.tbody){elem=tag==="table"&&!rtbody.test(elem)?tmp.firstChild:wrap[1]==="\x3ctable\x3e"&&!rtbody.test(elem)?tmp:0;j=elem&&elem.childNodes.length;while(j--)if(jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length)elem.removeChild(tbody)}jQuery.merge(nodes,
tmp.childNodes);tmp.textContent="";while(tmp.firstChild)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}}if(tmp)safe.removeChild(tmp);if(!support.appendChecked)jQuery.grep(getAll(nodes,"input"),fixDefaultChecked);i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored)ignored.push(elem);continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(safe.appendChild(elem),"script");if(contains)setGlobalEval(tmp);if(scripts){j=0;while(elem=tmp[j++])if(rscriptType.test(elem.type||
""))scripts.push(elem)}}tmp=null;return safe}(function(){var i,eventName,div=document.createElement("div");for(i in{submit:true,change:true,focusin:true}){eventName="on"+i;if(!(support[i]=eventName in window)){div.setAttribute(eventName,"t");support[i]=div.attributes[eventName].expando===false}}div=null})();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;
function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types)on(elem,type,selector,data,types[type],one);return elem}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null)if(typeof selector==="string"){fn=data;data=
undefined}else{fn=data;data=selector;selector=undefined}if(fn===false)fn=returnFalse;else if(!fn)return elem;if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=
jQuery._data(elem);if(!elemData)return;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid)handler.guid=jQuery.guid++;if(!(events=elemData.events))events=elemData.events={};if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=(types||"").match(rnotwhite)||
[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type)continue;special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},
handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false)if(elem.addEventListener)elem.addEventListener(type,eventHandle,false);else if(elem.attachEvent)elem.attachEvent("on"+type,eventHandle)}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid)handleObj.handler.guid=handler.guid}if(selector)handlers.splice(handlers.delegateCount++,0,handleObj);else handlers.push(handleObj);
jQuery.event.global[type]=true}elem=null},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events))return;types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events)jQuery.event.remove(elem,type+
types[t],handler,selector,true);continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,
1);if(handleObj.selector)handlers.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery._removeData(elem,"events")}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],
type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8)return;if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:
3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target)event.target=elem;data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false)return;if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+
type))cur=cur.parentNode;for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document))eventPath.push(tmp.defaultView||tmp.parentWindow||window)}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle)handle.apply(cur,data);handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,
data);if(event.result===false)event.preventDefault()}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented())if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem))if(ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp)elem[ontype]=null;jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=undefined;if(tmp)elem[ontype]=tmp}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,
handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false)return;handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped())if(!event.rnamespace||
event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined)if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}if(special.postDispatch)special.postDispatch.call(this,event);return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=
event.target;if(delegateCount&&cur.nodeType&&(event.type!=="click"||isNaN(event.button)||event.button<1))for(;cur!=this;cur=cur.parentNode||this)if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined)matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length;if(matches[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,
handlers:matches})}if(delegateCount<handlers.length)handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});return handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook)this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{};copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=
copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target)event.target=originalEvent.srcElement||document;if(event.target.nodeType===3)event.target=event.target.parentNode;event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),
filter:function(event,original){if(event.which==null)event.which=original.charCode!=null?original.charCode:original.keyCode;return event}},mouseHooks:{props:("button buttons clientX clientY fromElement offsetX offsetY "+"pageX pageY screenX screenY toElement").split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;
body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.relatedTarget&&fromElement)event.relatedTarget=fromElement===event.target?original.toElement:fromElement;if(!event.which&&button!==undefined)event.which=button&1?1:button&2?3:button&4?2:0;return event}},special:{load:{noBubble:true},
focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{this.focus();return false}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&this.type==="checkbox"&&this.click){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==
undefined&&event.originalEvent)event.originalEvent.returnValue=event.result}}},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem);if(e.isDefaultPrevented())event.preventDefault()}};jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle)}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]===
"undefined")elem[name]=null;elem.detachEvent(name,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else this.type=src;if(props)jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype=
{constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(!e)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(!e||this.isSimulated)return;if(e.stopPropagation)e.stopPropagation();e.cancelBubble=true},stopImmediatePropagation:function(){var e=
this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&e.stopImmediatePropagation)e.stopImmediatePropagation();this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=
handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!support.submit)jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?jQuery.prop(elem,"form"):undefined;if(form&&!jQuery._data(form,"submit")){jQuery.event.add(form,"submit._submit",function(event){event._submitBubble=
true});jQuery._data(form,"submit",true)}})},postDispatch:function(event){if(event._submitBubble){delete event._submitBubble;if(this.parentNode&&!event.isTrigger)jQuery.event.simulate("submit",this.parentNode,event)}},teardown:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.remove(this,"._submit")}};if(!support.change)jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",
function(event){if(event.originalEvent.propertyName==="checked")this._justChanged=true});jQuery.event.add(this,"click._change",function(event){if(this._justChanged&&!event.isTrigger)this._justChanged=false;jQuery.event.simulate("change",this,event)})}return false}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!jQuery._data(elem,"change")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&
!event.isTrigger)jQuery.event.simulate("change",this.parentNode,event)});jQuery._data(elem,"change",true)}})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox")return event.handleObj.handler.apply(this,arguments)},teardown:function(){jQuery.event.remove(this,"._change");return!rformElems.test(this.nodeName)}};if(!support.focusin)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,
event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);if(!attaches)doc.addEventListener(orig,handler,true);jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);jQuery._removeData(doc,fix)}else jQuery._data(doc,fix,attaches)}}});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,
types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types)this.off(type,selector,types[type]);return this}if(selector===
false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,true)}});var rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("\x3c(?:"+nodeNames+")[\\s/\x3e]","i"),rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):
elem}function disableScript(elem){elem.type=(jQuery.find.attr(elem,"type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match)elem.type=match[1];else elem.removeAttribute("type");return elem}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src))return;var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events)for(i=
0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}if(curData.data)curData.data=jQuery.extend({},curData.data)}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(dest.nodeType!==1)return;nodeName=dest.nodeName.toLowerCase();if(!support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}if(nodeName==="script"&&dest.text!==src.text){disableScript(dest).text=src.text;
restoreScript(dest)}else if(nodeName==="object"){if(dest.parentNode)dest.outerHTML=src.outerHTML;if(support.html5Clone&&(src.innerHTML&&!jQuery.trim(dest.innerHTML)))dest.innerHTML=src.innerHTML}else if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value)dest.value=src.value}else if(nodeName==="option")dest.defaultSelected=dest.selected=src.defaultSelected;else if(nodeName==="input"||nodeName==="textarea")dest.defaultValue=src.defaultValue}
function domManip(collection,args,callback,ignored){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))return collection.each(function(index){var self=collection.eq(index);if(isFunction)args[0]=value.call(this,index,self.html());domManip(self,args,callback,ignored)});if(l){fragment=buildFragment(args,collection[0].ownerDocument,
false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1)fragment=first;if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts)jQuery.merge(scripts,getAll(node,"script"))}callback.call(collection[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=
scripts[i];if(rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node))if(node.src){if(jQuery._evalUrl)jQuery._evalUrl(node.src)}else jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,""))}}fragment=first=null}}return collection}function remove(elem,selector,keepData){var node,elems=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=elems[i])!=null;i++){if(!keepData&&node.nodeType===1)jQuery.cleanData(getAll(node));
if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node))setGlobalEval(getAll(node,"script"));node.parentNode.removeChild(node)}}return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"\x3c$1\x3e\x3c/$2\x3e")},clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("\x3c"+elem.nodeName+"\x3e"))clone=
elem.cloneNode(true);else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild)}if((!support.noCloneEvent||!support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0;(node=srcElements[i])!=null;++i)if(destElements[i])fixCloneNodeIssues(node,destElements[i])}if(dataAndEvents)if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);
for(i=0;(node=srcElements[i])!=null;i++)cloneCopyEvent(node,destElements[i])}else cloneCopyEvent(elem,clone);destElements=getAll(clone,"script");if(destElements.length>0)setGlobalEval(destElements,!inPage&&getAll(elem,"script"));destElements=srcElements=node=null;return clone},cleanData:function(elems,forceAcceptData){var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,attributes=support.attributes,special=jQuery.event.special;for(;(elem=elems[i])!=null;i++)if(forceAcceptData||
acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events)for(type in data.events)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(cache[id]){delete cache[id];if(!attributes&&typeof elem.removeAttribute!=="undefined")elem.removeAttribute(internalKey);else elem[internalKey]=undefined;deletedIds.push(id)}}}}});jQuery.fn.extend({domManip:domManip,detach:function(selector){return remove(this,selector,true)},remove:function(selector){return remove(this,
selector)},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===
1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this)})},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this.nextSibling)})},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1)jQuery.cleanData(getAll(elem,
false));while(elem.firstChild)elem.removeChild(elem.firstChild);if(elem.options&&jQuery.nodeName(elem,"select"))elem.options.length=0}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;
if(value===undefined)return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):undefined;if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem)this.empty().append(value)},
null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent)parent.replaceChild(elem,this)}},ignored)}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-
1;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={HTML:"block",BODY:"block"};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display===
"none"||!display){iframe=(iframe||jQuery("\x3ciframe frameborder\x3d'0' width\x3d'0' height\x3d'0'/\x3e")).appendTo(doc.documentElement);doc=(iframe[0].contentWindow||iframe[0].contentDocument).document;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=
elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var documentElement=document.documentElement;(function(){var pixelPositionVal,pixelMarginRightVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style)return;div.style.cssText="float:left;opacity:.5";support.opacity=div.style.opacity===
"0.5";support.cssFloat=!!div.style.cssFloat;div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container=document.createElement("div");container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";div.innerHTML="";container.appendChild(div);support.boxSizing=div.style.boxSizing===""||div.style.MozBoxSizing===""||div.style.WebkitBoxSizing==="";jQuery.extend(support,
{reliableHiddenOffsets:function(){if(pixelPositionVal==null)computeStyleTests();return reliableHiddenOffsetsVal},boxSizingReliable:function(){if(pixelPositionVal==null)computeStyleTests();return boxSizingReliableVal},pixelMarginRight:function(){if(pixelPositionVal==null)computeStyleTests();return pixelMarginRightVal},pixelPosition:function(){if(pixelPositionVal==null)computeStyleTests();return pixelPositionVal},reliableMarginRight:function(){if(pixelPositionVal==null)computeStyleTests();return reliableMarginRightVal},
reliableMarginLeft:function(){if(pixelPositionVal==null)computeStyleTests();return reliableMarginLeftVal}});function computeStyleTests(){var contents,divStyle,documentElement=document.documentElement;documentElement.appendChild(container);div.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";pixelPositionVal=boxSizingReliableVal=reliableMarginLeftVal=false;pixelMarginRightVal=reliableMarginRightVal=
true;if(window.getComputedStyle){divStyle=window.getComputedStyle(div);pixelPositionVal=(divStyle||{}).top!=="1%";reliableMarginLeftVal=(divStyle||{}).marginLeft==="2px";boxSizingReliableVal=(divStyle||{width:"4px"}).width==="4px";div.style.marginRight="50%";pixelMarginRightVal=(divStyle||{marginRight:"4px"}).marginRight==="4px";contents=div.appendChild(document.createElement("div"));contents.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
contents.style.marginRight=contents.style.width="0";div.style.width="1px";reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents)||{}).marginRight);div.removeChild(contents)}div.style.display="none";reliableHiddenOffsetsVal=div.getClientRects().length===0;if(reliableHiddenOffsetsVal){div.style.display="";div.innerHTML="\x3ctable\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3et\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";div.childNodes[0].style.borderCollapse="separate";contents=div.getElementsByTagName("td");
contents[0].style.cssText="margin:0;border:0;padding:0;display:none";reliableHiddenOffsetsVal=contents[0].offsetHeight===0;if(reliableHiddenOffsetsVal){contents[0].style.display="";contents[1].style.display="none";reliableHiddenOffsetsVal=contents[0].offsetHeight===0}}documentElement.removeChild(container)}})();var getStyles,curCSS,rposition=/^(top|right|bottom|left)$/;if(window.getComputedStyle){getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener)view=window;return view.getComputedStyle(elem)};
curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed.getPropertyValue(name)||computed[name]:undefined;if((ret===""||ret===undefined)&&!jQuery.contains(elem.ownerDocument,elem))ret=jQuery.style(elem,name);if(computed)if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;
style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}return ret===undefined?ret:ret+""}}else if(documentElement.currentStyle){getStyles=function(elem){return elem.currentStyle};curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed[name]:undefined;if(ret==null&&style&&style[name])ret=style[name];if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rs=elem.runtimeStyle;rsLeft=rs&&rs.left;if(rsLeft)rs.left=
elem.currentStyle.left;style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft)rs.left=rsLeft}return ret===undefined?ret:ret+""||"auto"}}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/i,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),cssShow={position:"absolute",
visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle)return name;var capName=name.charAt(0).toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle)return name}}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<
length;index++){elem=elements[index];if(!elem.style)continue;values[index]=jQuery._data(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none")elem.style.display="";if(elem.style.display===""&&isHidden(elem))values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName))}else{hidden=isHidden(elem);if(display&&display!=="none"||!hidden)jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}for(index=0;index<length;index++){elem=elements[index];
if(!elem.style)continue;if(!show||elem.style.display==="none"||elem.style.display==="")elem.style.display=show?values[index]||"":"none"}return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin")val+=jQuery.css(elem,
extra+cssExpand[i],true,styles);if(isBorderBox){if(extra==="content")val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="margin")val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding")val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),
isBorderBox=support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null)val=elem.style[name];if(rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=
curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{"animationIterationCount":true,"columnCount":true,"fillOpacity":true,"flexGrow":true,"flexShrink":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style)return;var ret,type,hooks,origName=jQuery.camelCase(name),
style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number"}if(value==null||value!==value)return;if(type==="number")value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px");if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0)style[name]=
"inherit";if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined)try{style[name]=value}catch(e){}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined)return ret;return style[name]}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks)val=hooks.get(elem,
true,extra);if(val===undefined)val=curCSS(elem,name,styles);if(val==="normal"&&name in cssNormalTransform)val=cssNormalTransform[name];if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):
getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});if(!support.opacity)jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,
value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity\x3d"+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if((value>=1||value==="")&&jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(value===""||currentStyle&&!currentStyle.filter)return}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}};jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,
function(elem,computed){if(computed)return swap(elem,{"display":"inline-block"},curCSS,[elem,"marginRight"])});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed)return(parseFloat(curCSS(elem,"marginLeft"))||(jQuery.contains(elem.ownerDocument,elem)?elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}):0))+"px"});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+
suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}};if(!rmargin.test(prefix))jQuery.cssHooks[prefix+suffix].set=setPositiveNumber});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++)map[name[i]]=jQuery.css(elem,
name[i],false,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean")return state?this.show():this.hide();return this.each(function(){if(isHidden(this))jQuery(this).show();else jQuery(this).hide()})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,
end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration)this.pos=
eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);else this.pos=eased=percent;this.now=(this.end-this.start)*eased+this.start;if(this.options.step)this.options.step.call(this.elem,this.now,this);if(hooks&&hooks.set)hooks.set(this);else Tween.propHooks._default.set(this);return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==
null)return tween.elem[tween.prop];result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop])jQuery.fx.step[tween.prop](tween);else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop]))jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);else tween.elem[tween.prop]=tween.now}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&
tween.elem.parentNode)tween.elem[tween.prop]=tween.now}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function createFxNow(){window.setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=
cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth)attrs.opacity=attrs.width=type;return attrs}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=
elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued)oldfire()}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length)hooks.empty.fire()})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,
style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none")if(!support.inlineBlockNeedsLayout||defaultDisplay(elem.nodeName)==="inline")style.display="inline-block";else style.zoom=1}if(opts.overflow){style.overflow="hidden";if(!support.shrinkWrapBlocks())anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=
opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show"))if(value==="show"&&dataShow&&dataShow[prop]!==undefined)hidden=true;else continue;orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=undefined}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow)hidden=dataShow.hidden}else dataShow=jQuery._data(elem,"fxshow",{});if(toggle)dataShow.hidden=!hidden;
if(hidden)jQuery(elem).show();else anim.done(function(){jQuery(elem).hide()});anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}else if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline")style.display=display}function propFilter(props,
specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value)if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}else specialEasing[name]=easing}}function Animation(elem,
properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return false;var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++)animation.tweens[index].run(percent);deferred.notifyWith(elem,[animation,percent,remaining]);
if(percent<1&&length)return remaining;else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);
animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;stopped=true;for(;index<length;index++)animation.tweens[index].run(1);if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);deferred.resolveWith(elem,[animation,gotoEnd])}else deferred.rejectWith(elem,[animation,gotoEnd]);return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,
elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop))jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result);return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start))animation.opts.start.call(elem,animation);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}
jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else props=props.match(rnotwhite);var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback)}},prefilters:[defaultPrefilter],
prefilter:function(callback,prepend){if(prepend)Animation.prefilters.unshift(callback);else Animation.prefilters.push(callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:
jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true)opt.queue="fx";opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,opt.queue)};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,
easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||jQuery._data(this,"finish"))anim.stop(true)};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false)this.queue(type||
"fx",[]);return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop)stopQueue(data[index])}else for(index in data)if(data[index]&&data[index].stop&&rrun.test(index))stopQueue(data[index]);for(index=timers.length;index--;)if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}if(dequeue||!gotoEnd)jQuery.dequeue(this,
type)})},finish:function(type){if(type!==false)type=type||"fx";return this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop)hooks.stop.call(this,true);for(index=timers.length;index--;)if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}for(index=0;index<length;index++)if(queue[index]&&
queue[index].finish)queue[index].finish.call(this);delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,
props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer)timers.splice(i--,1)}if(!timers.length)jQuery.fx.stop();fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer())jQuery.fx.start();else jQuery.timers.pop()};jQuery.fx.interval=13;jQuery.fx.start=
function(){if(!timerId)timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval)};jQuery.fx.stop=function(){window.clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})};(function(){var a,input=document.createElement("input"),
div=document.createElement("div"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  \x3clink/\x3e\x3ctable\x3e\x3c/table\x3e\x3ca href\x3d'/a'\x3ea\x3c/a\x3e\x3cinput type\x3d'checkbox'/\x3e";a=div.getElementsByTagName("a")[0];input.setAttribute("type","checkbox");div.appendChild(input);a=div.getElementsByTagName("a")[0];a.style.cssText="top:1px";support.getSetAttribute=
div.className!=="t";support.style=/top/.test(a.getAttribute("style"));support.hrefNormalized=a.getAttribute("href")==="/a";support.checkOn=!!input.value;support.optSelected=opt.selected;support.enctype=!!document.createElement("form").enctype;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.setAttribute("value","");support.input=input.getAttribute("value")==="";input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t"})();
var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1)return;
if(isFunction)val=value.call(this,i,jQuery(this).val());else val=value;if(val==null)val="";else if(typeof val==="number")val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return value==null?"":value+""});hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined)this.value=val})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?
val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ")}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();
if(one)return value;values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1)try{option.selected=optionSet=true}catch(_){option.scrollHeight}else option.selected=false}if(!optionSet)elem.selectedIndex=-1;return options}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=
jQuery.inArray(jQuery(elem).val(),value)>-1}};if(!support.checkOn)jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}});var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,
name)})}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2)return;if(typeof elem.getAttribute==="undefined")return jQuery.prop(elem,name,value);if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return}if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;
elem.setAttribute(name,value+"");return value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null)return ret;ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val)elem.value=val;return value}}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===
1)while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name))if(getSetInput&&getSetAttribute||!ruseDefault.test(name))elem[propName]=false;else elem[jQuery.camelCase("default-"+name)]=elem[propName]=false;else jQuery.attr(elem,name,"");elem.removeAttribute(getSetAttribute?name:propName)}}});boolHook={set:function(elem,value,name){if(value===false)jQuery.removeAttr(elem,name);else if(getSetInput&&getSetAttribute||!ruseDefault.test(name))elem.setAttribute(!getSetAttribute&&
jQuery.propFix[name]||name,name);else elem[jQuery.camelCase("default-"+name)]=elem[name]=true;return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;if(getSetInput&&getSetAttribute||!ruseDefault.test(name))attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret};else attrHandle[name]=
function(elem,name,isXML){if(!isXML)return elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}});if(!getSetInput||!getSetAttribute)jQuery.attrHooks.value={set:function(elem,value,name){if(jQuery.nodeName(elem,"input"))elem.defaultValue=value;else return nodeHook&&nodeHook.set(elem,value,name)}};if(!getSetAttribute){nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret)elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name));ret.value=value+="";
if(name==="value"||value===elem.getAttribute(name))return value}};attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;if(!isXML)return(ret=elem.getAttributeNode(name))&&ret.value!==""?ret.value:null};jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);if(ret&&ret.specified)return ret.value},set:nodeHook.set};jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,value===""?false:value,name)}};jQuery.each(["width",
"height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}}})}if(!support.style)jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||undefined},set:function(elem,value){return elem.style.cssText=value+""}};var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){name=
jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2)return;if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;return elem[name]=value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,
name))!==null)return ret;return elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});if(!support.hrefNormalized)jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}});if(!support.optSelected)jQuery.propHooks.selected={get:function(elem){var parent=
elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode)parent.parentNode.selectedIndex}return null},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode)parent.parentNode.selectedIndex}}};jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});if(!support.enctype)jQuery.propFix.enctype="encoding";var rclass=
/[\t\r\n\f]/g;function getClass(elem){return jQuery.attr(elem,"class")||""}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))});if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while(clazz=classes[j++])if(cur.indexOf(" "+
clazz+" ")<0)cur+=clazz+" ";finalValue=jQuery.trim(cur);if(curValue!==finalValue)jQuery.attr(elem,"class",finalValue)}}}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))});if(!arguments.length)return this.attr("class","");if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=
elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while(clazz=classes[j++])while(cur.indexOf(" "+clazz+" ")>-1)cur=cur.replace(" "+clazz+" "," ");finalValue=jQuery.trim(cur);if(curValue!==finalValue)jQuery.attr(elem,"class",finalValue)}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string")return stateVal?this.addClass(value):this.removeClass(value);if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,
i,getClass(this),stateVal),stateVal)});return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnotwhite)||[];while(className=classNames[i++])if(self.hasClass(className))self.removeClass(className);else self.addClass(className)}else if(value===undefined||type==="boolean"){className=getClass(this);if(className)jQuery._data(this,"__className__",className);jQuery.attr(this,"class",className||value===false?"":jQuery._data(this,"__className__")||
"")}})},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while(elem=this[i++])if(elem.nodeType===1&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1)return true;return false}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,
fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});var location=window.location;var nonce=jQuery.now();var rquery=/\?/;var rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");
var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,function(token,comma,open,close){if(requireNonComma&&comma)depth=0;if(depth===0)return token;requireNonComma=open||comma;depth+=!close-!open;return""}))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)};jQuery.parseXML=function(data){var xml,tmp;if(!data||typeof data!=="string")return null;try{if(window.DOMParser){tmp=new window.DOMParser;xml=tmp.parseFromString(data,"text/xml")}else{xml=
new window.ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length)jQuery.error("Invalid XML: "+data);return xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters=
{},transports={},allTypes="*/".concat("*"),ajaxLocation=location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))while(dataType=dataTypes[i++])if(dataType.charAt(0)==="+"){dataType=dataType.slice(1)||"*";
(structure[dataType]=structure[dataType]||[]).unshift(func)}else(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&
!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport)return!(selected=dataTypeOrTransport)});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)if(src[key]!==undefined)(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(true,
target,deep);return target}function ajaxHandleResponses(s,jqXHR,responses){var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined)ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=
type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];current=dataTypes.shift();while(current){if(s.responseFields[current])jqXHR[s.responseFields[current]]=
response;if(!prev&&isSuccess&&s.dataFilter)response=s.dataFilter(response,s.dataType);prev=current;current=dataTypes.shift();if(current)if(current==="*")current=prev;else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv)for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true)conv=converters[conv2];else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}if(conv!==
true)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",
xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),
ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),
statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString))responseHeaders[match[1].toLowerCase()]=match[2]}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=
name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport)transport.abort(finalText);done(0,finalText);return this}};
deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?
"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))}if(s.data&&s.processData&&typeof s.data!=="string")s.data=jQuery.param(s.data,s.traditional);inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2)return jqXHR;fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0)jQuery.event.trigger("ajaxStart");s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?
"\x26":"?")+s.data;delete s.data}if(s.cache===false)s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_\x3d"+nonce++):cacheURL+(rquery.test(cacheURL)?"\x26":"?")+"_\x3d"+nonce++}if(s.ifModified){if(jQuery.lastModified[cacheURL])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);if(jQuery.etag[cacheURL])jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q\x3d0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport)done(-1,"No Transport");
else{jqXHR.readyState=1;if(fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(state===2)return jqXHR;if(s.async&&s.timeout>0)timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2)done(-1,e);else throw e;}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2)return;state=2;if(timeoutTimer)window.clearTimeout(timeoutTimer);
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses)response=ajaxHandleResponses(s,jqXHR,responses);response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified)jQuery.lastModified[cacheURL]=modified;modified=jqXHR.getResponseHeader("etag");if(modified)jQuery.etag[cacheURL]=modified}if(status===204||s.type==="HEAD")statusText=
"nocontent";else if(status===304)statusText="notmodified";else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0)status=0}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess)deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);jqXHR.statusCode(statusCode);statusCode=undefined;
if(fireGlobals)globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active)jQuery.event.trigger("ajaxStop")}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],
function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",cache:true,async:false,global:false,"throws":true})};jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,
i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);
else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()}});function getDisplay(elem){return elem.style&&elem.style.display||jQuery.css(elem,"display")}function filterHidden(elem){if(!jQuery.contains(elem.ownerDocument||document,elem))return true;
while(elem&&elem.nodeType===1){if(getDisplay(elem)==="none"||elem.type==="hidden")return true;elem=elem.parentNode}return false}jQuery.expr.filters.hidden=function(elem){return support.reliableHiddenOffsets()?elem.offsetWidth<=0&&elem.offsetHeight<=0&&!elem.getClientRects().length:filterHidden(elem)};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=
/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,v);else buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add)});else if(!traditional&&jQuery.type(obj)==="object")for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,
value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"\x3d"+encodeURIComponent(value)};if(traditional===undefined)traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("\x26").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,
"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=window.ActiveXObject!==undefined?function(){if(this.isLocal)return createActiveXHR();if(document.documentMode>8)return createStandardXHR();return/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||createActiveXHR()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();if(window.attachEvent)window.attachEvent("onunload",function(){for(var key in xhrCallbacks)xhrCallbacks[key](undefined,
true)});support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;xhrSupported=support.ajax=!!xhrSupported;if(xhrSupported)jQuery.ajaxTransport(function(options){if(!options.crossDomain||support.cors){var callback;return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];if(options.mimeType&&xhr.overrideMimeType)xhr.overrideMimeType(options.mimeType);
if(!options.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";for(i in headers)if(headers[i]!==undefined)xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null);callback=function(_,isAbort){var status,statusText,responses;if(callback&&(isAbort||xhr.readyState===4)){delete xhrCallbacks[id];callback=undefined;xhr.onreadystatechange=jQuery.noop;if(isAbort){if(xhr.readyState!==4)xhr.abort()}else{responses={};status=xhr.status;if(typeof xhr.responseText===
"string")responses.text=xhr.responseText;try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&options.isLocal&&!options.crossDomain)status=responses.text?200:404;else if(status===1223)status=204}}if(responses)complete(status,statusText,responses,xhr.getAllResponseHeaders())};if(!options.async)callback();else if(xhr.readyState===4)window.setTimeout(callback);else xhr.onreadystatechange=xhrCallbacks[id]=callback},abort:function(){if(callback)callback(undefined,true)}}}});function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}
function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined)s.cache=false;if(s.crossDomain){s.type="GET";s.global=false}});jQuery.ajaxTransport("script",
function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async=true;if(s.scriptCharset)script.charset=s.scriptCharset;script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(script.parentNode)script.parentNode.removeChild(script);
script=null;if(!isAbort)callback(200,"success")}};head.insertBefore(script,head.firstChild)},abort:function(){if(script)script.onload(undefined,true)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&
(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp)s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);else if(s.jsonp!==false)s.url+=(rquery.test(s.url)?"\x26":"?")+s.jsonp+"\x3d"+callbackName;s.converters["script json"]=function(){if(!responseContainer)jQuery.error(callbackName+
" was not called");return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){if(overwritten===undefined)jQuery(window).removeProp(callbackName);else window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten))overwritten(responseContainer[0]);responseContainer=overwritten=
undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string")return null;if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed)return[context.createElement(parsed[1])];parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length)jQuery(scripts).remove();return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=
function(url,params,callback){if(typeof url!=="string"&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=jQuery.trim(url.slice(off,url.length));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object")type="POST";if(self.length>0)jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?
jQuery("\x3cdiv\x3e").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})});return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===
fn.elem}).length};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static")elem.style.position="relative";curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=
(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options))options=options.call(elem,i,jQuery.extend({},curOffset));if(options.top!=null)props.top=options.top-curOffset.top+curTop;if(options.left!=null)props.left=options.left-curOffset.left+curLeft;if("using"in options)options.using.call(elem,
props);else curElem.css(props)}};jQuery.fn.extend({offset:function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(!doc)return;docElem=doc.documentElement;if(!jQuery.contains(docElem,elem))return box;if(typeof elem.getBoundingClientRect!=="undefined")box=elem.getBoundingClientRect();win=getWindow(doc);return{top:box.top+(win.pageYOffset||docElem.scrollTop)-
(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}},position:function(){if(!this[0])return;var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];if(jQuery.css(elem,"position")==="fixed")offset=elem.getBoundingClientRect();else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html"))parentOffset=offsetParent.offset();parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=
jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static"))offsetParent=offsetParent.offsetParent;return offsetParent||documentElement})}});jQuery.each({scrollLeft:"pageXOffset",
scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];if(win)win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());else elem[method]=val},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,
function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,
function(elem,type,value){var doc;if(jQuery.isWindow(elem))return elem.document.documentElement["client"+name];if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,
fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd)define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===
jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery};if(!noGlobal)window.jQuery=window.$=jQuery;return jQuery});
window.Swedbank=function(){return{country:null,language:null,PageConfig:{},toggleLoader(flag){document.documentElement.classList.toggle("-loading",flag)},isUiSpaEnabled:window.localStorage&&window.localStorage.getItem("ui-spa-debug")||false,sym(description){return Object.getOwnPropertySymbols(this).find(s=>s.description===description)}}}();
Swedbank.log=function(){if(!Swedbank.isProduction)console.log.apply(console,arguments)};Swedbank.info=function(){if(!Swedbank.isProduction)console.info.apply(console,arguments)};Swedbank.warn=function(){if(!Swedbank.isProduction)console.warn.apply(console,arguments)};Swedbank.error=function(){if(!Swedbank.isProduction)console.error.apply(console,arguments)};
(function(originalJQ){var wrappedJQ=function(selector,context){if(typeof selector==="function")Swedbank.PageLoad.onEach(selector);else if(selector===document||selector===undefined)return replaceFunction("ready");else if(selector===window)return replaceFunction("load");else return new originalJQ.fn.init(selector,context);function replaceFunction(name){var jQ=new originalJQ.fn.init(selector,context);jQ[name]=Swedbank.PageLoad.onEach;return jQ}};wrappedJQ.fn=wrappedJQ.prototype=originalJQ.fn;jQuery.extend(wrappedJQ,
originalJQ);window.jQuery=wrappedJQ;function Callbacks(){this.callbacks=[];this.remember=function(callback,toKeep){this.callbacks.push(new Entry(callback,toKeep))};this.rememberOrExecute=function(callback,toKeep){if(PL.pageLoadingInProgress)this.remember(callback,toKeep);else callback(wrappedJQ)};this.execute=function(){for(var i=0;i<this.callbacks.length;i++)this.callbacks[i].exec()};this.keepOnlyGlobal=function(){this.callbacks=this.callbacks.filter(function(e){return e.toKeep})};function Entry(callback,
toKeep){this.callback=callback;this.toKeep=toKeep;var entry=this;this.exec=function(){try{entry.callback.call(null,wrappedJQ)}catch(e){console.error(e)}}}}var _handlers=[];function detectLeakedHandlers(){if(!_handlers.length){_handlers=getHandlers();Swedbank.log("Initial handlers count: ",_handlers.length)}else{var newHandlers=getHandlers();if(_handlers.length!==newHandlers.length){var addedHandlers=[];var removedHandlers=[];newHandlers.forEach(function(e){if(_handlers.indexOf(e)===-1)addedHandlers.push(e)});
_handlers.forEach(function(e){if(newHandlers.indexOf(e)===-1)removedHandlers.push(e)});_handlers=newHandlers;sendLog(addedHandlers,removedHandlers)}}function getHandlers(){var handlers=[];wrappedJQ.each([window,document,"html","body"],function(i,target){wrappedJQ.each(wrappedJQ(target).data("events"),function(k,v){handlers.push.apply(handlers,v)})});return handlers}function sendLog(newHandlers,removedHandlers){var data={pageId:Swedbank.Navigation.pageId};var addedOnes=mapAndRememberHandlers(newHandlers,
"leak_");var removedOnes=mapAndRememberHandlers(removedHandlers,"REMOVED_");if(addedOnes.length){Swedbank.log(Swedbank.Navigation.pageId,addedOnes.length," new handler(s) added");Swedbank.log("New handler(s): ",newHandlers.map(function(e){return e.handler}),addedOnes)}if(removedOnes.length){Swedbank.log(Swedbank.Navigation.pageId,removedOnes.length," handler(s) removed");Swedbank.log("Removed handler(s): ",removedHandlers.map(function(e){return e.handler}),removedOnes)}wrappedJQ.ajax({type:"POST",
url:"/spaLog",data:data});function mapAndRememberHandlers(handlers,prefix){var i=0;var result=handlers.map(function(e){return e.handler.toString()});result.forEach(function(e){data[prefix+i++]=e});return result}}}var PL=Swedbank.PageLoad={callbacks:new Callbacks,cleanupCallbacks:new Callbacks,useGlobal:true,pageLoadingInProgress:true,onEach:function(callback){PL.callbacks.rememberOrExecute(callback,PL.useGlobal)},onFirst:function(callback){PL.callbacks.rememberOrExecute(callback,false)},onUnload:function(callback){PL.cleanupCallbacks.remember(callback,
PL.useGlobal)},onEachUnload:function(callback){PL.cleanupCallbacks.remember(callback,true)},setGlobalScriptsRegistered:function(){PL.useGlobal=false},pageLoaded:function(){PL.callbacks.execute();PL.pageLoadingInProgress=false},prepareForPageLoad:function(){PL.pageLoadingInProgress=true;PL.cleanupCallbacks.execute();PL.cleanupCallbacks.keepOnlyGlobal();PL.callbacks.keepOnlyGlobal();detectLeakedHandlers()}};wrappedJQ.fn.untilUnload=function(){var self=this;var args=arguments;self.on.apply(self,args);
Swedbank.PageLoad.onUnload(function(){self.off.apply(self,args)});return self};originalJQ(PL.pageLoaded)})(jQuery);
/*
 jQuery Migrate - v1.4.1 - 2016-05-19
 Copyright jQuery Foundation and other contributors
*/
(function(jQuery,window,undefined){jQuery.migrateVersion="1.4.1";var warnedAbout={};jQuery.migrateWarnings=[];if(window.console&&window.console.log)window.console.log("JQMIGRATE: Migrate is installed"+(jQuery.migrateMute?"":" with logging active")+", version "+jQuery.migrateVersion);if(jQuery.migrateTrace===undefined)jQuery.migrateTrace=true;jQuery.migrateReset=function(){warnedAbout={};jQuery.migrateWarnings.length=0};function migrateWarn(msg){var console=window.console;if(!warnedAbout[msg]){warnedAbout[msg]=
true;jQuery.migrateWarnings.push(msg);if(console&&console.warn&&!jQuery.migrateMute){console.warn("JQMIGRATE: "+msg);if(jQuery.migrateTrace&&console.trace)console.trace()}}}function migrateWarnProp(obj,prop,value,msg){if(Object.defineProperty)try{Object.defineProperty(obj,prop,{configurable:true,enumerable:true,get:function(){migrateWarn(msg);return value},set:function(newValue){migrateWarn(msg);value=newValue}});return}catch(err){}jQuery._definePropertyBroken=true;obj[prop]=value}if(document.compatMode===
"BackCompat")migrateWarn("jQuery is not compatible with Quirks Mode");var attrFn=jQuery("\x3cinput/\x3e",{size:1}).attr("size")&&jQuery.attrFn,oldAttr=jQuery.attr,valueAttrGet=jQuery.attrHooks.value&&jQuery.attrHooks.value.get||function(){return null},valueAttrSet=jQuery.attrHooks.value&&jQuery.attrHooks.value.set||function(){return undefined},rnoType=/^(?:input|button)$/i,rnoAttrNodeType=/^[238]$/,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
ruseDefault=/^(?:checked|selected)$/i;migrateWarnProp(jQuery,"attrFn",attrFn||{},"jQuery.attrFn is deprecated");jQuery.attr=function(elem,name,value,pass){var lowerName=name.toLowerCase(),nType=elem&&elem.nodeType;if(pass){if(oldAttr.length<4)migrateWarn("jQuery.fn.attr( props, pass ) is deprecated");if(elem&&!rnoAttrNodeType.test(nType)&&(attrFn?name in attrFn:jQuery.isFunction(jQuery.fn[name])))return jQuery(elem)[name](value)}if(name==="type"&&value!==undefined&&rnoType.test(elem.nodeName)&&elem.parentNode)migrateWarn("Can't change the 'type' of an input or button in IE 6/7/8");
if(!jQuery.attrHooks[lowerName]&&rboolean.test(lowerName)){jQuery.attrHooks[lowerName]={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false)jQuery.removeAttr(elem,name);else{propName=jQuery.propFix[name]||name;if(propName in elem)elem[propName]=true;elem.setAttribute(name,name.toLowerCase())}return name}};
if(ruseDefault.test(lowerName))migrateWarn("jQuery.fn.attr('"+lowerName+"') might use property instead of attribute")}return oldAttr.call(jQuery,elem,name,value)};jQuery.attrHooks.value={get:function(elem,name){var nodeName=(elem.nodeName||"").toLowerCase();if(nodeName==="button")return valueAttrGet.apply(this,arguments);if(nodeName!=="input"&&nodeName!=="option")migrateWarn("jQuery.fn.attr('value') no longer gets properties");return name in elem?elem.value:null},set:function(elem,value){var nodeName=
(elem.nodeName||"").toLowerCase();if(nodeName==="button")return valueAttrSet.apply(this,arguments);if(nodeName!=="input"&&nodeName!=="option")migrateWarn("jQuery.fn.attr('value', val) no longer sets properties");elem.value=value}};var matched,browser,oldInit=jQuery.fn.init,oldFind=jQuery.find,oldParseJSON=jQuery.parseJSON,rspaceAngle=/^\s*</,rattrHashTest=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,rattrHashGlob=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,rquickExpr=/^([^<]*)(<[\w\W]+>)([^>]*)$/;
jQuery.fn.init=function(selector,context,rootjQuery){var match,ret;if(selector&&typeof selector==="string")if(!jQuery.isPlainObject(context)&&(match=rquickExpr.exec(jQuery.trim(selector)))&&match[0]){if(!rspaceAngle.test(selector))migrateWarn("$(html) HTML strings must start with '\x3c' character");if(match[3])migrateWarn("$(html) HTML text after last tag is ignored");if(match[0].charAt(0)==="#"){migrateWarn("HTML string cannot start with a '#' character");jQuery.error("JQMIGRATE: Invalid selector string (XSS)")}if(context&&
context.context&&context.context.nodeType)context=context.context;if(jQuery.parseHTML)return oldInit.call(this,jQuery.parseHTML(match[2],context&&context.ownerDocument||context||document,true),context,rootjQuery)}ret=oldInit.apply(this,arguments);if(selector&&selector.selector!==undefined){ret.selector=selector.selector;ret.context=selector.context}else{ret.selector=typeof selector==="string"?selector:"";if(selector)ret.context=selector.nodeType?selector:context||document}return ret};jQuery.fn.init.prototype=
jQuery.fn;jQuery.find=function(selector){var args=Array.prototype.slice.call(arguments);if(typeof selector==="string"&&rattrHashTest.test(selector))try{document.querySelector(selector)}catch(err1){selector=selector.replace(rattrHashGlob,function(_,attr,op,value){return"["+attr+op+'"'+value+'"]'});try{document.querySelector(selector);migrateWarn("Attribute selector with '#' must be quoted: "+args[0]);args[0]=selector}catch(err2){migrateWarn("Attribute selector with '#' was not fixed: "+args[0])}}return oldFind.apply(this,
args)};var findProp;for(findProp in oldFind)if(Object.prototype.hasOwnProperty.call(oldFind,findProp))jQuery.find[findProp]=oldFind[findProp];jQuery.parseJSON=function(json){if(!json){migrateWarn("jQuery.parseJSON requires a valid JSON string");return null}return oldParseJSON.apply(this,arguments)};jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||
ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};if(!jQuery.browser){matched=jQuery.uaMatch(navigator.userAgent);browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome)browser.webkit=true;else if(browser.webkit)browser.safari=true;jQuery.browser=browser}jQuery.boxModel=jQuery.support.boxModel=document.compatMode==="CSS1Compat";migrateWarnProp(jQuery,"boxModel",jQuery.boxModel,
"jQuery.boxModel is deprecated");migrateWarnProp(jQuery.support,"boxModel",jQuery.support.boxModel,"jQuery.support.boxModel is deprecated");jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){var instance=jQuery.fn.init.call(this,selector,
context,rootjQuerySub);return instance instanceof jQuerySub?instance:jQuerySub(instance)};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);migrateWarn("jQuery.sub() is deprecated");return jQuerySub};jQuery.fn.size=function(){migrateWarn("jQuery.fn.size() is deprecated; use the .length property");return this.length};var internalSwapCall=false;if(jQuery.swap)jQuery.each(["height","width","reliableMarginRight"],function(_,name){var oldHook=jQuery.cssHooks[name]&&jQuery.cssHooks[name].get;
if(oldHook)jQuery.cssHooks[name].get=function(){var ret;internalSwapCall=true;ret=oldHook.apply(this,arguments);internalSwapCall=false;return ret}});jQuery.swap=function(elem,options,callback,args){var ret,name,old={};if(!internalSwapCall)migrateWarn("jQuery.swap() is undocumented and deprecated");for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};jQuery.ajaxSetup({converters:{"text json":jQuery.parseJSON}});
var oldFnData=jQuery.fn.data;jQuery.fn.data=function(name){var ret,evt,elem=this[0];if(elem&&name==="events"&&arguments.length===1){ret=jQuery.data(elem,name);evt=jQuery._data(elem,name);if((ret===undefined||ret===evt)&&evt!==undefined){migrateWarn("Use of jQuery.fn.data('events') is deprecated");return evt}}return oldFnData.apply(this,arguments)};var rscriptType=/\/(java|ecma)script/i;if(!jQuery.clean)jQuery.clean=function(elems,context,fragment,scripts){context=context||document;context=!context.nodeType&&
context[0]||context;context=context.ownerDocument||context;migrateWarn("jQuery.clean() is deprecated");var i,elem,handleScript,jsTags,ret=[];jQuery.merge(ret,jQuery.buildFragment(elems,context).childNodes);if(fragment){handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type))return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem)};for(i=0;(elem=ret[i])!=null;i++)if(!(jQuery.nodeName(elem,"script")&&handleScript(elem))){fragment.appendChild(elem);
if(typeof elem.getElementsByTagName!=="undefined"){jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript);ret.splice.apply(ret,[i+1,0].concat(jsTags));i+=jsTags.length}}}return ret};var eventAdd=jQuery.event.add,eventRemove=jQuery.event.remove,eventTrigger=jQuery.event.trigger,oldToggle=jQuery.fn.toggle,oldLive=jQuery.fn.live,oldDie=jQuery.fn.die,oldLoad=jQuery.fn.load,ajaxEvents="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",rajaxEvent=new RegExp("\\b(?:"+
ajaxEvents+")\\b"),rhoverHack=/(?:^|\s)hover(\.\S+|)\b/,hoverHack=function(events){if(typeof events!=="string"||jQuery.event.special.hover)return events;if(rhoverHack.test(events))migrateWarn("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'");return events&&events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};if(jQuery.event.props&&jQuery.event.props[0]!=="attrChange")jQuery.event.props.unshift("attrChange","attrName","relatedNode","srcElement");if(jQuery.event.dispatch)migrateWarnProp(jQuery.event,
"handle",jQuery.event.dispatch,"jQuery.event.handle is undocumented and deprecated");jQuery.event.add=function(elem,types,handler,data,selector){if(elem!==document&&rajaxEvent.test(types))migrateWarn("AJAX events should be attached to document: "+types);eventAdd.call(this,elem,hoverHack(types||""),handler,data,selector)};jQuery.event.remove=function(elem,types,handler,selector,mappedTypes){eventRemove.call(this,elem,hoverHack(types)||"",handler,selector,mappedTypes)};jQuery.each(["load","unload",
"error"],function(_,name){jQuery.fn[name]=function(){var args=Array.prototype.slice.call(arguments,0);if(name==="load"&&typeof args[0]==="string")return oldLoad.apply(this,args);migrateWarn("jQuery.fn."+name+"() is deprecated");args.splice(0,0,name);if(arguments.length)return this.bind.apply(this,args);this.triggerHandler.apply(this,args);return this}});jQuery.fn.toggle=function(fn,fn2){if(!jQuery.isFunction(fn)||!jQuery.isFunction(fn2))return oldToggle.apply(this,arguments);migrateWarn("jQuery.fn.toggle(handler, handler...) is deprecated");
var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false};toggler.guid=guid;while(i<args.length)args[i++].guid=guid;return this.click(toggler)};jQuery.fn.live=function(types,data,fn){migrateWarn("jQuery.fn.live() is deprecated");if(oldLive)return oldLive.apply(this,arguments);jQuery(this.context).on(types,
this.selector,data,fn);return this};jQuery.fn.die=function(types,fn){migrateWarn("jQuery.fn.die() is deprecated");if(oldDie)return oldDie.apply(this,arguments);jQuery(this.context).off(types,this.selector||"**",fn);return this};jQuery.event.trigger=function(event,data,elem,onlyHandlers){if(!elem&&!rajaxEvent.test(event))migrateWarn("Global events are undocumented and deprecated");return eventTrigger.call(this,event,data,elem||document,onlyHandlers)};jQuery.each(ajaxEvents.split("|"),function(_,name){jQuery.event.special[name]=
{setup:function(){var elem=this;if(elem!==document){jQuery.event.add(document,name+"."+jQuery.guid,function(){jQuery.event.trigger(name,Array.prototype.slice.call(arguments,1),elem,true)});jQuery._data(this,name,jQuery.guid++)}return false},teardown:function(){if(this!==document)jQuery.event.remove(document,name+"."+jQuery._data(this,name));return false}}});jQuery.event.special.ready={setup:function(){if(this===document)migrateWarn("'ready' event is deprecated")}};var oldSelf=jQuery.fn.andSelf||jQuery.fn.addBack,
oldFnFind=jQuery.fn.find;jQuery.fn.andSelf=function(){migrateWarn("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return oldSelf.apply(this,arguments)};jQuery.fn.find=function(selector){var ret=oldFnFind.apply(this,arguments);ret.context=this.context;ret.selector=this.selector?this.selector+" "+selector:selector;return ret};if(jQuery.Callbacks){var oldDeferred=jQuery.Deferred,tuples=[["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),"resolved"],["reject","fail",
jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory")]];jQuery.Deferred=function(func){var deferred=oldDeferred(),promise=deferred.promise();deferred.pipe=promise.pipe=function(){var fns=arguments;migrateWarn("deferred.pipe() is deprecated");return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=
fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);else newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})});fns=null}).promise()};deferred.isResolved=function(){migrateWarn("deferred.isResolved is deprecated");return deferred.state()==="resolved"};deferred.isRejected=function(){migrateWarn("deferred.isRejected is deprecated");return deferred.state()===
"rejected"};if(func)func.call(deferred,deferred);return deferred}}})(jQuery,window);
jQuery.noConflict();
(function($){$.fn.clear=function(){return this.val("")};$.convertQueryParamsToObject=function(string){var query=string||location.search;return query.replace(/(^\?)/,"").split("\x26").map(function(param){var key=param.split("\x3d")[0];var value=param.split("\x3d")[1];this[key]=value;return this}.bind({}))[0]};$.fn.enable=function(){return this.prop("disabled",false)};$.fn.disable=function(){return this.prop("disabled",true)};$.fn.getZIndex=function(){var zIndex=this.css("z-index");if(zIndex=="auto")this.parents().each(function(){if($.isNumeric($(this).css("z-index"))){zIndex=
$(this).css("z-index");return false}});if(zIndex=="auto")zIndex=0;return Number(zIndex)};$.renderList=function(listItems){var $list=$("\x3cul/\x3e");listItems.forEach(function(item){$list.appendAsListItem(item)});return $list};$.fn.scrollTo=function(duration,offsetAdjustment){duration=duration||"slow";offsetAdjustment=offsetAdjustment||-40;if(typeof this.offset()!=="undefined")$("html, body").animate({"scrollTop":this.offset().top+offsetAdjustment},duration)};var MAX_LENGTH_SUPPORTED_NATIVELY="maxLength"in
document.createElement("textarea");$.fn.characterCounter=function(maximumCharacters){this.filter("textarea:not(.cc-textarea)").each(function(){var $textarea=$(this).addClass("cc-textarea");if(typeof maximumCharacters=="number")$textarea.attr("maxlength",maximumCharacters);var maxLength=$textarea.attr("maxlength");if(!maxLength)return;var $counter=$('\x3cp class\x3d"cc-counter"/\x3e').insertAfter($textarea);function updateCharsLeft(){var value=$textarea.val();if(!MAX_LENGTH_SUPPORTED_NATIVELY&&value.length>
maxLength){value=value.substr(0,maxLength);$textarea.val(value)}var charsLeft=maxLength-value.length;var limitAlmostReached=charsLeft>0&&charsLeft<maxLength*.05;$counter.text(Swedbank.Labels("charactersRemaining",charsLeft)).toggleClass("cc-warning",limitAlmostReached).toggleClass("cc-limit-reached",charsLeft===0)}$textarea.on("keyup paste",function(){setTimeout(updateCharsLeft,0)});$textarea.trigger("keyup")});return this};function wrapAsListItem(element,attributes){var $element=element;if(!element instanceof
jQuery){if(!methodName.endsWith("To"))if(typeof element==="string"&&!element.trim().startsWith("\x3c"))element=document.createTextNode(element);$element=$(element)}$element=$("\x3cli\x3e",attributes).html($element);return $element}$.fn.appendAsListItem=function(element,attributes){return this.append(wrapAsListItem(element,attributes))};$.fn.prependAsListItem=function(element,attributes){return this.prepend(wrapAsListItem(element,attributes))};$.fn.appendAsListItemTo=function(target,attributes){return wrapAsListItem(this,
attributes).appendTo(target)};$.fn.prependAsListItemTo=function(target,attributes){return wrapAsListItem(this,attributes).prependTo(target)};$.fn.center=function(animate){var method=animate?"animate":"css";var $window=$(window),viewportWidth=$window.width(),viewportHeight=$window.innerHeight();return this.each(function(){var $element=$(this),remainingVerticalSpace=viewportHeight-$element.outerHeight(),remainingHorizontalSpace=viewportWidth-$element.outerWidth();$element[method]({"top":remainingVerticalSpace>=
20?remainingVerticalSpace/2:10,"left":remainingHorizontalSpace>=20?remainingHorizontalSpace/2:10,"right":remainingHorizontalSpace>=20?remainingHorizontalSpace/2:10,"bottom":remainingVerticalSpace>=20?"auto":10})})};$.fn.setDefault=function(eventName,selector,callback){callback=callback||selector;var func=function(event){event.preventDefault();callback.apply(this,arguments)};return typeof selector==="string"?this.on(eventName,selector,func):this.on(eventName,func)};$.fn.field=$.fn.findByName=function(fieldName){return this.find(':input[name\x3d"'+
fieldName+'"]')};$.fn.copyAttributesFrom=function(obj,attributes){if(typeof attributes==="string")attributes=attributes.split(" ");attributes.forEach(function(attributeName){var value=obj[attributeName];if(value)this.attr(attributeName,value)},this);return this};$.fn.parseAsJSON=function(){var params={};var $form=this;this.find(":input[name]").each(function(){var $field=$(this);if($field.is(":radio")){if(!(this.name in params))params[this.name]=$form.field(this.name).filter(":checked").val()}else params[this.name]=
$field.is(":checkbox")?this.checked===true:this.value});return params};$.fn.parseAsNonButtonJSON=function(){var params={};var $form=this;this.find(":input[name]").each(function(){var $field=$(this);if($field.is(":button"))return true;if($field.is(":radio")){if(!(this.name in params))params[this.name]=$form.field(this.name).filter(":checked").val()}else params[this.name]=$field.is(":checkbox")?this.checked===true:this.value});return params};$.fn.offsetInViewport=function(){var offset=this.offset();
offset.top-=$(window).scrollTop();return offset};$.fn.calculateTotalWidth=function(){var totalWidth=0;this.each(function(){totalWidth+=$(this).outerWidth()});return totalWidth};$.fn.exists=function(){return this.length>0};$.fn.isInside=function(parentSelector){return this.closest(parentSelector).length>0};$.fn.setReadOnly=function(){var $field=this;var value=$field.prop("type")=="select-one"?$field.children("option:selected").text():$field.val();var textElementId=$field.attr("id")+"Static";var $textElement=
$field.next("#"+textElementId);$field.hide();if($textElement.exists())$textElement.text(value);else $("\x3cspan\x3e",{id:textElementId,text:value}).insertAfter($field)};$.fn.unsetReadOnly=function(){var $field=this;var textElementId=$field.attr("id")+"Static";$field.show();$field.next("#"+textElementId).remove()};if(!$.fn.switchClass)$.fn.switchClass=function(oldClass,newClass){return this.each(function(){$(this).removeClass(oldClass).addClass(newClass)})}})(jQuery);
/*
 jQuery UI - v1.11.4 - 2016-12-05
 http://jqueryui.com
 Includes: core.js, widget.js, mouse.js, position.js, draggable.js, sortable.js, autocomplete.js, datepicker.js, menu.js, selectmenu.js, slider.js
 Copyright jQuery Foundation and other contributors; Licensed MIT  jQuery UI Core 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/category/ui-core/
 jQuery UI Widget 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/jQuery.widget/
 jQuery UI Mouse 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/mouse/
 jQuery UI Position 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
 jQuery UI Draggable 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/draggable/
 jQuery UI Sortable 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/sortable/
 jQuery UI Autocomplete 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/autocomplete/
 jQuery UI Datepicker 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/datepicker/
 jQuery UI Menu 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/menu/
 jQuery UI Selectmenu 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/selectmenu
 jQuery UI Slider 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/slider/
*/
(function(factory){if(typeof define==="function"&&define.amd)define(["jquery"],factory);else factory(jQuery)})(function($){$.ui=$.ui||{};$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:
/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static")return false;return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent},uniqueId:function(){var uuid=0;return function(){return this.each(function(){if(!this.id)this.id="ui-id-"+ ++uuid})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id))$(this).removeAttr("id")})}});
function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map")return false;img=$("img[usemap\x3d'#"+mapName+"']")[0];return!!img&&visible(img)}return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&
!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||
tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});if(!$("\x3ca\x3e").outerWidth(1).jquery)$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border)size-=parseFloat($.css(elem,"border"+this+"Width"))||
0;if(margin)size-=parseFloat($.css(elem,"margin"+this))||0});return size}$.fn["inner"+name]=function(size){if(size===undefined)return orig["inner"+name].call(this);return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number")return orig["outer"+name].call(this,size);return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}});if(!$.fn.addBack)$.fn.addBack=function(selector){return this.add(selector==
null?this.prevObject:this.prevObject.filter(selector))};if($("\x3ca\x3e").data("a-b","a").removeData("a-b").data("a-b"))$.fn.removeData=function(removeData){return function(key){if(arguments.length)return removeData.call(this,$.camelCase(key));else return removeData.call(this)}}($.fn.removeData);$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();
if(fn)fn.call(elem)},delay)}):orig.apply(this,arguments)}}($.fn.focus),disableSelection:function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length){var elem=$(this[0]),position,value;
while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0)return value}elem=elem.parent()}}return 0}});$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];
if(!set)return;if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11))return;for(i=0;i<set.length;i++)if(instance.options[set[i][0]])set[i][1].apply(instance.element,args)}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++)try{events=$._data(elem,"events");if(events&&events.remove)$(elem).triggerHandler("remove")}catch(e){}orig(elems)}}($.cleanData);
$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,
element);if(arguments.length)this._createWidget(options,element)};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base;basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return}proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,
args)};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue}}()});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,
function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)});delete existingConstructor._childConstructors}else base._childConstructors.push(constructor);$.widget.bridge(name,constructor);return constructor};$.widget.extend=function(target){var input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex]){value=input[inputIndex][key];
if(input[inputIndex].hasOwnProperty(key)&&value!==undefined)if($.isPlainObject(value))target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);else target[key]=value}return target};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=widget_slice.call(arguments,1),returnValue=this;if(isMethodCall)this.each(function(){var methodValue,instance=
$.data(this,fullName);if(options==="instance"){returnValue=instance;return false}if(!instance)return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");if(!$.isFunction(instance[options])||options.charAt(0)==="_")return $.error("no such method '"+options+"' for "+name+" widget instance");methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):
methodValue;return false}});else{if(args.length)options=$.widget.extend.apply(null,[options].concat(args));this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init)instance._init()}else $.data(this,fullName,new object(options,this))})}return returnValue}};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"\x3cdiv\x3e",options:{disabled:false,create:null},_createWidget:function(options,
element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widget_uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element)this.destroy()}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow)}this.options=
$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");
this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0)return $.widget.extend({},this.options);if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=
curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(arguments.length===1)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(arguments.length===1)return this.options[key]===undefined?null:this.options[key];options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+
"-disabled",!!value);if(value){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false}if(!handlers){handlers=element;element=
this.element;delegateElement=this.widget()}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element)}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled")))return;return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}if(typeof handler!=="string")handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;var match=event.match(/^([\w:-]*)\s*(.*)$/),
eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector)delegateElement.delegate(selector,eventName,handlerProxy);else{element.bind(eventName,handlerProxy);Swedbank.PageLoad.onUnload(function(){element.unbind(eventName,handlerProxy)})}})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());
this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},
_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;
if(orig)for(prop in orig)if(!(prop in event))event[prop]=orig[prop];this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented())}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string")options={effect:options};var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:
options.effect||defaultEffect;options=options||{};if(typeof options==="number")options={duration:options};hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay)element.delay(options.delay);if(hasOptions&&$.effects&&$.effects.effect[effectName])element[method](options);else if(effectName!==method&&element[effectName])element[effectName](options.duration,options.easing,callback);else element.queue(function(next){$(this)[method]();if(callback)callback.call(element[0]);next()})}});
var widget=$.widget;var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false});var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+
".preventClickEvent");event.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate)this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(mouseHandled)return;this._mouseMoved=false;this._mouseStarted&&this._mouseUp(event);this._mouseDownEvent=event;var that=this,btnIsLeft=event.which===1,elIsCancel=
typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false;if(!btnIsLeft||elIsCancel||!this._mouseCapture(event))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==false;if(!this._mouseStarted){event.preventDefault();return true}}if(true===
$.data(event.target,this.widgetName+".preventClickEvent"))$.removeData(event.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(event){return that._mouseMove(event)};this._mouseUpDelegate=function(event){return that._mouseUp(event)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true},_mouseMove:function(event){if(this._mouseMoved)if($.ui.ie&&
(!document.documentMode||document.documentMode<9)&&!event.button)return this._mouseUp(event);else if(!event.which)return this._mouseUp(event);if(event.which||event.button)this._mouseMoved=true;if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault()}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==false;this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)}return!this._mouseStarted},_mouseUp:function(event){this.document.unbind("mousemove."+
this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target)$.data(event.target,this.widgetName+".preventClickEvent",true);this._mouseStop(event)}mouseHandled=false;return false},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},
_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});(function(){$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*
(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9)return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};if($.isWindow(raw))return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};if(raw.preventDefault)return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};return{width:elem.outerWidth(),height:elem.outerHeight(),
offset:elem.offset()}}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;var w1,w2,div=$("\x3cdiv style\x3d'display:block;position:absolute;width:50px;height:50px;overflow:hidden;'\x3e\x3cdiv style\x3d'height:100px;width:auto;'\x3e\x3c/div\x3e\x3c/div\x3e"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2)w2=div[0].clientWidth;div.remove();return cachedScrollbarWidth=
w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||overflowX==="auto"&&within.width<within.element[0].scrollWidth,hasOverflowY=overflowY==="scroll"||overflowY==="auto"&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():
0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()}}};
$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault)options.at="left top";targetWidth=dimensions.width;targetHeight=dimensions.height;
targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1)pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?
horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]});if(collision.length===1)collision[1]=collision[0];if(options.at[0]==="right")basePosition.left+=targetWidth;else if(options.at[0]==="center")basePosition.left+=targetWidth/2;if(options.at[1]==="bottom")basePosition.top+=targetHeight;else if(options.at[1]==="center")basePosition.top+=targetHeight/2;atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=
atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());
if(options.my[0]==="right")position.left-=elemWidth;else if(options.my[0]==="center")position.left-=elemWidth/2;if(options.my[1]==="bottom")position.top-=elemHeight;else if(options.my[1]==="center")position.top-=elemHeight/2;position.left+=myOffset[0];position.top+=myOffset[1];if(!supportsOffsetFractions){position.left=round(position.left);position.top=round(position.top)}collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]])$.ui.position[collision[i]][dir](position,
{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})});if(options.using)using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,
left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth)feedback.horizontal="center";if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight)feedback.vertical="middle";if(max(abs(left),abs(right))>max(abs(top),abs(bottom)))feedback.important=
"horizontal";else feedback.important="vertical";options.using.call(this,props,feedback)};elem.offset($.extend(position,{using:using}))})};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>
outerWidth)if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight}else if(overRight>0&&overLeft<=0)position.left=withinOffset;else if(overLeft>overRight)position.left=withinOffset+outerWidth-data.collisionWidth;else position.left=withinOffset;else if(overLeft>0)position.left+=overLeft;else if(overRight>0)position.left-=overRight;else position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,
data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight)if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom}else if(overBottom>
0&&overTop<=0)position.top=withinOffset;else if(overTop>overBottom)position.top=withinOffset+outerHeight-data.collisionHeight;else position.top=withinOffset;else if(overTop>0)position.top+=overTop;else if(overBottom>0)position.top-=overBottom;else position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,
collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;
if(newOverRight<0||newOverRight<abs(overLeft))position.left+=myOffset+atOffset+offset}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight)position.left+=myOffset+atOffset+offset}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-
data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||
newOverBottom<abs(overTop))position.top+=myOffset+atOffset+offset}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom)position.top+=myOffset+atOffset+offset}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments)}}};(function(){var testElement,
testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body)$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div);testElementParent=body||document.documentElement;
testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;supportsOffsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement)})()})();var position=$.ui.position;$.widget("ui.draggable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",
cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original")this._setPositionRelative();if(this.options.addClasses)this.element.addClass("ui-draggable");if(this.options.disabled)this.element.addClass("ui-draggable-disabled");
this._setHandleClassName();this._mouseInit()},_setOption:function(key,value){this._super(key,value);if(key==="handle"){this._removeHandleClassName();this._setHandleClassName()}},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=true;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;this._blurActiveElement(event);
if(this.helper||o.disabled||$(event.target).closest(".ui-resizable-handle").length>0)return false;this.handle=this._getHandle(event);if(!this.handle)return false;this._blockFrames(o.iframeFix===true?"iframe":o.iframeFix);return true},_blockFrames:function(selector){this.iframeBlocks=this.document.find(selector).map(function(){var iframe=$(this);return $("\x3cdiv\x3e").css("position","absolute").appendTo(iframe.parent()).outerWidth(iframe.outerWidth()).outerHeight(iframe.outerHeight()).offset(iframe.offset())[0]})},
_unblockFrames:function(){if(this.iframeBlocks){this.iframeBlocks.remove();delete this.iframeBlocks}},_blurActiveElement:function(event){var document=this.document[0];if(!this.handleElement.is(event.target))return;try{if(document.activeElement&&document.activeElement.nodeName.toLowerCase()!=="body")$(document.activeElement).blur()}catch(error){}},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
if($.ui.ddmanager)$.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent(true);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=this.helper.parents().filter(function(){return $(this).css("position")==="fixed"}).length>0;this.positionAbs=this.element.offset();this._refreshOffsets(event);this.originalPosition=this.position=this._generatePosition(event,false);this.originalPageX=event.pageX;this.originalPageY=
event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this._setContainment();if(this._trigger("start",event)===false){this._clear();return false}this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event);this._normalizeRightBottom();this._mouseDrag(event,true);if($.ui.ddmanager)$.ui.ddmanager.dragStart(this,event);return true},_refreshOffsets:function(event){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-
this.margins.left,scroll:false,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:event.pageX-this.offset.left,top:event.pageY-this.offset.top}},_mouseDrag:function(event,noPropagation){if(this.hasFixedAncestor)this.offset.parent=this._getParentOffset();this.position=this._generatePosition(event,true);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false}this.position=
ui.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);return false},_mouseStop:function(event){var that=this,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour)dropped=$.ui.ddmanager.drop(this,event);if(this.dropped){dropped=this.dropped;this.dropped=false}if(this.options.revert==="invalid"&&!dropped||this.options.revert==="valid"&&dropped||this.options.revert===true||$.isFunction(this.options.revert)&&
this.options.revert.call(this.element,dropped))$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false)that._clear()});else if(this._trigger("stop",event)!==false)this._clear();return false},_mouseUp:function(event){this._unblockFrames();if($.ui.ddmanager)$.ui.ddmanager.dragStop(this,event);if(this.handleElement.is(event.target))this.element.focus();return $.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){if(this.helper.is(".ui-draggable-dragging"))this._mouseUp({});
else this._clear();return this},_getHandle:function(event){return this.options.handle?!!$(event.target).closest(this.element.find(this.options.handle)).length:true},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(event){var o=this.options,helperIsFunction=$.isFunction(o.helper),
helper=helperIsFunction?$(o.helper.apply(this.element[0],[event])):o.helper==="clone"?this.element.clone().removeAttr("id"):this.element;if(!helper.parents("body").length)helper.appendTo(o.appendTo==="parent"?this.element[0].parentNode:o.appendTo);if(helperIsFunction&&helper[0]===this.element[0])this._setPositionRelative();if(helper[0]!==this.element[0]&&!/(fixed|absolute)/.test(helper.css("position")))helper.css("position","absolute");return helper},_setPositionRelative:function(){if(!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position=
"relative"},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string")obj=obj.split(" ");if($.isArray(obj))obj={left:+obj[0],top:+obj[1]||0};if("left"in obj)this.offset.click.left=obj.left+this.margins.left;if("right"in obj)this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;if("top"in obj)this.offset.click.top=obj.top+this.margins.top;if("bottom"in obj)this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top},_isRootNode:function(element){return/(html|body)/i.test(element.tagName)||
element===this.document[0]},_getParentOffset:function(){var po=this.offsetParent.offset(),document=this.document[0];if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this._isRootNode(this.offsetParent[0]))po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),
10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var p=this.element.position(),scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollTop():0),left:p.left-(parseInt(this.helper.css("left"),10)||0)+(!scrollIsRootNode?this.scrollParent.scrollLeft():0)}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),
10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var isUserScrollable,c,ce,o=this.options,document=this.document[0];this.relativeContainer=null;if(!o.containment){this.containment=null;return}if(o.containment==="window"){this.containment=[$(window).scrollLeft()-this.offset.relative.left-
this.offset.parent.left,$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,$(window).scrollLeft()+$(window).width()-this.helperProportions.width-this.margins.left,$(window).scrollTop()+($(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(o.containment==="document"){this.containment=[0,0,$(document).width()-this.helperProportions.width-this.margins.left,($(document).height()||document.body.parentNode.scrollHeight)-
this.helperProportions.height-this.margins.top];return}if(o.containment.constructor===Array){this.containment=o.containment;return}if(o.containment==="parent")o.containment=this.helper[0].parentNode;c=$(o.containment);ce=c[0];if(!ce)return;isUserScrollable=/(scroll|auto)/.test(c.css("overflow"));this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(isUserScrollable?Math.max(ce.scrollWidth,
ce.offsetWidth):ce.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(isUserScrollable?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relativeContainer=c},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=
d==="absolute"?1:-1,scrollIsRootNode=this._isRootNode(this.scrollParent[0]);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-(this.cssPosition==="fixed"?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top)*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-(this.cssPosition==="fixed"?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)*mod}},_generatePosition:function(event,constrainPosition){var containment,co,top,left,
o=this.options,scrollIsRootNode=this._isRootNode(this.scrollParent[0]),pageX=event.pageX,pageY=event.pageY;if(!scrollIsRootNode||!this.offset.scroll)this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};if(constrainPosition){if(this.containment){if(this.relativeContainer){co=this.relativeContainer.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]}else containment=this.containment;
if(event.pageX-this.offset.click.left<containment[0])pageX=containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<containment[1])pageY=containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>containment[2])pageX=containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>containment[3])pageY=containment[3]+this.offset.click.top}if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;
pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top;left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left}if(o.axis==="y")pageX=
this.originalPageX;if(o.axis==="x")pageY=this.originalPageY}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:scrollIsRootNode?0:this.offset.scroll.top),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:scrollIsRootNode?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==
this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=false;if(this.destroyOnClear)this.destroy()},_normalizeRightBottom:function(){if(this.options.axis!=="y"&&this.helper.css("right")!=="auto"){this.helper.width(this.helper.width());this.helper.css("right","auto")}if(this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"){this.helper.height(this.helper.height());this.helper.css("bottom","auto")}},_trigger:function(type,event,ui){ui=ui||this._uiHash();
$.ui.plugin.call(this,type,[event,ui,this],true);if(/^(drag|start|stop)/.test(type)){this.positionAbs=this._convertPositionTo("absolute");ui.offset=this.positionAbs}return $.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});
draggable.sortables=[];$(draggable.options.connectToSortable).each(function(){var sortable=$(this).sortable("instance");if(sortable&&!sortable.options.disabled){draggable.sortables.push(sortable);sortable.refreshPositions();sortable._trigger("activate",event,uiSortable)}})},stop:function(event,ui,draggable){var uiSortable=$.extend({},ui,{item:draggable.element});draggable.cancelHelperRemoval=false;$.each(draggable.sortables,function(){var sortable=this;if(sortable.isOver){sortable.isOver=0;draggable.cancelHelperRemoval=
true;sortable.cancelHelperRemoval=false;sortable._storedCSS={position:sortable.placeholder.css("position"),top:sortable.placeholder.css("top"),left:sortable.placeholder.css("left")};sortable._mouseStop(event);sortable.options.helper=sortable.options._helper}else{sortable.cancelHelperRemoval=true;sortable._trigger("deactivate",event,uiSortable)}})},drag:function(event,ui,draggable){$.each(draggable.sortables,function(){var innermostIntersecting=false,sortable=this;sortable.positionAbs=draggable.positionAbs;
sortable.helperProportions=draggable.helperProportions;sortable.offset.click=draggable.offset.click;if(sortable._intersectsWith(sortable.containerCache)){innermostIntersecting=true;$.each(draggable.sortables,function(){this.positionAbs=draggable.positionAbs;this.helperProportions=draggable.helperProportions;this.offset.click=draggable.offset.click;if(this!==sortable&&this._intersectsWith(this.containerCache)&&$.contains(sortable.element[0],this.element[0]))innermostIntersecting=false;return innermostIntersecting})}if(innermostIntersecting){if(!sortable.isOver){sortable.isOver=
1;draggable._parent=ui.helper.parent();sortable.currentItem=ui.helper.appendTo(sortable.element).data("ui-sortable-item",true);sortable.options._helper=sortable.options.helper;sortable.options.helper=function(){return ui.helper[0]};event.target=sortable.currentItem[0];sortable._mouseCapture(event,true);sortable._mouseStart(event,true,true);sortable.offset.click.top=draggable.offset.click.top;sortable.offset.click.left=draggable.offset.click.left;sortable.offset.parent.left-=draggable.offset.parent.left-
sortable.offset.parent.left;sortable.offset.parent.top-=draggable.offset.parent.top-sortable.offset.parent.top;draggable._trigger("toSortable",event);draggable.dropped=sortable.element;$.each(draggable.sortables,function(){this.refreshPositions()});draggable.currentItem=draggable.element;sortable.fromOutside=draggable}if(sortable.currentItem){sortable._mouseDrag(event);ui.position=sortable.position}}else if(sortable.isOver){sortable.isOver=0;sortable.cancelHelperRemoval=true;sortable.options._revert=
sortable.options.revert;sortable.options.revert=false;sortable._trigger("out",event,sortable._uiHash(sortable));sortable._mouseStop(event,true);sortable.options.revert=sortable.options._revert;sortable.options.helper=sortable.options._helper;if(sortable.placeholder)sortable.placeholder.remove();ui.helper.appendTo(draggable._parent);draggable._refreshOffsets(event);ui.position=draggable._generatePosition(event,true);draggable._trigger("fromSortable",event);draggable.dropped=false;$.each(draggable.sortables,
function(){this.refreshPositions()})}})}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui,instance){var t=$("body"),o=instance.options;if(t.css("cursor"))o._cursor=t.css("cursor");t.css("cursor",o.cursor)},stop:function(event,ui,instance){var o=instance.options;if(o._cursor)$("body").css("cursor",o._cursor)}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("opacity"))o._opacity=t.css("opacity");t.css("opacity",
o.opacity)},stop:function(event,ui,instance){var o=instance.options;if(o._opacity)$(ui.helper).css("opacity",o._opacity)}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui,i){if(!i.scrollParentNotHidden)i.scrollParentNotHidden=i.helper.scrollParent(false);if(i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML")i.overflowOffset=i.scrollParentNotHidden.offset()},drag:function(event,ui,i){var o=i.options,scrolled=false,scrollParent=i.scrollParentNotHidden[0],
document=i.document[0];if(scrollParent!==document&&scrollParent.tagName!=="HTML"){if(!o.axis||o.axis!=="x")if(i.overflowOffset.top+scrollParent.offsetHeight-event.pageY<o.scrollSensitivity)scrollParent.scrollTop=scrolled=scrollParent.scrollTop+o.scrollSpeed;else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity)scrollParent.scrollTop=scrolled=scrollParent.scrollTop-o.scrollSpeed;if(!o.axis||o.axis!=="y")if(i.overflowOffset.left+scrollParent.offsetWidth-event.pageX<o.scrollSensitivity)scrollParent.scrollLeft=
scrolled=scrollParent.scrollLeft+o.scrollSpeed;else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity)scrollParent.scrollLeft=scrolled=scrollParent.scrollLeft-o.scrollSpeed}else{if(!o.axis||o.axis!=="x")if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(!o.axis||
o.axis!=="y")if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(i,event)}});$.ui.plugin.add("draggable","snap",{start:function(event,ui,i){var o=i.options;i.snapElements=[];$(o.snap.constructor!==
String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0])i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui,inst){var ts,bs,ls,rs,l,r,t,b,i,first,o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left-inst.margins.left;
r=l+inst.snapElements[i].width;t=inst.snapElements[i].top-inst.margins.top;b=t+inst.snapElements[i].height;if(x2<l-d||x1>r+d||y2<t-d||y1>b+d||!$.contains(inst.snapElements[i].item.ownerDocument,inst.snapElements[i].item)){if(inst.snapElements[i].snapping)inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));inst.snapElements[i].snapping=false;continue}if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=
d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left}first=ts||bs||ls||rs;if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=
d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left}if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first))inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,
event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));inst.snapElements[i].snapping=ts||bs||ls||rs||first}}});$.ui.plugin.add("draggable","stack",{start:function(event,ui,instance){var min,o=instance.options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!group.length)return;min=parseInt($(group[0]).css("zIndex"),10)||0;$(group).each(function(i){$(this).css("zIndex",min+i)});this.css("zIndex",min+
group.length)}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui,instance){var t=$(ui.helper),o=instance.options;if(t.css("zIndex"))o._zIndex=t.css("zIndex");t.css("zIndex",o.zIndex)},stop:function(event,ui,instance){var o=instance.options;if(o._zIndex)$(ui.helper).css("zIndex",o._zIndex)}});var draggable=$.ui.draggable;var sortable=$.widget("ui.sortable",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,
cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"\x3e *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(x,reference,size){return x>=reference&&x<
reference+size},_isFloating:function(item){return/left|right/.test(item.css("float"))||/inline|table-cell/.test(item.css("display"))},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=true},_setOption:function(key,value){this._super(key,value);if(key==="handle")this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");
$.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(event,overrideHandle){var currentItem=null,validHandle=false,
that=this;if(this.reverting)return false;if(this.options.disabled||this.options.type==="static")return false;this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false}});if($.data(event.target,that.widgetName+"-item")===that)currentItem=$(event.target);if(!currentItem)return false;if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===event.target)validHandle=
true});if(!validHandle)return false}this.currentItem=currentItem;this._removeCurrentsFromItems();return true},_mouseStart:function(event,overrideHandle,noActivation){var i,body,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};
$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
if(this.helper[0]!==this.currentItem[0])this.currentItem.hide();this._createPlaceholder();if(o.containment)this._setContainment();if(o.cursor&&o.cursor!=="auto"){body=this.document.find("body");this.storedCursor=body.css("cursor");body.css("cursor",o.cursor);this.storedStylesheet=$("\x3cstyle\x3e*{ cursor: "+o.cursor+" !important; }\x3c/style\x3e").appendTo(body)}if(o.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=
this.helper.css("zIndex");this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions)this._cacheHelperProportions();if(!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));if($.ui.ddmanager)$.ui.ddmanager.current=this;if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,
event);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){if(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-
event.pageY<o.scrollSensitivity)this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity)this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity)this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity)this.scrollParent[0].scrollLeft=
scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed}else{if(event.pageY-this.document.scrollTop()<o.scrollSensitivity)scrolled=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed);else if(this.window.height()-(event.pageY-this.document.scrollTop())<o.scrollSensitivity)scrolled=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed);if(event.pageX-this.document.scrollLeft()<o.scrollSensitivity)scrolled=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed);else if(this.window.width()-
(event.pageX-this.document.scrollLeft())<o.scrollSensitivity)scrolled=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(i=this.items.length-
1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);if(!intersection)continue;if(item.instance!==this.currentContainer)continue;if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item))this._rearrange(event,
item);else break;this._trigger("change",event,this._uiHash());break}}this._contactContainers(event);if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(event,noPropagation){if(!event)return;if($.ui.ddmanager&&!this.options.dropBehaviour)$.ui.ddmanager.drop(this,event);if(this.options.revert){var that=this,cur=this.placeholder.offset(),axis=this.options.axis,animation={};if(!axis||axis===
"x")animation.left=cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);if(!axis||axis==="y")animation.top=cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);this.reverting=true;$(this.helper).animate(animation,parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});
if(this.options.helper==="original")this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode)this.helper.remove();$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev)$(this.domPosition.prev).after(this.currentItem);else $(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||
/(.+)[\-=_](.+)/);if(res)str.push((o.key||res[1]+"[]")+"\x3d"+(o.key&&o.expression?res[1]:res[2]))});if(!str.length&&o.key)str.push(o.key+"\x3d");return str.join("\x26")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")});return ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=
item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElementHeight=this.options.axis==="x"||y1+dyClick>t&&y1+dyClick<b,isOverElementWidth=this.options.axis==="y"||x1+dxClick>l&&x1+dxClick<r,isOverElement=isOverElementHeight&&isOverElementWidth;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":
"height"])return isOverElement;else return l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=
isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement)return false;return this.floating?horizontalDirection&&horizontalDirection==="right"||verticalDirection==="down"?2:1:verticalDirection&&(verticalDirection==="down"?2:1)},_intersectsWithSides:function(item){var isOverBottomHalf=this._isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=
this._isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection)return horizontalDirection==="right"&&isOverRightHalf||horizontalDirection==="left"&&!isOverRightHalf;else return verticalDirection&&(verticalDirection==="down"&&isOverBottomHalf||verticalDirection==="up"&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=
this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left")},refresh:function(event){this._refreshItems(event);this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var i,
j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled)queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst])}}queries.push([$.isFunction(this.options.items)?
this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function addItems(){items.push(this)}for(i=queries.length-1;i>=0;i--)queries[i][0].each(addItems);return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return false;
return true})},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i],this.document[0]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);
if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst)}}}for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,
top:0})}}},refreshPositions:function(fast){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):false;if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0])continue;t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=
t.outerWidth();item.height=t.outerHeight()}p=t.offset();item.left=p.left;item.top=p.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},
_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;o.placeholder={element:function(){var nodeName=that.currentItem[0].nodeName.toLowerCase(),element=$("\x3c"+nodeName+"\x3e",that.document[0]).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(nodeName==="tbody")that._createTrPlaceholder(that.currentItem.find("tr").eq(0),$("\x3ctr\x3e",
that.document[0]).appendTo(element));else if(nodeName==="tr")that._createTrPlaceholder(that.currentItem,element);else if(nodeName==="img")element.attr("src",that.currentItem.attr("src"));if(!className)element.css("visibility","hidden");return element},update:function(container,p){if(className&&!o.forcePlaceholderSize)return;if(!p.height())p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));if(!p.width())p.width(that.currentItem.innerWidth()-
parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10))}}}that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,that.placeholder)},_createTrPlaceholder:function(sourceTr,targetTr){var that=this;sourceTr.children().each(function(){$("\x3ctd\x3e\x26#160;\x3c/td\x3e",that.document[0]).attr("colspan",$(this).attr("colspan")||1).appendTo(targetTr)})},_contactContainers:function(event){var i,
j,dist,itemWithLeastDistance,posProperty,sizeProperty,cur,nearBottom,floating,axis,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i];innermostIndex=i}else if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",
event,this._uiHash(this));this.containers[i].containerCache.over=0}}if(!innermostContainer)return;if(this.containers.length===1){if(!this.containers[innermostIndex].containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}}else{dist=1E4;itemWithLeastDistance=null;floating=innermostContainer.floating||this._isFloating(this.currentItem);posProperty=floating?"left":"top";sizeProperty=floating?"width":"height";
axis=floating?"clientX":"clientY";for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0]))continue;if(this.items[j].item[0]===this.currentItem[0])continue;cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(event[axis]-cur>this.items[j][sizeProperty]/2)nearBottom=true;if(Math.abs(event[axis]-cur)<dist){dist=Math.abs(event[axis]-cur);itemWithLeastDistance=this.items[j];this.direction=nearBottom?"up":"down"}}if(!itemWithLeastDistance&&
!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[innermostIndex]){if(!this.currentContainer.containerCache.over){this.containers[innermostIndex]._trigger("over",event,this._uiHash());this.currentContainer.containerCache.over=1}return}itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",
event,this._uiHash(this));this.currentContainer=this.containers[innermostIndex];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):o.helper==="clone"?this.currentItem.clone():this.currentItem;if(!helper.parents("body").length)$(o.appendTo!==
"parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);if(helper[0]===this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(!helper[0].style.width||o.forceHelperSize)helper.width(this.currentItem.width());if(!helper[0].style.height||o.forceHelperSize)helper.height(this.currentItem.height());return helper},
_adjustOffsetFromHelper:function(obj){if(typeof obj==="string")obj=obj.split(" ");if($.isArray(obj))obj={left:+obj[0],top:+obj[1]||0};if("left"in obj)this.offset.click.left=obj.left+this.margins.left;if("right"in obj)this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;if("top"in obj)this.offset.click.top=obj.top+this.margins.top;if("bottom"in obj)this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=
this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),
left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),
10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent")o.containment=this.helper[0].parentNode;if(o.containment==="document"||o.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,o.containment==="document"?this.document.width():this.window.width()-
this.helperProportions.width-this.margins.left,(o.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=$(ce).css("overflow")!=="hidden";this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),
10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,
pos){if(!pos)pos=this.position;var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*
mod+this.offset.parent.left*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==
this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>
this.containment[3])pageY=this.containment[3]+this.offset.click.top}if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&
left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},
_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?i.item[0]:i.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter)this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length)this.placeholder.before(this.currentItem);
this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)if(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!noPropagation)delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||
this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation)delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())});if(this!==this.currentContainer)if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())});delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer));delayedTriggers.push(function(c){return function(event){c._trigger("update",
event,this._uiHash(this))}}.call(this,this.currentContainer))}function delayEvent(type,instance,container){return function(event){container._trigger(type,event,instance._uiHash(instance))}}for(i=this.containers.length-1;i>=0;i--){if(!noPropagation)delayedTriggers.push(delayEvent("deactivate",this,this.containers[i]));if(this.containers[i].containerCache.over){delayedTriggers.push(delayEvent("out",this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",
this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity)this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);this.dragging=false;if(!noPropagation)this._trigger("beforeStop",event,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(!this.cancelHelperRemoval){if(this.helper[0]!==this.currentItem[0])this.helper.remove();this.helper=null}if(!noPropagation){for(i=
0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}this.fromOutside=false;return!this.cancelHelperRemoval},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false)this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:
null}}});$.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"\x3cinput\x3e",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput,nodeName=this.element[0].nodeName.toLowerCase(),isTextarea=nodeName==="textarea",isInput=nodeName===
"input";this.isMultiLine=isTextarea?true:isInput?false:this.element.prop("isContentEditable");this.valueMethod=this.element[isTextarea||isInput?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return}suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;
switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event)}break;case keyCode.TAB:if(this.menu.active)this.menu.select(event);
break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){if(!this.isMultiLine)this._value(this.term);this.close(event);event.preventDefault()}break;default:suppressKeyPressRepeat=true;this._searchTimeout(event);break}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;if(!this.isMultiLine||this.menu.element.is(":visible"))event.preventDefault();return}if(suppressKeyPressRepeat)return;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",
event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break}},input:function(event){if(suppressInput){suppressInput=false;event.preventDefault();return}this._searchTimeout(event)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(event);this._change(event)}});
this._initSource();this.menu=$("\x3cul\x3e").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length)this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&
event.target!==menuElement&&!$.contains(menuElement,event.target))that.close()})})},menufocus:function(event,ui){var label,item;if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent)});return}}item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item}))if(event.originalEvent&&/^key/.test(event.originalEvent.type))this._value(item.value);
label=ui.item.attr("aria-label")||item.value;if(label&&$.trim(label).length){this.liveRegion.children().hide();$("\x3cdiv\x3e").text(label).appendTo(this.liveRegion)}},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous;this.selectedItem=item})}if(false!==this._trigger("select",event,{item:item}))this._value(item.value);
this.term=this._value();this.close(event);this.selectedItem=item}});this.liveRegion=$("\x3cspan\x3e",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},
_setOption:function(key,value){this._super(key,value);if(key==="source")this._initSource();if(key==="appendTo")this.menu.element.appendTo(this._appendTo());if(key==="disabled"&&value&&this.xhr)this.xhr.abort()},_appendTo:function(){var element=this.options.appendTo;if(element)element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);if(!element||!element[0])element=this.element.closest(".ui-front");if(!element.length)element=this.document[0].body;return element},_initSource:function(){var array,
url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr)that.xhr.abort();that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data)},error:function(){response([])}})}}else this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching);
this.searching=this._delay(function(){var equalValues=this.term===this._value(),menuVisible=this.menu.element.is(":visible"),modifierKey=event.altKey||event.ctrlKey||event.metaKey||event.shiftKey;if(!equalValues||equalValues&&!menuVisible&&!modifierKey){this.selectedItem=null;this.search(null,event)}},this.options.delay)},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength)return this.close(event);if(this._trigger("search",
event)===false)return;return this._search(value)},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response())},_response:function(){var index=++this.requestIndex;return $.proxy(function(content){if(index===this.requestIndex)this.__response(content);this.pending--;if(!this.pending)this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(content){if(content)content=this._normalize(content);
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open")}else this._close()},close:function(event){this.cancelSearch=true;this._close(event)},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event)}},_change:function(event){if(this.previous!==this._value())this._trigger("change",event,{item:this.selectedItem})},
_normalize:function(items){if(items.length&&items[0].label&&items[0].value)return items;return $.map(items,function(item){if(typeof item==="string")return{label:item,value:item};return $.extend({},item,{label:item.label||item.value,value:item.value||item.label})})},_suggest:function(items){var ul=this.menu.element.empty();this._renderMenu(ul,items);this.isNewMenu=true;this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus)this.menu.next()},
_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("\x3cli\x3e").text(item.label).appendTo(ul)},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,
event);return}if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){if(!this.isMultiLine)this._value(this.term);this.menu.blur();return}this.menu[direction](event)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault()}}});$.extend($.ui.autocomplete,
{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},
__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;if(content&&content.length)message=this.options.messages.results(content.length);else message=this.options.messages.noResults;this.liveRegion.children().hide();$("\x3cdiv\x3e").text(message).appendTo(this.liveRegion)}});var autocomplete=$.ui.autocomplete;$.extend($.ui,{datepicker:{version:"1.11.4"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;
while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0)return value}elem=elem.parent()}return 0}function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass=
"ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan",
"Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,
hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,
autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("\x3cdiv id\x3d'"+this._mainDivId+"' class\x3d'ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'\x3e\x3c/div\x3e"))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){datepicker_extendRemove(this._defaults,
settings||{});return this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=nodeName==="div"||nodeName==="span";if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input")this._connectDatepicker(target,inst);else if(inline)this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,
"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:!inline?this.dpDiv:datepicker_bindHover($("\x3cdiv class\x3d'"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'\x3e\x3c/div\x3e"))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName))return;this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);
this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled)this._disableDatepicker(target)},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append)inst.append.remove();if(appendText){inst.append=$("\x3cspan class\x3d'"+this._appendClass+"'\x3e"+appendText+"\x3c/span\x3e");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger)inst.trigger.remove();
showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both")input.focus(this._showDatepicker);if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("\x3cimg/\x3e").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("\x3cbutton type\x3d'button'\x3e\x3c/button\x3e").addClass(this._triggerClass).html(!buttonImage?buttonText:$("\x3cimg/\x3e").attr({src:buttonImage,
alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0])$.datepicker._hideDatepicker();else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0])}else $.datepicker._showDatepicker(input[0]);return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,
max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++)if(names[i].length>max){max=names[i].length;maxI=i}return maxI};date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort")));date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,
inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))return;divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled)this._disableDatepicker(target);inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;
if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("\x3cinput type\x3d'text' id\x3d'"+id+"' style\x3d'position: absolute; top: -100px; width: 0px;'/\x3e");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst)}datepicker_extendRemove(inst.settings,settings||{});date=date&&date.constructor===Date?this._formatDate(inst,date):date;this._dialogInput.val(date);
this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null;if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=
true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI)$.blockUI(this.dpDiv);$.data(this._dialogInput[0],"datepicker",inst);return this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName))return;nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",
this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(nodeName==="div"||nodeName==="span")$target.removeClass(this.markerClassName).empty();if(datepicker_instActive===inst)datepicker_instActive=null},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName))return;nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=
false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value})},_disableDatepicker:function(target){var nodeName,
inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName))return;nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
true)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target)return false;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]===target)return true;return false},_getInst:function(target){try{return $.data(target,"datepicker")}catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,
value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string")return name==="defaults"?$.extend({},$.datepicker._defaults):inst?name==="all"?$.extend({},inst.settings):this._get(inst,name):null;settings=name||{};if(typeof name==="string"){settings={};settings[name]=value}if(inst){if(this._curInst===inst)this._hideDatepicker();date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");
datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined)inst.settings.minDate=this._formatDate(inst,minDate);if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined)inst.settings.maxDate=this._formatDate(inst,maxDate);if("disabled"in settings)if(settings.disabled)this._disableDatepicker(target);else this._enableDatepicker(target);this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,
date);this._updateAlternate(inst);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst)this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);
if(inst&&!inst.inline)this._setDateFromField(inst,noDefault);return inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0])$.datepicker._selectDay(event.target,
inst.selectedMonth,inst.selectedYear,sel[0]);onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else $.datepicker._hideDatepicker();return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?
+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:if(event.ctrlKey||event.metaKey)$.datepicker._clearDate(event.target);handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey)$.datepicker._gotoToday(event.target);handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,isRTL?+1:-1,"D");handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,
event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,-7,"D");handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,isRTL?-1:+1,"D");handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,
"stepMonths"),"M");break;case 40:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,+7,"D");handled=event.ctrlKey||event.metaKey;break;default:handled=false}else if(event.keyCode===36&&event.ctrlKey)$.datepicker._showDatepicker(this);else handled=false;if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,
"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal)try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);
$.datepicker._updateDatepicker(inst)}}catch(err){}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input")input=$("input",input.parentNode)[0];if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input)return;var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing)$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}beforeShow=
$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false)return;datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog)input.value="";if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")===
"fixed";return!isFixed});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);if($(window).width()<768){offset.top=$(input).offset().top+input.offsetHeight;$("html, body").animate({scrollTop:offset.top-$(window).outerHeight()/4},500)}inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?
"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim])inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);else inst.dpDiv[showAnim||"show"](showAnim?duration:null);if($.datepicker._shouldFocusInput(inst))inst.input.focus();
$.datepicker._curInst=inst}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0)datepicker_handleMouseover.apply(activeCell.get(0));inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
if(cols>1)inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em");inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst))inst.input.focus();if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml)inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);
origyearshtml=inst.yearshtml=null},0)}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus")},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+
(isFixed?0:$(document).scrollTop());offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0;offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0;offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0;offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+
inputHeight):0);return offset},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj)))obj=obj[isRTL?"previousSibling":"nextSibling"];position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||input&&inst!==$.data(input,"datepicker"))return;if(this._datepickerShowing){showAnim=this._get(inst,
"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst)};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim]))inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);else inst.dpDiv[showAnim==="slideDown"?"slideUp":showAnim==="fadeIn"?"fadeOut":"hide"](showAnim?duration:null,postProcess);if(!showAnim)postProcess();this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose)onClose.apply(inst.input?
inst.input[0]:null,[inst.input?inst.input.val():"",inst]);this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst)return;var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if($target[0].id!==
$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)||$target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)$.datepicker._hideDatepicker()},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0]))return;
this._adjustInstDate(inst,offset+(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{date=new Date;inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=
date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0]))return;
inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=dateStr!=null?dateStr:this._formatDate(inst);if(inst.input)inst.input.val(dateStr);
this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect)onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]);else if(inst.input)inst.input.trigger("change");if(inst.inline)this._updateDatepicker(inst);else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof inst.input[0]!=="object")inst.input.focus();this._lastInput=null}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||
this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864E5)/
7)+1},parseDate:function(format,value,settings){if(format==null||value==null)throw"Invalid arguments";value=typeof value==="object"?value.toString():value+"";if(value==="")return null;var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,
dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches)iFormat++;return matches},getNumber=function(match){var isDoubled=lookAhead(match),size=match==="@"?14:match==="!"?
20:match==="y"&&isDoubled?4:match==="o"?3:2,minSize=match==="y"?size:1,digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;iValue+=num[0].length;return parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,
name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false}});if(index!==-1)return index+1;else throw"Unknown name at position "+iValue;},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)==="'"&&!lookAhead("'"))literal=false;else checkLiteral();else switch(format.charAt(iFormat)){case "d":day=getNumber("d");
break;case "D":getName("D",dayNamesShort,dayNames);break;case "o":doy=getNumber("o");break;case "m":month=getNumber("m");break;case "M":month=getName("M",monthNamesShort,monthNames);break;case "y":year=getNumber("y");break;case "@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case "!":date=new Date((getNumber("!")-this._ticksTo1970)/1E4);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case "'":if(lookAhead("'"))checkLiteral();
else literal=true;break;default:checkLiteral()}if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra))throw"Extra/unparsed characters found in date: "+extra;}if(year===-1)year=(new Date).getFullYear();else if(year<100)year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100);if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim)break;month++;day-=dim}while(true)}date=this._daylightSavingAdjust(new Date(year,month-1,day));
if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1E7,formatDate:function(format,date,settings){if(!date)return"";var iFormat,dayNamesShort=
(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches)iFormat++;return matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))while(num.length<
len)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=false;if(date)for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)==="'"&&!lookAhead("'"))literal=false;else output+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case "d":output+=formatNumber("d",date.getDate(),2);break;case "D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case "o":output+=
formatNumber("o",Math.round(((new Date(date.getFullYear(),date.getMonth(),date.getDate())).getTime()-(new Date(date.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":output+=formatNumber("m",date.getMonth()+1,2);break;case "M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case "y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case "@":output+=date.getTime();break;case "!":output+=date.getTime()*1E4+this._ticksTo1970;
break;case "'":if(lookAhead("'"))output+="'";else literal=true;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches)iFormat++;return matches};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)==="'"&&!lookAhead("'"))literal=false;else chars+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case "d":case "m":case "y":case "@":chars+=
"0123456789";break;case "D":case "M":return null;case "'":if(lookAhead("'"))chars+="'";else literal=true;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal)return;var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,
settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=dates?date.getDate():0;inst.currentMonth=dates?date.getMonth():0;inst.currentYear=dates?date.getFullYear():0;this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,
this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;date.setDate(date.getDate()+offset);return date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=
/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case "d":case "D":day+=parseInt(matches[1],10);break;case "w":case "W":day+=parseInt(matches[1],10)*7;break;case "m":case "M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case "y":case "Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)},
newDate=date==null||date===""?defaultDate:typeof date==="string"?offsetString(date):typeof date==="number"?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());newDate=newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate;if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date)return null;date.setHours(date.getHours()>12?date.getHours()+
2:0);return date},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange)this._notifyChange(inst);this._adjustInstDate(inst);
if(inst.input)inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&inst.input.val()===""?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M")},
next:function(){$.datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){$.datepicker._hideDatepicker()},today:function(){$.datepicker._gotoToday(id)},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},
_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),
tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=numMonths[0]!==1||numMonths[1]!==1,currentDate=this._daylightSavingAdjust(!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,
inst.currentDay)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=
11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst));prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"\x3ca class\x3d'ui-datepicker-prev ui-corner-all' data-handler\x3d'prev' data-event\x3d'click'"+" title\x3d'"+prevText+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(isRTL?
"e":"w")+"'\x3e"+prevText+"\x3c/span\x3e\x3c/a\x3e":hideIfNoPrevNext?"":"\x3ca class\x3d'ui-datepicker-prev ui-corner-all ui-state-disabled' title\x3d'"+prevText+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'\x3e"+prevText+"\x3c/span\x3e\x3c/a\x3e";nextText=this._get(inst,"nextText");nextText=!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst));next=this._canAdjustMonth(inst,
+1,drawYear,drawMonth)?"\x3ca class\x3d'ui-datepicker-next ui-corner-all' data-handler\x3d'next' data-event\x3d'click'"+" title\x3d'"+nextText+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'\x3e"+nextText+"\x3c/span\x3e\x3c/a\x3e":hideIfNoPrevNext?"":"\x3ca class\x3d'ui-datepicker-next ui-corner-all ui-state-disabled' title\x3d'"+nextText+"'\x3e\x3cspan class\x3d'ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'\x3e"+nextText+"\x3c/span\x3e\x3c/a\x3e";currentText=
this._get(inst,"currentText");gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst));controls=!inst.inline?"\x3cbutton type\x3d'button' class\x3d'ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler\x3d'hide' data-event\x3d'click'\x3e"+this._get(inst,"closeText")+"\x3c/button\x3e":"";buttonPanel=showButtonPanel?"\x3cdiv class\x3d'ui-datepicker-buttonpane ui-widget-content'\x3e"+
(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"\x3cbutton type\x3d'button' class\x3d'ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler\x3d'today' data-event\x3d'click'"+"\x3e"+currentText+"\x3c/button\x3e":"")+(isRTL?"":controls)+"\x3c/div\x3e":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=
this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+=
"\x3cdiv class\x3d'ui-datepicker-group";if(numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}calender+="'\x3e"}calender+="\x3cdiv class\x3d'ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'\x3e"+(/all|left/.test(cornerClass)&&
row===0?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&row===0?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"\x3c/div\x3e\x3ctable class\x3d'ui-datepicker-calendar'\x3e\x3cthead\x3e"+"\x3ctr\x3e";thead=showWeek?"\x3cth class\x3d'ui-datepicker-week-col'\x3e"+this._get(inst,"weekHeader")+"\x3c/th\x3e":"";for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="\x3cth scope\x3d'col'"+((dow+firstDay+6)%7>=5?" class\x3d'ui-datepicker-week-end'":
"")+"\x3e"+"\x3cspan title\x3d'"+dayNames[day]+"'\x3e"+dayNamesMin[day]+"\x3c/span\x3e\x3c/th\x3e"}calender+=thead+"\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth)inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:
curRows;this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="\x3ctr\x3e";tbody=!showWeek?"":"\x3ctd class\x3d'ui-datepicker-week-col'\x3e"+this._get(inst,"calculateWeek")(printDate)+"\x3c/td\x3e";for(dow=0;dow<7;dow++){daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[true,""];otherMonth=printDate.getMonth()!==drawMonth;unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||
minDate&&printDate<minDate||maxDate&&printDate>maxDate;tbody+="\x3ctd class\x3d'"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+
(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title\x3d'"+daySettings[2].replace(/'/g,"\x26#39;")+"'":"")+(unselectable?"":" data-handler\x3d'selectDay' data-event\x3d'click' data-month\x3d'"+printDate.getMonth()+"' data-year\x3d'"+printDate.getFullYear()+"'")+"\x3e"+(otherMonth&&!showOtherMonths?"\x26#xa0;":unselectable?"\x3cspan class\x3d'ui-state-default'\x3e"+
printDate.getDate()+"\x3c/span\x3e":"\x3ca class\x3d'ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href\x3d'#'\x3e"+printDate.getDate()+"\x3c/a\x3e")+"\x3c/td\x3e";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"\x3c/tr\x3e"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="\x3c/tbody\x3e\x3c/table\x3e"+
(isMultiMonth?"\x3c/div\x3e"+(numMonths[0]>0&&col===numMonths[1]-1?"\x3cdiv class\x3d'ui-datepicker-row-break'\x3e\x3c/div\x3e":""):"");group+=calender}html+=group}html+=buttonPanel;inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=
this._get(inst,"showMonthAfterYear"),html="\x3cdiv class\x3d'ui-datepicker-title'\x3e",monthHtml="";if(secondary||!changeMonth)monthHtml+="\x3cspan class\x3d'ui-datepicker-month'\x3e"+monthNames[drawMonth]+"\x3c/span\x3e";else{inMinYear=minDate&&minDate.getFullYear()===drawYear;inMaxYear=maxDate&&maxDate.getFullYear()===drawYear;monthHtml+="\x3cselect class\x3d'ui-datepicker-month' data-handler\x3d'selectMonth' data-event\x3d'change'\x3e";for(month=0;month<12;month++)if((!inMinYear||month>=minDate.getMonth())&&
(!inMaxYear||month<=maxDate.getMonth()))monthHtml+="\x3coption value\x3d'"+month+"'"+(month===drawMonth?" selected\x3d'selected'":"")+"\x3e"+monthNamesShort[month]+"\x3c/option\x3e";monthHtml+="\x3c/select\x3e"}if(!showMonthAfterYear)html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"\x26#xa0;":"");if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear)html+="\x3cspan class\x3d'ui-datepicker-year'\x3e"+drawYear+"\x3c/span\x3e";else{years=this._get(inst,"yearRange").split(":");thisYear=
(new Date).getFullYear();determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=minDate?Math.max(year,minDate.getFullYear()):year;endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear;inst.yearshtml+="\x3cselect class\x3d'ui-datepicker-year' data-handler\x3d'selectYear' data-event\x3d'change'\x3e";
for(;year<=endYear;year++)inst.yearshtml+="\x3coption value\x3d'"+year+"'"+(year===drawYear?" selected\x3d'selected'":"")+"\x3e"+year+"\x3c/option\x3e";inst.yearshtml+="\x3c/select\x3e";html+=inst.yearshtml;inst.yearshtml=null}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear)html+=(secondary||!(changeMonth&&changeYear)?"\x26#xa0;":"")+monthHtml;html+="\x3c/div\x3e";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+
(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y")this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),
newDate=minDate&&date<minDate?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange)onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return numMonths==null?[1,1]:typeof numMonths==="number"?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,
this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return(new Date(year,month,1)).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0)date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));
return this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=(new Date).getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/))minYear+=currentYear;if(yearSplit[1].match(/[+\-].*/))maxYear+=currentYear}return(!minDate||date.getTime()>=
minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=typeof shortYearCutoff!=="string"?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,
"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=day?typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function datepicker_bindHover(dpDiv){var selector=
"button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1)$(this).removeClass("ui-datepicker-prev-hover");if(this.className.indexOf("ui-datepicker-next")!==-1)$(this).removeClass("ui-datepicker-next-hover")}).delegate(selector,"mouseover",datepicker_handleMouseover)}function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?
datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1)$(this).addClass("ui-datepicker-prev-hover");if(this.className.indexOf("ui-datepicker-next")!==-1)$(this).addClass("ui-datepicker-next-hover")}}function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props)if(props[name]==null)target[name]=
props[name];return target}$.fn.datepicker=function(options){if(!this.length)return this;if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true}if($("#"+$.datepicker._mainDivId).length===0)$("body").append($.datepicker.dpDiv);var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget"))return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,
[this[0]].concat(otherArgs));if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string")return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker;$.datepicker.initialized=false;$.datepicker.uuid=(new Date).getTime();$.datepicker.version=
"1.11.4";var datepicker=$.datepicker;var menu=$.widget("ui.menu",{version:"1.11.4",defaultElement:"\x3cul\x3e",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"\x3e *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,
tabIndex:0});if(this.options.disabled)this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item":function(event){event.preventDefault()},"click .ui-menu-item":function(event){var target=$(event.target);if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.select(event);if(!event.isPropagationStopped())this.mouseHandled=true;if(target.has(".ui-menu").length)this.expand(event);else if(!this.element.is(":focus")&&$(this.document[0].activeElement).closest(".ui-menu").length){this.element.trigger("focus",
[true]);if(this.active&&this.active.parents(".ui-menu").length===1)clearTimeout(this.timer)}}},"mouseenter .ui-menu-item":function(event){if(this.previousFilter)return;var target=$(event.currentTarget);target.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=this.active||this.element.find(this.options.items).eq(0);if(!keepActiveItem)this.focus(event,item)},
blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement))this.collapseAll(event)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(this._closeOnDocumentClick(event))this.collapseAll(event);this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat"))elem.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){var match,prev,character,skip,preventDefault=true;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);
break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled"))this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);
break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev)skip=true;else character=prev+character;match=this._filterMenuItems(character);match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);match=this._filterMenuItems(character)}if(match.length){this.focus(event,
match);this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)}else delete this.previousFilter}if(preventDefault)event.preventDefault()},_activate:function(event){if(!this.active.is(".ui-state-disabled"))if(this.active.is("[aria-haspopup\x3d'true']"))this.expand(event);else this.select(event)},refresh:function(){var menus,items,that=this,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",
!!this.element.find(".ui-icon").length);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.parent(),submenuCarat=$("\x3cspan\x3e").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"))});menus=submenus.add(this.element);
items=menus.find(this.options.items);items.not(".ui-menu-item").each(function(){var item=$(this);if(that._isDivider(item))item.addClass("ui-widget-content ui-menu-divider")});items.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});items.filter(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0]))this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},
_setOption:function(key,value){if(key==="icons")this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);if(key==="disabled")this.element.toggleClass("ui-state-disabled",!!value).attr("aria-disabled",value);this._super(key,value)},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);this.active=item.first();focused=this.active.addClass("ui-state-focus").removeClass("ui-state-active");if(this.options.role)this.element.attr("aria-activedescendant",
focused.attr("id"));this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");if(event&&event.type==="keydown")this._close();else this.timer=this._delay(function(){this._close()},this.delay);nested=item.children(".ui-menu");if(nested.length&&event&&/^mouse/.test(event.type))this._startOpening(nested);this.activeMenu=item.parent();this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=
parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.outerHeight();if(offset<0)this.activeMenu.scrollTop(scroll+offset);else if(offset+itemHeight>elementHeight)this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight)}},blur:function(event,fromFocus){if(!fromFocus)clearTimeout(this.timer);
if(!this.active)return;this.active.removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active})},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close();this._open(submenu)},this.delay)},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden",
"true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length)currentMenu=this.element;this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){if(!startMenu)startMenu=this.active?this.active.parent():this.element;
startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(event){return!$(event.target).closest(".ui-menu").length},_isDivider:function(item){return!/[^\-\u2014\u2013\s]/.test(item.text())},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,
newItem)}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem)})}},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},
_move:function(direction,filter,event){var next;if(this.active)if(direction==="first"||direction==="last")next=this.active[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);else next=this.active[direction+"All"](".ui-menu-item").eq(0);if(!next||!next.length||!this.active)next=this.activeMenu.find(this.options.items)[filter]();this.focus(event,next)},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return}if(this.isLastItem())return;if(this._hasScroll()){base=
this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0});this.focus(event,item)}else this.focus(event,this.activeMenu.find(this.options.items)[!this.active?"first":"last"]())},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return}if(this.isFirstItem())return;if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=
$(this);return item.offset().top-base+height>0});this.focus(event,item)}else this.focus(event,this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length)this.collapseAll(event,true);this._trigger("select",event,ui)},_filterMenuItems:function(character){var escapedCharacter=
character.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26"),regex=new RegExp("^"+escapedCharacter,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return regex.test($.trim($(this).text()))})}});var selectmenu=$.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"\x3cselect\x3e",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,
open:null,select:null},_create:function(){var selectmenuId=this.element.uniqueId().attr("id");this.ids={element:selectmenuId,button:selectmenuId+"-button",menu:selectmenuId+"-menu"};this._drawButton();this._drawMenu();if(this.options.disabled)this.disable()},_drawButton:function(){var that=this;this.label=$("label[for\x3d'"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(event){this.button.focus();event.preventDefault()}});this.element.hide();this.button=$("\x3cspan\x3e",
{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);$("\x3cspan\x3e",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=$("\x3cspan\x3e",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());
this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){if(!that.menuItems)that._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var that=this;this.menu=$("\x3cul\x3e",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=$("\x3cdiv\x3e",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(event,
ui){event.preventDefault();that._setSelection();that._select(ui.item.data("ui-selectmenu-item"),event)},focus:function(event,ui){var item=ui.item.data("ui-selectmenu-item");if(that.focusIndex!=null&&item.index!==that.focusIndex){that._trigger("focus",event,{item:item});if(!that.isOpen)that._select(item,event)}that.focusIndex=item.index;that.button.attr("aria-activedescendant",that.menuItems.eq(item.index).attr("id"))}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");
this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return false};this.menuInstance._isDivider=function(){return false}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());if(!this.options.width)this._resizeButton()},_refreshMenu:function(){this.menu.empty();var item,options=this.element.find("option");if(!options.length)return;this._parseOptions(options);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();
this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup");item=this._getSelectedItem();this.menuInstance.focus(null,item);this._setAria(item.data("ui-selectmenu-item"));this._setOption("disabled",this.element.prop("disabled"))},open:function(event){if(this.options.disabled)return;if(!this.menuItems)this._refreshMenu();else{this.menu.find(".ui-state-focus").removeClass("ui-state-focus");this.menuInstance.focus(null,this._getSelectedItem())}this.isOpen=true;this._toggleAttr();this._resizeMenu();
this._position();this._on(this.document,this._documentClick);this._trigger("open",event)},_position:function(){this.menuWrap.position($.extend({of:this.button},this.options.position))},close:function(event){if(!this.isOpen)return;this.isOpen=false;this._toggleAttr();this.range=null;this._off(this.document);this._trigger("close",event)},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(ul,items){var that=this,currentOptgroup="";$.each(items,function(index,
item){if(item.optgroup!==currentOptgroup){$("\x3cli\x3e",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(item.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:item.optgroup}).appendTo(ul);currentOptgroup=item.optgroup}that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-selectmenu-item",item)},_renderItem:function(ul,item){var li=$("\x3cli\x3e");if(item.disabled)li.addClass("ui-state-disabled");this._setText(li,item.label);
return li.appendTo(ul)},_setText:function(element,value){if(value)element.text(value);else element.html("\x26#160;")},_move:function(direction,event){var item,next,filter=".ui-menu-item";if(this.isOpen)item=this.menuItems.eq(this.focusIndex);else{item=this.menuItems.eq(this.element[0].selectedIndex);filter+=":not(.ui-state-disabled)"}if(direction==="first"||direction==="last")next=item[direction==="first"?"prevAll":"nextAll"](filter).eq(-1);else next=item[direction+"All"](filter).eq(0);if(next.length)this.menuInstance.focus(event,
next)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(event){this[this.isOpen?"close":"open"](event)},_setSelection:function(){var selection;if(!this.range)return;if(window.getSelection){selection=window.getSelection();selection.removeAllRanges();selection.addRange(this.range)}else this.range.select();this.button.focus()},_documentClick:{mousedown:function(event){if(!this.isOpen)return;if(!$(event.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length)this.close(event)}},
_buttonEvents:{mousedown:function(){var selection;if(window.getSelection){selection=window.getSelection();if(selection.rangeCount)this.range=selection.getRangeAt(0)}else this.range=document.selection.createRange()},click:function(event){this._setSelection();this._toggle(event)},keydown:function(event){var preventDefault=true;switch(event.keyCode){case $.ui.keyCode.TAB:case $.ui.keyCode.ESCAPE:this.close(event);preventDefault=false;break;case $.ui.keyCode.ENTER:if(this.isOpen)this._selectFocusedItem(event);
break;case $.ui.keyCode.UP:if(event.altKey)this._toggle(event);else this._move("prev",event);break;case $.ui.keyCode.DOWN:if(event.altKey)this._toggle(event);else this._move("next",event);break;case $.ui.keyCode.SPACE:if(this.isOpen)this._selectFocusedItem(event);else this._toggle(event);break;case $.ui.keyCode.LEFT:this._move("prev",event);break;case $.ui.keyCode.RIGHT:this._move("next",event);break;case $.ui.keyCode.HOME:case $.ui.keyCode.PAGE_UP:this._move("first",event);break;case $.ui.keyCode.END:case $.ui.keyCode.PAGE_DOWN:this._move("last",
event);break;default:this.menu.trigger(event);preventDefault=false}if(preventDefault)event.preventDefault()}},_selectFocusedItem:function(event){var item=this.menuItems.eq(this.focusIndex);if(!item.hasClass("ui-state-disabled"))this._select(item.data("ui-selectmenu-item"),event)},_select:function(item,event){var oldIndex=this.element[0].selectedIndex;this.element[0].selectedIndex=item.index;this._setText(this.buttonText,item.label);this._setAria(item);this._trigger("select",event,{item:item});if(item.index!==
oldIndex)this._trigger("change",event,{item:item});this.close(event)},_setAria:function(item){var id=this.menuItems.eq(item.index).attr("id");this.button.attr({"aria-labelledby":id,"aria-activedescendant":id});this.menu.attr("aria-activedescendant",id)},_setOption:function(key,value){if(key==="icons")this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(value.button);this._super(key,value);if(key==="appendTo")this.menuWrap.appendTo(this._appendTo());if(key==="disabled"){this.menuInstance.option("disabled",
value);this.button.toggleClass("ui-state-disabled",value).attr("aria-disabled",value);this.element.prop("disabled",value);if(value){this.button.attr("tabindex",-1);this.close()}else this.button.attr("tabindex",0)}if(key==="width")this._resizeButton()},_appendTo:function(){var element=this.options.appendTo;if(element)element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);if(!element||!element[0])element=this.element.closest(".ui-front");if(!element.length)element=this.document[0].body;
return element},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var width=this.options.width;if(!width){width=this.element.show().outerWidth();this.element.hide()}this.button.outerWidth(width)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),
this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(options){var data=[];options.each(function(index,item){var option=$(item),optgroup=option.parent("optgroup");data.push({element:option,index:index,value:option.val(),label:option.text(),optgroup:optgroup.attr("label")||"",disabled:optgroup.prop("disabled")||option.prop("disabled")})});this.items=data},_destroy:function(){this.menuWrap.remove();this.button.remove();
this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}});var slider=$.widget("ui.slider",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();
this._calculateNewMax();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle=
"\x3cspan class\x3d'ui-slider-handle ui-state-default ui-corner-all' tabindex\x3d'0'\x3e\x3c/span\x3e",handles=[];handleCount=options.values&&options.values.length||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount)}for(i=existingHandles.length;i<handleCount;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",
i)})},_createRange:function(){var options=this.options,classes="";if(options.range){if(options.range===true)if(!options.values)options.values=[this._valueMin(),this._valueMin()];else if(options.values.length&&options.values.length!==2)options.values=[options.values[0],options.values[0]];else if($.isArray(options.values))options.values=options.values.slice(0);if(!this.range||!this.range.length){this.range=$("\x3cdiv\x3e\x3c/div\x3e").appendTo(this.element);classes="ui-slider-range"+" ui-widget-header ui-corner-all"}else this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({"left":"",
"bottom":""});this.range.addClass(classes+(options.range==="min"||options.range==="max"?" ui-slider-range-"+options.range:""))}else{if(this.range)this.range.remove();this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range)this.range.remove();this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+
" ui-widget-content"+" ui-corner-all");this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=
Math.abs(normValue-that.values(i));if(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min)){distance=thisDistance;closestHandle=$(this);index=i}});allowed=this._start(event,index);if(allowed===false)return false;this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,
top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover"))this._slide(event,index,normValue);this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=
this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,
pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}percentMouse=pixelMouse/pixelTotal;if(percentMouse>1)percentMouse=1;if(percentMouse<0)percentMouse=0;if(this.orientation==="vertical")percentMouse=1-percentMouse;valueTotal=
this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}return this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?
0:1);if(this.options.values.length===2&&this.options.range===true&&(index===0&&newVal>otherVal||index===1&&newVal<otherVal))newVal=otherVal;if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false)this.values(index,newVal)}}else if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});
if(allowed!==false)this.value(newVal)}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=
this.values()}this._lastChangedValue=index;this._trigger("change",event,uiHash)}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return}return this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return}if(arguments.length)if($.isArray(arguments[0])){vals=this.options.values;
newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i)}this._refreshValue()}else if(this.options.values&&this.options.values.length)return this._values(index);else return this.value();else return this._values()},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true)if(value==="min"){this.options.value=this._values(0);this.options.values=null}else if(value==="max"){this.options.value=this._values(this.options.values.length-
1);this.options.values=null}if($.isArray(this.options.values))valsLength=this.options.values.length;if(key==="disabled")this.element.toggleClass("ui-state-disabled",!!value);this._super(key,value);switch(key){case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(value==="horizontal"?"bottom":"left","");break;case "value":this._animateOff=true;this._refreshValue();
this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1)this._change(null,i);this._animateOff=false;break;case "step":case "min":case "max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case "range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val},_values:function(index){var val,
vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val}else if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals}else return[]},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=
val-valModStep;if(Math.abs(valModStep)*2>=step)alignValue+=valModStep>0?step:-step;return parseFloat(alignValue.toFixed(5))},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step,aboveMin=Math.floor(+(max-min).toFixed(this._precision())/step)*step;max=aboveMin+min;this.max=parseFloat(max.toFixed(this._precision()))},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null)precision=Math.max(precision,this._precisionOf(this.options.min));
return precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=!this._animateOff?o.animate:false,_set={};if(this.options.values&&this.options.values.length)this.handles.each(function(i){valPercent=(that.values(i)-
that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true)if(that.orientation==="horizontal"){if(i===0)that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate);if(i===1)that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}else{if(i===0)that.range.stop(1,1)[animate?"animate":
"css"]({bottom:valPercent+"%"},o.animate);if(i===1)that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}lastValPercent=valPercent});else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation===
"horizontal")this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);if(oRange==="max"&&this.orientation==="horizontal")this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:false,duration:o.animate});if(oRange==="min"&&this.orientation==="vertical")this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate);if(oRange==="max"&&this.orientation==="vertical")this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:false,duration:o.animate})}},
_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false)return}break}step=
this.options.step;if(this.options.values&&this.options.values.length)curVal=newVal=this.values(index);else curVal=newVal=this.value();switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===
this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step);break}this._slide(event,index,newVal)},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active")}}}})});
/*
 jQuery Timepicker Addon - v1.4.1 - 2013-11-10
 http://trentrichardson.com/examples/timepicker
 Copyright (c) 2013 Trent Richardson; Licensed MIT */
(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version)return;$.extend($.ui,{timepicker:{version:"1.4.1"}});var Timepicker=function(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:false};this._defaults=
{showButtonPanel:true,timeOnly:false,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:true,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,
microsecGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:true,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"};$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,
microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(settings){extendRemove(this._defaults,
settings||{});return this},_newInst:function($input,opts){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow))return tp_inst._defaults.evnts.beforeShow.call($input[0],
input,dp_inst,tp_inst)},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst);if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear))tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===true&&$input.val()!=="")tp_inst._updateDateTime(dp_inst);if($.isFunction(tp_inst._defaults.evnts.onClose))tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}};for(i in overrides)if(overrides.hasOwnProperty(i))fns[i]=
opts[i]||null;tp_inst._defaults=$.extend({},this._defaults,inlineSettings,opts,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()});tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:""));
if(typeof tp_inst._defaults.controlType==="string"){if(tp_inst._defaults.controlType==="slider"&&typeof $.ui.slider==="undefined")tp_inst._defaults.controlType="select";tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]}else tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];if(tp_inst._defaults.timezoneList!==
null)timezoneList=tp_inst._defaults.timezoneList;var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&typeof timezoneList[0]!=="object")for(;tzi<tzl;tzi++){tzv=timezoneList[tzi];timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)}}tp_inst._defaults.timezoneList=timezoneList;tp_inst.timezone=tp_inst._defaults.timezone!==null?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):(new Date).getTimezoneOffset()*-1;tp_inst.hour=tp_inst._defaults.hour<
tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?
tp_inst._defaults.secondMax:tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec;tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec;tp_inst.ampm=
"";tp_inst.$input=$input;if(tp_inst._defaults.altField)tp_inst.$altInput=$(tp_inst._defaults.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")});if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0)tp_inst._defaults.minDate=new Date;if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0)tp_inst._defaults.maxDate=new Date;if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date)tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime());
if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date)tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime());if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date)tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime());if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date)tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime());tp_inst.$input.bind("focus",
function(){tp_inst._onFocus()});return tp_inst},_addTimePicker:function(dp_inst){var currDT=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,false);this._injectTimePicker()},_parseTime:function(timeString,withDate){if(!this.inst)this.inst=$.datepicker._getInst(this.$input[0]);if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");
try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj)return false;$.extend(this,parseRes.timeObj)}catch(err){$.timepicker.log("Error parsing the date/time string: "+err+"\ndate/time string \x3d "+timeString+"\ntimeFormat \x3d "+this._defaults.timeFormat+"\ndateFormat \x3d "+dp_dateFormat);return false}return true}else{var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,
this._defaults);if(!timeObj)return false;$.extend(this,timeObj);return true}},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",show=null,max={},gridSize={},size=null,i=0,l=0;if($dp.find("div.ui-timepicker-div").length===0&&o.showTimepicker){var noDisplay=' style\x3d"display:none;"',html='\x3cdiv class\x3d"ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":"")+'"\x3e\x3cdl\x3e'+'\x3cdt class\x3d"ui_tpicker_time_label"'+(o.showTime?"":noDisplay)+
"\x3e"+o.timeText+"\x3c/dt\x3e"+'\x3cdd class\x3d"ui_tpicker_time"'+(o.showTime?"":noDisplay)+"\x3e\x3c/dd\x3e";for(i=0,l=this.units.length;i<l;i++){litem=this.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o["show"+uitem]!==null?o["show"+uitem]:this.support[litem];max[litem]=parseInt(o[litem+"Max"]-(o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem],10);gridSize[litem]=0;html+='\x3cdt class\x3d"ui_tpicker_'+litem+'_label"'+(show?"":noDisplay)+"\x3e"+o[litem+"Text"]+"\x3c/dt\x3e"+
'\x3cdd class\x3d"ui_tpicker_'+litem+'"\x3e\x3cdiv class\x3d"ui_tpicker_'+litem+'_slider"'+(show?"":noDisplay)+"\x3e\x3c/div\x3e";if(show&&o[litem+"Grid"]>0){html+='\x3cdiv style\x3d"padding-left: 1px"\x3e\x3ctable class\x3d"ui-tpicker-grid-label"\x3e\x3ctr\x3e';if(litem==="hour")for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:h},o);html+='\x3ctd data-for\x3d"'+litem+'"\x3e'+tmph+"\x3c/td\x3e"}else for(var m=
o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;html+='\x3ctd data-for\x3d"'+litem+'"\x3e'+(m<10?"0":"")+m+"\x3c/td\x3e"}html+="\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e"}html+="\x3c/dd\x3e"}var showTz=o.showTimezone!==null?o.showTimezone:this.support.timezone;html+='\x3cdt class\x3d"ui_tpicker_timezone_label"'+(showTz?"":noDisplay)+"\x3e"+o.timezoneText+"\x3c/dt\x3e";html+='\x3cdd class\x3d"ui_tpicker_timezone" '+(showTz?"":noDisplay)+"\x3e\x3c/dd\x3e";html+="\x3c/dl\x3e\x3c/div\x3e";
var $tp=$(html);if(o.timeOnly===true){$tp.prepend('\x3cdiv class\x3d"ui-widget-header ui-helper-clearfix ui-corner-all"\x3e'+'\x3cdiv class\x3d"ui-datepicker-title"\x3e'+o.timeOnlyTitle+"\x3c/div\x3e"+"\x3c/div\x3e");$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()}for(i=0,l=tp_inst.units.length;i<l;i++){litem=tp_inst.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);show=o["show"+uitem]!==null?o["show"+uitem]:this.support[litem];tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,
$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]);if(show&&o[litem+"Grid"]>0){size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]);$tp.find(".ui_tpicker_"+litem+" table").css({width:size+"%",marginLeft:o.isRTL?"0":size/(-2*gridSize[litem])+"%",marginRight:o.isRTL?size/(-2*gridSize[litem])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(e){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/ig),
f=$t.data("for");if(f==="hour")if(ap.indexOf("p")!==-1&&n<12)n+=12;else if(ap.indexOf("a")!==-1&&n===12)n=0;tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],litem,n);tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:"pointer",width:100/gridSize[litem]+"%",textAlign:"center",overflow:"hidden"})}}this.timezone_select=$tp.find(".ui_tpicker_timezone").append("\x3cselect\x3e\x3c/select\x3e").find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("\x3coption /\x3e").val(typeof val===
"object"?val.value:val).text(typeof val==="object"?val.label:val)}));if(typeof this.timezone!=="undefined"&&this.timezone!==null&&this.timezone!==""){var local_timezone=(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()*-1;if(local_timezone===this.timezone)selectLocalTimezone(tp_inst);else this.timezone_select.val(this.timezone)}else if(typeof this.hour!=="undefined"&&this.hour!==null&&this.hour!=="")this.timezone_select.val(o.timezone);else selectLocalTimezone(tp_inst);
this.timezone_select.change(function(){tp_inst._onTimeChange();tp_inst._onSelectHandler()});var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length)$buttonPanel.before($tp);else $dp.append($tp);this.$timeObj=$tp.find(".ui_tpicker_time");if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl;
setTimeout(function(){if($tp.find(".ui-slider-access").length===0){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(true);if(sliderAccessWidth)$tp.find("table:visible").each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=oldMarginLeft*newWidth/oldWidth+"%",css={width:newWidth,marginRight:0,
marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft;$g.css(css)})}},10)}tp_inst._limitMinMaxDateTime(this.inst,true)}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker)return;if($.datepicker._get(dp_inst,"minDateTime")!==null&&$.datepicker._get(dp_inst,"minDateTime")!==undefined&&dp_date){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),minDateTimeDate=
new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null||this.microsecMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin;this.microsecMinOriginal=o.microsecMin}if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()===dp_date.getTime()){this._defaults.hourMin=
minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds();if(this.millisec<=this._defaults.millisecMin){this.millisec=this._defaults.millisecMin;this._defaults.microsecMin=
minDateTime.getMicroseconds()}else{if(this.microsec<this._defaults.microsecMin)this.microsec=this._defaults.microsecMin;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=
this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal;this._defaults.microsecMin=this.microsecMinOriginal}}if($.datepicker._get(dp_inst,"maxDateTime")!==null&&$.datepicker._get(dp_inst,"maxDateTime")!==undefined&&dp_date){var maxDateTime=
$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null||this.millisecMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax;this.microsecMaxOriginal=o.microsecMax}if(dp_inst.settings.timeOnly||maxDateTimeDate.getTime()===
dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds();if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds();if(this.millisec>=this._defaults.millisecMax){this.millisec=
this._defaults.millisecMax;this._defaults.microsecMax=maxDateTime.getMicroseconds()}else{if(this.microsec>this._defaults.microsecMax)this.microsec=this._defaults.microsecMax;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.minuteMax=
this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal;this._defaults.microsecMax=this.microsecMaxOriginal}}if(adjustSliders!==undefined&&adjustSliders===true){var hourMax=parseInt(this._defaults.hourMax-
(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),minMax=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),secMax=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),millisecMax=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),microsecMax=parseInt(this._defaults.microsecMax-
(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10);if(this.hour_slider){this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:hourMax});this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)}if(this.minute_slider){this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:minMax});this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)}if(this.second_slider){this.control.options(this,
this.second_slider,"second",{min:this._defaults.secondMin,max:secMax});this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)}if(this.millisec_slider){this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:millisecMax});this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)}if(this.microsec_slider){this.control.options(this,this.microsec_slider,"microsec",
{min:this._defaults.microsecMin,max:microsecMax});this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec)}}},_onTimeChange:function(){if(!this._defaults.showTimepicker)return;var hour=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):false,minute=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):false,second=this.second_slider?this.control.value(this,this.second_slider,"second"):false,millisec=this.millisec_slider?
this.control.value(this,this.millisec_slider,"millisec"):false,microsec=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):false,timezone=this.timezone_select?this.timezone_select.val():false,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;if(typeof hour==="object")hour=false;if(typeof minute==="object")minute=false;if(typeof second==="object")second=false;if(typeof millisec==="object")millisec=false;if(typeof microsec===
"object")microsec=false;if(typeof timezone==="object")timezone=false;if(hour!==false)hour=parseInt(hour,10);if(minute!==false)minute=parseInt(minute,10);if(second!==false)second=parseInt(second,10);if(millisec!==false)millisec=parseInt(millisec,10);if(microsec!==false)microsec=parseInt(microsec,10);if(timezone!==false)timezone=parseInt(timezone,10);var ampm=o[hour<12?"amNames":"pmNames"][0];var hasChanged=hour!==this.hour||minute!==this.minute||second!==this.second||millisec!==this.millisec||microsec!==
this.microsec||this.ampm.length>0&&hour<12!==($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1)||this.timezone!==null&&timezone!==this.timezone;if(hasChanged){if(hour!==false)this.hour=hour;if(minute!==false)this.minute=minute;if(second!==false)this.second=second;if(millisec!==false)this.millisec=millisec;if(microsec!==false)this.microsec=microsec;if(timezone!==false)this.timezone=timezone;if(!this.inst)this.inst=$.datepicker._getInst(this.$input[0]);this._limitMinMaxDateTime(this.inst,true)}if(this.support.ampm)this.ampm=
ampm;this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o);if(this.$timeObj)if(pickerTimeFormat===o.timeFormat)this.$timeObj.text(this.formattedTime+pickerTimeSuffix);else this.$timeObj.text($.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix);this.timeDefined=true;if(hasChanged)this._updateDateTime()},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl)onSelect.apply(inputEl,
[this.formattedDateTime,this])},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dtTmp=dp_inst.currentYear>0?new Date(dp_inst.currentYear,dp_inst.currentMonth,dp_inst.currentDay):new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay),dt=$.datepicker._daylightSavingAdjust(dtTmp),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,
dt===null?new Date:dt,formatCfg);var formattedDateTime=this.formattedDate;if(dp_inst.lastVal===""){dp_inst.currentYear=dp_inst.selectedYear;dp_inst.currentMonth=dp_inst.selectedMonth;dp_inst.currentDay=dp_inst.selectedDay}if(this._defaults.timeOnly===true)formattedDateTime=this.formattedTime;else if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable))formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix;this.formattedDateTime=formattedDateTime;
if(!this._defaults.showTimepicker)this.$input.val(this.formattedDate);else if(this.$altInput&&this._defaults.timeOnly===false&&this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;
if(!this._defaults.timeOnly){if(this._defaults.altFormat)altFormattedDateTime=$.datepicker.formatDate(this._defaults.altFormat,dt===null?new Date:dt,formatCfg);else altFormattedDateTime=this.formattedDate;if(altFormattedDateTime)altFormattedDateTime+=altSeparator}if(this._defaults.altTimeFormat)altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix;else altFormattedDateTime+=this.formattedTime+altTimeSuffix;this.$altInput.val(altFormattedDateTime)}else this.$input.val(formattedDateTime);
this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst)if(tp_inst._defaults.timeOnly&&inst.input.val()!==inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",
null).slider({orientation:"horizontal",value:rtl?val*-1:val,min:rtl?max*-1:min,max:rtl?min*-1:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?ui.value*-1:ui.value);tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if(typeof opts==="string"){if(opts==="min"||opts==="max"){if(val!==undefined)return obj.slider(opts,val*-1);return Math.abs(obj.slider(opts))}return obj.slider(opts)}var min=
opts.min,max=opts.max;opts.min=opts.max=null;if(min!==undefined)opts.max=min*-1;if(max!==undefined)opts.min=max*-1;return obj.slider(opts)}if(typeof opts==="string"&&val!==undefined)return obj.slider(opts,val);return obj.slider(opts)},value:function(tp_inst,obj,unit,val){if(tp_inst._defaults.isRTL){if(val!==undefined)return obj.slider("value",val*-1);return Math.abs(obj.slider("value"))}if(val!==undefined)return obj.slider("value",val);return obj.slider("value")}},select:{create:function(tp_inst,
obj,unit,val,min,max,step){var sel='\x3cselect class\x3d"ui-timepicker-select" data-unit\x3d"'+unit+'" data-min\x3d"'+min+'" data-max\x3d"'+max+'" data-step\x3d"'+step+'"\x3e',format=tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat;for(var i=min;i<=max;i+=step){sel+='\x3coption value\x3d"'+i+'"'+(i===val?" selected":"")+"\x3e";if(unit==="hour")sel+=$.datepicker.formatTime($.trim(format.replace(/[^ht ]/ig,"")),{hour:i},tp_inst._defaults);else if(unit==="millisec"||unit==="microsec"||
i>=10)sel+=i;else sel+="0"+i.toString();sel+="\x3c/option\x3e"}sel+="\x3c/select\x3e";obj.children("select").remove();$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange();tp_inst._onSelectHandler()});return obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children("select");if(typeof opts==="string"){if(val===undefined)return $t.data(opts);o[opts]=val}else o=opts;return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min||$t.data("min"),o.max||$t.data("max"),
o.step||$t.data("step"))},value:function(tp_inst,obj,unit,val){var $t=obj.children("select");if(val!==undefined)return $t.val(val);return $t.val()}}}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);if(typeof o==="object")tmp_args[0]=$.extend(o,{timeOnly:true});return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof o==="string")if(o==="getDate")return $.fn.datepicker.apply($(this[0]),
tmp_args);else return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)});else return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}});$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec);
parseRes.date.setMicroseconds(t.microsec)}return parseRes.date};$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),iso8601=timeFormat.replace(/'.*?'/g,"").indexOf("Z")!==-1;var strictParse=function(f,s,o){var getPatternAmpm=function(amNames,pmNames){var markers=[];if(amNames)$.merge(markers,amNames);if(pmNames)$.merge(markers,pmNames);markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$\x26")});
return"("+markers.join("|")+")?"};var getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(finds)for(var i=0;i<finds.length;i++)if(orders[finds[i].toString().charAt(0)]===-1)orders[finds[i].toString().charAt(0)]=i+1;return orders};var regstr="^"+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){var ml=match.length;switch(match.charAt(0).toLowerCase()){case "h":return ml===
1?"(\\d?\\d)":"(\\d{"+ml+"})";case "m":return ml===1?"(\\d?\\d)":"(\\d{"+ml+"})";case "s":return ml===1?"(\\d?\\d)":"(\\d{"+ml+"})";case "l":return"(\\d?\\d?\\d)";case "c":return"(\\d?\\d?\\d)";case "z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case "t":return getPatternAmpm(o.amNames,o.pmNames);default:return"("+match.replace(/'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+")?"}}).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=getFormatPositions(f),ampm="",treg;treg=
s.match(new RegExp(regstr,"i"));var resTime={hour:0,minute:0,second:0,millisec:0,microsec:0};if(treg){if(order.t!==-1)if(treg[order.t]===undefined||treg[order.t].length===0){ampm="";resTime.ampm=""}else{ampm=$.inArray(treg[order.t].toUpperCase(),o.amNames)!==-1?"AM":"PM";resTime.ampm=o[ampm==="AM"?"amNames":"pmNames"][0]}if(order.h!==-1)if(ampm==="AM"&&treg[order.h]==="12")resTime.hour=0;else if(ampm==="PM"&&treg[order.h]!=="12")resTime.hour=parseInt(treg[order.h],10)+12;else resTime.hour=Number(treg[order.h]);
if(order.m!==-1)resTime.minute=Number(treg[order.m]);if(order.s!==-1)resTime.second=Number(treg[order.s]);if(order.l!==-1)resTime.millisec=Number(treg[order.l]);if(order.c!==-1)resTime.microsec=Number(treg[order.c]);if(order.z!==-1&&treg[order.z]!==undefined)resTime.timezone=$.timepicker.timezoneOffsetNumber(treg[order.z]);return resTime}return false};var looseParse=function(f,s,o){try{var d=new Date("2012-01-01 "+s);if(isNaN(d.getTime())){d=new Date("2012-01-01T"+s);if(isNaN(d.getTime())){d=new Date("01/01/2012 "+
s);if(isNaN(d.getTime()))throw"Unable to parse time with native Date: "+s;}}return{hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds(),millisec:d.getMilliseconds(),microsec:d.getMicroseconds(),timezone:d.getTimezoneOffset()*-1}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.timepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return false};if(typeof o.parse==="function")return o.parse(timeFormat,timeString,o);if(o.parse==="loose")return looseParse(timeFormat,timeString,
o);return strictParse(timeFormat,timeString,o)};$.datepicker.formatTime=function(format,time,options){options=options||{};options=$.extend({},$.timepicker._defaults,options);time=$.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);if(hour>11)ampmName=options.pmNames[0];tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(match){switch(match){case "HH":return("0"+hour).slice(-2);
case "H":return hour;case "hh":return("0"+convert24to12(hour)).slice(-2);case "h":return convert24to12(hour);case "mm":return("0"+time.minute).slice(-2);case "m":return time.minute;case "ss":return("0"+time.second).slice(-2);case "s":return time.second;case "l":return("00"+time.millisec).slice(-3);case "c":return("00"+time.microsec).slice(-3);case "z":return $.timepicker.timezoneOffsetString(time.timezone===null?options.timezone:time.timezone,false);case "Z":return $.timepicker.timezoneOffsetString(time.timezone===
null?options.timezone:time.timezone,true);case "T":return ampmName.charAt(0).toUpperCase();case "TT":return ampmName.toUpperCase();case "t":return ampmName.charAt(0).toLowerCase();case "tt":return ampmName.toLowerCase();default:return match.replace(/'/g,"")}});return tmptime};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._limitMinMaxDateTime(inst,true);inst.inline=
inst.stay_open=true;this._base_selectDate(id,dateStr);inst.inline=inst.stay_open=false;this._notifyChange(inst);this._updateDatepicker(inst)}else this._base_selectDate(id,dateStr)};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&$.datepicker._curInst!==inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!==input)return;if(typeof inst.stay_open!=="boolean"||inst.stay_open===
false){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");if(tp_inst)tp_inst._addTimePicker(inst)}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst)if($.datepicker._get(inst,"constrainInput")){var ampm=tp_inst.support.ampm,tz=tp_inst._defaults.showTimezone!==null?tp_inst._defaults.showTimezone:tp_inst.support.timezone,dateChars=
$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tz?tp_inst._defaults.timezoneList.join(""):"")+tp_inst._defaults.amNames.join("")+tp_inst._defaults.pmNames.join("")+dateChars,
chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!dateChars||datetimeChars.indexOf(chr)>-1)}return $.datepicker._base_doKeyPress(event)};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var altFormat=tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,date=this._getDate(inst),
formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=tp_inst._defaults.altTimeFormat!==null?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix;if(!tp_inst._defaults.timeOnly&&
!tp_inst._defaults.altFieldTimeOnly&&date!==null)if(tp_inst._defaults.altFormat)altFormattedDateTime=$.datepicker.formatDate(tp_inst._defaults.altFormat,date,formatCfg)+altSeparator+altFormattedDateTime;else altFormattedDateTime=tp_inst.formattedDate+altSeparator+altFormattedDateTime;$(altField).val(altFormattedDateTime)}}else $.datepicker._base_updateAlternate(inst)};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),
tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst)if(tp_inst._defaults.timeOnly&&inst.input.val()!==inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.timepicker.log(err)}return $.datepicker._base_doKeyUp(event)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var tp_inst=this._get(inst,"timepicker");selectLocalTimezone(tp_inst);var now=new Date;this._setTime(inst,
now);$(".ui-datepicker-today",$dp).click()};$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst)return;var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");if(tp_inst){inst.settings.showTimepicker=false;tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(inst)}};$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst)return;var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");
if(tp_inst){inst.settings.showTimepicker=true;tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst)}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour;tp_inst.minute=date?date.getMinutes():defaults.minute;tp_inst.second=date?date.getSeconds():defaults.second;tp_inst.millisec=date?date.getMilliseconds():defaults.millisec;tp_inst.microsec=
date?date.getMicroseconds():defaults.microsec;tp_inst._limitMinMaxDateTime(inst,true);tp_inst._onTimeChange();tp_inst._updateDateTime(inst)}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(!inst)return;var tp_inst=this._get(inst,"timepicker");if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date==="string"){tp_inst._parseTime(date,withDate);tp_date=new Date;tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);
tp_date.setMicroseconds(tp_inst.microsec)}else{tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}if(tp_date.toString()==="Invalid Date")tp_date=undefined;this._setTime(inst,tp_date)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target);if(!inst)return;if(typeof date==="string"){date=new Date(date);if(!date.getTime())$.timepicker.log("Error creating Date object from string.")}var tp_inst=
this._get(inst,"timepicker");var tp_date;if(date instanceof Date){tp_date=new Date(date.getTime());tp_date.setMicroseconds(date.getMicroseconds())}else tp_date=date;if(tp_inst){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null)tp_inst.timezone=tp_date.getTimezoneOffset()*-1;date=$.timepicker.timezoneAdjust(date,tp_inst.timezone);tp_date=$.timepicker.timezoneAdjust(tp_date,tp_inst.timezone)}this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,
tp_date,true)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(!inst)return;var tp_inst=this._get(inst,"timepicker");if(tp_inst){if(inst.lastVal===undefined)this._setDateFromField(inst,noDefault);var date=this._getDate(inst);if(date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec);date.setMicroseconds(tp_inst.microsec);
if(tp_inst.timezone!=null){if(!tp_inst.support.timezone&&tp_inst._defaults.timezone===null)tp_inst.timezone=date.getTimezoneOffset()*-1;date=$.timepicker.timezoneAdjust(date,tp_inst.timezone)}}return date}return this._base_getDateDatepicker(target,noDefault)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){if(err.indexOf(":")>=0){date=this._base_parseDate(format,value.substring(0,
value.length-(err.length-err.indexOf(":")-2)),settings);$.timepicker.log("Error parsing the date string: "+err+"\ndate string \x3d "+value+"\ndate format \x3d "+format)}else throw err;}return date};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._updateDateTime(inst);return tp_inst.$input.val()}return this._base_formatDate(inst)};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;
$.datepicker._optionDatepicker=function(target,name,value){var inst=this._getInst(target),name_clone;if(!inst)return null;var tp_inst=this._get(inst,"timepicker");if(tp_inst){var min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={},prop;if(typeof name==="string")if(name==="minDate"||name==="minDateTime")min=value;else if(name==="maxDate"||name==="maxDateTime")max=value;else if(name==="onSelect")onselect=value;else{if(overrides.hasOwnProperty(name)){if(typeof value==="undefined")return overrides[name];
fns[name]=value;name_clone={}}}else if(typeof name==="object"){if(name.minDate)min=name.minDate;else if(name.minDateTime)min=name.minDateTime;else if(name.maxDate)max=name.maxDate;else if(name.maxDateTime)max=name.maxDateTime;for(prop in overrides)if(overrides.hasOwnProperty(prop)&&name[prop])fns[prop]=name[prop]}for(prop in fns)if(fns.hasOwnProperty(prop)){overrides[prop]=fns[prop];if(!name_clone)name_clone=$.extend({},name);delete name_clone[prop]}if(name_clone&&isEmptyObject(name_clone))return;
if(min){if(min===0)min=new Date;else min=new Date(min);tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min}else if(max){if(max===0)max=new Date;else max=new Date(max);tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max}else if(onselect)tp_inst._defaults.onSelect=onselect}if(value===undefined)return this._base_optionDatepicker.call($.datepicker,target,name);return this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;
for(prop in obj)if(obj.hasOwnProperty(prop))return false;return true};var extendRemove=function(target,props){$.extend(target,props);for(var name in props)if(props[name]===null||props[name]===undefined)target[name]=props[name];return target};var detectSupport=function(timeFormat){var tf=timeFormat.replace(/'.*?'/g,"").toLowerCase(),isIn=function(f,t){return f.indexOf(t)!==-1?true:false};return{hour:isIn(tf,"h"),minute:isIn(tf,"m"),second:isIn(tf,"s"),millisec:isIn(tf,"l"),microsec:isIn(tf,"c"),timezone:isIn(tf,
"z"),ampm:isIn(tf,"t")&&isIn(timeFormat,"h"),iso8601:isIn(timeFormat,"Z")}};var convert24to12=function(hour){hour%=12;if(hour===0)hour=12;return String(hour)};var computeEffectiveSetting=function(settings,property){return settings&&settings[property]?settings[property]:$.timepicker._defaults[property]};var splitDateTime=function(dateTimeString,timeSettings){var separator=computeEffectiveSetting(timeSettings,"separator"),format=computeEffectiveSetting(timeSettings,"timeFormat"),timeParts=format.split(separator),
timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(allPartsLen>1)return{dateString:allParts.splice(0,allPartsLen-timePartsLen).join(separator),timeString:allParts.splice(0,timePartsLen).join(separator)};return{dateString:dateTimeString,timeString:""}};var parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,parts,parsedTime;parts=splitDateTime(dateTimeString,timeSettings);date=$.datepicker._base_parseDate(dateFormat,
parts.dateString,dateSettings);if(parts.timeString==="")return{date:date};parsedTime=$.datepicker.parseTime(timeFormat,parts.timeString,timeSettings);if(!parsedTime)throw"Wrong time format";return{date:date,timeObj:parsedTime}};var selectLocalTimezone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){var now=date||new Date;tp_inst.timezone_select.val(-now.getTimezoneOffset())}};$.timepicker=new Timepicker;$.timepicker.timezoneOffsetString=function(tzMinutes,iso8601){if(isNaN(tzMinutes)||
tzMinutes>840||tzMinutes<-720)return tzMinutes;var off=tzMinutes,minutes=off%60,hours=(off-minutes)/60,iso=iso8601?":":"",tz=(off>=0?"+":"-")+("0"+Math.abs(hours)).slice(-2)+iso+("0"+Math.abs(minutes)).slice(-2);if(tz==="+00:00")return"Z";return tz};$.timepicker.timezoneOffsetNumber=function(tzString){var normalized=tzString.toString().replace(":","");if(normalized.toUpperCase()==="Z")return 0;if(!/^(\-|\+)\d{4}$/.test(normalized))return tzString;return(normalized.substr(0,1)==="-"?-1:1)*(parseInt(normalized.substr(1,
2),10)*60+parseInt(normalized.substr(3,2),10))};$.timepicker.timezoneAdjust=function(date,toTimezone){var toTz=$.timepicker.timezoneOffsetNumber(toTimezone);if(!isNaN(toTz))date.setMinutes(date.getMinutes()+-date.getTimezoneOffset()-toTz);return date};$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)};$.timepicker.datetimeRange=function(startTime,endTime,options){$.timepicker.handleRange("datetimepicker",startTime,endTime,
options)};$.timepicker.dateRange=function(startTime,endTime,options){$.timepicker.handleRange("datepicker",startTime,endTime,options)};$.timepicker.handleRange=function(method,startTime,endTime,options){options=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},options);function checkDates(changed,other){var startdt=startTime[method]("getDate"),enddt=endTime[method]("getDate"),changeddt=changed[method]("getDate");if(startdt!==null){var minDate=new Date(startdt.getTime()),maxDate=new Date(startdt.getTime());
minDate.setMilliseconds(minDate.getMilliseconds()+options.minInterval);maxDate.setMilliseconds(maxDate.getMilliseconds()+options.maxInterval);if(options.minInterval>0&&minDate>enddt)endTime[method]("setDate",minDate);else if(options.maxInterval>0&&maxDate<enddt)endTime[method]("setDate",maxDate);else if(startdt>enddt)other[method]("setDate",changeddt)}}function selected(changed,other,option){if(!changed.val())return;var date=changed[method].call(changed,"getDate");if(date!==null&&options.minInterval>
0){if(option==="minDate")date.setMilliseconds(date.getMilliseconds()+options.minInterval);if(option==="maxDate")date.setMilliseconds(date.getMilliseconds()-options.minInterval)}if(date.getTime)other[method].call(other,"option",option,date)}$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates($(this),endTime)},onSelect:function(selectedDateTime){selected($(this),endTime,"minDate")}},options,options.start));$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates($(this),
startTime)},onSelect:function(selectedDateTime){selected($(this),startTime,"maxDate")}},options,options.end));checkDates(startTime,endTime);selected(startTime,endTime,"minDate");selected(endTime,startTime,"maxDate");return $([startTime.get(0),endTime.get(0)])};$.timepicker.log=function(err){if(window.console)window.console.log(err)};$.timepicker._util={_extendRemove:extendRemove,_isEmptyObject:isEmptyObject,_convert24to12:convert24to12,_detectSupport:detectSupport,_selectLocalTimezone:selectLocalTimezone,
_computeEffectiveSetting:computeEffectiveSetting,_splitDateTime:splitDateTime,_parseDateTimeInternal:parseDateTimeInternal};if(!Date.prototype.getMicroseconds){Date.prototype.microseconds=0;Date.prototype.getMicroseconds=function(){return this.microseconds};Date.prototype.setMicroseconds=function(m){this.setMilliseconds(this.getMilliseconds()+Math.floor(m/1E3));this.microseconds=m%1E3;return this}}$.timepicker.version="1.4.1"})(jQuery);
/*
 jQuery UI Touch Punch 0.2.3

 Copyright 2011�2014, Dave Furfero
 Dual licensed under the MIT or GPL Version 2 licenses.

 Depends:
  jquery.ui.widget.js
  jquery.ui.mouse.js
*/
!function(a){function f(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var e,b=a.ui.mouse.prototype,c=b._mouseInit,d=b._mouseDestroy;b._touchStart=function(a){var b=this;!e&&b._mouseCapture(a.originalEvent.changedTouches[0])&&
(e=!0,b._touchMoved=!1,f(a,"mouseover"),f(a,"mousemove"),f(a,"mousedown"))},b._touchMove=function(a){e&&(this._touchMoved=!0,f(a,"mousemove"))},b._touchEnd=function(a){e&&(f(a,"mouseup"),f(a,"mouseout"),this._touchMoved||f(a,"click"),e=!1)},b._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),c.call(b)},b._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,
"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),d.call(b)}}}(jQuery);
(function($){$.fn.serializeObject=function(){var result={};var extend=function(i,element){var node=result[element.name];if("undefined"!==typeof node&&node!==null)if($.isArray(node))node.push(element.value);else result[element.name]=[node,element.value];else result[element.name]=element.value};$.each(this.serializeArray(),extend);return result}})(jQuery);
/*
 Copyright (c) 2011 by Jonas Mosbech - https://github.com/jmosbech/StickyTableHeaders
 MIT license info: https://github.com/jmosbech/StickyTableHeaders/blob/master/license.txt */
(function($,window,undefined){var name="stickyTableHeaders",id=0,defaults={fixedOffset:0,leftOffset:0,marginTop:0,objDocument:document,objHead:"head",objWindow:window,scrollableArea:window};function Plugin(el,options){var base=this;base.$el=$(el);base.el=el;base.id=id++;base.$el.bind("destroyed",$.proxy(base.teardown,base));base.$clonedHeader=null;base.$originalHeader=null;base.isSticky=false;base.hasBeenSticky=false;base.leftOffset=null;base.topOffset=null;base.init=function(){base.setOptions(options);
base.$el.each(function(){var $this=$(this);$this.css("padding",0);base.$originalHeader=$("thead:first",this);base.$clonedHeader=base.$originalHeader.clone();$this.trigger("clonedHeader."+name,[base.$clonedHeader]);base.$clonedHeader.addClass("tableFloatingHeader");base.$clonedHeader.css("display","none");base.$originalHeader.addClass("tableFloatingHeaderOriginal");base.$originalHeader.after(base.$clonedHeader)});base.updateWidth();base.toggleHeaders();base.bind()};base.destroy=function(){base.$el.unbind("destroyed",
base.teardown);base.teardown()};base.teardown=function(){if(base.isSticky)base.$originalHeader.css("position","static");$.removeData(base.el,"plugin_"+name);base.unbind();base.$clonedHeader.remove();base.$originalHeader.removeClass("tableFloatingHeaderOriginal");base.$originalHeader.css("visibility","visible");base.el=null;base.$el=null};base.bind=function(){base.$scrollableArea.on("scroll."+name,base.toggleHeaders);if(!base.isWindowScrolling){base.$window.on("scroll."+name+base.id,base.setPositionValues);
base.$window.on("resize."+name+base.id,base.toggleHeaders)}base.$scrollableArea.on("resize."+name,base.toggleHeaders);base.$scrollableArea.on("resize."+name,base.updateWidth)};base.unbind=function(){base.$scrollableArea.off("."+name,base.toggleHeaders);if(!base.isWindowScrolling){base.$window.off("."+name+base.id,base.setPositionValues);base.$window.off("."+name+base.id,base.toggleHeaders)}base.$scrollableArea.off("."+name,base.updateWidth)};base.toggleHeaders=function(){if(base.$el)base.$el.each(function(){var $this=
$(this),newLeft,newTopOffset=base.isWindowScrolling?isNaN(base.options.fixedOffset)?base.options.fixedOffset.outerHeight():base.options.fixedOffset:base.$scrollableArea.offset().top+(!isNaN(base.options.fixedOffset)?base.options.fixedOffset:0),offset=$this.offset(),scrollTop=base.$scrollableArea.scrollTop()+newTopOffset,scrollLeft=base.$scrollableArea.scrollLeft(),scrolledPastTop=base.isWindowScrolling?scrollTop>offset.top:newTopOffset>offset.top,notScrolledPastBottom=(base.isWindowScrolling?scrollTop:
0)<offset.top+$this.height()-base.$clonedHeader.height()-(base.isWindowScrolling?0:newTopOffset);if(scrolledPastTop&&notScrolledPastBottom){newLeft=offset.left-scrollLeft+base.options.leftOffset;base.$originalHeader.css({"position":"fixed","display":"table-header-group","margin-top":base.options.marginTop,"left":newLeft,"z-index":3});base.leftOffset=newLeft;base.topOffset=newTopOffset;base.$clonedHeader.css("display","");if(!base.isSticky){base.isSticky=true;base.updateWidth();$this.trigger("enabledStickiness."+
name);base.$originalHeader.css("bottom","auto");base.$originalHeader.css("display","table-header-group")}base.setPositionValues()}else if(base.isSticky){base.isSticky=false;base.resetWidth($("td,th",base.$clonedHeader),$("td,th",base.$originalHeader));$this.trigger("disabledStickiness."+name)}if(!notScrolledPastBottom){base.$originalHeader.css("display","table-header-group");base.$originalHeader.css("position","absolute");base.$originalHeader.css("top","auto");base.$originalHeader.css("bottom","0");
base.$originalHeader.css("left","0")}if(!scrolledPastTop){base.$originalHeader.css("display","none");base.$clonedHeader.css("display","")}})};base.setPositionValues=function(){var winScrollTop=base.$window.scrollTop(),winScrollLeft=base.$window.scrollLeft();if(!base.isSticky||winScrollTop<0||winScrollTop+base.$window.height()>base.$document.height()||winScrollLeft<0||winScrollLeft+base.$window.width()>base.$document.width())return;base.$originalHeader.css({"top":base.topOffset-(base.isWindowScrolling?
0:winScrollTop),"left":base.leftOffset-(base.isWindowScrolling?0:winScrollLeft)})};base.updateWidth=function(){if(!base.isSticky)return;if(!base.$originalHeaderCells)base.$originalHeaderCells=$("th,td",base.$originalHeader);if(!base.$clonedHeaderCells)base.$clonedHeaderCells=$("th,td",base.$clonedHeader);var cellWidths=base.getWidth(base.$clonedHeaderCells);base.setWidth(cellWidths,base.$clonedHeaderCells,base.$originalHeaderCells);base.$originalHeader.css("width",base.$clonedHeader.width())};base.getWidth=
function($clonedHeaders){var widths=[];$clonedHeaders.each(function(index){var width,$this=$(this);if($this.css("box-sizing")==="border-box"){var boundingClientRect=$this[0].getBoundingClientRect();if(boundingClientRect.width)width=boundingClientRect.width;else width=boundingClientRect.right-boundingClientRect.left}else{var $origTh=$("th",base.$originalHeader);if($origTh.css("border-collapse")==="collapse")if(window.getComputedStyle)width=parseFloat(window.getComputedStyle(this,null).width);else{var leftPadding=
parseFloat($this.css("padding-left"));var rightPadding=parseFloat($this.css("padding-right"));var border=parseFloat($this.css("border-width"));width=$this.outerWidth()-leftPadding-rightPadding-border}else width=$this.width()}widths[index]=width});return widths};base.setWidth=function(widths,$clonedHeaders,$origHeaders){$clonedHeaders.each(function(index){var width=widths[index];$origHeaders.eq(index).css({"min-width":width,"max-width":width})})};base.resetWidth=function($clonedHeaders,$origHeaders){$clonedHeaders.each(function(index){var $this=
$(this);$origHeaders.eq(index).css({"min-width":$this.css("min-width"),"max-width":$this.css("max-width")})})};base.setOptions=function(options){base.options=$.extend({},defaults,options);base.$window=$(base.options.objWindow);base.$head=$(base.options.objHead);base.$document=$(base.options.objDocument);base.$scrollableArea=$(base.options.scrollableArea);base.isWindowScrolling=base.$scrollableArea[0]===base.$window[0]};base.updateOptions=function(options){base.setOptions(options);base.unbind();base.bind();
base.updateWidth();base.toggleHeaders()};base.init()}$.fn[name]=function(options){return this.each(function(){var instance=$.data(this,"plugin_"+name);if(instance)if(typeof options==="string")instance[options].apply(instance);else instance.updateOptions(options);else if(options!=="destroy")$.data(this,"plugin_"+name,new Plugin(this,options))})}})(jQuery,window);
/*
 jQuery Validation Plugin 1.11.1

 http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 http://docs.jquery.com/Plugins/Validation

 Copyright 2013 JÃ¶rn Zaefferer
 Released under the MIT license:
   http://www.opensource.org/licenses/mit-license.php
*/
(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console)console.warn("Nothing selected, can't validate, returning nothing.");return}var validator=$.data(this[0],"validator");if(validator)return validator;this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.validateDelegate(":submit","click",function(event){if(validator.settings.submitHandler)validator.submitButton=
event.target;if($(event.target).hasClass("cancel"))validator.cancelSubmit=true;if($(event.target).attr("formnovalidate")!==undefined)validator.cancelSubmit=true});this.submit(function(event){if(validator.settings.debug)event.preventDefault();function handle(){var hidden;if(validator.settings.submitHandler){if(validator.submitButton)hidden=$("\x3cinput type\x3d'hidden'/\x3e").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm);validator.settings.submitHandler.call(validator,
validator.currentForm,event);if(validator.submitButton)hidden.remove();return false}return true}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle()}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false}return handle()}else{validator.focusInvalid();return false}})}return validator},valid:function(){if($(this[0]).is("form"))return this.validate().form();else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid=valid&&
validator.element(this)});return valid}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value)});return result},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case "add":$.extend(existingRules,$.validator.normalizeRule(argument));
delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages)settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);break;case "remove":if(!argument){delete staticRules[element.name];return existingRules}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method]});return filtered}}var data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),
$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data)}return data}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=
form;this.init()};$.validator.format=function(source,params){if(arguments.length===1)return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args)};if(arguments.length>2&&params.constructor!==Array)params=$.makeArray(arguments).slice(1);if(params.constructor!==Array)params=[params];$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})});return source};$.extend($.validator,{defaults:{messages:{},groups:{},
rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element,event){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight)this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(element)).hide()}},onfocusout:function(element,event){if(!this.checkable(element)&&
(element.name in this.submitted||!this.optional(element)))this.element(element)},onkeyup:function(element,event){if(event.which===9&&this.elementValue(element)==="")return;else if(element.name in this.submitted||element===this.lastElement)this.element(element)},onclick:function(element,event){if(element.name in this.submitted)this.element(element);else if(element.parentNode.name in this.submitted)this.element(element.parentNode)},highlight:function(element,errorClass,validClass){if(element.type===
"radio")this.findByName(element.name).addClass(errorClass).removeClass(validClass);else $(element).addClass(errorClass).removeClass(validClass)},unhighlight:function(element,errorClass,validClass){if(element.type==="radio")this.findByName(element.name).removeClass(errorClass).addClass(validClass);else $(element).removeClass(errorClass).addClass(validClass)}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",
email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),
range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);
this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=this.groups={};$.each(this.settings.groups,function(key,value){if(typeof value==="string")value=value.split(/\s/);$.each(value,function(index,name){groups[name]=key})});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,
"");if(validator.settings[eventType])validator.settings[eventType].call(validator,this[0],event)}$(this.currentForm).validateDelegate(":text, [type\x3d'password'], [type\x3d'file'], select, textarea, "+"[type\x3d'number'], [type\x3d'search'] ,[type\x3d'tel'], [type\x3d'url'], "+"[type\x3d'email'], [type\x3d'datetime'], [type\x3d'date'], [type\x3d'month'], "+"[type\x3d'week'], [type\x3d'time'], [type\x3d'datetime-local'], "+"[type\x3d'range'], [type\x3d'color'] ","focusin focusout keyup",delegate).validateDelegate("[type\x3d'radio'], [type\x3d'checkbox'], select, option",
"click",delegate);if(this.settings.invalidHandler)$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid())$(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++)this.check(elements[i]);return this.valid()},
element:function(element){element=this.validationTargetFor(this.clean(element));this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element)!==false;if(result)delete this.invalid[element.name];else this.invalid[element.name]=true;if(!this.numberOfInvalids())this.toHide=this.toHide.add(this.containers);this.showErrors();return result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors)this.errorList.push({message:errors[name],
element:this.findByName(name)[0]});this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}if(this.settings.showErrors)this.settings.showErrors.call(this,this.errorMap,this.errorList);else this.defaultShowErrors()},resetForm:function(){if($.fn.resetForm)$(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},
objectLength:function(obj){var count=0;for(var i in obj)count++;return count},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,
function(n){return n.element.name===lastActive.name}).length===1&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&validator.settings.debug&&window.console)console.error("%o has no name assigned",this);if(this.name in rulesCache||!validator.objectLength($(this).rules())){if(this.name in rulesCache&&!Swedbank.isProduction)console.warn("%o is already cached",
this);return false}rulesCache[this.name]=true;return true})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.replace(" ",".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset();
this.toHide=this.errorsFor(element)},elementValue:function(element){var type=$(element).attr("type"),val=$(element).val();if(type==="radio"||type==="checkbox")return $("input[name\x3d'"+$(element).attr("name")+"']:checked").val();if(typeof val==="string")return val.replace(/\r/g,"");return val},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules();var dependencyMismatch=false;var val=this.elementValue(element);var result;for(var method in rules){var rule=
{method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"){dependencyMismatch=true;continue}dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return}if(!result){this.formatAndAdd(element,rule);return false}}catch(e){if(this.settings.debug&&window.console)console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",
e);throw e;}}if(dependencyMismatch)return;if(this.objectLength(rules))this.successList.push(element);return true},customDataMessage:function(element,method){return $(element).data("msg-"+method.toLowerCase())||element.attributes&&$(element).attr("data-msg-"+method.toLowerCase())},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++)if(arguments[i]!==undefined)return arguments[i];
return undefined},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"\x3cstrong\x3eWarning: No message defined for "+element.name+"\x3c/strong\x3e")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function")message=message.call(this,rule.parameters,
element);else if(theregex.test(message))message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters);this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message},addWrapper:function(toToggle){if(this.settings.wrapper)toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));return toToggle},defaultShowErrors:function(){var i,elements;for(i=0;this.errorList[i];i++){var error=this.errorList[i];if(this.settings.highlight)this.settings.highlight.call(this,
error.element,this.settings.errorClass,this.settings.validClass);this.showLabel(error.element,error.message)}if(this.errorList.length)this.toShow=this.toShow.add(this.containers);if(this.settings.success)for(i=0;this.successList[i];i++)this.showLabel(this.successList[i]);if(this.settings.unhighlight)for(i=0,elements=this.validElements();elements[i];i++)this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();
this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass(this.settings.validClass).addClass(this.settings.errorClass);label.html(message)}else{label=$("\x3c"+this.settings.errorElement+"\x3e").attr("for",this.idOrName(element)).addClass(this.settings.errorClass).html(message||
"");if(this.settings.wrapper)label=label.hide().show().wrap("\x3c"+this.settings.wrapper+"/\x3e").parent();if(!this.labelContainer.append(label).length)if(this.settings.errorPlacement)this.settings.errorPlacement(label,$(element));else label.insertAfter(element)}if(!message&&this.settings.success){label.text("");if(typeof this.settings.success==="string")label.addClass(this.settings.success);else this.settings.success(label,element)}this.toShow=this.toShow.add(label)},errorsFor:function(element){var name=
this.idOrName(element);return this.errors().filter(function(){return $(this).attr("for")===name})},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){if(this.checkable(element))element=this.findByName(element.name).not(this.settings.ignore)[0];return element},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name\x3d'"+
name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case "select":return $("option:selected",element).length;case "input":if(this.checkable(element))return this.findByName(element.name).filter(":checked").length}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true},dependTypes:{"boolean":function(param,element){return param},"string":function(param,element){return!!$(param,element.form).length},
"function":function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&
this.form()){$(this.currentForm).submit();this.formSubmitted=false}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},
number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String)this.classRuleSettings[className]=rules;else $.extend(this.classRuleSettings,className)},classRules:function(element){var rules={};var classes=$(element).attr("class");if(classes)$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings)$.extend(rules,$.validator.classRuleSettings[this])});return rules},attributeRules:function(element){var rules=
{};var $element=$(element);var type=$element[0].getAttribute("type");for(var method in $.validator.methods){var value;if(method==="required"){value=$element.get(0).getAttribute(method);if(value==="")value=true;value=!!value}else value=$element.attr(method);if(/min|max/.test(method)&&(type===null||/number|range|text/.test(type)))value=Number(value);if(value)rules[method]=value;else if(type===method&&type!=="range")rules[method]=true}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength))delete rules.maxlength;
return rules},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods){value=$element.data("rule-"+method.toLowerCase());if(value!==undefined)rules[method]=value}return rules},staticRules:function(element){var rules={};var validator=$.data(element.form,"validator");if(validator.settings.rules)rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};return rules},normalizeRules:function(rules,element){$.each(rules,function(prop,
val){if(val===false){delete rules[prop];return}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case "string":keepRule=!!$(val.depends,element.form).length;break;case "function":keepRule=val.depends.call(element,element);break}if(keepRule)rules[prop]=val.param!==undefined?val.param:true;else delete rules[prop]}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter});$.each(["minlength","maxlength"],function(){if(rules[this])rules[this]=
Number(rules[this])});$.each(["rangelength","range"],function(){var parts;if(rules[this])if($.isArray(rules[this]))rules[this]=[Number(rules[this][0]),Number(rules[this][1])];else if(typeof rules[this]==="string"){parts=rules[this].split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])]}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];
delete rules.minlength;delete rules.maxlength}}return rules},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true});data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3)$.validator.addClassRules(name,$.validator.normalizeRule(name))},methods:{required:function(value,element,
param){if(!this.depend(param,element))return"dependency-mismatch";if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0}if(this.checkable(element))return this.getLength(value,element)>0;return $.trim(value).length>0},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value)},
url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},
date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test((new Date(value)).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^[1-9]\d*(\.\d+)?$/.test(value)},creditcard:function(value,element){if(this.optional(element))return"dependency-mismatch";
if(/[^0-9 \-]+/.test(value))return false;var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven)if((nDigit*=2)>9)nDigit-=9;nCheck+=nDigit;bEven=!bEven}return nCheck%10===0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?
value.length:this.getLength($.trim(value),element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||
value>=param[0]&&value<=param[1]},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout)target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()});return value===target.val()},remote:function(value,element,param){if(this.optional(element))return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])this.settings.messages[element.name]={};previous.originalMessage=this.settings.messages[element.name].remote;
this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(previous.old===value)return previous.valid;previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true||response==="true";
if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);delete validator.invalid[element.name];validator.showErrors()}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.invalid[element.name]=true;validator.showErrors(errors)}previous.valid=valid;validator.stopRequest(element,valid)}},
param));return"pending"}}});$.format=$.validator.format})(jQuery);
(function($){var pendingRequests={};if($.ajaxPrefilter)$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port])pendingRequests[port].abort();pendingRequests[port]=xhr}});else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port])pendingRequests[port].abort();pendingRequests[port]=ajax.apply(this,
arguments);return pendingRequests[port]}return ajax.apply(this,arguments)}}})(jQuery);(function($){$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate))return handler.apply(target,arguments)})}})})(jQuery);
var validationMessages={EST:{required:"See v\u00e4li peab olema t\u00e4idetud.",maxlength:jQuery.validator.format("Palun sisestage v\u00e4hem kui {0} t\u00e4hem\u00e4rki."),minlength:jQuery.validator.format("Palun sisestage v\u00e4hemalt {0} t\u00e4hem\u00e4rki."),rangelength:jQuery.validator.format("Palun sisestage v\u00e4\u00e4rtus vahemikus {0} kuni {1} t\u00e4hem\u00e4rki."),email:"Palun sisestage korrektne e-maili aadress.",url:"Palun sisestage korrektne URL.",date:"Palun sisestage korrektne kuup\u00e4ev.",
dateISO:"Palun sisestage korrektne kuup\u00e4ev (YYYY-MM-DD).",number:"Palun sisestage korrektne number.",digits:"Palun sisestage ainult numbreid.",equalTo:"Palun sisestage sama v\u00e4\u00e4rtus uuesti.",range:jQuery.validator.format("Palun sisestage v\u00e4\u00e4rtus vahemikus {0} kuni {1}."),max:jQuery.validator.format("Palun sisestage v\u00e4\u00e4rtus, mis on v\u00e4iksem v\u00f5i v\u00f5rdne arvuga {0}."),min:jQuery.validator.format("Palun sisestage v\u00e4\u00e4rtus, mis on suurem v\u00f5i v\u00f5rdne arvuga {0}."),
creditcard:"Palun sisestage korrektne krediitkaardi number.",time:"Palun sisestage korrektne kellaaeg."},LAT:{required:"\u0160is lauks ir oblig\u0101ts.",remote:"L\u016bdzu, p\u0101rbaudiet \u0161o lauku.",email:"L\u016bdzu, ievadiet der\u012bgu e-pasta adresi.",url:"L\u016bdzu, ievadiet der\u012bgu URL adresi.",date:"L\u016bdzu, ievadiet der\u012bgu datumu.",dateISO:"L\u016bdzu, ievadiet der\u012bgu datumu (ISO).",number:"L\u016bdzu, ievadiet der\u012bgu numuru.",digits:"L\u016bdzu, ievadiet tikai ciparus.",
creditcard:"L\u016bdzu, ievadiet der\u012bgu kred\u012btkartes numuru.",equalTo:"L\u016bdzu, ievadiet to pa\u0161u v\u0113lreiz.",extension:"L\u016bdzu, ievadiet v\u0113rt\u012bbu ar der\u012bgu papla\u0161in\u0101jumu.",maxlength:jQuery.validator.format("L\u016bdzu, ievadiet ne vair\u0101k k\u0101 {0} rakstz\u012bmes."),minlength:jQuery.validator.format("L\u016bdzu, ievadiet vismaz {0} rakstz\u012bmes."),rangelength:jQuery.validator.format("L\u016bdzu ievadiet {0} l\u012bdz {1} rakstz\u012bmes."),
range:jQuery.validator.format("L\u016bdzu, ievadiet skaitli no {0} l\u012bdz {1}."),max:jQuery.validator.format("L\u016bdzu, ievadiet skaitli, kur\u0161 ir maz\u0101ks vai vien\u0101ds ar {0}."),min:jQuery.validator.format("L\u016bdzu, ievadiet skaitli, kur\u0161 ir liel\u0101ks vai vien\u0101ds ar {0}."),time:"Please enter a valid time."},LIT:{required:"\u0160is laukas yra privalomas.",remote:"Pra\u0161ome pataisyti \u0161\u012f lauk\u0105.",email:"Pra\u0161ome \u012fvesti teising\u0105 elektroninio pa\u0161to adres\u0105.",
url:"Pra\u0161ome \u012fvesti teising\u0105 adres\u0105.",date:"Pra\u0161ome \u012fvesti teising\u0105 dat\u0105.",dateISO:"Pra\u0161ome \u012fvesti teising\u0105 dat\u0105 (ISO).",number:"Pra\u0161ome \u012fvesti teising\u0105 skai\u010di\u0173.",digits:"Pra\u0161ome naudoti tik skaitmenis.",creditcard:"Pra\u0161ome \u012fvesti teising\u0105 kreditin\u0117s kortel\u0117s numer\u012f.",equalTo:"Pra\u0161ome \u012fvest\u012f t\u0105 pa\u010di\u0105 reik\u0161m\u0119 dar kart\u0105.",extension:"Pra\u0161ome \u012fvesti reik\u0161m\u0119 su teisingu pl\u0117tiniu.",
maxlength:jQuery.validator.format("Pra\u0161ome \u012fvesti ne daugiau kaip {0} simbolius(-\u0173)."),minlength:jQuery.validator.format("Pra\u0161ome \u012fvesti bent {0} simbolius."),rangelength:jQuery.validator.format("Pra\u0161ome \u012fvesti reik\u0161mes, kuri\u0173 ilgis nuo {0} iki {1} simboli\u0173."),range:jQuery.validator.format("Pra\u0161ome \u012fvesti reik\u0161m\u0119 intervale nuo {0} iki {1}."),max:jQuery.validator.format("Pra\u0161ome \u012fvesti reik\u0161m\u0119, ma\u017eesn\u0119 arba lygi\u0105 {0}."),
min:jQuery.validator.format("Pra\u0161ome \u012fvesti reik\u0161m\u0119, didesn\u0119 arba lygi\u0105 {0}."),time:"Please enter a valid time."},RUS:{required:"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u044c.",remote:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.",
email:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b.",url:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 URL.",date:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0434\u0430\u0442\u0443.",
dateISO:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0443\u044e \u0434\u0430\u0442\u0443 \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 ISO.",number:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e.",digits:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u043e\u0434\u0438\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0446\u0438\u0444\u0440\u044b.",
creditcard:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043a\u0440\u0435\u0434\u0438\u0442\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u044b.",equalTo:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0430\u043a\u043e\u0435 \u0436\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.",
extension:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0441 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\u043c.",maxlength:jQuery.validator.format("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 {0} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."),
minlength:jQuery.validator.format("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 {0} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."),rangelength:jQuery.validator.format("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u0438\u043d\u043e\u0439 \u043e\u0442 {0} \u0434\u043e {1} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."),
range:jQuery.validator.format("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e \u043e\u0442 {0} \u0434\u043e {1}."),max:jQuery.validator.format("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e, \u043c\u0435\u043d\u044c\u0448\u0435\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e\u0435 {0}."),min:jQuery.validator.format("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e, \u0431\u043e\u043b\u044c\u0448\u0435\u0435 \u0438\u043b\u0438 \u0440\u0430\u0432\u043d\u043e\u0435 {0}."),
time:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0432\u0440\u0435\u043c\u044f."},ENG:{required:"This field is required",remote:"Please fix this field",email:"Please enter a valid email address",url:"Please enter a valid URL",date:"Please enter a valid date",dateISO:"Please enter a valid date (ISO)",number:"Please enter a valid number",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number",
equalTo:"Please enter the same value again",extension:"Please choose file with right extension",maxlength:jQuery.validator.format("Please enter no more than {0} characters"),minlength:jQuery.validator.format("Please enter at least {0} characters"),rangelength:jQuery.validator.format("Please enter a value between {0} and {1} characters long"),range:jQuery.validator.format("Please enter a value between {0} and {1}"),max:jQuery.validator.format("Please enter a value less than or equal to {0}"),min:jQuery.validator.format("Please enter a value greater than or equal to {0}"),
time:"Please enter a valid time.",checkboxes:"Choose at least one",checkboxes2:"Choose at least one"}};
!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function($){var caretTimeoutId,ua=navigator.userAgent,iPhone=/iphone/i.test(ua),chrome=/chrome/i.test(ua),android=/android/i.test(ua);$.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},$.fn.extend({caret:function(begin,end){var range;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof begin?
(end="number"==typeof end?end:begin,this.each(function(){this.setSelectionRange?this.setSelectionRange(begin,end):this.createTextRange&&(range=this.createTextRange(),range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select())})):(this[0].setSelectionRange?(begin=this[0].selectionStart,end=this[0].selectionEnd):document.selection&&document.selection.createRange&&(range=document.selection.createRange(),begin=0-range.duplicate().moveStart("character",-1E5),end=
begin+range.text.length),{begin:begin,end:end})},unmask:function(){return this.trigger("unmask")},mask:function(mask,settings){var input,defs,tests,partialPosition,firstNonMaskPos,lastRequiredNonMaskPos,len,oldVal;if(!mask&&this.length>0){input=$(this[0]);var fn=input.data($.mask.dataName);return fn?fn():void 0}return settings=$.extend({autoclear:$.mask.autoclear,placeholder:$.mask.placeholder,completed:null},settings),defs=$.mask.definitions,tests=[],partialPosition=len=mask.length,firstNonMaskPos=
null,$.each(mask.split(""),function(i,c){"?"==c?(len--,partialPosition=i):defs[c]?(tests.push(new RegExp(defs[c])),null===firstNonMaskPos&&(firstNonMaskPos=tests.length-1),partialPosition>i&&(lastRequiredNonMaskPos=tests.length-1)):tests.push(null)}),this.trigger("unmask").each(function(){function tryFireCompleted(){if(settings.completed){for(var i=firstNonMaskPos;lastRequiredNonMaskPos>=i;i++)if(tests[i]&&buffer[i]===getPlaceholder(i))return;settings.completed.call(input)}}function getPlaceholder(i){return settings.placeholder.charAt(i<
settings.placeholder.length?i:0)}function seekNext(pos){for(;++pos<len&&!tests[pos];);return pos}function seekPrev(pos){for(;--pos>=0&&!tests[pos];);return pos}function shiftL(begin,end){var i,j;if(!(0>begin)){for(i=begin,j=seekNext(end);len>i;i++)if(tests[i]){if(!(len>j&&tests[i].test(buffer[j])))break;buffer[i]=buffer[j],buffer[j]=getPlaceholder(j),j=seekNext(j)}writeBuffer(),input.caret(Math.max(firstNonMaskPos,begin))}}function shiftR(pos){var i,c,j,t;for(i=pos,c=getPlaceholder(pos);len>i;i++)if(tests[i]){if(j=
seekNext(i),t=buffer[i],buffer[i]=c,!(len>j&&tests[j].test(t)))break;c=t}}function androidInputEvent(){var curVal=input.val(),pos=input.caret();if(oldVal&&oldVal.length&&oldVal.length>curVal.length){for(checkVal(!0);pos.begin>0&&!tests[pos.begin-1];)pos.begin--;if(0===pos.begin)for(;pos.begin<firstNonMaskPos&&!tests[pos.begin];)pos.begin++;input.caret(pos.begin,pos.begin)}else{for(checkVal(!0);pos.begin<len&&!tests[pos.begin];)pos.begin++;input.caret(pos.begin,pos.begin)}tryFireCompleted()}function blurEvent(){checkVal(),
input.val()!=focusText&&input.change()}function keydownEvent(e){if(!input.prop("readonly")){var pos,begin,end,k=e.which||e.keyCode;oldVal=input.val(),8===k||46===k||iPhone&&127===k?(pos=input.caret(),begin=pos.begin,end=pos.end,end-begin===0&&(begin=46!==k?seekPrev(begin):end=seekNext(begin-1),end=46===k?seekNext(end):end),clearBuffer(begin,end),shiftL(begin,end-1),e.preventDefault()):13===k?blurEvent.call(this,e):27===k&&(input.val(focusText),input.caret(0,checkVal()),e.preventDefault())}}function keypressEvent(e){if(!input.prop("readonly")){var p,
c,next,k=e.which||e.keyCode,pos=input.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||32>k)&&k&&13!==k){if(pos.end-pos.begin!==0&&(clearBuffer(pos.begin,pos.end),shiftL(pos.begin,pos.end-1)),p=seekNext(pos.begin-1),len>p&&(c=String.fromCharCode(k),tests[p].test(c))){if(shiftR(p),buffer[p]=c,writeBuffer(),next=seekNext(p),android){var proxy=function(){$.proxy($.fn.caret,input,next)()};setTimeout(proxy,0)}else input.caret(next);pos.begin<=lastRequiredNonMaskPos&&tryFireCompleted()}e.preventDefault()}}}
function clearBuffer(start,end){var i;for(i=start;end>i&&len>i;i++)tests[i]&&(buffer[i]=getPlaceholder(i))}function writeBuffer(){input.val(buffer.join(""))}function checkVal(allow){var i,c,pos,test=input.val(),lastMatch=-1;for(i=0,pos=0;len>i;i++)if(tests[i]){for(buffer[i]=getPlaceholder(i);pos++<test.length;)if(c=test.charAt(pos-1),tests[i].test(c)){buffer[i]=c,lastMatch=i;break}if(pos>test.length){clearBuffer(i+1,len);break}}else buffer[i]===test.charAt(pos)&&pos++,partialPosition>i&&(lastMatch=
i);return allow?writeBuffer():partialPosition>lastMatch+1?settings.autoclear||buffer.join("")===defaultBuffer?(input.val()&&input.val(""),clearBuffer(0,len)):writeBuffer():(writeBuffer(),input.val(input.val().substring(0,lastMatch+1))),partialPosition?i:firstNonMaskPos}var input=$(this),buffer=$.map(mask.split(""),function(c,i){return"?"!=c?defs[c]?getPlaceholder(i):c:void 0}),defaultBuffer=buffer.join(""),focusText=input.val();input.data($.mask.dataName,function(){return $.map(buffer,function(c,
i){return tests[i]&&c!=getPlaceholder(i)?c:null}).join("")}),input.one("unmask",function(){input.off(".mask").removeData($.mask.dataName)}).on("focus.mask",function(){if(!input.prop("readonly")){clearTimeout(caretTimeoutId);var pos;focusText=input.val(),pos=checkVal(),caretTimeoutId=setTimeout(function(){input.get(0)===document.activeElement&&(writeBuffer(),pos==mask.replace("?","").length?input.caret(0,pos):input.caret(pos))},10)}}).on("blur.mask",blurEvent).on("keydown.mask",keydownEvent).on("keypress.mask",
keypressEvent).on("input.mask paste.mask",function(){if(!(!!window.MSInputMethodContext&&!!document.documentMode))input.prop("readonly")||setTimeout(function(){var pos=checkVal(!0);input.caret(pos),tryFireCompleted()},0)}),chrome&&android&&input.off("input.mask").on("input.mask",androidInputEvent),checkVal()})}})});
var jqueryValidator,uiValidator;
function JQueryValidator(selector){return jQuery(selector).validate({ignore:":hidden,.validation-ignore",errorClass:"validation-message",errorElement:"div",errorPlacement:function(error,element){if(element.is(":checkbox, :radio"))element.parent().addClass("validation-error");else if(element.hasClass("date-field")&&element.hasClass("validation-ignore"))return false;else if(element.parent().is(".period-selection-component")){var $div=jQuery("\x3cdiv/\x3e",{"class":"validation-error"}).append(error);element.parents(".period-selection-component").after($div)}else element.parent().addClass("validation-error").append(error)},
success:function(label,element){if(jQuery(element).parent().find(".validation-message:not(:empty)").length===0)jQuery(element).parent().removeClass("validation-error");else jQuery(element).parent().addClass("validation-error")},highlight:function(element){jQuery(element).parent().addClass("validation-error")},unhighlight:function(element){if(jQuery(element).parent().find(".validation-message:not(:empty)").length===0){jQuery(element).parent().removeClass("validation-error");jQuery(element).next(".validation-message").remove()}else jQuery(element).parent().addClass("validation-error")}})}
function resolveGlobalFormValidator(form){var formToValidate=form||document.mainForm;if(!formToValidate)return null;UI.whenDOMReady(function(){if(formToValidate.classList.contains("ui-validation")&&typeof SharedComponents!=="undefined"){uiValidator=new SharedComponents.FormValidator(formToValidate);return uiValidator}});if(formToValidate.classList.contains("jquery-form-validation")){jQuery.extend(jQuery.validator.messages,validationMessages[Swedbank.language]);jqueryValidator=new JQueryValidator(".jquery-form-validation");
return jqueryValidator}}if(!Swedbank.isUiSpaEnabled)jQuery(function(){resolveGlobalFormValidator()});
SharedComponents.FormValidator.addCustomRemoteValidation=function(ruleSuffix,params,options,labelFn){resolveGlobalFormValidator();var validationRule=ruleSuffix+"Validation";var customValidationRuleName="_"+validationRule;var _labelFn=labelFn;uiValidator.addCustomRule(validationRule,{suffix:ruleSuffix,rule:function(elem){elem.validity[customValidationRuleName]=false;var _params=typeof params==="function"?params():params;makeAjaxRequest(document.mainForm,_params,function(response){var responseJSON=
response.responseJSON;if(response.status===200&&!responseJSON.exception&&!responseJSON.errors.length){elem.validity[customValidationRuleName]=true;elem.setCustomValidity("")}else{elem.validity[customValidationRuleName]=false;elem.setCustomValidity(_labelFn(responseJSON.errors[0]));uiValidator.addForcedErrorForElement(elem,_labelFn(responseJSON.errors[0]),"customError")}},options);return elem.validity[customValidationRuleName]}.bind(uiValidator)})};
/*
 Sizzle CSS Selector Engine v1.10.18
 http://sizzlejs.com/

 Copyright 2013 jQuery Foundation, Inc. and other contributors
 Released under the MIT license
 http://jquery.org/license

 Date: 2014-02-05
*/
var Prototype={Version:"1.7.3",Browser:function(){var ua=navigator.userAgent;var isOpera=Object.prototype.toString.call(window.opera)=="[object Opera]";return{IE:!!window.attachEvent&&!isOpera,Opera:isOpera,WebKit:ua.indexOf("AppleWebKit/")>-1,Gecko:ua.indexOf("Gecko")>-1&&ua.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile/.test(ua)}}(),BrowserFeatures:{XPath:!!document.evaluate,SelectorsAPI:!!document.querySelector,ElementExtensions:function(){var constructor=window.Element||window.HTMLElement;
return!!(constructor&&constructor.prototype)}(),SpecificElementExtensions:function(){if(typeof window.HTMLDivElement!=="undefined")return true;var div=document.createElement("div"),form=document.createElement("form"),isSupported=false;if(div["__proto__"]&&div["__proto__"]!==form["__proto__"])isSupported=true;div=form=null;return isSupported}()},ScriptFragment:"\x3cscript[^\x3e]*\x3e([\\S\\s]*?)\x3c/script\\s*\x3e",JSONFilter:/^\/\*-secure-([\s\S]*)\*\/\s*$/,emptyFunction:function(){},K:function(x){return x}};
if(Prototype.Browser.MobileSafari)Prototype.BrowserFeatures.SpecificElementExtensions=false;
var Class=function(){var IS_DONTENUM_BUGGY=function(){for(var p in{toString:1})if(p==="toString")return false;return true}();function subclass(){}function create(){var parent=null,properties=$A(arguments);if(Object.isFunction(properties[0]))parent=properties.shift();function klass(){this.initialize.apply(this,arguments)}Object.extend(klass,Class.Methods);klass.superclass=parent;klass.subclasses=[];if(parent){subclass.prototype=parent.prototype;klass.prototype=new subclass;parent.subclasses.push(klass)}for(var i=
0,length=properties.length;i<length;i++)klass.addMethods(properties[i]);if(!klass.prototype.initialize)klass.prototype.initialize=Prototype.emptyFunction;klass.prototype.constructor=klass;return klass}function addMethods(source){var ancestor=this.superclass&&this.superclass.prototype,properties=Object.keys(source);if(IS_DONTENUM_BUGGY){if(source.toString!=Object.prototype.toString)properties.push("toString");if(source.valueOf!=Object.prototype.valueOf)properties.push("valueOf")}for(var i=0,length=
properties.length;i<length;i++){var property=properties[i],value=source[property];if(ancestor&&Object.isFunction(value)&&value.argumentNames()[0]=="$super"){var method=value;value=function(m){return function(){return ancestor[m].apply(this,arguments)}}(property).wrap(method);value.valueOf=function(method){return function(){return method.valueOf.call(method)}}(method);value.toString=function(method){return function(){return method.toString.call(method)}}(method)}this.prototype[property]=value}return this}
return{create:create,Methods:{addMethods:addMethods}}}();
(function(){var _toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,NULL_TYPE="Null",UNDEFINED_TYPE="Undefined",BOOLEAN_TYPE="Boolean",NUMBER_TYPE="Number",STRING_TYPE="String",OBJECT_TYPE="Object",FUNCTION_CLASS="[object Function]",BOOLEAN_CLASS="[object Boolean]",NUMBER_CLASS="[object Number]",STRING_CLASS="[object String]",ARRAY_CLASS="[object Array]",DATE_CLASS="[object Date]",NATIVE_JSON_STRINGIFY_SUPPORT=window.JSON&&typeof JSON.stringify==="function"&&JSON.stringify(0)===
"0"&&typeof JSON.stringify(Prototype.K)==="undefined";var DONT_ENUMS=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var IS_DONTENUM_BUGGY=function(){for(var p in{toString:1})if(p==="toString")return false;return true}();function Type(o){switch(o){case null:return NULL_TYPE;case void 0:return UNDEFINED_TYPE}var type=typeof o;switch(type){case "boolean":return BOOLEAN_TYPE;case "number":return NUMBER_TYPE;case "string":return STRING_TYPE}return OBJECT_TYPE}
function extend(destination,source){for(var property in source)destination[property]=source[property];return destination}function inspect(object){try{if(isUndefined(object))return"undefined";if(object===null)return"null";return object.inspect?object.inspect():String(object)}catch(e){if(e instanceof RangeError)return"...";throw e;}}function toJSON(value){return Str("",{"":value},[])}function Str(key,holder,stack){var value=holder[key];if(Type(value)===OBJECT_TYPE&&typeof value.toJSON==="function")value=
value.toJSON(key);var _class=_toString.call(value);switch(_class){case NUMBER_CLASS:case BOOLEAN_CLASS:case STRING_CLASS:value=value.valueOf()}switch(value){case null:return"null";case true:return"true";case false:return"false"}var type=typeof value;switch(type){case "string":return value.inspect(true);case "number":return isFinite(value)?String(value):"null";case "object":for(var i=0,length=stack.length;i<length;i++)if(stack[i]===value)throw new TypeError("Cyclic reference to '"+value+"' in object");
stack.push(value);var partial=[];if(_class===ARRAY_CLASS){for(var i=0,length=value.length;i<length;i++){var str=Str(i,value,stack);partial.push(typeof str==="undefined"?"null":str)}partial="["+partial.join(",")+"]"}else{var keys=Object.keys(value);for(var i=0,length=keys.length;i<length;i++){var key=keys[i],str=Str(key,value,stack);if(typeof str!=="undefined")partial.push(key.inspect(true)+":"+str)}partial="{"+partial.join(",")+"}"}stack.pop();return partial}}function stringify(object){return JSON.stringify(object)}
function toQueryString(object){return $H(object).toQueryString()}function toHTML(object){return object&&object.toHTML?object.toHTML():String.interpret(object)}function keys(object){if(Type(object)!==OBJECT_TYPE)throw new TypeError;var results=[];for(var property in object)if(_hasOwnProperty.call(object,property))results.push(property);if(IS_DONTENUM_BUGGY)for(var i=0;property=DONT_ENUMS[i];i++)if(_hasOwnProperty.call(object,property))results.push(property);return results}function values(object){var results=
[];for(var property in object)results.push(object[property]);return results}function clone(object){return extend({},object)}function isElement(object){return!!(object&&object.nodeType==1)}function isArray(object){return _toString.call(object)===ARRAY_CLASS}var hasNativeIsArray=typeof Array.isArray=="function"&&Array.isArray([])&&!Array.isArray({});if(hasNativeIsArray)isArray=Array.isArray;function isHash(object){return object instanceof Hash}function isFunction(object){return _toString.call(object)===
FUNCTION_CLASS}function isString(object){return _toString.call(object)===STRING_CLASS}function isNumber(object){return _toString.call(object)===NUMBER_CLASS}function isDate(object){return _toString.call(object)===DATE_CLASS}function isUndefined(object){return typeof object==="undefined"}extend(Object,{extend:extend,inspect:inspect,toJSON:NATIVE_JSON_STRINGIFY_SUPPORT?stringify:toJSON,toQueryString:toQueryString,toHTML:toHTML,keys:Object.keys||keys,values:values,clone:clone,isElement:isElement,isArray:isArray,
isHash:isHash,isFunction:isFunction,isString:isString,isNumber:isNumber,isDate:isDate,isUndefined:isUndefined})})();
Object.extend(Function.prototype,function(){var slice=Array.prototype.slice;function update(array,args){var arrayLength=array.length,length=args.length;while(length--)array[arrayLength+length]=args[length];return array}function merge(array,args){array=slice.call(array,0);return update(array,args)}function argumentNames(){var names=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return names.length==1&&!names[0]?
[]:names}function bind(context){if(arguments.length<2&&Object.isUndefined(arguments[0]))return this;if(!Object.isFunction(this))throw new TypeError("The object is not callable.");var nop=function(){};var __method=this,args=slice.call(arguments,1);var bound=function(){var a=merge(args,arguments);var c=this instanceof bound?this:context;return __method.apply(c,a)};nop.prototype=this.prototype;bound.prototype=new nop;return bound}function bindAsEventListener(context){var __method=this,args=slice.call(arguments,
1);return function(event){var a=update([event||window.event],args);return __method.apply(context,a)}}function curry(){if(!arguments.length)return this;var __method=this,args=slice.call(arguments,0);return function(){var a=merge(args,arguments);return __method.apply(this,a)}}function delay(timeout){var __method=this,args=slice.call(arguments,1);timeout=timeout*1E3;return window.setTimeout(function(){return __method.apply(__method,args)},timeout)}function defer(){var args=update([.01],arguments);return this.delay.apply(this,
args)}function wrap(wrapper){var __method=this;return function(){var a=update([__method.bind(this)],arguments);return wrapper.apply(this,a)}}function methodize(){if(this._methodized)return this._methodized;var __method=this;return this._methodized=function(){var a=update([this],arguments);return __method.apply(null,a)}}var extensions={argumentNames:argumentNames,bindAsEventListener:bindAsEventListener,curry:curry,delay:delay,defer:defer,wrap:wrap,methodize:methodize};if(!Function.prototype.bind)extensions.bind=
bind;return extensions}());(function(proto){function toISOString(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).toPaddedString(2)+"-"+this.getUTCDate().toPaddedString(2)+"T"+this.getUTCHours().toPaddedString(2)+":"+this.getUTCMinutes().toPaddedString(2)+":"+this.getUTCSeconds().toPaddedString(2)+"Z"}function toJSON(){return this.toISOString()}if(!proto.toISOString)proto.toISOString=toISOString;if(!proto.toJSON)proto.toJSON=toJSON})(Date.prototype);RegExp.prototype.match=RegExp.prototype.test;
RegExp.escape=function(str){return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")};
var PeriodicalExecuter=Class.create({initialize:function(callback,frequency){this.callback=callback;this.frequency=frequency;this.currentlyExecuting=false;this.registerCallback()},registerCallback:function(){this.timer=setInterval(this.onTimerEvent.bind(this),this.frequency*1E3)},execute:function(){this.callback(this)},stop:function(){if(!this.timer)return;clearInterval(this.timer);this.timer=null},onTimerEvent:function(){if(!this.currentlyExecuting)try{this.currentlyExecuting=true;this.execute();
this.currentlyExecuting=false}catch(e){this.currentlyExecuting=false;throw e;}}});Object.extend(String,{interpret:function(value){return value==null?"":String(value)},specialChar:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\"}});
Object.extend(String.prototype,function(){var NATIVE_JSON_PARSE_SUPPORT=window.JSON&&typeof JSON.parse==="function"&&JSON.parse('{"test": true}').test;function prepareReplacement(replacement){if(Object.isFunction(replacement))return replacement;var template=new Template(replacement);return function(match){return template.evaluate(match)}}function isNonEmptyRegExp(regexp){return regexp.source&&regexp.source!=="(?:)"}function gsub(pattern,replacement){var result="",source=this,match;replacement=prepareReplacement(replacement);
if(Object.isString(pattern))pattern=RegExp.escape(pattern);if(!(pattern.length||isNonEmptyRegExp(pattern))){replacement=replacement("");return replacement+source.split("").join(replacement)+replacement}while(source.length>0){match=source.match(pattern);if(match&&match[0].length>0){result+=source.slice(0,match.index);result+=String.interpret(replacement(match));source=source.slice(match.index+match[0].length)}else result+=source,source=""}return result}function sub(pattern,replacement,count){replacement=
prepareReplacement(replacement);count=Object.isUndefined(count)?1:count;return this.gsub(pattern,function(match){if(--count<0)return match[0];return replacement(match)})}function scan(pattern,iterator){this.gsub(pattern,iterator);return String(this)}function truncate(length,truncation){length=length||30;truncation=Object.isUndefined(truncation)?"...":truncation;return this.length>length?this.slice(0,length-truncation.length)+truncation:String(this)}function strip(){return this.replace(/^\s+/,"").replace(/\s+$/,
"")}function stripTags(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?(\/)?>|<\/\w+>/gi,"")}function stripScripts(){return this.replace(new RegExp(Prototype.ScriptFragment,"img"),"")}function extractScripts(){var matchAll=new RegExp(Prototype.ScriptFragment,"img"),matchOne=new RegExp(Prototype.ScriptFragment,"im");return(this.match(matchAll)||[]).map(function(scriptTag){return(scriptTag.match(matchOne)||["",""])[1]})}function evalScripts(){return this.extractScripts().map(function(script){return eval(script)})}
function escapeHTML(){return this.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;")}function unescapeHTML(){return this.stripTags().replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&amp;/g,"\x26")}function toQueryParams(separator){var match=this.strip().match(/([^?#]*)(#.*)?$/);if(!match)return{};return match[1].split(separator||"\x26").inject({},function(hash,pair){if((pair=pair.split("\x3d"))[0]){var key=decodeURIComponent(pair.shift()),value=pair.length>1?pair.join("\x3d"):
pair[0];if(value!=undefined){value=value.gsub("+"," ");value=decodeURIComponent(value)}if(key in hash){if(!Object.isArray(hash[key]))hash[key]=[hash[key]];hash[key].push(value)}else hash[key]=value}return hash})}function toArray(){return this.split("")}function succ(){return this.slice(0,this.length-1)+String.fromCharCode(this.charCodeAt(this.length-1)+1)}function times(count){return count<1?"":(new Array(count+1)).join(this)}function camelize(){return this.replace(/-+(.)?/g,function(match,chr){return chr?
chr.toUpperCase():""})}function capitalize(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()}function underscore(){return this.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/-/g,"_").toLowerCase()}function dasherize(){return this.replace(/_/g,"-")}function inspect(useDoubleQuotes){var escapedString=this.replace(/[\x00-\x1f\\]/g,function(character){if(character in String.specialChar)return String.specialChar[character];
return"\\u00"+character.charCodeAt().toPaddedString(2,16)});if(useDoubleQuotes)return'"'+escapedString.replace(/"/g,'\\"')+'"';return"'"+escapedString.replace(/'/g,"\\'")+"'"}function unfilterJSON(filter){return this.replace(filter||Prototype.JSONFilter,"$1")}function isJSON(){var str=this;if(str.blank())return false;str=str.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@");str=str.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]");str=str.replace(/(?:^|:|,)(?:\s*\[)+/g,
"");return/^[\],:{}\s]*$/.test(str)}function evalJSON(sanitize){var json=this.unfilterJSON(),cx=/[\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff\u0000]/g;if(cx.test(json))json=json.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});try{if(!sanitize||json.isJSON())return eval("("+json+")")}catch(e){}throw new SyntaxError("Badly formed JSON string: "+this.inspect());}function parseJSON(){var json=this.unfilterJSON();
return JSON.parse(json)}function include(pattern){return this.indexOf(pattern)>-1}function startsWith(pattern,position){position=Object.isNumber(position)?position:0;return this.lastIndexOf(pattern,position)===position}function endsWith(pattern,position){pattern=String(pattern);position=Object.isNumber(position)?position:this.length;if(position<0)position=0;if(position>this.length)position=this.length;var d=position-pattern.length;return d>=0&&this.indexOf(pattern,d)===d}function empty(){return this==
""}function blank(){return/^\s*$/.test(this)}function interpolate(object,pattern){return(new Template(this,pattern)).evaluate(object)}return{gsub:gsub,sub:sub,scan:scan,truncate:truncate,strip:String.prototype.trim||strip,stripTags:stripTags,stripScripts:stripScripts,extractScripts:extractScripts,evalScripts:evalScripts,escapeHTML:escapeHTML,unescapeHTML:unescapeHTML,toQueryParams:toQueryParams,parseQuery:toQueryParams,toArray:toArray,succ:succ,times:times,camelize:camelize,capitalize:capitalize,
underscore:underscore,dasherize:dasherize,inspect:inspect,unfilterJSON:unfilterJSON,isJSON:isJSON,evalJSON:NATIVE_JSON_PARSE_SUPPORT?parseJSON:evalJSON,include:include,startsWith:String.prototype.startsWith||startsWith,endsWith:String.prototype.endsWith||endsWith,empty:empty,blank:blank,interpolate:interpolate}}());
var Template=Class.create({initialize:function(template,pattern){this.template=template.toString();this.pattern=pattern||Template.Pattern},evaluate:function(object){if(object&&Object.isFunction(object.toTemplateReplacements))object=object.toTemplateReplacements();return this.template.gsub(this.pattern,function(match){if(object==null)return match[1]+"";var before=match[1]||"";if(before=="\\")return match[2];var ctx=object,expr=match[3],pattern=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;match=pattern.exec(expr);
if(match==null)return before;while(match!=null){var comp=match[1].startsWith("[")?match[2].replace(/\\\\]/g,"]"):match[1];ctx=ctx[comp];if(null==ctx||""==match[3])break;expr=expr.substring("["==match[3]?match[1].length:match[0].length);match=pattern.exec(expr)}return before+String.interpret(ctx)})}});Template.Pattern=/(^|.|\r|\n)(#\{(.*?)\})/;var $break={};
var Enumerable=function(){function each(iterator,context){try{this._each(iterator,context)}catch(e){if(e!=$break)throw e;}return this}function eachSlice(number,iterator,context){var index=-number,slices=[],array=this.toArray();if(number<1)return array;while((index+=number)<array.length)slices.push(array.slice(index,index+number));return slices.collect(iterator,context)}function all(iterator,context){iterator=iterator||Prototype.K;var result=true;this.each(function(value,index){result=result&&!!iterator.call(context,
value,index,this);if(!result)throw $break;},this);return result}function any(iterator,context){iterator=iterator||Prototype.K;var result=false;this.each(function(value,index){if(result=!!iterator.call(context,value,index,this))throw $break;},this);return result}function collect(iterator,context){iterator=iterator||Prototype.K;var results=[];this.each(function(value,index){results.push(iterator.call(context,value,index,this))},this);return results}function detect(iterator,context){var result;this.each(function(value,
index){if(iterator.call(context,value,index,this)){result=value;throw $break;}},this);return result}function findAll(iterator,context){var results=[];this.each(function(value,index){if(iterator.call(context,value,index,this))results.push(value)},this);return results}function grep(filter,iterator,context){iterator=iterator||Prototype.K;var results=[];if(Object.isString(filter))filter=new RegExp(RegExp.escape(filter));this.each(function(value,index){if(filter.match(value))results.push(iterator.call(context,
value,index,this))},this);return results}function include(object){if(Object.isFunction(this.indexOf)&&this.indexOf(object)!=-1)return true;var found=false;this.each(function(value){if(value==object){found=true;throw $break;}});return found}function inGroupsOf(number,fillWith){fillWith=Object.isUndefined(fillWith)?null:fillWith;return this.eachSlice(number,function(slice){while(slice.length<number)slice.push(fillWith);return slice})}function inject(memo,iterator,context){this.each(function(value,index){memo=
iterator.call(context,memo,value,index,this)},this);return memo}function invoke(method){var args=$A(arguments).slice(1);return this.map(function(value){return value[method].apply(value,args)})}function max(iterator,context){iterator=iterator||Prototype.K;var result;this.each(function(value,index){value=iterator.call(context,value,index,this);if(result==null||value>=result)result=value},this);return result}function min(iterator,context){iterator=iterator||Prototype.K;var result;this.each(function(value,
index){value=iterator.call(context,value,index,this);if(result==null||value<result)result=value},this);return result}function partition(iterator,context){iterator=iterator||Prototype.K;var trues=[],falses=[];this.each(function(value,index){(iterator.call(context,value,index,this)?trues:falses).push(value)},this);return[trues,falses]}function pluck(property){var results=[];this.each(function(value){results.push(value[property])});return results}function reject(iterator,context){var results=[];this.each(function(value,
index){if(!iterator.call(context,value,index,this))results.push(value)},this);return results}function sortBy(iterator,context){return this.map(function(value,index){return{value:value,criteria:iterator.call(context,value,index,this)}},this).sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0}).pluck("value")}function toArray(){return this.map()}function zip(){var iterator=Prototype.K,args=$A(arguments);if(Object.isFunction(args.last()))iterator=args.pop();var collections=
[this].concat(args).map($A);return this.map(function(value,index){return iterator(collections.pluck(index))})}function size(){return this.toArray().length}function inspect(){return"#\x3cEnumerable:"+this.toArray().inspect()+"\x3e"}return{each:each,eachSlice:eachSlice,all:all,every:all,any:any,some:any,collect:collect,map:collect,detect:detect,findAll:findAll,select:findAll,filter:findAll,grep:grep,include:include,member:include,inGroupsOf:inGroupsOf,inject:inject,invoke:invoke,max:max,min:min,partition:partition,
pluck:pluck,reject:reject,sortBy:sortBy,toArray:toArray,entries:toArray,zip:zip,size:size,inspect:inspect,find:detect}}();function $A(iterable){if(!iterable)return[];if("toArray"in Object(iterable))return iterable.toArray();var length=iterable.length||0,results=new Array(length);while(length--)results[length]=iterable[length];return results}function $w(string){if(!Object.isString(string))return[];string=string.strip();return string?string.split(/\s+/):[]}Array.from=Array.from||$A;
(function(){var arrayProto=Array.prototype,slice=arrayProto.slice,_each=arrayProto.forEach;function each(iterator,context){for(var i=0,length=this.length>>>0;i<length;i++)if(i in this)iterator.call(context,this[i],i,this)}if(!_each)_each=each;function clear(){this.length=0;return this}function first(){return this[0]}function last(){return this[this.length-1]}function compact(){return this.select(function(value){return value!=null})}function flatten(){return this.inject([],function(array,value){if(Object.isArray(value))return array.concat(value.flatten());
array.push(value);return array})}function without(){var values=slice.call(arguments,0);return this.select(function(value){return!values.include(value)})}function reverse(inline){return(inline===false?this.toArray():this)._reverse()}function uniq(sorted){return this.inject([],function(array,value,index){if(0==index||(sorted?array.last()!=value:!array.include(value)))array.push(value);return array})}function intersect(array){return this.uniq().findAll(function(item){return array.indexOf(item)!==-1})}
function clone(){return slice.call(this,0)}function size(){return this.length}function inspect(){return"["+this.map(Object.inspect).join(", ")+"]"}function indexOf(item,i){if(this==null)throw new TypeError;var array=Object(this),length=array.length>>>0;if(length===0)return-1;i=Number(i);if(isNaN(i))i=0;else if(i!==0&&isFinite(i))i=(i>0?1:-1)*Math.floor(Math.abs(i));if(i>length)return-1;var k=i>=0?i:Math.max(length-Math.abs(i),0);for(;k<length;k++)if(k in array&&array[k]===item)return k;return-1}function lastIndexOf(item,
i){if(this==null)throw new TypeError;var array=Object(this),length=array.length>>>0;if(length===0)return-1;if(!Object.isUndefined(i)){i=Number(i);if(isNaN(i))i=0;else if(i!==0&&isFinite(i))i=(i>0?1:-1)*Math.floor(Math.abs(i))}else i=length;var k=i>=0?Math.min(i,length-1):length-Math.abs(i);for(;k>=0;k--)if(k in array&&array[k]===item)return k;return-1}function concat(_){var array=[],items=slice.call(arguments,0),item,n=0;items.unshift(this);for(var i=0,length=items.length;i<length;i++){item=items[i];
if(Object.isArray(item)&&!("callee"in item))for(var j=0,arrayLength=item.length;j<arrayLength;j++){if(j in item)array[n]=item[j];n++}else array[n++]=item}array.length=n;return array}function wrapNative(method){return function(){if(arguments.length===0)return method.call(this,Prototype.K);else if(arguments[0]===undefined){var args=slice.call(arguments,1);args.unshift(Prototype.K);return method.apply(this,args)}else return method.apply(this,arguments)}}function map(iterator){if(this==null)throw new TypeError;
iterator=iterator||Prototype.K;var object=Object(this);var results=[],context=arguments[1],n=0;for(var i=0,length=object.length>>>0;i<length;i++){if(i in object)results[n]=iterator.call(context,object[i],i,object);n++}results.length=n;return results}if(arrayProto.map)map=wrapNative(Array.prototype.map);function filter(iterator){if(this==null||!Object.isFunction(iterator))throw new TypeError;var object=Object(this);var results=[],context=arguments[1],value;for(var i=0,length=object.length>>>0;i<length;i++)if(i in
object){value=object[i];if(iterator.call(context,value,i,object))results.push(value)}return results}if(arrayProto.filter)filter=Array.prototype.filter;function some(iterator){if(this==null)throw new TypeError;iterator=iterator||Prototype.K;var context=arguments[1];var object=Object(this);for(var i=0,length=object.length>>>0;i<length;i++)if(i in object&&iterator.call(context,object[i],i,object))return true;return false}if(arrayProto.some)some=wrapNative(Array.prototype.some);function every(iterator){if(this==
null)throw new TypeError;iterator=iterator||Prototype.K;var context=arguments[1];var object=Object(this);for(var i=0,length=object.length>>>0;i<length;i++)if(i in object&&!iterator.call(context,object[i],i,object))return false;return true}if(arrayProto.every)every=wrapNative(Array.prototype.every);Object.extend(arrayProto,Enumerable);if(arrayProto.entries===Enumerable.entries)delete arrayProto.entries;if(!arrayProto._reverse)arrayProto._reverse=arrayProto.reverse;Object.extend(arrayProto,{_each:_each,
map:map,collect:map,select:filter,filter:filter,findAll:filter,some:some,any:some,every:every,all:every,clear:clear,first:first,last:last,compact:compact,flatten:flatten,without:without,reverse:reverse,uniq:uniq,intersect:intersect,clone:clone,toArray:clone,size:size,inspect:inspect});var CONCAT_ARGUMENTS_BUGGY=function(){return[].concat(arguments)[0][0]!==1}(1,2);if(CONCAT_ARGUMENTS_BUGGY)arrayProto.concat=concat;if(!arrayProto.indexOf)arrayProto.indexOf=indexOf;if(!arrayProto.lastIndexOf)arrayProto.lastIndexOf=
lastIndexOf})();function $H(object){return new Hash(object)}
var Hash=Class.create(Enumerable,function(){function initialize(object){this._object=Object.isHash(object)?object.toObject():Object.clone(object)}function _each(iterator,context){var i=0;for(var key in this._object){var value=this._object[key],pair=[key,value];pair.key=key;pair.value=value;iterator.call(context,pair,i);i++}}function set(key,value){return this._object[key]=value}function get(key){if(this._object[key]!==Object.prototype[key])return this._object[key]}function unset(key){var value=this._object[key];
delete this._object[key];return value}function toObject(){return Object.clone(this._object)}function keys(){return this.pluck("key")}function values(){return this.pluck("value")}function index(value){var match=this.detect(function(pair){return pair.value===value});return match&&match.key}function merge(object){return this.clone().update(object)}function update(object){return(new Hash(object)).inject(this,function(result,pair){result.set(pair.key,pair.value);return result})}function toQueryPair(key,
value){if(Object.isUndefined(value))return key;value=String.interpret(value);value=value.gsub(/(\r)?\n/,"\r\n");value=encodeURIComponent(value);value=value.gsub(/%20/,"+");return key+"\x3d"+value}function toQueryString(){return this.inject([],function(results,pair){var key=encodeURIComponent(pair.key),values=pair.value;if(values&&typeof values=="object"){if(Object.isArray(values)){var queryValues=[];for(var i=0,len=values.length,value;i<len;i++){value=values[i];queryValues.push(toQueryPair(key,value))}return results.concat(queryValues)}}else results.push(toQueryPair(key,
values));return results}).join("\x26")}function inspect(){return"#\x3cHash:{"+this.map(function(pair){return pair.map(Object.inspect).join(": ")}).join(", ")+"}\x3e"}function clone(){return new Hash(this)}return{initialize:initialize,_each:_each,set:set,get:get,unset:unset,toObject:toObject,toTemplateReplacements:toObject,keys:keys,values:values,index:index,merge:merge,update:update,toQueryString:toQueryString,inspect:inspect,toJSON:toObject,clone:clone}}());Hash.from=$H;
Object.extend(Number.prototype,function(){function toColorPart(){return this.toPaddedString(2,16)}function succ(){return this+1}function times(iterator,context){$R(0,this,true).each(iterator,context);return this}function toPaddedString(length,radix){var string=this.toString(radix||10);return"0".times(length-string.length)+string}function abs(){return Math.abs(this)}function round(){return Math.round(this)}function ceil(){return Math.ceil(this)}function floor(){return Math.floor(this)}return{toColorPart:toColorPart,
succ:succ,times:times,toPaddedString:toPaddedString,abs:abs,round:round,ceil:ceil,floor:floor}}());function $R(start,end,exclusive){return new ObjectRange(start,end,exclusive)}
var ObjectRange=Class.create(Enumerable,function(){function initialize(start,end,exclusive){this.start=start;this.end=end;this.exclusive=exclusive}function _each(iterator,context){var value=this.start,i;for(i=0;this.include(value);i++){iterator.call(context,value,i);value=value.succ()}}function include(value){if(value<this.start)return false;if(this.exclusive)return value<this.end;return value<=this.end}return{initialize:initialize,_each:_each,include:include}}());var Abstract={};
var Try={these:function(){var returnValue;for(var i=0,length=arguments.length;i<length;i++){var lambda=arguments[i];try{returnValue=lambda();break}catch(e){}}return returnValue}};var Ajax={getTransport:function(){return Try.these(function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})||false},activeRequestCount:0};
Ajax.Responders={responders:[],_each:function(iterator,context){this.responders._each(iterator,context)},register:function(responder){if(!this.include(responder))this.responders.push(responder)},unregister:function(responder){this.responders=this.responders.without(responder)},dispatch:function(callback,request,transport,json){this.each(function(responder){if(Object.isFunction(responder[callback]))try{responder[callback].apply(responder,[request,transport,json])}catch(e){}})}};
Object.extend(Ajax.Responders,Enumerable);Ajax.Responders.register({onCreate:function(){Ajax.activeRequestCount++},onComplete:function(){Ajax.activeRequestCount--}});
Ajax.Base=Class.create({initialize:function(options){this.options={method:"post",asynchronous:true,contentType:"application/x-www-form-urlencoded",encoding:"UTF-8",parameters:"",evalJSON:true,evalJS:true};Object.extend(this.options,options||{});this.options.method=this.options.method.toLowerCase();if(Object.isHash(this.options.parameters))this.options.parameters=this.options.parameters.toObject()}});
Ajax.Request=Class.create(Ajax.Base,{_complete:false,initialize:function($super,url,options){$super(options);this.transport=Ajax.getTransport();this.request(url)},request:function(url){this.url=url;this.method=this.options.method;var params=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);if(!["get","post"].include(this.method)){params+=(params?"\x26":"")+"_method\x3d"+this.method;this.method="post"}if(params&&this.method==="get")this.url+=
(this.url.include("?")?"\x26":"?")+params;this.parameters=params.toQueryParams();try{var response=new Ajax.Response(this);if(this.options.onCreate)this.options.onCreate(response);Ajax.Responders.dispatch("onCreate",this,response);this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous);if(this.options.asynchronous)this.respondToReadyState.bind(this).defer(1);this.transport.onreadystatechange=this.onStateChange.bind(this);this.setRequestHeaders();this.body=this.method=="post"?
this.options.postBody||params:null;this.transport.send(this.body);if(!this.options.asynchronous&&this.transport.overrideMimeType)this.onStateChange()}catch(e){this.dispatchException(e)}},onStateChange:function(){var readyState=this.transport.readyState;if(readyState>1&&!(readyState==4&&this._complete))this.respondToReadyState(this.transport.readyState)},setRequestHeaders:function(){var headers={"X-Requested-With":"XMLHttpRequest","X-Prototype-Version":Prototype.Version,"Accept":"text/javascript, text/html, application/xml, text/xml, */*"};
if(this.method=="post"){headers["Content-type"]=this.options.contentType+(this.options.encoding?"; charset\x3d"+this.options.encoding:"");if(this.transport.overrideMimeType&&(navigator.userAgent.match(/Gecko\/(\d{4})/)||[0,2005])[1]<2005)headers["Connection"]="close"}if(typeof this.options.requestHeaders=="object"){var extras=this.options.requestHeaders;if(Object.isFunction(extras.push))for(var i=0,length=extras.length;i<length;i+=2)headers[extras[i]]=extras[i+1];else $H(extras).each(function(pair){headers[pair.key]=
pair.value})}for(var name in headers)if(headers[name]!=null)this.transport.setRequestHeader(name,headers[name])},success:function(){var status=this.getStatus();return!status||status>=200&&status<300||status==304},getStatus:function(){try{if(this.transport.status===1223)return 204;return this.transport.status||0}catch(e){return 0}},respondToReadyState:function(readyState){var state=Ajax.Request.Events[readyState],response=new Ajax.Response(this);if(state=="Complete"){try{this._complete=true;(this.options["on"+
response.status]||this.options["on"+(this.success()?"Success":"Failure")]||Prototype.emptyFunction)(response,response.headerJSON)}catch(e){this.dispatchException(e)}var contentType=response.getHeader("Content-type");if(this.options.evalJS=="force"||this.options.evalJS&&this.isSameOrigin()&&contentType&&contentType.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))this.evalResponse()}try{(this.options["on"+state]||Prototype.emptyFunction)(response,response.headerJSON);Ajax.Responders.dispatch("on"+
state,this,response,response.headerJSON)}catch(e){this.dispatchException(e)}if(state=="Complete")this.transport.onreadystatechange=Prototype.emptyFunction},isSameOrigin:function(){var m=this.url.match(/^\s*https?:\/\/[^\/]*/);return!m||m[0]=="#{protocol}//#{domain}#{port}".interpolate({protocol:location.protocol,domain:document.domain,port:location.port?":"+location.port:""})},getHeader:function(name){try{return this.transport.getResponseHeader(name)||null}catch(e){return null}},evalResponse:function(){try{return eval((this.transport.responseText||
"").unfilterJSON())}catch(e){this.dispatchException(e)}},dispatchException:function(exception){(this.options.onException||Prototype.emptyFunction)(this,exception);Ajax.Responders.dispatch("onException",this,exception)}});Ajax.Request.Events=["Uninitialized","Loading","Loaded","Interactive","Complete"];
Ajax.Response=Class.create({initialize:function(request){this.request=request;var transport=this.transport=request.transport,readyState=this.readyState=transport.readyState;if(readyState>2&&!Prototype.Browser.IE||readyState==4){this.status=this.getStatus();this.statusText=this.getStatusText();this.responseText=String.interpret(transport.responseText);this.headerJSON=this._getHeaderJSON()}if(readyState==4){var xml=transport.responseXML;this.responseXML=Object.isUndefined(xml)?null:xml;this.responseJSON=
this._getResponseJSON()}},status:0,statusText:"",getStatus:Ajax.Request.prototype.getStatus,getStatusText:function(){try{return this.transport.statusText||""}catch(e){return""}},getHeader:Ajax.Request.prototype.getHeader,getAllHeaders:function(){try{return this.getAllResponseHeaders()}catch(e){return null}},getResponseHeader:function(name){return this.transport.getResponseHeader(name)},getAllResponseHeaders:function(){return this.transport.getAllResponseHeaders()},_getHeaderJSON:function(){var json=
this.getHeader("X-JSON");if(!json)return null;try{json=decodeURIComponent(escape(json))}catch(e){}try{return json.evalJSON(this.request.options.sanitizeJSON||!this.request.isSameOrigin())}catch(e){this.request.dispatchException(e)}},_getResponseJSON:function(){var options=this.request.options;if(!options.evalJSON||options.evalJSON!="force"&&!(this.getHeader("Content-type")||"").include("application/json")||this.responseText.blank())return null;try{return this.responseText.evalJSON(options.sanitizeJSON||
!this.request.isSameOrigin())}catch(e){this.request.dispatchException(e)}}});
Ajax.Updater=Class.create(Ajax.Request,{initialize:function($super,container,url,options){this.container={success:container.success||container,failure:container.failure||(container.success?null:container)};options=Object.clone(options);var onComplete=options.onComplete;options.onComplete=function(response,json){this.updateContent(response.responseText);if(Object.isFunction(onComplete))onComplete(response,json)}.bind(this);$super(url,options)},updateContent:function(responseText){var receiver=this.container[this.success()?
"success":"failure"],options=this.options;if(!options.evalScripts)responseText=responseText.stripScripts();if(receiver=$(receiver))if(options.insertion)if(Object.isString(options.insertion)){var insertion={};insertion[options.insertion]=responseText;receiver.insert(insertion)}else options.insertion(receiver,responseText);else receiver.update(responseText)}});
Ajax.PeriodicalUpdater=Class.create(Ajax.Base,{initialize:function($super,container,url,options){$super(options);this.onComplete=this.options.onComplete;this.frequency=this.options.frequency||2;this.decay=this.options.decay||1;this.updater={};this.container=container;this.url=url;this.start()},start:function(){this.options.onComplete=this.updateComplete.bind(this);this.onTimerEvent()},stop:function(){this.updater.options.onComplete=undefined;clearTimeout(this.timer);(this.onComplete||Prototype.emptyFunction).apply(this,
arguments)},updateComplete:function(response){if(this.options.decay){this.decay=response.responseText==this.lastText?this.decay*this.options.decay:1;this.lastText=response.responseText}this.timer=this.onTimerEvent.bind(this).delay(this.decay*this.frequency)},onTimerEvent:function(){this.updater=new Ajax.Updater(this.container,this.url,this.options)}});
(function(GLOBAL){var UNDEFINED;var SLICE=Array.prototype.slice;var DIV=document.createElement("div");function $(element){if(arguments.length>1){for(var i=0,elements=[],length=arguments.length;i<length;i++)elements.push($(arguments[i]));return elements}if(Object.isString(element))element=document.getElementById(element);return Element.extend(element)}GLOBAL.$=$;if(!GLOBAL.Node)GLOBAL.Node={};if(!GLOBAL.Node.ELEMENT_NODE)Object.extend(GLOBAL.Node,{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,
ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});var ELEMENT_CACHE={};function shouldUseCreationCache(tagName,attributes){if(tagName==="select")return false;if("type"in attributes)return false;return true}var HAS_EXTENDED_CREATE_ELEMENT_SYNTAX=function(){try{var el=document.createElement('\x3cinput name\x3d"x"\x3e');return el.tagName.toLowerCase()==="input"&&el.name==="x"}catch(err){return false}}();
var oldElement=GLOBAL.Element;function Element(tagName,attributes){attributes=attributes||{};tagName=tagName.toLowerCase();if(HAS_EXTENDED_CREATE_ELEMENT_SYNTAX&&attributes.name){tagName="\x3c"+tagName+' name\x3d"'+attributes.name+'"\x3e';delete attributes.name;return Element.writeAttribute(document.createElement(tagName),attributes)}if(!ELEMENT_CACHE[tagName])ELEMENT_CACHE[tagName]=Element.extend(document.createElement(tagName));var node=shouldUseCreationCache(tagName,attributes)?ELEMENT_CACHE[tagName].cloneNode(false):
document.createElement(tagName);return Element.writeAttribute(node,attributes)}GLOBAL.Element=Element;Object.extend(GLOBAL.Element,oldElement||{});if(oldElement)GLOBAL.Element.prototype=oldElement.prototype;Element.Methods={ByTag:{},Simulated:{}};var methods={};var INSPECT_ATTRIBUTES={id:"id",className:"class"};function inspect(element){element=$(element);var result="\x3c"+element.tagName.toLowerCase();var attribute,value;for(var property in INSPECT_ATTRIBUTES){attribute=INSPECT_ATTRIBUTES[property];
value=(element[property]||"").toString();if(value)result+=" "+attribute+"\x3d"+value.inspect(true)}return result+"\x3e"}methods.inspect=inspect;function visible(element){return $(element).getStyle("display")!=="none"}function toggle(element,bool){element=$(element);if(typeof bool!=="boolean")bool=!Element.visible(element);Element[bool?"show":"hide"](element);return element}function hide(element){element=$(element);element.style.display="none";return element}function show(element){element=$(element);
element.style.display="";return element}Object.extend(methods,{visible:visible,toggle:toggle,hide:hide,show:show});function remove(element){element=$(element);element.parentNode.removeChild(element);return element}var SELECT_ELEMENT_INNERHTML_BUGGY=function(){var el=document.createElement("select"),isBuggy=true;el.innerHTML='\x3coption value\x3d"test"\x3etest\x3c/option\x3e';if(el.options&&el.options[0])isBuggy=el.options[0].nodeName.toUpperCase()!=="OPTION";el=null;return isBuggy}();var TABLE_ELEMENT_INNERHTML_BUGGY=
function(){try{var el=document.createElement("table");if(el&&el.tBodies){el.innerHTML="\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3etest\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e";var isBuggy=typeof el.tBodies[0]=="undefined";el=null;return isBuggy}}catch(e){return true}}();var LINK_ELEMENT_INNERHTML_BUGGY=function(){try{var el=document.createElement("div");el.innerHTML="\x3clink /\x3e";var isBuggy=el.childNodes.length===0;el=null;return isBuggy}catch(e){return true}}();var ANY_INNERHTML_BUGGY=SELECT_ELEMENT_INNERHTML_BUGGY||
TABLE_ELEMENT_INNERHTML_BUGGY||LINK_ELEMENT_INNERHTML_BUGGY;var SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING=function(){var s=document.createElement("script"),isBuggy=false;try{s.appendChild(document.createTextNode(""));isBuggy=!s.firstChild||s.firstChild&&s.firstChild.nodeType!==3}catch(e){isBuggy=true}s=null;return isBuggy}();function update(element,content){element=$(element);var descendants=element.getElementsByTagName("*"),i=descendants.length;while(i--)purgeElement(descendants[i]);if(content&&
content.toElement)content=content.toElement();if(Object.isElement(content))return element.update().insert(content);content=Object.toHTML(content);var tagName=element.tagName.toUpperCase();if(tagName==="SCRIPT"&&SCRIPT_ELEMENT_REJECTS_TEXTNODE_APPENDING){element.text=content;return element}if(ANY_INNERHTML_BUGGY)if(tagName in INSERTION_TRANSLATIONS.tags){while(element.firstChild)element.removeChild(element.firstChild);var nodes=getContentFromAnonymousElement(tagName,content.stripScripts());for(var i=
0,node;node=nodes[i];i++)element.appendChild(node)}else if(LINK_ELEMENT_INNERHTML_BUGGY&&Object.isString(content)&&content.indexOf("\x3clink")>-1){while(element.firstChild)element.removeChild(element.firstChild);var nodes=getContentFromAnonymousElement(tagName,content.stripScripts(),true);for(var i=0,node;node=nodes[i];i++)element.appendChild(node)}else element.innerHTML=content.stripScripts();else element.innerHTML=content.stripScripts();content.evalScripts.bind(content).defer();return element}function replace(element,
content){element=$(element);if(content&&content.toElement)content=content.toElement();else if(!Object.isElement(content)){content=Object.toHTML(content);var range=element.ownerDocument.createRange();range.selectNode(element);content.evalScripts.bind(content).defer();content=range.createContextualFragment(content.stripScripts())}element.parentNode.replaceChild(content,element);return element}var INSERTION_TRANSLATIONS={before:function(element,node){element.parentNode.insertBefore(node,element)},top:function(element,
node){element.insertBefore(node,element.firstChild)},bottom:function(element,node){element.appendChild(node)},after:function(element,node){element.parentNode.insertBefore(node,element.nextSibling)},tags:{TABLE:["\x3ctable\x3e","\x3c/table\x3e",1],TBODY:["\x3ctable\x3e\x3ctbody\x3e","\x3c/tbody\x3e\x3c/table\x3e",2],TR:["\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e","\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e",3],TD:["\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd\x3e","\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e",
4],SELECT:["\x3cselect\x3e","\x3c/select\x3e",1]}};var tags=INSERTION_TRANSLATIONS.tags;Object.extend(tags,{THEAD:tags.TBODY,TFOOT:tags.TBODY,TH:tags.TD});function replace_IE(element,content){element=$(element);if(content&&content.toElement)content=content.toElement();if(Object.isElement(content)){element.parentNode.replaceChild(content,element);return element}content=Object.toHTML(content);var parent=element.parentNode,tagName=parent.tagName.toUpperCase();if(tagName in INSERTION_TRANSLATIONS.tags){var nextSibling=
Element.next(element);var fragments=getContentFromAnonymousElement(tagName,content.stripScripts());parent.removeChild(element);var iterator;if(nextSibling)iterator=function(node){parent.insertBefore(node,nextSibling)};else iterator=function(node){parent.appendChild(node)};fragments.each(iterator)}else element.outerHTML=content.stripScripts();content.evalScripts.bind(content).defer();return element}if("outerHTML"in document.documentElement)replace=replace_IE;function isContent(content){if(Object.isUndefined(content)||
content===null)return false;if(Object.isString(content)||Object.isNumber(content))return true;if(Object.isElement(content))return true;if(content.toElement||content.toHTML)return true;return false}function insertContentAt(element,content,position){position=position.toLowerCase();var method=INSERTION_TRANSLATIONS[position];if(content&&content.toElement)content=content.toElement();if(Object.isElement(content)){method(element,content);return element}content=Object.toHTML(content);var tagName=(position===
"before"||position==="after"?element.parentNode:element).tagName.toUpperCase();var childNodes=getContentFromAnonymousElement(tagName,content.stripScripts());if(position==="top"||position==="after")childNodes.reverse();for(var i=0,node;node=childNodes[i];i++)method(element,node);content.evalScripts.bind(content).defer()}function insert(element,insertions){element=$(element);if(isContent(insertions))insertions={bottom:insertions};for(var position in insertions)insertContentAt(element,insertions[position],
position);return element}function wrap(element,wrapper,attributes){element=$(element);if(Object.isElement(wrapper))$(wrapper).writeAttribute(attributes||{});else if(Object.isString(wrapper))wrapper=new Element(wrapper,attributes);else wrapper=new Element("div",wrapper);if(element.parentNode)element.parentNode.replaceChild(wrapper,element);wrapper.appendChild(element);return wrapper}function cleanWhitespace(element){element=$(element);var node=element.firstChild;while(node){var nextNode=node.nextSibling;
if(node.nodeType===Node.TEXT_NODE&&!/\S/.test(node.nodeValue))element.removeChild(node);node=nextNode}return element}function empty(element){return $(element).innerHTML.blank()}function getContentFromAnonymousElement(tagName,html,force){var t=INSERTION_TRANSLATIONS.tags[tagName],div=DIV;var workaround=!!t;if(!workaround&&force){workaround=true;t=["","",0]}if(workaround){div.innerHTML="\x26#160;"+t[0]+html+t[1];div.removeChild(div.firstChild);for(var i=t[2];i--;)div=div.firstChild}else div.innerHTML=
html;return $A(div.childNodes)}function clone(element,deep){if(!(element=$(element)))return;var clone=element.cloneNode(deep);if(!HAS_UNIQUE_ID_PROPERTY){clone._prototypeUID=UNDEFINED;if(deep){var descendants=Element.select(clone,"*"),i=descendants.length;while(i--)descendants[i]._prototypeUID=UNDEFINED}}return Element.extend(clone)}function purgeElement(element){var uid=getUniqueElementID(element);if(uid){Element.stopObserving(element);if(!HAS_UNIQUE_ID_PROPERTY)element._prototypeUID=UNDEFINED;delete Element.Storage[uid]}}
function purgeCollection(elements){var i=elements.length;while(i--)purgeElement(elements[i])}function purgeCollection_IE(elements){var i=elements.length,element,uid;while(i--){element=elements[i];uid=getUniqueElementID(element);delete Element.Storage[uid];delete Event.cache[uid]}}if(HAS_UNIQUE_ID_PROPERTY)purgeCollection=purgeCollection_IE;function purge(element){if(!(element=$(element)))return;purgeElement(element);var descendants=element.getElementsByTagName("*"),i=descendants.length;while(i--)purgeElement(descendants[i]);
return null}Object.extend(methods,{remove:remove,update:update,replace:replace,insert:insert,wrap:wrap,cleanWhitespace:cleanWhitespace,empty:empty,clone:clone,purge:purge});function recursivelyCollect(element,property,maximumLength){element=$(element);maximumLength=maximumLength||-1;var elements=[];while(element=element[property]){if(element.nodeType===Node.ELEMENT_NODE)elements.push(Element.extend(element));if(elements.length===maximumLength)break}return elements}function ancestors(element){return recursivelyCollect(element,
"parentNode")}function descendants(element){return Element.select(element,"*")}function firstDescendant(element){element=$(element).firstChild;while(element&&element.nodeType!==Node.ELEMENT_NODE)element=element.nextSibling;return $(element)}function immediateDescendants(element){var results=[],child=$(element).firstChild;while(child){if(child.nodeType===Node.ELEMENT_NODE)results.push(Element.extend(child));child=child.nextSibling}return results}function previousSiblings(element){return recursivelyCollect(element,
"previousSibling")}function nextSiblings(element){return recursivelyCollect(element,"nextSibling")}function siblings(element){element=$(element);var previous=previousSiblings(element),next=nextSiblings(element);return previous.reverse().concat(next)}function match(element,selector){element=$(element);if(Object.isString(selector))return Prototype.Selector.match(element,selector);return selector.match(element)}function _recursivelyFind(element,property,expression,index){element=$(element),expression=
expression||0,index=index||0;if(Object.isNumber(expression))index=expression,expression=null;while(element=element[property]){if(element.nodeType!==1)continue;if(expression&&!Prototype.Selector.match(element,expression))continue;if(--index>=0)continue;return Element.extend(element)}}function up(element,expression,index){element=$(element);if(arguments.length===1)return $(element.parentNode);return _recursivelyFind(element,"parentNode",expression,index)}function down(element,expression,index){if(arguments.length===
1)return firstDescendant(element);element=$(element),expression=expression||0,index=index||0;if(Object.isNumber(expression))index=expression,expression="*";var node=Prototype.Selector.select(expression,element)[index];return Element.extend(node)}function previous(element,expression,index){return _recursivelyFind(element,"previousSibling",expression,index)}function next(element,expression,index){return _recursivelyFind(element,"nextSibling",expression,index)}function select(element){element=$(element);
var expressions=SLICE.call(arguments,1).join(", ");return Prototype.Selector.select(expressions,element)}function adjacent(element){element=$(element);var expressions=SLICE.call(arguments,1).join(", ");var siblings=Element.siblings(element),results=[];for(var i=0,sibling;sibling=siblings[i];i++)if(Prototype.Selector.match(sibling,expressions))results.push(sibling);return results}function descendantOf_DOM(element,ancestor){element=$(element),ancestor=$(ancestor);if(!element||!ancestor)return false;
while(element=element.parentNode)if(element===ancestor)return true;return false}function descendantOf_contains(element,ancestor){element=$(element),ancestor=$(ancestor);if(!element||!ancestor)return false;if(!ancestor.contains)return descendantOf_DOM(element,ancestor);return ancestor.contains(element)&&ancestor!==element}function descendantOf_compareDocumentPosition(element,ancestor){element=$(element),ancestor=$(ancestor);if(!element||!ancestor)return false;return(element.compareDocumentPosition(ancestor)&
8)===8}var descendantOf;if(DIV.compareDocumentPosition)descendantOf=descendantOf_compareDocumentPosition;else if(DIV.contains)descendantOf=descendantOf_contains;else descendantOf=descendantOf_DOM;Object.extend(methods,{recursivelyCollect:recursivelyCollect,ancestors:ancestors,descendants:descendants,firstDescendant:firstDescendant,immediateDescendants:immediateDescendants,previousSiblings:previousSiblings,nextSiblings:nextSiblings,siblings:siblings,match:match,up:up,down:down,previous:previous,next:next,
select:select,adjacent:adjacent,descendantOf:descendantOf,getElementsBySelector:select,childElements:immediateDescendants});var idCounter=1;function identify(element){element=$(element);var id=Element.readAttribute(element,"id");if(id)return id;do id="anonymous_element_"+idCounter++;while($(id));Element.writeAttribute(element,"id",id);return id}function readAttribute(element,name){return $(element).getAttribute(name)}function readAttribute_IE(element,name){element=$(element);var table=ATTRIBUTE_TRANSLATIONS.read;
if(table.values[name])return table.values[name](element,name);if(table.names[name])name=table.names[name];if(name.include(":")){if(!element.attributes||!element.attributes[name])return null;return element.attributes[name].value}return element.getAttribute(name)}function readAttribute_Opera(element,name){if(name==="title")return element.title;return element.getAttribute(name)}var PROBLEMATIC_ATTRIBUTE_READING=function(){DIV.setAttribute("onclick",[]);var value=DIV.getAttribute("onclick");var isFunction=
Object.isArray(value);DIV.removeAttribute("onclick");return isFunction}();if(PROBLEMATIC_ATTRIBUTE_READING)readAttribute=readAttribute_IE;else if(Prototype.Browser.Opera)readAttribute=readAttribute_Opera;function writeAttribute(element,name,value){element=$(element);var attributes={},table=ATTRIBUTE_TRANSLATIONS.write;if(typeof name==="object")attributes=name;else attributes[name]=Object.isUndefined(value)?true:value;for(var attr in attributes){name=table.names[attr]||attr;value=attributes[attr];
if(table.values[attr]){value=table.values[attr](element,value);if(Object.isUndefined(value))continue}if(value===false||value===null)element.removeAttribute(name);else if(value===true)element.setAttribute(name,name);else element.setAttribute(name,value)}return element}var PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES=function(){if(!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX)return false;var checkbox=document.createElement('\x3cinput type\x3d"checkbox"\x3e');checkbox.checked=true;var node=checkbox.getAttributeNode("checked");
return!node||!node.specified}();function hasAttribute(element,attribute){attribute=ATTRIBUTE_TRANSLATIONS.has[attribute]||attribute;var node=$(element).getAttributeNode(attribute);return!!(node&&node.specified)}function hasAttribute_IE(element,attribute){if(attribute==="checked")return element.checked;return hasAttribute(element,attribute)}GLOBAL.Element.Methods.Simulated.hasAttribute=PROBLEMATIC_HAS_ATTRIBUTE_WITH_CHECKBOXES?hasAttribute_IE:hasAttribute;function classNames(element){return new Element.ClassNames(element)}
var regExpCache={};function getRegExpForClassName(className){if(regExpCache[className])return regExpCache[className];var re=new RegExp("(^|\\s+)"+className+"(\\s+|$)");regExpCache[className]=re;return re}function hasClassName(element,className){if(!(element=$(element)))return;var elementClassName=element.className;if(elementClassName.length===0)return false;if(elementClassName===className)return true;return getRegExpForClassName(className).test(elementClassName)}function addClassName(element,className){if(!(element=
$(element)))return;if(!hasClassName(element,className))element.className+=(element.className?" ":"")+className;return element}function removeClassName(element,className){if(!(element=$(element)))return;element.className=element.className.replace(getRegExpForClassName(className)," ").strip();return element}function toggleClassName(element,className,bool){if(!(element=$(element)))return;if(Object.isUndefined(bool))bool=!hasClassName(element,className);var method=Element[bool?"addClassName":"removeClassName"];
return method(element,className)}var ATTRIBUTE_TRANSLATIONS={};var classProp="className",forProp="for";DIV.setAttribute(classProp,"x");if(DIV.className!=="x"){DIV.setAttribute("class","x");if(DIV.className==="x")classProp="class"}var LABEL=document.createElement("label");LABEL.setAttribute(forProp,"x");if(LABEL.htmlFor!=="x"){LABEL.setAttribute("htmlFor","x");if(LABEL.htmlFor==="x")forProp="htmlFor"}LABEL=null;function _getAttr(element,attribute){return element.getAttribute(attribute)}function _getAttr2(element,
attribute){return element.getAttribute(attribute,2)}function _getAttrNode(element,attribute){var node=element.getAttributeNode(attribute);return node?node.value:""}function _getFlag(element,attribute){return $(element).hasAttribute(attribute)?attribute:null}DIV.onclick=Prototype.emptyFunction;var onclickValue=DIV.getAttribute("onclick");var _getEv;if(String(onclickValue).indexOf("{")>-1)_getEv=function(element,attribute){var value=element.getAttribute(attribute);if(!value)return null;value=value.toString();
value=value.split("{")[1];value=value.split("}")[0];return value.strip()};else if(onclickValue==="")_getEv=function(element,attribute){var value=element.getAttribute(attribute);if(!value)return null;return value.strip()};ATTRIBUTE_TRANSLATIONS.read={names:{"class":classProp,"className":classProp,"for":forProp,"htmlFor":forProp},values:{style:function(element){return element.style.cssText.toLowerCase()},title:function(element){return element.title}}};ATTRIBUTE_TRANSLATIONS.write={names:{className:"class",
htmlFor:"for",cellpadding:"cellPadding",cellspacing:"cellSpacing"},values:{checked:function(element,value){value=!!value;element.checked=value;return value?"checked":null},style:function(element,value){element.style.cssText=value?value:""}}};ATTRIBUTE_TRANSLATIONS.has={names:{}};Object.extend(ATTRIBUTE_TRANSLATIONS.write.names,ATTRIBUTE_TRANSLATIONS.read.names);var CAMEL_CASED_ATTRIBUTE_NAMES=$w("colSpan rowSpan vAlign dateTime "+"accessKey tabIndex encType maxLength readOnly longDesc frameBorder");
for(var i=0,attr;attr=CAMEL_CASED_ATTRIBUTE_NAMES[i];i++){ATTRIBUTE_TRANSLATIONS.write.names[attr.toLowerCase()]=attr;ATTRIBUTE_TRANSLATIONS.has.names[attr.toLowerCase()]=attr}Object.extend(ATTRIBUTE_TRANSLATIONS.read.values,{href:_getAttr2,src:_getAttr2,type:_getAttr,action:_getAttrNode,disabled:_getFlag,checked:_getFlag,readonly:_getFlag,multiple:_getFlag,onload:_getEv,onunload:_getEv,onclick:_getEv,ondblclick:_getEv,onmousedown:_getEv,onmouseup:_getEv,onmouseover:_getEv,onmousemove:_getEv,onmouseout:_getEv,
onfocus:_getEv,onblur:_getEv,onkeypress:_getEv,onkeydown:_getEv,onkeyup:_getEv,onsubmit:_getEv,onreset:_getEv,onselect:_getEv,onchange:_getEv});Object.extend(methods,{identify:identify,readAttribute:readAttribute,writeAttribute:writeAttribute,classNames:classNames,hasClassName:hasClassName,addClassName:addClassName,removeClassName:removeClassName,toggleClassName:toggleClassName});function normalizeStyleName(style){if(style==="float"||style==="styleFloat")return"cssFloat";return style.camelize()}function normalizeStyleName_IE(style){if(style===
"float"||style==="cssFloat")return"styleFloat";return style.camelize()}function setStyle(element,styles){element=$(element);var elementStyle=element.style,match;if(Object.isString(styles)){elementStyle.cssText+=";"+styles;if(styles.include("opacity")){var opacity=styles.match(/opacity:\s*(\d?\.?\d*)/)[1];Element.setOpacity(element,opacity)}return element}for(var property in styles)if(property==="opacity")Element.setOpacity(element,styles[property]);else{var value=styles[property];if(property==="float"||
property==="cssFloat")property=Object.isUndefined(elementStyle.styleFloat)?"cssFloat":"styleFloat";elementStyle[property]=value}return element}function getStyle(element,style){element=$(element);style=normalizeStyleName(style);var value=element.style[style];if(!value||value==="auto"){var css=document.defaultView.getComputedStyle(element,null);value=css?css[style]:null}if(style==="opacity")return value?parseFloat(value):1;return value==="auto"?null:value}function getStyle_Opera(element,style){switch(style){case "height":case "width":if(!Element.visible(element))return null;
var dim=parseInt(getStyle(element,style),10);if(dim!==element["offset"+style.capitalize()])return dim+"px";return Element.measure(element,style);default:return getStyle(element,style)}}function getStyle_IE(element,style){element=$(element);style=normalizeStyleName_IE(style);var value=element.style[style];if(!value&&element.currentStyle)value=element.currentStyle[style];if(style==="opacity")if(!STANDARD_CSS_OPACITY_SUPPORTED)return getOpacity_IE(element);else return value?parseFloat(value):1;if(value===
"auto"){if((style==="width"||style==="height")&&Element.visible(element))return Element.measure(element,style)+"px";return null}return value}function stripAlphaFromFilter_IE(filter){return(filter||"").replace(/alpha\([^\)]*\)/gi,"")}function hasLayout_IE(element){if(!element.currentStyle||!element.currentStyle.hasLayout)element.style.zoom=1;return element}var STANDARD_CSS_OPACITY_SUPPORTED=function(){DIV.style.cssText="opacity:.55";return/^0.55/.test(DIV.style.opacity)}();function setOpacity(element,
value){element=$(element);if(value==1||value==="")value="";else if(value<1E-5)value=0;element.style.opacity=value;return element}function setOpacity_IE(element,value){if(STANDARD_CSS_OPACITY_SUPPORTED)return setOpacity(element,value);element=hasLayout_IE($(element));var filter=Element.getStyle(element,"filter"),style=element.style;if(value==1||value===""){filter=stripAlphaFromFilter_IE(filter);if(filter)style.filter=filter;else style.removeAttribute("filter");return element}if(value<1E-5)value=0;
style.filter=stripAlphaFromFilter_IE(filter)+" alpha(opacity\x3d"+value*100+")";return element}function getOpacity(element){return Element.getStyle(element,"opacity")}function getOpacity_IE(element){if(STANDARD_CSS_OPACITY_SUPPORTED)return getOpacity(element);var filter=Element.getStyle(element,"filter");if(filter.length===0)return 1;var match=(filter||"").match(/alpha\(opacity=(.*)\)/i);if(match&&match[1])return parseFloat(match[1])/100;return 1}Object.extend(methods,{setStyle:setStyle,getStyle:getStyle,
setOpacity:setOpacity,getOpacity:getOpacity});if("styleFloat"in DIV.style){methods.getStyle=getStyle_IE;methods.setOpacity=setOpacity_IE;methods.getOpacity=getOpacity_IE}var UID=0;GLOBAL.Element.Storage={UID:1};function getUniqueElementID(element){if(element===window)return 0;if(typeof element._prototypeUID==="undefined")element._prototypeUID=Element.Storage.UID++;return element._prototypeUID}function getUniqueElementID_IE(element){if(element===window)return 0;if(element==document)return 1;return element.uniqueID}
var HAS_UNIQUE_ID_PROPERTY="uniqueID"in DIV;if(HAS_UNIQUE_ID_PROPERTY)getUniqueElementID=getUniqueElementID_IE;function getStorage(element){if(!(element=$(element)))return;var uid=getUniqueElementID(element);if(!Element.Storage[uid])Element.Storage[uid]=$H();return Element.Storage[uid]}function store(element,key,value){if(!(element=$(element)))return;var storage=getStorage(element);if(arguments.length===2)storage.update(key);else storage.set(key,value);return element}function retrieve(element,key,
defaultValue){if(!(element=$(element)))return;var storage=getStorage(element),value=storage.get(key);if(Object.isUndefined(value)){storage.set(key,defaultValue);value=defaultValue}return value}Object.extend(methods,{getStorage:getStorage,store:store,retrieve:retrieve});var Methods={},ByTag=Element.Methods.ByTag,F=Prototype.BrowserFeatures;if(!F.ElementExtensions&&"__proto__"in DIV){GLOBAL.HTMLElement={};GLOBAL.HTMLElement.prototype=DIV["__proto__"];F.ElementExtensions=true}function checkElementPrototypeDeficiency(tagName){if(typeof window.Element===
"undefined")return false;if(!HAS_EXTENDED_CREATE_ELEMENT_SYNTAX)return false;var proto=window.Element.prototype;if(proto){var id="_"+(Math.random()+"").slice(2),el=document.createElement(tagName);proto[id]="x";var isBuggy=el[id]!=="x";delete proto[id];el=null;return isBuggy}return false}var HTMLOBJECTELEMENT_PROTOTYPE_BUGGY=checkElementPrototypeDeficiency("object");function extendElementWith(element,methods){for(var property in methods){var value=methods[property];if(Object.isFunction(value)&&!(property in
element))element[property]=value.methodize()}}var EXTENDED={};function elementIsExtended(element){var uid=getUniqueElementID(element);return uid in EXTENDED}function extend(element){if(!element||elementIsExtended(element))return element;if(element.nodeType!==Node.ELEMENT_NODE||element==window)return element;var methods=Object.clone(Methods),tagName=element.tagName.toUpperCase();if(ByTag[tagName])Object.extend(methods,ByTag[tagName]);extendElementWith(element,methods);EXTENDED[getUniqueElementID(element)]=
true;return element}function extend_IE8(element){if(!element||elementIsExtended(element))return element;var t=element.tagName;if(t&&/^(?:object|applet|embed)$/i.test(t)){extendElementWith(element,Element.Methods);extendElementWith(element,Element.Methods.Simulated);extendElementWith(element,Element.Methods.ByTag[t.toUpperCase()])}return element}if(F.SpecificElementExtensions)extend=HTMLOBJECTELEMENT_PROTOTYPE_BUGGY?extend_IE8:Prototype.K;function addMethodsToTagName(tagName,methods){tagName=tagName.toUpperCase();
if(!ByTag[tagName])ByTag[tagName]={};Object.extend(ByTag[tagName],methods)}function mergeMethods(destination,methods,onlyIfAbsent){if(Object.isUndefined(onlyIfAbsent))onlyIfAbsent=false;for(var property in methods){var value=methods[property];if(!Object.isFunction(value))continue;if(!onlyIfAbsent||!(property in destination))destination[property]=value.methodize()}}function findDOMClass(tagName){var klass;var trans={"OPTGROUP":"OptGroup","TEXTAREA":"TextArea","P":"Paragraph","FIELDSET":"FieldSet",
"UL":"UList","OL":"OList","DL":"DList","DIR":"Directory","H1":"Heading","H2":"Heading","H3":"Heading","H4":"Heading","H5":"Heading","H6":"Heading","Q":"Quote","INS":"Mod","DEL":"Mod","A":"Anchor","IMG":"Image","CAPTION":"TableCaption","COL":"TableCol","COLGROUP":"TableCol","THEAD":"TableSection","TFOOT":"TableSection","TBODY":"TableSection","TR":"TableRow","TH":"TableCell","TD":"TableCell","FRAMESET":"FrameSet","IFRAME":"IFrame"};if(trans[tagName])klass="HTML"+trans[tagName]+"Element";if(window[klass])return window[klass];
klass="HTML"+tagName+"Element";if(window[klass])return window[klass];klass="HTML"+tagName.capitalize()+"Element";if(window[klass])return window[klass];var element=document.createElement(tagName),proto=element["__proto__"]||element.constructor.prototype;element=null;return proto}function addMethods(methods){if(arguments.length===0)addFormMethods();if(arguments.length===2){var tagName=methods;methods=arguments[1]}if(!tagName)Object.extend(Element.Methods,methods||{});else if(Object.isArray(tagName))for(var i=
0,tag;tag=tagName[i];i++)addMethodsToTagName(tag,methods);else addMethodsToTagName(tagName,methods);var ELEMENT_PROTOTYPE=window.HTMLElement?HTMLElement.prototype:Element.prototype;if(F.ElementExtensions){mergeMethods(ELEMENT_PROTOTYPE,Element.Methods);mergeMethods(ELEMENT_PROTOTYPE,Element.Methods.Simulated,true)}if(F.SpecificElementExtensions)for(var tag in Element.Methods.ByTag){var klass=findDOMClass(tag);if(Object.isUndefined(klass))continue;mergeMethods(klass.prototype,ByTag[tag])}Object.extend(Element,
Element.Methods);Object.extend(Element,Element.Methods.Simulated);delete Element.ByTag;delete Element.Simulated;Element.extend.refresh();ELEMENT_CACHE={}}Object.extend(GLOBAL.Element,{extend:extend,addMethods:addMethods});if(extend===Prototype.K)GLOBAL.Element.extend.refresh=Prototype.emptyFunction;else GLOBAL.Element.extend.refresh=function(){if(Prototype.BrowserFeatures.ElementExtensions)return;Object.extend(Methods,Element.Methods);Object.extend(Methods,Element.Methods.Simulated);EXTENDED={}};
function addFormMethods(){Object.extend(Form,Form.Methods);Object.extend(Form.Element,Form.Element.Methods);Object.extend(Element.Methods.ByTag,{"FORM":Object.clone(Form.Methods),"INPUT":Object.clone(Form.Element.Methods),"SELECT":Object.clone(Form.Element.Methods),"TEXTAREA":Object.clone(Form.Element.Methods),"BUTTON":Object.clone(Form.Element.Methods)})}Element.addMethods(methods);function destroyCache_IE(){DIV=null;ELEMENT_CACHE=null}if(window.attachEvent)window.attachEvent("onunload",destroyCache_IE)})(this);
(function(){function toDecimal(pctString){var match=pctString.match(/^(\d+)%?$/i);if(!match)return null;return Number(match[1])/100}function getRawStyle(element,style){element=$(element);var value=element.style[style];if(!value||value==="auto"){var css=document.defaultView.getComputedStyle(element,null);value=css?css[style]:null}if(style==="opacity")return value?parseFloat(value):1;return value==="auto"?null:value}function getRawStyle_IE(element,style){var value=element.style[style];if(!value&&element.currentStyle)value=
element.currentStyle[style];return value}function getContentWidth(element,context){var boxWidth=element.offsetWidth;var bl=getPixelValue(element,"borderLeftWidth",context)||0;var br=getPixelValue(element,"borderRightWidth",context)||0;var pl=getPixelValue(element,"paddingLeft",context)||0;var pr=getPixelValue(element,"paddingRight",context)||0;return boxWidth-bl-br-pl-pr}if(!Object.isUndefined(document.documentElement.currentStyle)&&!Prototype.Browser.Opera)getRawStyle=getRawStyle_IE;function getPixelValue(value,
property,context){var element=null;if(Object.isElement(value)){element=value;value=getRawStyle(element,property)}if(value===null||Object.isUndefined(value))return null;if(/^(?:-)?\d+(\.\d+)?(px)?$/i.test(value))return window.parseFloat(value);var isPercentage=value.include("%"),isViewport=context===document.viewport;if(/\d/.test(value)&&element&&element.runtimeStyle&&!(isPercentage&&isViewport)){var style=element.style.left,rStyle=element.runtimeStyle.left;element.runtimeStyle.left=element.currentStyle.left;
element.style.left=value||0;value=element.style.pixelLeft;element.style.left=style;element.runtimeStyle.left=rStyle;return value}if(element&&isPercentage){context=context||element.parentNode;var decimal=toDecimal(value),whole=null;var isHorizontal=property.include("left")||property.include("right")||property.include("width");var isVertical=property.include("top")||property.include("bottom")||property.include("height");if(context===document.viewport)if(isHorizontal)whole=document.viewport.getWidth();
else{if(isVertical)whole=document.viewport.getHeight()}else if(isHorizontal)whole=$(context).measure("width");else if(isVertical)whole=$(context).measure("height");return whole===null?0:whole*decimal}return 0}function toCSSPixels(number){if(Object.isString(number)&&number.endsWith("px"))return number;return number+"px"}function isDisplayed(element){while(element&&element.parentNode){var display=element.getStyle("display");if(display==="none")return false;element=$(element.parentNode)}return true}
var hasLayout=Prototype.K;if("currentStyle"in document.documentElement)hasLayout=function(element){if(!element.currentStyle.hasLayout)element.style.zoom=1;return element};function cssNameFor(key){if(key.include("border"))key=key+"-width";return key.camelize()}Element.Layout=Class.create(Hash,{initialize:function($super,element,preCompute){$super();this.element=$(element);Element.Layout.PROPERTIES.each(function(property){this._set(property,null)},this);if(preCompute){this._preComputing=true;this._begin();
Element.Layout.PROPERTIES.each(this._compute,this);this._end();this._preComputing=false}},_set:function(property,value){return Hash.prototype.set.call(this,property,value)},set:function(property,value){throw"Properties of Element.Layout are read-only.";},get:function($super,property){var value=$super(property);return value===null?this._compute(property):value},_begin:function(){if(this._isPrepared())return;var element=this.element;if(isDisplayed(element)){this._setPrepared(true);return}var originalStyles=
{position:element.style.position||"",width:element.style.width||"",visibility:element.style.visibility||"",display:element.style.display||""};element.store("prototype_original_styles",originalStyles);var position=getRawStyle(element,"position"),width=element.offsetWidth;if(width===0||width===null){element.style.display="block";width=element.offsetWidth}var context=position==="fixed"?document.viewport:element.parentNode;var tempStyles={visibility:"hidden",display:"block"};if(position!=="fixed")tempStyles.position=
"absolute";element.setStyle(tempStyles);var positionedWidth=element.offsetWidth,newWidth;if(width&&positionedWidth===width)newWidth=getContentWidth(element,context);else if(position==="absolute"||position==="fixed")newWidth=getContentWidth(element,context);else{var parent=element.parentNode,pLayout=$(parent).getLayout();newWidth=pLayout.get("width")-this.get("margin-left")-this.get("border-left")-this.get("padding-left")-this.get("padding-right")-this.get("border-right")-this.get("margin-right")}element.setStyle({width:newWidth+
"px"});this._setPrepared(true)},_end:function(){var element=this.element;var originalStyles=element.retrieve("prototype_original_styles");element.store("prototype_original_styles",null);element.setStyle(originalStyles);this._setPrepared(false)},_compute:function(property){var COMPUTATIONS=Element.Layout.COMPUTATIONS;if(!(property in COMPUTATIONS))throw"Property not found.";return this._set(property,COMPUTATIONS[property].call(this,this.element))},_isPrepared:function(){return this.element.retrieve("prototype_element_layout_prepared",
false)},_setPrepared:function(bool){return this.element.store("prototype_element_layout_prepared",bool)},toObject:function(){var args=$A(arguments);var keys=args.length===0?Element.Layout.PROPERTIES:args.join(" ").split(" ");var obj={};keys.each(function(key){if(!Element.Layout.PROPERTIES.include(key))return;var value=this.get(key);if(value!=null)obj[key]=value},this);return obj},toHash:function(){var obj=this.toObject.apply(this,arguments);return new Hash(obj)},toCSS:function(){var args=$A(arguments);
var keys=args.length===0?Element.Layout.PROPERTIES:args.join(" ").split(" ");var css={};keys.each(function(key){if(!Element.Layout.PROPERTIES.include(key))return;if(Element.Layout.COMPOSITE_PROPERTIES.include(key))return;var value=this.get(key);if(value!=null)css[cssNameFor(key)]=value+"px"},this);return css},inspect:function(){return"#\x3cElement.Layout\x3e"}});Object.extend(Element.Layout,{PROPERTIES:$w("height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"),
COMPOSITE_PROPERTIES:$w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),COMPUTATIONS:{"height":function(element){if(!this._preComputing)this._begin();var bHeight=this.get("border-box-height");if(bHeight<=0){if(!this._preComputing)this._end();return 0}var bTop=this.get("border-top"),bBottom=this.get("border-bottom");var pTop=this.get("padding-top"),pBottom=this.get("padding-bottom");if(!this._preComputing)this._end();return bHeight-bTop-
bBottom-pTop-pBottom},"width":function(element){if(!this._preComputing)this._begin();var bWidth=this.get("border-box-width");if(bWidth<=0){if(!this._preComputing)this._end();return 0}var bLeft=this.get("border-left"),bRight=this.get("border-right");var pLeft=this.get("padding-left"),pRight=this.get("padding-right");if(!this._preComputing)this._end();return bWidth-bLeft-bRight-pLeft-pRight},"padding-box-height":function(element){var height=this.get("height"),pTop=this.get("padding-top"),pBottom=this.get("padding-bottom");
return height+pTop+pBottom},"padding-box-width":function(element){var width=this.get("width"),pLeft=this.get("padding-left"),pRight=this.get("padding-right");return width+pLeft+pRight},"border-box-height":function(element){if(!this._preComputing)this._begin();var height=element.offsetHeight;if(!this._preComputing)this._end();return height},"border-box-width":function(element){if(!this._preComputing)this._begin();var width=element.offsetWidth;if(!this._preComputing)this._end();return width},"margin-box-height":function(element){var bHeight=
this.get("border-box-height"),mTop=this.get("margin-top"),mBottom=this.get("margin-bottom");if(bHeight<=0)return 0;return bHeight+mTop+mBottom},"margin-box-width":function(element){var bWidth=this.get("border-box-width"),mLeft=this.get("margin-left"),mRight=this.get("margin-right");if(bWidth<=0)return 0;return bWidth+mLeft+mRight},"top":function(element){var offset=element.positionedOffset();return offset.top},"bottom":function(element){var offset=element.positionedOffset(),parent=element.getOffsetParent(),
pHeight=parent.measure("height");var mHeight=this.get("border-box-height");return pHeight-mHeight-offset.top},"left":function(element){var offset=element.positionedOffset();return offset.left},"right":function(element){var offset=element.positionedOffset(),parent=element.getOffsetParent(),pWidth=parent.measure("width");var mWidth=this.get("border-box-width");return pWidth-mWidth-offset.left},"padding-top":function(element){return getPixelValue(element,"paddingTop")},"padding-bottom":function(element){return getPixelValue(element,
"paddingBottom")},"padding-left":function(element){return getPixelValue(element,"paddingLeft")},"padding-right":function(element){return getPixelValue(element,"paddingRight")},"border-top":function(element){return getPixelValue(element,"borderTopWidth")},"border-bottom":function(element){return getPixelValue(element,"borderBottomWidth")},"border-left":function(element){return getPixelValue(element,"borderLeftWidth")},"border-right":function(element){return getPixelValue(element,"borderRightWidth")},
"margin-top":function(element){return getPixelValue(element,"marginTop")},"margin-bottom":function(element){return getPixelValue(element,"marginBottom")},"margin-left":function(element){return getPixelValue(element,"marginLeft")},"margin-right":function(element){return getPixelValue(element,"marginRight")}}});if("getBoundingClientRect"in document.documentElement)Object.extend(Element.Layout.COMPUTATIONS,{"right":function(element){var parent=hasLayout(element.getOffsetParent());var rect=element.getBoundingClientRect(),
pRect=parent.getBoundingClientRect();return(pRect.right-rect.right).round()},"bottom":function(element){var parent=hasLayout(element.getOffsetParent());var rect=element.getBoundingClientRect(),pRect=parent.getBoundingClientRect();return(pRect.bottom-rect.bottom).round()}});Element.Offset=Class.create({initialize:function(left,top){this.left=left.round();this.top=top.round();this[0]=this.left;this[1]=this.top},relativeTo:function(offset){return new Element.Offset(this.left-offset.left,this.top-offset.top)},
inspect:function(){return"#\x3cElement.Offset left: #{left} top: #{top}\x3e".interpolate(this)},toString:function(){return"[#{left}, #{top}]".interpolate(this)},toArray:function(){return[this.left,this.top]}});function getLayout(element,preCompute){return new Element.Layout(element,preCompute)}function measure(element,property){return $(element).getLayout().get(property)}function getHeight(element){return Element.getDimensions(element).height}function getWidth(element){return Element.getDimensions(element).width}
function getDimensions(element){element=$(element);var display=Element.getStyle(element,"display");if(display&&display!=="none")return{width:element.offsetWidth,height:element.offsetHeight};var style=element.style;var originalStyles={visibility:style.visibility,position:style.position,display:style.display};var newStyles={visibility:"hidden",display:"block"};if(originalStyles.position!=="fixed")newStyles.position="absolute";Element.setStyle(element,newStyles);var dimensions={width:element.offsetWidth,
height:element.offsetHeight};Element.setStyle(element,originalStyles);return dimensions}function getOffsetParent(element){element=$(element);function selfOrBody(element){return isHtml(element)?$(document.body):$(element)}if(isDocument(element)||isDetached(element)||isBody(element)||isHtml(element))return $(document.body);var isInline=Element.getStyle(element,"display")==="inline";if(!isInline&&element.offsetParent)return selfOrBody(element.offsetParent);while((element=element.parentNode)&&element!==
document.body)if(Element.getStyle(element,"position")!=="static")return selfOrBody(element);return $(document.body)}function cumulativeOffset(element){element=$(element);var valueT=0,valueL=0;if(element.parentNode){do{valueT+=element.offsetTop||0;valueL+=element.offsetLeft||0;element=element.offsetParent}while(element)}return new Element.Offset(valueL,valueT)}function positionedOffset(element){element=$(element);var layout=element.getLayout();var valueT=0,valueL=0;do{valueT+=element.offsetTop||0;
valueL+=element.offsetLeft||0;element=element.offsetParent;if(element){if(isBody(element))break;var p=Element.getStyle(element,"position");if(p!=="static")break}}while(element);valueL-=layout.get("margin-left");valueT-=layout.get("margin-top");return new Element.Offset(valueL,valueT)}function cumulativeScrollOffset(element){var valueT=0,valueL=0;do if(element===document.body){var bodyScrollNode=document.documentElement||document.body.parentNode||document.body;valueT+=!Object.isUndefined(window.pageYOffset)?
window.pageYOffset:bodyScrollNode.scrollTop||0;valueL+=!Object.isUndefined(window.pageXOffset)?window.pageXOffset:bodyScrollNode.scrollLeft||0;break}else{valueT+=element.scrollTop||0;valueL+=element.scrollLeft||0;element=element.parentNode}while(element);return new Element.Offset(valueL,valueT)}function viewportOffset(forElement){var valueT=0,valueL=0,docBody=document.body;forElement=$(forElement);var element=forElement;do{valueT+=element.offsetTop||0;valueL+=element.offsetLeft||0;if(element.offsetParent==
docBody&&Element.getStyle(element,"position")=="absolute")break}while(element=element.offsetParent);element=forElement;do if(element!=docBody){valueT-=element.scrollTop||0;valueL-=element.scrollLeft||0}while(element=element.parentNode);return new Element.Offset(valueL,valueT)}function absolutize(element){element=$(element);if(Element.getStyle(element,"position")==="absolute")return element;var offsetParent=getOffsetParent(element);var eOffset=element.viewportOffset(),pOffset=offsetParent.viewportOffset();
var offset=eOffset.relativeTo(pOffset);var layout=element.getLayout();element.store("prototype_absolutize_original_styles",{position:element.getStyle("position"),left:element.getStyle("left"),top:element.getStyle("top"),width:element.getStyle("width"),height:element.getStyle("height")});element.setStyle({position:"absolute",top:offset.top+"px",left:offset.left+"px",width:layout.get("width")+"px",height:layout.get("height")+"px"});return element}function relativize(element){element=$(element);if(Element.getStyle(element,
"position")==="relative")return element;var originalStyles=element.retrieve("prototype_absolutize_original_styles");if(originalStyles)element.setStyle(originalStyles);return element}function scrollTo(element){element=$(element);var pos=Element.cumulativeOffset(element);window.scrollTo(pos.left,pos.top);return element}function makePositioned(element){element=$(element);var position=Element.getStyle(element,"position"),styles={};if(position==="static"||!position){styles.position="relative";if(Prototype.Browser.Opera){styles.top=
0;styles.left=0}Element.setStyle(element,styles);Element.store(element,"prototype_made_positioned",true)}return element}function undoPositioned(element){element=$(element);var storage=Element.getStorage(element),madePositioned=storage.get("prototype_made_positioned");if(madePositioned){storage.unset("prototype_made_positioned");Element.setStyle(element,{position:"",top:"",bottom:"",left:"",right:""})}return element}function makeClipping(element){element=$(element);var storage=Element.getStorage(element),
madeClipping=storage.get("prototype_made_clipping");if(Object.isUndefined(madeClipping)){var overflow=Element.getStyle(element,"overflow");storage.set("prototype_made_clipping",overflow);if(overflow!=="hidden")element.style.overflow="hidden"}return element}function undoClipping(element){element=$(element);var storage=Element.getStorage(element),overflow=storage.get("prototype_made_clipping");if(!Object.isUndefined(overflow)){storage.unset("prototype_made_clipping");element.style.overflow=overflow||
""}return element}function clonePosition(element,source,options){options=Object.extend({setLeft:true,setTop:true,setWidth:true,setHeight:true,offsetTop:0,offsetLeft:0},options||{});var docEl=document.documentElement;source=$(source);element=$(element);var p,delta,layout,styles={};if(options.setLeft||options.setTop){p=Element.viewportOffset(source);delta=[0,0];if(Element.getStyle(element,"position")==="absolute"){var parent=Element.getOffsetParent(element);if(parent!==document.body)delta=Element.viewportOffset(parent)}}function pageScrollXY(){var x=
0,y=0;if(Object.isNumber(window.pageXOffset)){x=window.pageXOffset;y=window.pageYOffset}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){x=document.body.scrollLeft;y=document.body.scrollTop}else if(docEl&&(docEl.scrollLeft||docEl.scrollTop)){x=docEl.scrollLeft;y=docEl.scrollTop}return{x:x,y:y}}var pageXY=pageScrollXY();if(options.setWidth||options.setHeight)layout=Element.getLayout(source);if(options.setLeft)styles.left=p[0]+pageXY.x-delta[0]+options.offsetLeft+"px";if(options.setTop)styles.top=
p[1]+pageXY.y-delta[1]+options.offsetTop+"px";var currentLayout=element.getLayout();if(options.setWidth)styles.width=layout.get("width")+"px";if(options.setHeight)styles.height=layout.get("height")+"px";return Element.setStyle(element,styles)}if(Prototype.Browser.IE){getOffsetParent=getOffsetParent.wrap(function(proceed,element){element=$(element);if(isDocument(element)||isDetached(element)||isBody(element)||isHtml(element))return $(document.body);var position=element.getStyle("position");if(position!==
"static")return proceed(element);element.setStyle({position:"relative"});var value=proceed(element);element.setStyle({position:position});return value});positionedOffset=positionedOffset.wrap(function(proceed,element){element=$(element);if(!element.parentNode)return new Element.Offset(0,0);var position=element.getStyle("position");if(position!=="static")return proceed(element);var offsetParent=element.getOffsetParent();if(offsetParent&&offsetParent.getStyle("position")==="fixed")hasLayout(offsetParent);
element.setStyle({position:"relative"});var value=proceed(element);element.setStyle({position:position});return value})}else if(Prototype.Browser.Webkit)cumulativeOffset=function(element){element=$(element);var valueT=0,valueL=0;do{valueT+=element.offsetTop||0;valueL+=element.offsetLeft||0;if(element.offsetParent==document.body)if(Element.getStyle(element,"position")=="absolute")break;element=element.offsetParent}while(element);return new Element.Offset(valueL,valueT)};Element.addMethods({getLayout:getLayout,
measure:measure,getWidth:getWidth,getHeight:getHeight,getDimensions:getDimensions,getOffsetParent:getOffsetParent,cumulativeOffset:cumulativeOffset,positionedOffset:positionedOffset,cumulativeScrollOffset:cumulativeScrollOffset,viewportOffset:viewportOffset,absolutize:absolutize,relativize:relativize,scrollTo:scrollTo,makePositioned:makePositioned,undoPositioned:undoPositioned,makeClipping:makeClipping,undoClipping:undoClipping,clonePosition:clonePosition});function isBody(element){return element.nodeName.toUpperCase()===
"BODY"}function isHtml(element){return element.nodeName.toUpperCase()==="HTML"}function isDocument(element){return element.nodeType===Node.DOCUMENT_NODE}function isDetached(element){return element!==document.body&&!Element.descendantOf(element,document.body)}if("getBoundingClientRect"in document.documentElement)Element.addMethods({viewportOffset:function(element){element=$(element);if(isDetached(element))return new Element.Offset(0,0);var rect=element.getBoundingClientRect(),docEl=document.documentElement;
return new Element.Offset(rect.left-docEl.clientLeft,rect.top-docEl.clientTop)}})})();
(function(){var IS_OLD_OPERA=Prototype.Browser.Opera&&window.parseFloat(window.opera.version())<9.5;var ROOT=null;function getRootElement(){if(ROOT)return ROOT;ROOT=IS_OLD_OPERA?document.body:document.documentElement;return ROOT}function getDimensions(){return{width:this.getWidth(),height:this.getHeight()}}function getWidth(){return getRootElement().clientWidth}function getHeight(){return getRootElement().clientHeight}function getScrollOffsets(){var x=window.pageXOffset||document.documentElement.scrollLeft||
document.body.scrollLeft;var y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;return new Element.Offset(x,y)}document.viewport={getDimensions:getDimensions,getWidth:getWidth,getHeight:getHeight,getScrollOffsets:getScrollOffsets}})();window.$$=function(){var expression=$A(arguments).join(", ");return Prototype.Selector.select(expression,document)};
Prototype.Selector=function(){function select(){throw new Error('Method "Prototype.Selector.select" must be defined.');}function match(){throw new Error('Method "Prototype.Selector.match" must be defined.');}function find(elements,expression,index){index=index||0;var match=Prototype.Selector.match,length=elements.length,matchIndex=0,i;for(i=0;i<length;i++)if(match(elements[i],expression)&&index==matchIndex++)return Element.extend(elements[i])}function extendElements(elements){for(var i=0,length=elements.length;i<
length;i++)Element.extend(elements[i]);return elements}var K=Prototype.K;return{select:select,match:match,find:find,extendElements:Element.extend===K?K:extendElements,extendElement:Element.extend}}();Prototype._original_property=window.Sizzle;(function(){function fakeDefine(fn){Prototype._actual_sizzle=fn()}fakeDefine.amd=true;if(typeof define!=="undefined"&&define.amd){Prototype._original_define=define;Prototype._actual_sizzle=null;window.define=fakeDefine}})();
(function(window){var i,support,Expr,getText,isXML,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b)hasDuplicate=true;return 0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=
arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?\x3d)"+
whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\x3e+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("\x3d"+whitespace+"*([^\\]'\"]*?)"+
whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+
"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[\x3e+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?\x3d[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,
escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]);target.length=j-1}}}function Sizzle(selector,
context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document)setDocument(context);context=context||document;results=results||[];if(!selector||typeof selector!=="string")return results;if((nodeType=context.nodeType)!==1&&nodeType!==9)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1])if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);
return results}}else return results}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;
newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id"))nid=old.replace(rescape,"\\$\x26");else context.setAttribute("id",nid);nid="[id\x3d'"+nid+"'] ";i=groups.length;while(i--)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;newSelector=groups.join(",")}if(newSelector)try{push.apply(results,newContext.querySelectorAll(newSelector));
return results}catch(qsaError){}finally{if(!old)context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength)delete cache[keys.shift()];return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode)div.parentNode.removeChild(div);
div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;while(i--)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)while(cur=cur.nextSibling)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=
elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--)if(seed[j=matchIndexes[i]])seed[j]=!(matches[j]=seed[j])})})}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}support=Sizzle.support={};isXML=
Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;if(doc===document||doc.nodeType!==9||!doc.documentElement)return document;document=doc;docElem=doc.documentElement;documentIsHTML=!isXML(doc);if(parent&&parent!==parent.top)if(parent.addEventListener)parent.addEventListener("unload",
function(){setDocument()},false);else if(parent.attachEvent)parent.attachEvent("onunload",function(){setDocument()});support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert(function(div){div.innerHTML="\x3cdiv class\x3d'a'\x3e\x3c/div\x3e\x3cdiv class\x3d'a i'\x3e\x3c/div\x3e";
div.firstChild.className="i";return div.getElementsByClassName("i").length===2});support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!doc.getElementsByName||!doc.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===
attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag===
"*"){while(elem=results[i++])if(elem.nodeType===1)tmp.push(elem);return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML)return context.getElementsByClassName(className)};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(doc.querySelectorAll)){assert(function(div){div.innerHTML="\x3cselect t\x3d''\x3e\x3coption selected\x3d''\x3e\x3c/option\x3e\x3c/select\x3e";if(div.querySelectorAll("[t^\x3d'']").length)rbuggyQSA.push("[*^$]\x3d"+
whitespace+"*(?:''|\"\")");if(!div.querySelectorAll("[selected]").length)rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");if(!div.querySelectorAll(":checked").length)rbuggyQSA.push(":checked")});assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name\x3dd]").length)rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?\x3d");if(!div.querySelectorAll(":enabled").length)rbuggyQSA.push(":enabled",
":disabled");div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!\x3d'']:x");rbuggyMatches.push("!\x3d",pseudos)});rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));
hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return true;return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-
!b.compareDocumentPosition;if(compare)return compare;compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a))return-1;if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b))return 1;return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;
return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;else if(aup===bup)return siblingCheck(a,b);cur=a;while(cur=cur.parentNode)ap.unshift(cur);cur=b;while(cur=cur.parentNode)bp.unshift(cur);while(ap[i]===bp[i])i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return doc};Sizzle.matches=function(expr,elements){return Sizzle(expr,
null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document)setDocument(elem);expr=expr.replace(rattributeQuotes,"\x3d'$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,
elem){if((context.ownerDocument||context)!==document)setDocument(context);return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document)setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+
msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++])if(elem===results[i])j=duplicates.push(i);while(j--)results.splice(duplicates[j],1)}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType)while(node=elem[i++])ret+=getText(node);else if(nodeType===1||nodeType===
9||nodeType===11)if(typeof elem.textContent==="string")return elem.textContent;else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else if(nodeType===3||nodeType===4)return elem.nodeValue;return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{"\x3e":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=
match[1].replace(runescape,funescape);match[3]=(match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~\x3d")match[3]=" "+match[3]+" ";return match.slice(0,4)},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3])Sizzle.error(match[0]);match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3])Sizzle.error(match[0]);return match},"PSEUDO":function(match){var excess,
unquoted=!match[5]&&match[2];if(matchExpr["CHILD"].test(match[0]))return null;if(match[3]&&match[4]!==undefined)match[2]=match[4];else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector===
"*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},"ATTR":function(name,operator,check){return function(elem){var result=
Sizzle.attr(elem,name);if(result==null)return operator==="!\x3d";if(!operator)return true;result+="";return operator==="\x3d"?result===check:operator==="!\x3d"?result!==check:operator==="^\x3d"?check&&result.indexOf(check)===0:operator==="*\x3d"?check&&result.indexOf(check)>-1:operator==="$\x3d"?check&&result.slice(-check.length)===check:operator==="~\x3d"?(" "+result+" ").indexOf(check)>-1:operator==="|\x3d"?result===check||result.slice(0,check.length+1)===check+"-":false}},"CHILD":function(type,
what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while(node=node[dir])if(ofType?node.nodeName.toLowerCase()===
name:node.nodeType===1)return false;start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,
nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache)(node[expando]||(node[expando]={}))[type]=[dirruns,diff];if(node===elem)break}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||
Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando])return fn(argument);if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{"not":markFunction(function(selector){var input=
[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--)if(elem=unmatched[i])seed[i]=!(matches[i]=elem)}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop()}}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||
elem.innerText||getText(elem)).indexOf(text)>-1}}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||""))Sizzle.error("unsupported lang: "+lang);lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),"target":function(elem){var hash=
window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},"root":function(elem){return elem===docElem},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},"enabled":function(elem){return elem.disabled===false},"disabled":function(elem){return elem.disabled===true},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&
!!elem.selected},"selected":function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===true},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return false;return true},"parent":function(elem){return!Expr.pseudos["empty"](elem)},"header":function(elem){return rheader.test(elem.nodeName)},"input":function(elem){return rinputs.test(elem.nodeName)},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&
elem.type==="button"||name==="button"},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},"first":createPositionalPseudo(function(){return[0]}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1]}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),"even":createPositionalPseudo(function(matchIndexes,
length){var i=0;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;)matchIndexes.push(i);return matchIndexes}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;)matchIndexes.push(i);
return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:true,reset:true})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match)soFar=soFar.slice(match[0].length)||soFar;groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,
type:type,matches:match});soFar=soFar.slice(matched.length)}if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir])if(elem.nodeType===
1||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml)while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements)if(matcher(elem,context,xml))return true}else while(elem=elem[dir])if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];else{outerCache[dir]=newCache;if(newCache[2]=
matcher(elem,context,xml))return true}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--)if(!matchers[i](elem,context,xml))return false;return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<
len;i++)if(elem=unmatched[i])if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped)map.push(i)}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando])postFilter=setMatcher(postFilter);if(postFinder&&!postFinder[expando])postFinder=setMatcher(postFinder,postSelector);return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||
"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher)matcher(matcherIn,matcherOut,context,xml);if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--)if(elem=temp[i])matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}if(seed){if(postFinder||preFilter){if(postFinder){temp=
[];i=matcherOut.length;while(i--)if(elem=matcherOut[i])temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--)if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1)seed[temp]=!(results[temp]=elem)}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder)postFinder(null,results,matcherOut,xml);else push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){var checkContext,
matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,
xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++)if(Expr.relative[tokens[j].type])break;return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,
j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=
contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost)outermostContext=context!==document&&context;for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=elementMatchers[j++])if(matcher(elem,context,xml)){results.push(elem);break}if(outermost)dirruns=dirrunsUnique}if(bySet){if(elem=!matcher&&elem)matchedCount--;if(seed)unmatched.push(elem)}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++])matcher(unmatched,setMatched,context,xml);
if(seed){if(matchedCount>0)while(i--)if(!(unmatched[i]||setMatched[i]))setMatched[i]=pop.call(results);setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1)Sizzle.uniqueSort(results)}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=
compilerCache[selector+" "];if(!cached){if(!match)match=tokenize(selector);i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando])setMatchers.push(cached);else elementMatchers.push(cached)}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=
compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context)return results;else if(compiled)context=context.parentNode;selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;
while(i--){token=tokens[i];if(Expr.relative[type=token.type])break;if(find=Expr.find[type])if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);return results};
support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="\x3ca href\x3d'#'\x3e\x3c/a\x3e";return div.firstChild.getAttribute("href")==="#"}))addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)});if(!support.attributes||
!assert(function(div){div.innerHTML="\x3cinput/\x3e";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""}))addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input")return elem.defaultValue});if(!assert(function(div){return div.getAttribute("disabled")==null}))addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null});
if(typeof define==="function"&&define.amd)define(function(){return Sizzle});else if(typeof module!=="undefined"&&module.exports)module.exports=Sizzle;else window.Sizzle=Sizzle})(window);
(function(){if(typeof Sizzle!=="undefined")return;if(typeof define!=="undefined"&&define.amd){window.Sizzle=Prototype._actual_sizzle;window.define=Prototype._original_define;delete Prototype._actual_sizzle;delete Prototype._original_define}else if(typeof module!=="undefined"&&module.exports){window.Sizzle=module.exports;module.exports={}}})();
(function(engine){var extendElements=Prototype.Selector.extendElements;function select(selector,scope){return extendElements(engine(selector,scope||document))}function match(element,selector){return engine.matches(selector,[element]).length==1}Prototype.Selector.engine=engine;Prototype.Selector.select=select;Prototype.Selector.match=match})(Sizzle);window.Sizzle=Prototype._original_property;delete Prototype._original_property;
var Form={reset:function(form){form=$(form);form.reset();return form},serializeElements:function(elements,options){if(typeof options!="object")options={hash:!!options};else if(Object.isUndefined(options.hash))options.hash=true;var key,value,submitted=false,submit=options.submit,accumulator,initial;if(options.hash){initial={};accumulator=function(result,key,value){if(key in result){if(!Object.isArray(result[key]))result[key]=[result[key]];result[key]=result[key].concat(value)}else result[key]=value;
return result}}else{initial="";accumulator=function(result,key,values){if(!Object.isArray(values))values=[values];if(!values.length)return result;var encodedKey=encodeURIComponent(key).gsub(/%20/,"+");return result+(result?"\x26":"")+values.map(function(value){value=value.gsub(/(\r)?\n/,"\r\n");value=encodeURIComponent(value);value=value.gsub(/%20/,"+");return encodedKey+"\x3d"+value}).join("\x26")}}return elements.inject(initial,function(result,element){if(!element.disabled&&element.name){key=element.name;
value=$(element).getValue();if(value!=null&&element.type!="file"&&(element.type!="submit"||!submitted&&submit!==false&&(!submit||key==submit)&&(submitted=true)))result=accumulator(result,key,value)}return result})}};
Form.Methods={serialize:function(form,options){return Form.serializeElements(Form.getElements(form),options)},getElements:function(form){var elements=$(form).getElementsByTagName("*");var element,results=[],serializers=Form.Element.Serializers;for(var i=0;element=elements[i];i++)if(serializers[element.tagName.toLowerCase()])results.push(Element.extend(element));return results},getInputs:function(form,typeName,name){form=$(form);var inputs=form.getElementsByTagName("input");if(!typeName&&!name)return $A(inputs).map(Element.extend);
for(var i=0,matchingInputs=[],length=inputs.length;i<length;i++){var input=inputs[i];if(typeName&&input.type!=typeName||name&&input.name!=name)continue;matchingInputs.push(Element.extend(input))}return matchingInputs},disable:function(form){form=$(form);Form.getElements(form).invoke("disable");return form},enable:function(form){form=$(form);Form.getElements(form).invoke("enable");return form},findFirstElement:function(form){var elements=$(form).getElements().findAll(function(element){return"hidden"!=
element.type&&!element.disabled});var firstByIndex=elements.findAll(function(element){return element.hasAttribute("tabIndex")&&element.tabIndex>=0}).sortBy(function(element){return element.tabIndex}).first();return firstByIndex?firstByIndex:elements.find(function(element){return/^(?:input|select|textarea)$/i.test(element.tagName)})},request:function(form,options){form=$(form),options=Object.clone(options||{});var params=options.parameters,action=form.readAttribute("action")||"";if(action.blank())action=
window.location.href;options.parameters=form.serialize(true);if(params){if(Object.isString(params))params=params.toQueryParams();Object.extend(options.parameters,params)}if(form.hasAttribute("method")&&!options.method)options.method=form.method;return new Ajax.Request(action,options)}};Form.Element={focus:function(element){$(element).focus();return element},select:function(element){$(element).select();return element}};
Form.Element.Methods={serialize:function(element){element=$(element);if(!element.disabled&&element.name){var value=element.getValue();if(value!=undefined){var pair={};pair[element.name]=value;return Object.toQueryString(pair)}}return""},getValue:function(element){element=$(element);var method=element.tagName.toLowerCase();return Form.Element.Serializers[method](element)},setValue:function(element,value){element=$(element);var method=element.tagName.toLowerCase();Form.Element.Serializers[method](element,
value);return element},clear:function(element){$(element).value="";return element},present:function(element){return $(element).value!=""},activate:function(element){element=$(element);try{element.focus();if(element.select&&(element.tagName.toLowerCase()!="input"||!/^(?:button|reset|submit)$/i.test(element.type)))element.select()}catch(e){}return element},disable:function(element){element=$(element);element.disabled=true;return element},enable:function(element){element=$(element);element.disabled=
false;return element}};var Field=Form.Element;var $F=Form.Element.Methods.getValue;
Form.Element.Serializers=function(){function input(element,value){switch(element.type.toLowerCase()){case "checkbox":case "radio":return inputSelector(element,value);default:return valueSelector(element,value)}}function inputSelector(element,value){if(Object.isUndefined(value))return element.checked?element.value:null;else element.checked=!!value}function valueSelector(element,value){if(Object.isUndefined(value))return element.value;else element.value=value}function select(element,value){if(Object.isUndefined(value))return(element.type===
"select-one"?selectOne:selectMany)(element);var opt,currentValue,single=!Object.isArray(value);for(var i=0,length=element.length;i<length;i++){opt=element.options[i];currentValue=this.optionValue(opt);if(single){if(currentValue==value){opt.selected=true;return}}else opt.selected=value.include(currentValue)}}function selectOne(element){var index=element.selectedIndex;return index>=0?optionValue(element.options[index]):null}function selectMany(element){var values,length=element.length;if(!length)return null;
for(var i=0,values=[];i<length;i++){var opt=element.options[i];if(opt.selected)values.push(optionValue(opt))}return values}function optionValue(opt){return Element.hasAttribute(opt,"value")?opt.value:opt.text}return{input:input,inputSelector:inputSelector,textarea:valueSelector,select:select,selectOne:selectOne,selectMany:selectMany,optionValue:optionValue,button:valueSelector}}();
Abstract.TimedObserver=Class.create(PeriodicalExecuter,{initialize:function($super,element,frequency,callback){$super(callback,frequency);this.element=$(element);this.lastValue=this.getValue()},execute:function(){var value=this.getValue();if(Object.isString(this.lastValue)&&Object.isString(value)?this.lastValue!=value:String(this.lastValue)!=String(value)){this.callback(this.element,value);this.lastValue=value}}});Form.Element.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.Element.getValue(this.element)}});
Form.Observer=Class.create(Abstract.TimedObserver,{getValue:function(){return Form.serialize(this.element)}});
Abstract.EventObserver=Class.create({initialize:function(element,callback){this.element=$(element);this.callback=callback;this.lastValue=this.getValue();if(this.element.tagName.toLowerCase()=="form")this.registerFormCallbacks();else this.registerCallback(this.element)},onElementEvent:function(){var value=this.getValue();if(this.lastValue!=value){this.callback(this.element,value);this.lastValue=value}},registerFormCallbacks:function(){Form.getElements(this.element).each(this.registerCallback,this)},
registerCallback:function(element){if(element.type)switch(element.type.toLowerCase()){case "checkbox":case "radio":Event.observe(element,"click",this.onElementEvent.bind(this));break;default:Event.observe(element,"change",this.onElementEvent.bind(this));break}}});Form.Element.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.Element.getValue(this.element)}});Form.EventObserver=Class.create(Abstract.EventObserver,{getValue:function(){return Form.serialize(this.element)}});
(function(GLOBAL){var DIV=document.createElement("div");var docEl=document.documentElement;var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED="onmouseenter"in docEl&&"onmouseleave"in docEl;var Event={KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45};var isIELegacyEvent=function(event){return false};if(window.attachEvent)if(window.addEventListener)isIELegacyEvent=function(event){return!(event instanceof
window.Event)};else isIELegacyEvent=function(event){return true};var _isButton;function _isButtonForDOMEvents(event,code){return event.which?event.which===code+1:event.button===code}var legacyButtonMap={0:1,1:4,2:2};function _isButtonForLegacyEvents(event,code){return event.button===legacyButtonMap[code]}function _isButtonForWebKit(event,code){switch(code){case 0:return event.which==1&&!event.metaKey;case 1:return event.which==2||event.which==1&&event.metaKey;case 2:return event.which==3;default:return false}}
if(window.attachEvent)if(!window.addEventListener)_isButton=_isButtonForLegacyEvents;else _isButton=function(event,code){return isIELegacyEvent(event)?_isButtonForLegacyEvents(event,code):_isButtonForDOMEvents(event,code)};else if(Prototype.Browser.WebKit)_isButton=_isButtonForWebKit;else _isButton=_isButtonForDOMEvents;function isLeftClick(event){return _isButton(event,0)}function isMiddleClick(event){return _isButton(event,1)}function isRightClick(event){return _isButton(event,2)}function element(event){return Element.extend(_element(event))}
function _element(event){event=Event.extend(event);var node=event.target,type=event.type,currentTarget=event.currentTarget;if(currentTarget&&currentTarget.tagName)if(type==="load"||type==="error"||type==="click"&&currentTarget.tagName.toLowerCase()==="input"&&currentTarget.type==="radio")node=currentTarget;return node.nodeType==Node.TEXT_NODE?node.parentNode:node}function findElement(event,expression){var element=_element(event),selector=Prototype.Selector;if(!expression)return Element.extend(element);
while(element){if(Object.isElement(element)&&selector.match(element,expression))return Element.extend(element);element=element.parentNode}}function pointer(event){return{x:pointerX(event),y:pointerY(event)}}function pointerX(event){var docElement=document.documentElement,body=document.body||{scrollLeft:0};return event.pageX||event.clientX+(docElement.scrollLeft||body.scrollLeft)-(docElement.clientLeft||0)}function pointerY(event){var docElement=document.documentElement,body=document.body||{scrollTop:0};
return event.pageY||event.clientY+(docElement.scrollTop||body.scrollTop)-(docElement.clientTop||0)}function stop(event){Event.extend(event);event.preventDefault();event.stopPropagation();event.stopped=true}Event.Methods={isLeftClick:isLeftClick,isMiddleClick:isMiddleClick,isRightClick:isRightClick,element:element,findElement:findElement,pointer:pointer,pointerX:pointerX,pointerY:pointerY,stop:stop};var methods=Object.keys(Event.Methods).inject({},function(m,name){m[name]=Event.Methods[name].methodize();
return m});if(window.attachEvent){function _relatedTarget(event){var element;switch(event.type){case "mouseover":case "mouseenter":element=event.fromElement;break;case "mouseout":case "mouseleave":element=event.toElement;break;default:return null}return Element.extend(element)}var additionalMethods={stopPropagation:function(){this.cancelBubble=true},preventDefault:function(){this.returnValue=false},inspect:function(){return"[object Event]"}};Event.extend=function(event,element){if(!event)return false;
if(!isIELegacyEvent(event))return event;if(event._extendedByPrototype)return event;event._extendedByPrototype=Prototype.emptyFunction;var pointer=Event.pointer(event);Object.extend(event,{target:event.srcElement||element,relatedTarget:_relatedTarget(event),pageX:pointer.x,pageY:pointer.y});Object.extend(event,methods);Object.extend(event,additionalMethods);return event}}else Event.extend=Prototype.K;if(window.addEventListener){Event.prototype=window.Event.prototype||document.createEvent("HTMLEvents").__proto__;
Object.extend(Event.prototype,methods)}var EVENT_TRANSLATIONS={mouseenter:"mouseover",mouseleave:"mouseout"};function getDOMEventName(eventName){return EVENT_TRANSLATIONS[eventName]||eventName}if(MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED)getDOMEventName=Prototype.K;function getUniqueElementID(element){if(element===window)return 0;if(typeof element._prototypeUID==="undefined")element._prototypeUID=Element.Storage.UID++;return element._prototypeUID}function getUniqueElementID_IE(element){if(element===
window)return 0;if(element==document)return 1;return element.uniqueID}if("uniqueID"in DIV)getUniqueElementID=getUniqueElementID_IE;function isCustomEvent(eventName){return eventName.include(":")}Event._isCustomEvent=isCustomEvent;function getOrCreateRegistryFor(element,uid){var CACHE=GLOBAL.Event.cache;if(Object.isUndefined(uid))uid=getUniqueElementID(element);if(!CACHE[uid])CACHE[uid]={element:element};return CACHE[uid]}function destroyRegistryForElement(element,uid){if(Object.isUndefined(uid))uid=
getUniqueElementID(element);delete GLOBAL.Event.cache[uid]}function register(element,eventName,handler){var registry=getOrCreateRegistryFor(element);if(!registry[eventName])registry[eventName]=[];var entries=registry[eventName];var i=entries.length;while(i--)if(entries[i].handler===handler)return null;var uid=getUniqueElementID(element);var responder=GLOBAL.Event._createResponder(uid,eventName,handler);var entry={responder:responder,handler:handler};entries.push(entry);return entry}function unregister(element,
eventName,handler){var registry=getOrCreateRegistryFor(element);var entries=registry[eventName]||[];var i=entries.length,entry;while(i--)if(entries[i].handler===handler){entry=entries[i];break}if(entry){var index=entries.indexOf(entry);entries.splice(index,1)}if(entries.length===0){delete registry[eventName];if(Object.keys(registry).length===1&&"element"in registry)destroyRegistryForElement(element)}return entry}function observe(element,eventName,handler){element=$(element);var entry=register(element,
eventName,handler);if(entry===null)return element;var responder=entry.responder;if(isCustomEvent(eventName))observeCustomEvent(element,eventName,responder);else observeStandardEvent(element,eventName,responder);return element}function observeStandardEvent(element,eventName,responder){var actualEventName=getDOMEventName(eventName);if(element.addEventListener)element.addEventListener(actualEventName,responder,false);else element.attachEvent("on"+actualEventName,responder)}function observeCustomEvent(element,
eventName,responder){if(element.addEventListener)element.addEventListener("dataavailable",responder,false);else{element.attachEvent("ondataavailable",responder);element.attachEvent("onlosecapture",responder)}}function stopObserving(element,eventName,handler){element=$(element);var handlerGiven=!Object.isUndefined(handler),eventNameGiven=!Object.isUndefined(eventName);if(!eventNameGiven&&!handlerGiven){stopObservingElement(element);return element}if(!handlerGiven){stopObservingEventName(element,eventName);
return element}var entry=unregister(element,eventName,handler);if(!entry)return element;removeEvent(element,eventName,entry.responder);return element}function stopObservingStandardEvent(element,eventName,responder){var actualEventName=getDOMEventName(eventName);if(element.removeEventListener)element.removeEventListener(actualEventName,responder,false);else element.detachEvent("on"+actualEventName,responder)}function stopObservingCustomEvent(element,eventName,responder){if(element.removeEventListener)element.removeEventListener("dataavailable",
responder,false);else{element.detachEvent("ondataavailable",responder);element.detachEvent("onlosecapture",responder)}}function stopObservingElement(element){var uid=getUniqueElementID(element),registry=GLOBAL.Event.cache[uid];if(!registry)return;destroyRegistryForElement(element,uid);var entries,i;for(var eventName in registry){if(eventName==="element")continue;entries=registry[eventName];i=entries.length;while(i--)removeEvent(element,eventName,entries[i].responder)}}function stopObservingEventName(element,
eventName){var registry=getOrCreateRegistryFor(element);var entries=registry[eventName];if(entries)delete registry[eventName];entries=entries||[];var i=entries.length;while(i--)removeEvent(element,eventName,entries[i].responder);for(var name in registry){if(name==="element")continue;return}destroyRegistryForElement(element)}function removeEvent(element,eventName,handler){if(isCustomEvent(eventName))stopObservingCustomEvent(element,eventName,handler);else stopObservingStandardEvent(element,eventName,
handler)}function getFireTarget(element){if(element!==document)return element;if(document.createEvent&&!element.dispatchEvent)return document.documentElement;return element}function fire(element,eventName,memo,bubble){element=getFireTarget($(element));if(Object.isUndefined(bubble))bubble=true;memo=memo||{};var event=fireEvent(element,eventName,memo,bubble);return Event.extend(event)}function fireEvent_DOM(element,eventName,memo,bubble){var event=document.createEvent("HTMLEvents");event.initEvent("dataavailable",
bubble,true);event.eventName=eventName;event.memo=memo;element.dispatchEvent(event);return event}function fireEvent_IE(element,eventName,memo,bubble){var event=document.createEventObject();event.eventType=bubble?"ondataavailable":"onlosecapture";event.eventName=eventName;event.memo=memo;element.fireEvent(event.eventType,event);return event}var fireEvent=document.createEvent?fireEvent_DOM:fireEvent_IE;Event.Handler=Class.create({initialize:function(element,eventName,selector,callback){this.element=
$(element);this.eventName=eventName;this.selector=selector;this.callback=callback;this.handler=this.handleEvent.bind(this)},start:function(){Event.observe(this.element,this.eventName,this.handler);return this},stop:function(){Event.stopObserving(this.element,this.eventName,this.handler);return this},handleEvent:function(event){var element=Event.findElement(event,this.selector);if(element)this.callback.call(this.element,event,element)}});function on(element,eventName,selector,callback){element=$(element);
if(Object.isFunction(selector)&&Object.isUndefined(callback))callback=selector,selector=null;return(new Event.Handler(element,eventName,selector,callback)).start()}Object.extend(Event,Event.Methods);Object.extend(Event,{fire:fire,observe:observe,stopObserving:stopObserving,on:on});Element.addMethods({fire:fire,observe:observe,stopObserving:stopObserving,on:on});Object.extend(document,{fire:fire.methodize(),observe:observe.methodize(),stopObserving:stopObserving.methodize(),on:on.methodize(),loaded:false});
if(GLOBAL.Event)Object.extend(window.Event,Event);else GLOBAL.Event=Event;GLOBAL.Event.cache={};function destroyCache_IE(){GLOBAL.Event.cache=null}if(window.attachEvent)window.attachEvent("onunload",destroyCache_IE);DIV=null;docEl=null})(this);
(function(GLOBAL){var docEl=document.documentElement;var MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED="onmouseenter"in docEl&&"onmouseleave"in docEl;function isSimulatedMouseEnterLeaveEvent(eventName){return!MOUSEENTER_MOUSELEAVE_EVENTS_SUPPORTED&&(eventName==="mouseenter"||eventName==="mouseleave")}function createResponder(uid,eventName,handler){if(Event._isCustomEvent(eventName))return createResponderForCustomEvent(uid,eventName,handler);if(isSimulatedMouseEnterLeaveEvent(eventName))return createMouseEnterLeaveResponder(uid,
eventName,handler);return function(event){if(!Event.cache)return;var element=Event.cache[uid].element;Event.extend(event,element);handler.call(element,event)}}function createResponderForCustomEvent(uid,eventName,handler){return function(event){var cache=Event.cache[uid];var element=cache&&cache.element;if(Object.isUndefined(event.eventName))return false;if(event.eventName!==eventName)return false;Event.extend(event,element);handler.call(element,event)}}function createMouseEnterLeaveResponder(uid,
eventName,handler){return function(event){var element=Event.cache[uid].element;Event.extend(event,element);var parent=event.relatedTarget;while(parent&&parent!==element)try{parent=parent.parentNode}catch(e){parent=element}if(parent===element)return;handler.call(element,event)}}GLOBAL.Event._createResponder=createResponder;docEl=null})(this);
(function(GLOBAL){var TIMER;function fireContentLoadedEvent(){if(document.loaded)return;if(TIMER)window.clearTimeout(TIMER);document.loaded=true;document.fire("dom:loaded")}function checkReadyState(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",checkReadyState);fireContentLoadedEvent()}}function pollDoScroll(){try{document.documentElement.doScroll("left")}catch(e){TIMER=pollDoScroll.defer();return}fireContentLoadedEvent()}if(document.readyState==="complete"){fireContentLoadedEvent();
return}if(document.addEventListener)document.addEventListener("DOMContentLoaded",fireContentLoadedEvent,false);else{document.attachEvent("onreadystatechange",checkReadyState);if(window==top)TIMER=pollDoScroll.defer()}Event.observe(window,"load",fireContentLoadedEvent)})(this);Element.addMethods();Hash.toQueryString=Object.toQueryString;var Toggle={display:Element.toggle};Element.addMethods({childOf:Element.Methods.descendantOf});
var Insertion={Before:function(element,content){return Element.insert(element,{before:content})},Top:function(element,content){return Element.insert(element,{top:content})},Bottom:function(element,content){return Element.insert(element,{bottom:content})},After:function(element,content){return Element.insert(element,{after:content})}};var $continue=new Error('"throw $continue" is deprecated, use "return" instead');
var Position={includeScrollOffsets:false,prepare:function(){this.deltaX=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;this.deltaY=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},within:function(element,x,y){if(this.includeScrollOffsets)return this.withinIncludingScrolloffsets(element,x,y);this.xcomp=x;this.ycomp=y;this.offset=Element.cumulativeOffset(element);return y>=this.offset[1]&&y<this.offset[1]+element.offsetHeight&&
x>=this.offset[0]&&x<this.offset[0]+element.offsetWidth},withinIncludingScrolloffsets:function(element,x,y){var offsetcache=Element.cumulativeScrollOffset(element);this.xcomp=x+offsetcache[0]-this.deltaX;this.ycomp=y+offsetcache[1]-this.deltaY;this.offset=Element.cumulativeOffset(element);return this.ycomp>=this.offset[1]&&this.ycomp<this.offset[1]+element.offsetHeight&&this.xcomp>=this.offset[0]&&this.xcomp<this.offset[0]+element.offsetWidth},overlap:function(mode,element){if(!mode)return 0;if(mode==
"vertical")return(this.offset[1]+element.offsetHeight-this.ycomp)/element.offsetHeight;if(mode=="horizontal")return(this.offset[0]+element.offsetWidth-this.xcomp)/element.offsetWidth},cumulativeOffset:Element.Methods.cumulativeOffset,positionedOffset:Element.Methods.positionedOffset,absolutize:function(element){Position.prepare();return Element.absolutize(element)},relativize:function(element){Position.prepare();return Element.relativize(element)},realOffset:Element.Methods.cumulativeScrollOffset,
offsetParent:Element.Methods.getOffsetParent,page:Element.Methods.viewportOffset,clone:function(source,target,options){options=options||{};return Element.clonePosition(target,source,options)}};
if(!document.getElementsByClassName)document.getElementsByClassName=function(instanceMethods){function iter(name){return name.blank()?null:"[contains(concat(' ', @class, ' '), ' "+name+" ')]"}instanceMethods.getElementsByClassName=Prototype.BrowserFeatures.XPath?function(element,className){className=className.toString().strip();var cond=/\s/.test(className)?$w(className).map(iter).join(""):iter(className);return cond?document._getElementsByXPath(".//*"+cond,element):[]}:function(element,className){className=
className.toString().strip();var elements=[],classNames=/\s/.test(className)?$w(className):null;if(!classNames&&!className)return elements;var nodes=$(element).getElementsByTagName("*");className=" "+className+" ";for(var i=0,child,cn;child=nodes[i];i++)if(child.className&&(cn=" "+child.className+" ")&&(cn.include(className)||classNames&&classNames.all(function(name){return!name.toString().blank()&&cn.include(" "+name+" ")})))elements.push(Element.extend(child));return elements};return function(className,
parentElement){return $(parentElement||document.body).getElementsByClassName(className)}}(Element.Methods);Element.ClassNames=Class.create();
Element.ClassNames.prototype={initialize:function(element){this.element=$(element)},_each:function(iterator,context){this.element.className.split(/\s+/).select(function(name){return name.length>0})._each(iterator,context)},set:function(className){this.element.className=className},add:function(classNameToAdd){if(this.include(classNameToAdd))return;this.set($A(this).concat(classNameToAdd).join(" "))},remove:function(classNameToRemove){if(!this.include(classNameToRemove))return;this.set($A(this).without(classNameToRemove).join(" "))},
toString:function(){return $A(this).join(" ")}};Object.extend(Element.ClassNames.prototype,Enumerable);
(function(){window.Selector=Class.create({initialize:function(expression){this.expression=expression.strip()},findElements:function(rootElement){return Prototype.Selector.select(this.expression,rootElement)},match:function(element){return Prototype.Selector.match(element,this.expression)},toString:function(){return this.expression},inspect:function(){return"#\x3cSelector: "+this.expression+"\x3e"}});Object.extend(Selector,{matchElements:function(elements,expression){var match=Prototype.Selector.match,
results=[];for(var i=0,length=elements.length;i<length;i++){var element=elements[i];if(match(element,expression))results.push(Element.extend(element))}return results},findElement:function(elements,expression,index){index=index||0;var matchIndex=0,element;for(var i=0,length=elements.length;i<length;i++){element=elements[i];if(Prototype.Selector.match(element,expression)&&index===matchIndex++)return Element.extend(element)}},findChildElements:function(element,expressions){var selector=expressions.toArray().join(", ");
return Prototype.Selector.select(selector,element||document)}})})();
var Hansa={getNumber:function(element){var $element=typeof element==="string"?jQuery("#"+element):jQuery(element);return this.getNumberFromString($element.val())},getNumberFromString:function(str){var value=String(str).replace(new RegExp(","),".");return Number(isNaN(value)?0:value)},round:function(element,X){var pow=Math.pow(10,!X?2:X);return Math.round(this.getNumber(element)*pow)/pow},deleteWhitespaces:function(str){return str==null?"":String(str).replace(/[\s\u00A0]/g,"")}};
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){var e,i;function f(){return e.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function u(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===
Object.getOwnPropertyNames(e).length;for(var t in e)if(m(e,t))return;return 1}function r(e){return void 0===e}function h(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function a(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){for(var n=[],s=0;s<e.length;++s)n.push(t(e[s],s));return n}function c(e,t){for(var n in t)m(t,n)&&(e[n]=t[n]);return m(t,"toString")&&(e.toString=t.toString),m(t,"valueOf")&&(e.valueOf=t.valueOf),
e}function _(e,t,n,s){return xt(e,t,n,s,!0).utc()}function y(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){if(null==e._isValid){var t=y(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&
!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function w(e){var t=_(NaN);return null!=e?c(y(t),e):y(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],
s,t))return!0;return!1};var p=f.momentProperties=[],t=!1;function v(e,t){var n,s,i;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=y(t)),r(t._locale)||(e._locale=t._locale),0<p.length)for(n=0;n<p.length;n++)r(i=t[s=p[n]])||(e[s]=i);return e}function k(e){v(this,e),this._d=
new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,f.updateOffset(this),t=!1)}function M(e){return e instanceof k||null!=e&&null!=e._isAMomentObject}function D(e){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function n(i,r){var a=!0;return c(function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,i),a){for(var e,t,n=[],s=0;s<arguments.length;s++){if(e="","object"==typeof arguments[s]){for(t in e+=
"\n["+s+"] ",arguments[0])m(arguments[0],t)&&(e+=t+": "+arguments[0][t]+", ");e=e.slice(0,-2)}else e=arguments[s];n.push(e)}D(i+"\nArguments: "+Array.prototype.slice.call(n).join("")+"\n"+(new Error).stack),a=!1}return r.apply(this,arguments)},r)}var s,S={};function Y(e,t){null!=f.deprecationHandler&&f.deprecationHandler(e,t),S[e]||(D(t),S[e]=!0)}function O(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function b(e,t){var n,s=
c({},e);for(n in t)m(t,n)&&(u(e[n])&&u(t[n])?(s[n]={},c(s[n],e[n]),c(s[n],t[n])):null!=t[n]?s[n]=t[n]:delete s[n]);for(n in e)m(e,n)&&!m(t,n)&&u(e[n])&&(s[n]=c({},s[n]));return s}function x(e){null!=e&&this.set(e)}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null,s=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)m(e,t)&&n.push(t);return n};function T(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
P=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},W={};function C(e,t,n,s){var i="string"==typeof s?function(){return this[s]()}:s;e&&(W[e]=i),t&&(W[t[0]]=function(){return T(i.apply(this,arguments),t[1],t[2])}),n&&(W[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e,t){return e.isValid()?(t=H(t,e.localeData()),R[t]=R[t]||function(s){for(var e,i=s.match(N),t=0,r=i.length;t<r;t++)W[i[t]]?i[t]=W[i[t]]:i[t]=(e=i[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):
e.replace(/\\/g,"");return function(e){for(var t="",n=0;n<r;n++)t+=O(i[n])?i[n].call(e,s):i[n];return t}}(t),R[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function s(e){return t.longDateFormat(e)||e}for(P.lastIndex=0;0<=n&&P.test(e);)e=e.replace(P,s),P.lastIndex=0,--n;return e}var F={};function L(e,t){var n=e.toLowerCase();F[n]=F[n+"s"]=F[t]=e}function V(e){return"string"==typeof e?F[e]||F[e.toLowerCase()]:void 0}function G(e){var t,n,s={};for(n in e)m(e,n)&&(t=V(n))&&(s[t]=e[n]);
return s}var E={};function A(e,t){E[e]=t}function j(e){return e%4==0&&e%100!=0||e%400==0}function I(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Z(e){var t=+e,n=0;return 0!=t&&isFinite(t)&&(n=I(t)),n}function z(t,n){return function(e){return null!=e?(q(this,t,e),f.updateOffset(this,n),this):$(this,t)}}function $(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&j(e.year())&&1===e.month()&&29===e.date()?(n=Z(n),e._d["set"+
(e._isUTC?"UTC":"")+t](n,e.month(),xe(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var B,J=/\d/,Q=/\d\d/,X=/\d{3}/,K=/\d{4}/,ee=/[+-]?\d{6}/,te=/\d\d?/,ne=/\d\d\d\d?/,se=/\d\d\d\d\d\d?/,ie=/\d{1,3}/,re=/\d{1,4}/,ae=/[+-]?\d{1,6}/,oe=/\d+/,ue=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,he=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function ce(e,n,s){B[e]=O(n)?n:function(e,
t){return e&&s?s:n}}function fe(e,t){return m(B,e)?B[e](t._strict,t._locale):new RegExp(me(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i})))}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}B={};var _e={};function ye(e,n){var t,s=n;for("string"==typeof e&&(e=[e]),h(n)&&(s=function(e,t){t[n]=Z(e)}),t=0;t<e.length;t++)_e[e[t]]=s}function ge(e,i){ye(e,function(e,t,n,s){n._w=n._w||{},i(e,n._w,n,s)})}var we,pe=0,ve=1,ke=2,Me=3,
De=4,Se=5,Ye=6,Oe=7,be=8;function xe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,s=(t%(n=12)+n)%n;return e+=(t-s)/12,1==s?j(e)?29:28:31-s%7%2}we=Array.prototype.indexOf?Array.prototype.indexOf:function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},C("M",["MM",2],"Mo",function(){return this.month()+1}),C("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),C("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),A("month",8),ce("M",te),
ce("MM",te,Q),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),ye(["M","MM"],function(e,t){t[ve]=Z(e)-1}),ye(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[ve]=i:y(n).invalidMonth=e});var Te="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Pe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Re=de,We=de;function Ce(e,
t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Z(t);else if(!h(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),xe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ue(e){return null!=e?(Ce(this,e),f.updateOffset(this,!0),this):$(this,"Month")}function He(){function e(e,t){return t.length-e.length}for(var t,n=[],s=[],i=[],r=0;r<12;r++)t=_([2E3,r]),n.push(this.monthsShort(t,"")),s.push(this.months(t,"")),i.push(this.months(t,"")),
i.push(this.monthsShort(t,""));for(n.sort(e),s.sort(e),i.sort(e),r=0;r<12;r++)n[r]=me(n[r]),s[r]=me(s[r]);for(r=0;r<24;r++)i[r]=me(i[r]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function Fe(e){return j(e)?366:365}C("Y",0,0,function(){var e=this.year();return e<=9999?T(e,4):"+"+e}),C(0,["YY",2],0,function(){return this.year()%
100}),C(0,["YYYY",4],0,"year"),C(0,["YYYYY",5],0,"year"),C(0,["YYYYYY",6,!0],0,"year"),L("year","y"),A("year",1),ce("Y",ue),ce("YY",te,Q),ce("YYYY",re,K),ce("YYYYY",ae,ee),ce("YYYYYY",ae,ee),ye(["YYYYY","YYYYYY"],pe),ye("YYYY",function(e,t){t[pe]=2===e.length?f.parseTwoDigitYear(e):Z(e)}),ye("YY",function(e,t){t[pe]=f.parseTwoDigitYear(e)}),ye("Y",function(e,t){t[pe]=parseInt(e,10)}),f.parseTwoDigitYear=function(e){return Z(e)+(68<Z(e)?1900:2E3)};var Le=z("FullYear",!0);function Ve(e){var t,n;return e<
100&&0<=e?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ge(e,t,n){var s=7+t-n;return s-(7+Ve(e,0,s).getUTCDay()-t)%7-1}function Ee(e,t,n,s,i){var r,a=1+7*(t-1)+(7+n-s)%7+Ge(e,s,i),o=a<=0?Fe(r=e-1)+a:a>Fe(e)?(r=e+1,a-Fe(e)):(r=e,a);return{year:r,dayOfYear:o}}function Ae(e,t,n){var s,i,r=Ge(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1;return a<1?s=
a+je(i=e.year()-1,t,n):a>je(e.year(),t,n)?(s=a-je(e.year(),t,n),i=e.year()+1):(i=e.year(),s=a),{week:s,year:i}}function je(e,t,n){var s=Ge(e,t,n),i=Ge(e+1,t,n);return(Fe(e)-s+i)/7}C("w",["ww",2],"wo","week"),C("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),A("week",5),A("isoWeek",5),ce("w",te),ce("ww",te,Q),ce("W",te),ce("WW",te,Q),ge(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=Z(e)});function Ie(e,t){return e.slice(t,7).concat(e.slice(0,t))}C("d",0,"do","day"),C("dd",0,0,
function(e){return this.localeData().weekdaysMin(this,e)}),C("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),C("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),C("e",0,0,"weekday"),C("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),ce("d",te),ce("e",te),ce("E",te),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,
t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:y(n).invalidWeekday=e}),ge(["d","e","E"],function(e,t,n,s){t[s]=Z(e)});var Ze="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),$e="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),qe=de,Be=de,Je=de;function Qe(){function e(e,t){return t.length-e.length}for(var t,n,s,i,r=[],a=[],o=[],u=[],l=0;l<7;l++)t=_([2E3,1]).day(l),
n=me(this.weekdaysMin(t,"")),s=me(this.weekdaysShort(t,"")),i=me(this.weekdays(t,"")),r.push(n),a.push(s),o.push(i),u.push(n),u.push(s),u.push(i);r.sort(e),a.sort(e),o.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+
r.join("|")+")","i")}function Xe(){return this.hours()%12||12}function Ke(e,t){C(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function et(e,t){return t._meridiemParse}C("H",["HH",2],0,"hour"),C("h",["hh",2],0,Xe),C("k",["kk",2],0,function(){return this.hours()||24}),C("hmm",0,0,function(){return""+Xe.apply(this)+T(this.minutes(),2)}),C("hmmss",0,0,function(){return""+Xe.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),C("Hmm",0,0,function(){return""+this.hours()+
T(this.minutes(),2)}),C("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ke("a",!0),Ke("A",!1),L("hour","h"),A("hour",13),ce("a",et),ce("A",et),ce("H",te),ce("h",te),ce("k",te),ce("HH",te,Q),ce("hh",te,Q),ce("kk",te,Q),ce("hmm",ne),ce("hmmss",se),ce("Hmm",ne),ce("Hmmss",se),ye(["H","HH"],Me),ye(["k","kk"],function(e,t,n){var s=Z(e);t[Me]=24===s?0:s}),ye(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ye(["h","hh"],function(e,t,n){t[Me]=Z(e),
y(n).bigHour=!0}),ye("hmm",function(e,t,n){var s=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s)),y(n).bigHour=!0}),ye("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s,2)),t[Se]=Z(e.substr(i)),y(n).bigHour=!0}),ye("Hmm",function(e,t,n){var s=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s))}),ye("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[Me]=Z(e.substr(0,s)),t[De]=Z(e.substr(s,2)),t[Se]=Z(e.substr(i))});var tt=z("Hours",!0);var nt,
st={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",
d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Te,monthsShort:Ne,week:{dow:0,doy:6},weekdays:Ze,weekdaysMin:$e,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},it={},rt={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function ot(e){for(var t,n,s,i,r=0;r<e.length;){for(t=(i=at(e[r]).split("-")).length,n=(n=at(e[r+1]))?n.split("-"):null;0<t;){if(s=ut(i.slice(0,t).join("-")))return s;if(n&&n.length>=t&&function(e,t){for(var n=
Math.min(e.length,t.length),s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}(i,n)>=t-1)break;t--}r++}return nt}function ut(t){var e;if(void 0===it[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=nt._abbr,require("./locale/"+t),lt(e)}catch(e){it[t]=null}return it[t]}function lt(e,t){var n;return e&&((n=r(t)?dt(e):ht(e,t))?nt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),nt._abbr}function ht(e,t){if(null===t)return delete it[e],
null;var n,s=st;if(t.abbr=e,null!=it[e])Y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),s=it[e]._config;else if(null!=t.parentLocale)if(null!=it[t.parentLocale])s=it[t.parentLocale]._config;else{if(null==(n=ut(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,
config:t}),null;s=n._config}return it[e]=new x(b(s,t)),rt[e]&&rt[e].forEach(function(e){ht(e.name,e.config)}),lt(e),it[e]}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return nt;if(!o(e)){if(t=ut(e))return t;e=[e]}return ot(e)}function ct(e){var t,n=e._a;return n&&-2===y(e).overflow&&(t=n[ve]<0||11<n[ve]?ve:n[ke]<1||n[ke]>xe(n[pe],n[ve])?ke:n[Me]<0||24<n[Me]||24===n[Me]&&(0!==n[De]||0!==n[Se]||0!==n[Ye])?Me:n[De]<0||59<n[De]?De:n[Se]<0||59<n[Se]?Se:n[Ye]<0||999<n[Ye]?
Ye:-1,y(e)._overflowDayOfYear&&(t<pe||ke<t)&&(t=ke),y(e)._overflowWeeks&&-1===t&&(t=Oe),y(e)._overflowWeekday&&-1===t&&(t=be),y(e).overflow=t),e}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,_t=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],
["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",
/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((-?\d+)/i,pt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,vt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kt(e){var t,n,s,i,r,a,o=e._i,u=ft.exec(o)||mt.exec(o);if(u){for(y(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(u[1])){i=
yt[t][0],s=!1!==yt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=gt.length;t<n;t++)if(gt[t][1].exec(u[3])){r=(u[2]||" ")+gt[t][0];break}if(null==r)return void(e._isValid=!1)}if(!s&&null!=r)return void(e._isValid=!1);if(u[4]){if(!_t.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(r||"")+(a||""),Ot(e)}else e._isValid=!1}function Mt(e,t,n,s,i,r){var a=[function(e){var t=parseInt(e,10);{if(t<=49)return 2E3+t;if(t<=999)return 1900+t}return t}(e),Ne.indexOf(t),parseInt(n,10),
parseInt(s,10),parseInt(i,10)];return r&&a.push(parseInt(r,10)),a}function Dt(e){var t,n,s,i,r=pt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(r){if(t=Mt(r[4],r[3],r[2],r[5],r[6],r[7]),n=r[1],s=t,i=e,n&&ze.indexOf(n)!==(new Date(s[0],s[1],s[2])).getDay()&&(y(i).weekdayMismatch=!0,!void(i._isValid=!1)))return;e._a=t,e._tzm=function(e,t,n){if(e)return vt[e];if(t)return 0;var s=parseInt(n,10),i=s%100;return 60*((s-i)/100)+i}(r[8],r[9],
r[10]),e._d=Ve.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),y(e).rfc2822=!0}else e._isValid=!1}function St(e,t,n){return null!=e?e:null!=t?t:n}function Yt(e){var t,n,s,i,r,a,o,u=[];if(!e._d){for(a=e,o=new Date(f.now()),s=a._useUTC?[o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()]:[o.getFullYear(),o.getMonth(),o.getDate()],e._w&&null==e._a[ke]&&null==e._a[ve]&&function(e){var t,n,s,i,r,a,o,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(r=1,a=4,n=St(t.GG,e._a[pe],Ae(Tt(),1,4).year),
s=St(t.W,1),((i=St(t.E,1))<1||7<i)&&(u=!0)):(r=e._locale._week.dow,a=e._locale._week.doy,l=Ae(Tt(),r,a),n=St(t.gg,e._a[pe],l.year),s=St(t.w,l.week),null!=t.d?((i=t.d)<0||6<i)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||6<t.e)&&(u=!0)):i=r);s<1||s>je(n,r,a)?y(e)._overflowWeeks=!0:null!=u?y(e)._overflowWeekday=!0:(o=Ee(n,s,i,r,a),e._a[pe]=o.year,e._dayOfYear=o.dayOfYear)}(e),null!=e._dayOfYear&&(r=St(e._a[pe],s[pe]),(e._dayOfYear>Fe(r)||0===e._dayOfYear)&&(y(e)._overflowDayOfYear=!0),n=Ve(r,0,e._dayOfYear),
e._a[ve]=n.getUTCMonth(),e._a[ke]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=u[t]=s[t];for(;t<7;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Me]&&0===e._a[De]&&0===e._a[Se]&&0===e._a[Ye]&&(e._nextDay=!0,e._a[Me]=0),e._d=(e._useUTC?Ve:function(e,t,n,s,i,r,a){var o;return e<100&&0<=e?(o=new Date(e+400,t,n,s,i,r,a),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,s,i,r,a),o}).apply(null,u),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-
e._tzm),e._nextDay&&(e._a[Me]=24),e._w&&void 0!==e._w.d&&e._w.d!==i&&(y(e).weekdayMismatch=!0)}}function Ot(e){if(e._f!==f.ISO_8601)if(e._f!==f.RFC_2822){e._a=[],y(e).empty=!0;for(var t,n,s,i,r,a,o,u=""+e._i,l=u.length,h=0,d=H(e._f,e._locale).match(N)||[],c=0;c<d.length;c++)n=d[c],(t=(u.match(fe(n,e))||[])[0])&&(0<(s=u.substr(0,u.indexOf(t))).length&&y(e).unusedInput.push(s),u=u.slice(u.indexOf(t)+t.length),h+=t.length),W[n]?(t?y(e).empty=!1:y(e).unusedTokens.push(n),r=n,o=e,null!=(a=t)&&m(_e,r)&&
_e[r](a,o._a,o,r)):e._strict&&!t&&y(e).unusedTokens.push(n);y(e).charsLeftOver=l-h,0<u.length&&y(e).unusedInput.push(u),e._a[Me]<=12&&!0===y(e).bigHour&&0<e._a[Me]&&(y(e).bigHour=void 0),y(e).parsedDateParts=e._a.slice(0),y(e).meridiem=e._meridiem,e._a[Me]=function(e,t,n){var s;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0)),t)}(e._locale,e._a[Me],e._meridiem),null!==(i=y(e).era)&&(e._a[pe]=e._locale.erasConvertYear(i,
e._a[pe])),Yt(e),ct(e)}else Dt(e);else kt(e)}function bt(e){var t,n,s=e._i,i=e._f;return e._locale=e._locale||dt(e._l),null===s||void 0===i&&""===s?w({nullInput:!0}):("string"==typeof s&&(e._i=s=e._locale.preparse(s)),M(s)?new k(ct(s)):(a(s)?e._d=s:o(i)?function(e){var t,n,s,i,r,a,o=!1;if(0===e._f.length)return y(e).invalidFormat=!0,e._d=new Date(NaN);for(i=0;i<e._f.length;i++)r=0,a=!1,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Ot(t),g(t)&&(a=!0),r+=y(t).charsLeftOver,r+=10*y(t).unusedTokens.length,
y(t).score=r,o?r<s&&(s=r,n=t):(null==s||r<s||a)&&(s=r,n=t,a&&(o=!0));c(e,n||t)}(e):i?Ot(e):r(n=(t=e)._i)?t._d=new Date(f.now()):a(n)?t._d=new Date(n.valueOf()):"string"==typeof n?function(e){var t=wt.exec(e._i);null===t?(kt(e),!1===e._isValid&&(delete e._isValid,Dt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:f.createFromInputFallback(e)))):e._d=new Date(+t[1])}(t):o(n)?(t._a=d(n.slice(0),function(e){return parseInt(e,10)}),Yt(t)):u(n)?function(e){var t,n;e._d||(n=void 0===(t=G(e._i)).day?
t.date:t.day,e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Yt(e))}(t):h(n)?t._d=new Date(n):f.createFromInputFallback(t),g(e)||(e._d=null),e))}function xt(e,t,n,s,i){var r,a={};return!0!==t&&!1!==t||(s=t,t=void 0),!0!==n&&!1!==n||(s=n,n=void 0),(u(e)&&l(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=s,(r=new k(ct(bt(a))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function Tt(e,
t,n,s){return xt(e,t,n,s,!1)}f.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),f.ISO_8601=function(){},f.RFC_2822=function(){};var Nt=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",
function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:w()}),Pt=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Tt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:w()});function Rt(e,t){var n,s;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Tt();for(n=t[0],s=1;s<t.length;++s)t[s].isValid()&&!t[s][e](n)||(n=t[s]);return n}var Wt=["year","quarter","month","week","day",
"hour","minute","second","millisecond"];function Ct(e){var t=G(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||t.isoWeek||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,h=t.millisecond||0;this._isValid=function(e){var t,n,s=!1;for(t in e)if(m(e,t)&&(-1===we.call(Wt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Wt.length;++n)if(e[Wt[n]]){if(s)return!1;parseFloat(e[Wt[n]])!==Z(e[Wt[n]])&&(s=!0)}return!0}(t),this._milliseconds=+h+1E3*l+6E4*u+1E3*o*60*60,this._days=+a+7*r,this._months=+i+
3*s+12*n,this._data={},this._locale=dt(),this._bubble()}function Ut(e){return e instanceof Ct}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ft(e,n){C(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+T(~~(e/60),2)+n+T(~~e%60,2)})}Ft("Z",":"),Ft("ZZ",""),ce("Z",he),ce("ZZ",he),ye(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Vt(he,e)});var Lt=/([\+\-]|\d\d)/gi;function Vt(e,t){var n,s,i=(t||"").match(e);return null===i?null:0===(s=60*(n=((i[i.length-1]||
[])+"").match(Lt)||["-",0,0])[1]+Z(n[2]))?0:"+"===n[0]?s:-s}function Gt(e,t){var n,s;return t._isUTC?(n=t.clone(),s=(M(e)||a(e)?e.valueOf():Tt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+s),f.updateOffset(n,!1),n):Tt(e).local()}function Et(e){return-Math.round(e._d.getTimezoneOffset())}function At(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}f.updateOffset=function(){};var jt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,It=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;
function Zt(e,t){var n,s,i,r=e,a=null;return Ut(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:h(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(a=jt.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:Z(a[ke])*n,h:Z(a[Me])*n,m:Z(a[De])*n,s:Z(a[Se])*n,ms:Z(Ht(1E3*a[Ye]))*n}):(a=It.exec(e))?(n="-"===a[1]?-1:1,r={y:zt(a[2],n),M:zt(a[3],n),w:zt(a[4],n),d:zt(a[5],n),h:zt(a[6],n),m:zt(a[7],n),s:zt(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(i=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,
months:0};t=Gt(t,e),e.isBefore(t)?n=$t(e,t):((n=$t(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(Tt(r.from),Tt(r.to)),(r={}).ms=i.milliseconds,r.M=i.months),s=new Ct(r),Ut(e)&&m(e,"_locale")&&(s._locale=e._locale),Ut(e)&&m(e,"_isValid")&&(s._isValid=e._isValid),s}function zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function $t(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=
t-e.clone().add(n.months,"M"),n}function qt(s,i){return function(e,t){var n;return null===t||isNaN(+t)||(Y(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=e,e=t,t=n),Bt(this,Zt(e,t),s),this}}function Bt(e,t,n,s){var i=t._milliseconds,r=Ht(t._days),a=Ht(t._months);e.isValid()&&(s=null==s||s,a&&Ce(e,$(e,"Month")+a*n),r&&q(e,"Date",$(e,"Date")+r*n),i&&e._d.setTime(e._d.valueOf()+
i*n),s&&f.updateOffset(e,r||a))}Zt.fn=Ct.prototype,Zt.invalid=function(){return Zt(NaN)};var Jt=qt(1,"add"),Qt=qt(-1,"subtract");function Xt(e){return"string"==typeof e||e instanceof String}function Kt(e){return M(e)||a(e)||Xt(e)||h(e)||function(t){var e=o(t),n=!1;e&&(n=0===t.filter(function(e){return!h(e)&&Xt(t)}).length);return e&&n}(e)||function(e){var t,n,s=u(e)&&!l(e),i=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m",
"seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<r.length;t+=1)n=r[t],i=i||m(e,n);return s&&i}(e)||null==e}function en(e,t){if(e.date()<t.date())return-en(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months"),i=t-s<0?(t-s)/(s-e.clone().add(n-1,"months")):(t-s)/(e.clone().add(1+n,"months")-s);return-(n+i)||0}function tn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc=
"YYYY-MM-DDTHH:mm:ss[Z]";var nn=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function sn(){return this._locale}var rn=126227808E5;function an(e,t){return(e%t+t)%t}function on(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-rn:(new Date(e,t,n)).valueOf()}function un(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-rn:Date.UTC(e,t,n)}function ln(e,
t){return t.erasAbbrRegex(e)}function hn(){for(var e=[],t=[],n=[],s=[],i=this.eras(),r=0,a=i.length;r<a;++r)t.push(me(i[r].name)),e.push(me(i[r].abbr)),n.push(me(i[r].narrow)),s.push(me(i[r].name)),s.push(me(i[r].abbr)),s.push(me(i[r].narrow));this._erasRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function dn(e,t){C(0,[e,e.length],
0,t)}function cn(e,t,n,s,i){var r;return null==e?Ae(this,s,i).year:((r=je(e,s,i))<t&&(t=r),function(e,t,n,s,i){var r=Ee(e,t,n,s,i),a=Ve(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,e,t,n,s,i))}C("N",0,0,"eraAbbr"),C("NN",0,0,"eraAbbr"),C("NNN",0,0,"eraAbbr"),C("NNNN",0,0,"eraName"),C("NNNNN",0,0,"eraNarrow"),C("y",["y",1],"yo","eraYear"),C("y",["yy",2],0,"eraYear"),C("y",["yyy",3],0,"eraYear"),C("y",["yyyy",4],0,"eraYear"),
ce("N",ln),ce("NN",ln),ce("NNN",ln),ce("NNNN",function(e,t){return t.erasNameRegex(e)}),ce("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,s){var i=n._locale.erasParse(e,s,n._strict);i?y(n).era=i:y(n).invalidEra=e}),ce("y",oe),ce("yy",oe),ce("yyy",oe),ce("yyyy",oe),ce("yo",function(e,t){return t._eraYearOrdinalRegex||oe}),ye(["y","yy","yyy","yyyy"],pe),ye(["yo"],function(e,t,n,s){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),
n._locale.eraYearOrdinalParse?t[pe]=n._locale.eraYearOrdinalParse(e,i):t[pe]=parseInt(e,10)}),C(0,["gg",2],0,function(){return this.weekYear()%100}),C(0,["GG",2],0,function(){return this.isoWeekYear()%100}),dn("gggg","weekYear"),dn("ggggg","weekYear"),dn("GGGG","isoWeekYear"),dn("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),ce("G",ue),ce("g",ue),ce("GG",te,Q),ce("gg",te,Q),ce("GGGG",re,K),ce("gggg",re,K),ce("GGGGG",ae,ee),ce("ggggg",ae,ee),ge(["gggg",
"ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=Z(e)}),ge(["gg","GG"],function(e,t,n,s){t[s]=f.parseTwoDigitYear(e)}),C("Q",0,"Qo","quarter"),L("quarter","Q"),A("quarter",7),ce("Q",J),ye("Q",function(e,t){t[ve]=3*(Z(e)-1)}),C("D",["DD",2],"Do","date"),L("date","D"),A("date",9),ce("D",te),ce("DD",te,Q),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),ye(["D","DD"],ke),ye("Do",function(e,t){t[ke]=Z(e.match(te)[0])});var fn=z("Date",
!0);C("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),A("dayOfYear",4),ce("DDD",ie),ce("DDDD",X),ye(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Z(e)}),C("m",["mm",2],0,"minute"),L("minute","m"),A("minute",14),ce("m",te),ce("mm",te,Q),ye(["m","mm"],De);var mn=z("Minutes",!1);C("s",["ss",2],0,"second"),L("second","s"),A("second",15),ce("s",te),ce("ss",te,Q),ye(["s","ss"],Se);var _n,yn,gn=z("Seconds",!1);for(C("S",0,0,function(){return~~(this.millisecond()/100)}),C(0,["SS",2],0,function(){return~~(this.millisecond()/
10)}),C(0,["SSS",3],0,"millisecond"),C(0,["SSSS",4],0,function(){return 10*this.millisecond()}),C(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),C(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()}),C(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()}),C(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()}),C(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()}),L("millisecond","ms"),A("millisecond",16),ce("S",ie,J),ce("SS",ie,Q),ce("SSS",ie,X),_n="SSSS";_n.length<=
9;_n+="S")ce(_n,oe);function wn(e,t){t[Ye]=Z(1E3*("0."+e))}for(_n="S";_n.length<=9;_n+="S")ye(_n,wn);yn=z("Milliseconds",!1),C("z",0,0,"zoneAbbr"),C("zz",0,0,"zoneName");var pn=k.prototype;function vn(e){return e}pn.add=Jt,pn.calendar=function(e,t){1===arguments.length&&(arguments[0]?Kt(arguments[0])?(e=arguments[0],t=void 0):function(e){for(var t=u(e)&&!l(e),n=!1,s=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i=0;i<s.length;i+=1)n=n||m(e,s[i]);return t&&n}(arguments[0])&&(t=arguments[0],
e=void 0):t=e=void 0);var n=e||Tt(),s=Gt(n,this).startOf("day"),i=f.calendarFormat(this,s)||"sameElse",r=t&&(O(t[i])?t[i].call(this,n):t[i]);return this.format(r||this.localeData().calendar(i,this,Tt(n)))},pn.clone=function(){return new k(this)},pn.diff=function(e,t,n){var s,i,r;if(!this.isValid())return NaN;if(!(s=Gt(e,this)).isValid())return NaN;switch(i=6E4*(s.utcOffset()-this.utcOffset()),t=V(t)){case "year":r=en(this,s)/12;break;case "month":r=en(this,s);break;case "quarter":r=en(this,s)/3;break;
case "second":r=(this-s)/1E3;break;case "minute":r=(this-s)/6E4;break;case "hour":r=(this-s)/36E5;break;case "day":r=(this-s-i)/864E5;break;case "week":r=(this-s-i)/6048E5;break;default:r=this-s}return n?r:I(r)},pn.endOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:on,e){case "year":t=n(this.year()+1,0,1)-1;break;case "quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":t=n(this.year(),this.month()+1,1)-
1;break;case "week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":t=n(this.year(),this.month(),this.date()+1)-1;break;case "hour":t=this._d.valueOf(),t+=36E5-an(t+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":t=this._d.valueOf(),t+=6E4-an(t,6E4)-1;break;case "second":t=this._d.valueOf(),t+=1E3-an(t,1E3)-1;break}return this._d.setTime(t),f.updateOffset(this,
!0),this},pn.format=function(e){e=e||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat);var t=U(this,e);return this.localeData().postformat(t)},pn.from=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Tt(e).isValid())?Zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},pn.fromNow=function(e){return this.from(Tt(),e)},pn.to=function(e,t){return this.isValid()&&(M(e)&&e.isValid()||Tt(e).isValid())?Zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},
pn.toNow=function(e){return this.to(Tt(),e)},pn.get=function(e){return O(this[e=V(e)])?this[e]():this},pn.invalidAt=function(){return y(this).overflow},pn.isAfter=function(e,t){var n=M(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},pn.isBefore=function(e,t){var n=M(e)?e:Tt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()<n.valueOf():
this.clone().endOf(t).valueOf()<n.valueOf())},pn.isBetween=function(e,t,n,s){var i=M(e)?e:Tt(e),r=M(t)?t:Tt(t);return!!(this.isValid()&&i.isValid()&&r.isValid())&&(("("===(s=s||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===s[1]?this.isBefore(r,n):!this.isAfter(r,n)))},pn.isSame=function(e,t){var n,s=M(e)?e:Tt(e);return!(!this.isValid()||!s.isValid())&&("millisecond"===(t=V(t)||"millisecond")?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},
pn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},pn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},pn.isValid=function(){return g(this)},pn.lang=nn,pn.locale=tn,pn.localeData=sn,pn.max=Pt,pn.min=Nt,pn.parsingFlags=function(){return c({},y(this))},pn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t,n=[];for(t in e)m(e,t)&&n.push({unit:t,priority:E[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=G(e)),s=0;s<
n.length;s++)this[n[s].unit](e[n[s].unit]);else if(O(this[e=V(e)]))return this[e](t);return this},pn.startOf=function(e){var t,n;if(void 0===(e=V(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?un:on,e){case "year":t=n(this.year(),0,1);break;case "quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case "month":t=n(this.year(),this.month(),1);break;case "week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":t=n(this.year(),this.month(),
this.date()-(this.isoWeekday()-1));break;case "day":case "date":t=n(this.year(),this.month(),this.date());break;case "hour":t=this._d.valueOf(),t-=an(t+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":t=this._d.valueOf(),t-=an(t,6E4);break;case "second":t=this._d.valueOf(),t-=an(t,1E3);break}return this._d.setTime(t),f.updateOffset(this,!0),this},pn.subtract=Qt,pn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},pn.toObject=
function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},pn.toDate=function(){return new Date(this.valueOf())},pn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?U(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):O(Date.prototype.toISOString)?t?this.toDate().toISOString():(new Date(this.valueOf()+
60*this.utcOffset()*1E3)).toISOString().replace("Z",U(n,"Z")):U(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},pn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,s="moment",i="";return this.isLocal()||(s=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+s+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(pn[Symbol.for("nodejs.util.inspect.custom")]=
function(){return"Moment\x3c"+this.format()+"\x3e"}),pn.toJSON=function(){return this.isValid()?this.toISOString():null},pn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pn.unix=function(){return Math.floor(this.valueOf()/1E3)},pn.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)},pn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pn.eraName=function(){for(var e,
t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return""},pn.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,s=t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return""},pn.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,s=
t.length;n<s;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return""},pn.eraYear=function(){for(var e,t,n=this.localeData().eras(),s=0,i=n.length;s<i;++s)if(e=n[s].since<=n[s].until?1:-1,t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return(this.year()-f(n[s].since).year())*e+n[s].offset;return this.year()},pn.year=Le,pn.isLeapYear=function(){return j(this.year())},
pn.weekYear=function(e){return cn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pn.isoWeekYear=function(e){return cn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},pn.quarter=pn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},pn.month=Ue,pn.daysInMonth=function(){return xe(this.year(),this.month())},pn.week=pn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*
(e-t),"d")},pn.isoWeek=pn.isoWeeks=function(e){var t=Ae(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},pn.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},pn.weeksInWeekYear=function(){var e=this.localeData()._week;return je(this.weekYear(),e.dow,e.doy)},pn.isoWeeksInYear=function(){return je(this.year(),1,4)},pn.isoWeeksInISOWeekYear=function(){return je(this.isoWeekYear(),1,4)},pn.date=fn,pn.day=pn.days=function(e){if(!this.isValid())return null!=
e?this:NaN;var t,n,s=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-s,"d")):s},pn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},pn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,s=(t=e,n=this.localeData(),
"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?s:s-7)},pn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==e?t:this.add(e-t,"d")},pn.hour=pn.hours=tt,pn.minute=pn.minutes=mn,pn.second=pn.seconds=gn,pn.millisecond=pn.milliseconds=yn,pn.utcOffset=function(e,t,n){var s,i=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?i:Et(this);if("string"==typeof e){if(null===
(e=Vt(he,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(s=Et(this)),this._offset=e,this._isUTC=!0,null!=s&&this.add(s,"m"),i!==e&&(!t||this._changeInProgress?Bt(this,Zt(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},pn.utc=function(e){return this.utcOffset(0,e)},pn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Et(this),"m")),this},pn.parseZone=function(){var e;
return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Vt(le,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},pn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Tt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},pn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pn.isLocal=function(){return!!this.isValid()&&!this._isUTC},pn.isUtcOffset=function(){return!!this.isValid()&&
this._isUTC},pn.isUtc=At,pn.isUTC=At,pn.zoneAbbr=function(){return this._isUTC?"UTC":""},pn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pn.dates=n("dates accessor is deprecated. Use date instead.",fn),pn.months=n("months accessor is deprecated. Use month instead",Ue),pn.years=n("years accessor is deprecated. Use year instead",Le),pn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=
e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),pn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e,t={};return v(t,this),(t=bt(t))._a?(e=(t._isUTC?_:Tt)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a=0;a<s;a++)(n&&e[a]!==t[a]||!n&&Z(e[a])!==Z(t[a]))&&
r++;return r+i}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});var kn=x.prototype;function Mn(e,t,n,s){var i=dt(),r=_().set(s,t);return i[n](r,e)}function Dn(e,t,n){if(h(e)&&(t=e,e=void 0),e=e||"",null!=t)return Mn(e,t,n,"month");for(var s=[],i=0;i<12;i++)s[i]=Mn(e,i,n,"month");return s}function Sn(e,t,n,s){t=("boolean"==typeof e?h(t)&&(n=t,t=void 0):(t=e,e=!1,h(n=t)&&(n=t,t=void 0)),t||"");var i,r=dt(),a=e?r._week.dow:0,o=[];if(null!=n)return Mn(t,(n+a)%7,s,"day");for(i=0;i<7;i++)o[i]=
Mn(t,(i+a)%7,s,"day");return o}kn.calendar=function(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return O(s)?s.call(t,n):s},kn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(N).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},kn.invalidDate=function(){return this._invalidDate},kn.ordinal=function(e){return this._ordinal.replace("%d",
e)},kn.preparse=vn,kn.postformat=vn,kn.relativeTime=function(e,t,n,s){var i=this._relativeTime[n];return O(i)?i(e,t,n,s):i.replace(/%d/i,e)},kn.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return O(n)?n(t):n.replace(/%s/i,t)},kn.set=function(e){var t,n;for(n in e)m(e,n)&&(O(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},kn.eras=function(e,
t){for(var n,s=this._eras||dt("en")._eras,i=0,r=s.length;i<r;++i){switch(typeof s[i].since){case "string":n=f(s[i].since).startOf("day"),s[i].since=n.valueOf();break}switch(typeof s[i].until){case "undefined":s[i].until=1/0;break;case "string":n=f(s[i].until).startOf("day").valueOf(),s[i].until=n.valueOf();break}}return s},kn.erasParse=function(e,t,n){var s,i,r,a,o,u=this.eras();for(e=e.toUpperCase(),s=0,i=u.length;s<i;++s)if(r=u[s].name.toUpperCase(),a=u[s].abbr.toUpperCase(),o=u[s].narrow.toUpperCase(),
n)switch(t){case "N":case "NN":case "NNN":if(a===e)return u[s];break;case "NNNN":if(r===e)return u[s];break;case "NNNNN":if(o===e)return u[s];break}else if(0<=[r,a,o].indexOf(e))return u[s]},kn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?f(e.since).year():f(e.since).year()+(t-e.offset)*n},kn.erasAbbrRegex=function(e){return m(this,"_erasAbbrRegex")||hn.call(this),e?this._erasAbbrRegex:this._erasRegex},kn.erasNameRegex=function(e){return m(this,"_erasNameRegex")||hn.call(this),
e?this._erasNameRegex:this._erasRegex},kn.erasNarrowRegex=function(e){return m(this,"_erasNarrowRegex")||hn.call(this),e?this._erasNarrowRegex:this._erasRegex},kn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Pe).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},kn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Pe.test(t)?"format":"standalone"][e.month()]:
o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},kn.monthsParse=function(e,t,n){var s,i,r;if(this._monthsParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=_([2E3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=we.call(this._shortMonthsParse,
a))?i:null:-1!==(i=we.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=we.call(this._shortMonthsParse,a))||-1!==(i=we.call(this._longMonthsParse,a))?i:null:-1!==(i=we.call(this._longMonthsParse,a))||-1!==(i=we.call(this._shortMonthsParse,a))?i:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=_([2E3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".",
"")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}},kn.monthsRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||He.call(this),e?this._monthsStrictRegex:
this._monthsRegex):(m(this,"_monthsRegex")||(this._monthsRegex=We),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},kn.monthsShortRegex=function(e){return this._monthsParseExact?(m(this,"_monthsRegex")||He.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(m(this,"_monthsShortRegex")||(this._monthsShortRegex=Re),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},kn.week=function(e){return Ae(e,this._week.dow,this._week.doy).week},
kn.firstDayOfYear=function(){return this._week.doy},kn.firstDayOfWeek=function(){return this._week.dow},kn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Ie(n,this._week.dow):e?n[e.day()]:n},kn.weekdaysMin=function(e){return!0===e?Ie(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},kn.weekdaysShort=function(e){return!0===e?Ie(this._weekdaysShort,this._week.dow):
e?this._weekdaysShort[e.day()]:this._weekdaysShort},kn.weekdaysParse=function(e,t,n){var s,i,r;if(this._weekdaysParseExact)return function(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=_([2E3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();
return n?"dddd"===t?-1!==(i=we.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=we.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._shortWeekdaysParse,a))||-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=we.call(this._shortWeekdaysParse,a))||-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._minWeekdaysParse,a))?i:null:-1!==(i=we.call(this._minWeekdaysParse,
a))||-1!==(i=we.call(this._weekdaysParse,a))||-1!==(i=we.call(this._shortWeekdaysParse,a))?i:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=_([2E3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),
this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}},kn.weekdaysRegex=
function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(m(this,"_weekdaysRegex")||(this._weekdaysRegex=qe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},kn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(m(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Be),this._weekdaysShortStrictRegex&&
e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},kn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(m(this,"_weekdaysRegex")||Qe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(m(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Je),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},kn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},kn.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},lt("en",
{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Z(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),f.lang=n("moment.lang is deprecated. Use moment.locale instead.",lt),f.langData=n("moment.langData is deprecated. Use moment.localeData instead.",dt);var Yn=Math.abs;function On(e,t,
n,s){var i=Zt(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function bn(e){return e<0?Math.floor(e):Math.ceil(e)}function xn(e){return 4800*e/146097}function Tn(e){return 146097*e/4800}function Nn(e){return function(){return this.as(e)}}var Pn=Nn("ms"),Rn=Nn("s"),Wn=Nn("m"),Cn=Nn("h"),Un=Nn("d"),Hn=Nn("w"),Fn=Nn("M"),Ln=Nn("Q"),Vn=Nn("y");function Gn(e){return function(){return this.isValid()?this._data[e]:NaN}}var En=Gn("milliseconds"),An=Gn("seconds"),
jn=Gn("minutes"),In=Gn("hours"),Zn=Gn("days"),zn=Gn("months"),$n=Gn("years");var qn=Math.round,Bn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Jn(e,t,n,s){var i=Zt(e).abs(),r=qn(i.as("s")),a=qn(i.as("m")),o=qn(i.as("h")),u=qn(i.as("d")),l=qn(i.as("M")),h=qn(i.as("w")),d=qn(i.as("y")),c=(r<=n.ss?["s",r]:r<n.s&&["ss",r])||a<=1&&["m"]||a<n.m&&["mm",a]||o<=1&&["h"]||o<n.h&&["hh",o]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(c=c||h<=1&&["w"]||h<n.w&&["ww",h]),(c=c||l<=1&&["M"]||l<n.M&&["MM",
l]||d<=1&&["y"]||["yy",d])[2]=t,c[3]=0<+e,c[4]=s,function(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}.apply(null,c)}var Qn=Math.abs;function Xn(e){return(0<e)-(e<0)||+e}function Kn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,s,i,r,a,o,u=Qn(this._milliseconds)/1E3,l=Qn(this._days),h=Qn(this._months),d=this.asSeconds();return d?(e=I(u/60),t=I(e/60),u%=60,e%=60,n=I(h/12),h%=12,s=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",r=Xn(this._months)!==Xn(d)?"-":"",a=Xn(this._days)!==
Xn(d)?"-":"",o=Xn(this._milliseconds)!==Xn(d)?"-":"",i+"P"+(n?r+n+"Y":"")+(h?r+h+"M":"")+(l?a+l+"D":"")+(t||e||u?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(u?o+s+"S":"")):"P0D"}var es=Ct.prototype;return es.isValid=function(){return this._isValid},es.abs=function(){var e=this._data;return this._milliseconds=Yn(this._milliseconds),this._days=Yn(this._days),this._months=Yn(this._months),e.milliseconds=Yn(e.milliseconds),e.seconds=Yn(e.seconds),e.minutes=Yn(e.minutes),e.hours=Yn(e.hours),e.months=Yn(e.months),
e.years=Yn(e.years),this},es.add=function(e,t){return On(this,e,t,1)},es.subtract=function(e,t){return On(this,e,t,-1)},es.as=function(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=V(e))||"quarter"===e||"year"===e)switch(t=this._days+s/864E5,n=this._months+xn(t),e){case "month":return n;case "quarter":return n/3;case "year":return n/12}else switch(t=this._days+Math.round(Tn(this._months)),e){case "week":return t/7+s/6048E5;case "day":return t+s/864E5;case "hour":return 24*
t+s/36E5;case "minute":return 1440*t+s/6E4;case "second":return 86400*t+s/1E3;case "millisecond":return Math.floor(864E5*t)+s;default:throw new Error("Unknown unit "+e);}},es.asMilliseconds=Pn,es.asSeconds=Rn,es.asMinutes=Wn,es.asHours=Cn,es.asDays=Un,es.asWeeks=Hn,es.asMonths=Fn,es.asQuarters=Ln,es.asYears=Vn,es.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*Z(this._months/12):NaN},es._bubble=function(){var e,t,n,s,i,r=this._milliseconds,
a=this._days,o=this._months,u=this._data;return 0<=r&&0<=a&&0<=o||r<=0&&a<=0&&o<=0||(r+=864E5*bn(Tn(o)+a),o=a=0),u.milliseconds=r%1E3,e=I(r/1E3),u.seconds=e%60,t=I(e/60),u.minutes=t%60,n=I(t/60),u.hours=n%24,a+=I(n/24),o+=i=I(xn(a)),a-=bn(Tn(i)),s=I(o/12),o%=12,u.days=a,u.months=o,u.years=s,this},es.clone=function(){return Zt(this)},es.get=function(e){return e=V(e),this.isValid()?this[e+"s"]():NaN},es.milliseconds=En,es.seconds=An,es.minutes=jn,es.hours=In,es.days=Zn,es.weeks=function(){return I(this.days()/
7)},es.months=zn,es.years=$n,es.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,s,i=!1,r=Bn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(r=Object.assign({},Bn,t),null!=t.s&&null==t.ss&&(r.ss=t.s-1)),n=this.localeData(),s=Jn(this,!i,r,n),i&&(s=n.pastFuture(+this,s)),n.postformat(s)},es.toISOString=Kn,es.toString=Kn,es.toJSON=Kn,es.locale=tn,es.localeData=sn,es.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
Kn),es.lang=nn,C("X",0,0,"unix"),C("x",0,0,"valueOf"),ce("x",ue),ce("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",function(e,t,n){n._d=new Date(1E3*parseFloat(e))}),ye("x",function(e,t,n){n._d=new Date(Z(e))}),f.version="2.29.1",e=Tt,f.fn=pn,f.min=function(){return Rt("isBefore",[].slice.call(arguments,0))},f.max=function(){return Rt("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=_,f.unix=function(e){return Tt(1E3*e)},f.months=function(e,t){return Dn(e,t,
"months")},f.isDate=a,f.locale=lt,f.invalid=w,f.duration=Zt,f.isMoment=M,f.weekdays=function(e,t,n){return Sn(e,t,n,"weekdays")},f.parseZone=function(){return Tt.apply(null,arguments).parseZone()},f.localeData=dt,f.isDuration=Ut,f.monthsShort=function(e,t){return Dn(e,t,"monthsShort")},f.weekdaysMin=function(e,t,n){return Sn(e,t,n,"weekdaysMin")},f.defineLocale=ht,f.updateLocale=function(e,t){var n,s,i;return null!=t?(i=st,null!=it[e]&&null!=it[e].parentLocale?it[e].set(b(it[e]._config,t)):(null!=
(s=ut(e))&&(i=s._config),t=b(i,t),null==s&&(t.abbr=e),(n=new x(t)).parentLocale=it[e],it[e]=n),lt(e)):null!=it[e]&&(null!=it[e].parentLocale?(it[e]=it[e].parentLocale,e===lt()&&lt(e)):null!=it[e]&&delete it[e]),it[e]},f.locales=function(){return s(it)},f.weekdaysShort=function(e,t,n){return Sn(e,t,n,"weekdaysShort")},f.normalizeUnits=V,f.relativeTimeRounding=function(e){return void 0===e?qn:"function"==typeof e&&(qn=e,!0)},f.relativeTimeThreshold=function(e,t){return void 0!==Bn[e]&&(void 0===t?Bn[e]:
(Bn[e]=t,"s"===e&&(Bn.ss=t-1),!0))},f.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},f.prototype=pn,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f});
var CustomStorage=function(){function CustomStorage(prefix,driver){if(!prefix){Swedbank.error("CustomStorage: prefix not set.");return}try{this.driver=window[driver||"localStorage"]}catch(ex){this.driver=null}this.prefix=prefix;if(!this.driver){Swedbank.warn(["CustomStorage:",driver+" not supported by the browser, using object based storage.","Or "+driver+" is blocked by third-party cookies policy.","NB! Note that this does not store data in-between page loads."].join(" "));this.driver={cache:{},
setItem:function(key,value){this.cache[key]=value},getItem:function(key){return this.cache[key]},removeItem:function(key){delete this.cache[key]}}}}CustomStorage.GLOBAL_STORAGE_PREFIX="SwdIb";CustomStorage.prototype.set=function(key,value,options){options=Object.assign({},{expiresIn:false,merge:false},options);var storageItem={data:value};var objTmp=this.get(key);if(options.merge&&SharedComponents.helpers.isPlainObject(objTmp))storageItem.data=Object.assign({},this.get(key)||{},value);if(typeof options.expiresIn==
"string")storageItem.expiresAt=this.calculateExpirationTimestamp(options.expiresIn);this.driver.setItem(this.prefixKey(key),JSON.stringify(storageItem))};CustomStorage.prototype.merge=function(key,obj){this.set(key,obj,{merge:true})};CustomStorage.prototype.get=function(key,options){options=Object.assign({},{erase:false},options);if(!this.keyExists(key))return null;var storageItem=JSON.parse(this.driver.getItem(this.prefixKey(key)));if(this.isExpired(storageItem)){this.erase(key);return null}if(options.erase)this.erase(key);
return storageItem&&storageItem.data};CustomStorage.prototype.erase=function(key){this.driver.removeItem(this.prefixKey(key))};CustomStorage.prototype.executeOnKey=function(key,callback,options){var value=this.get(key);options=Object.assign({},{erase:false},options);if(value&&typeof callback=="function")callback(value);if(options.erase)this.erase(key)};CustomStorage.prototype.prefixKey=function(key){return this.prefix+":"+key};CustomStorage.prototype.keyExists=function(key){return!!this.driver.getItem(this.prefixKey(key))};
CustomStorage.prototype.calculateExpirationTimestamp=function(expiresIn){var today=Swedbank.Time.now.clone();var amount=expiresIn.split(" ")[0];var timeUnit=expiresIn.split(" ")[1];return+today.add(timeUnit,amount).toDate()};CustomStorage.prototype.isExpired=function(storageItem){if(!storageItem)return false;return storageItem.expiresAt<+Swedbank.Time.now};return CustomStorage}();Swedbank.localStorage=new CustomStorage(CustomStorage.GLOBAL_STORAGE_PREFIX,"localStorage");
Swedbank.sessionStorage=new CustomStorage(CustomStorage.GLOBAL_STORAGE_PREFIX,"sessionStorage");
function State(initialValue){this.value=initialValue;this.callbacks={before:{},after:{}};State.EVENTS.forEach(function(eventName){this.callbacks.before[eventName]=[];this.callbacks.after[eventName]=[]},this);return this.createShortcutFunction()}State.EVENTS=["change"];
State.prototype.createShortcutFunction=function(){var shortcutFunction=function(newValue){if(arguments.length)return this.set(newValue);else return this.get()}.bind(this);for(var method in State.prototype)if(State.prototype.hasOwnProperty(method))shortcutFunction[method]=State.prototype[method].bind(this);shortcutFunction.prototype=State.prototype;return shortcutFunction};State.prototype.get=function(){return this.value};
State.prototype.set=function(newValue){if(this.value===newValue)return;if(!this.changingIsAllowed(newValue))return;this.value=newValue;this.executeCallbacks()};State.prototype.executeCallbacks=function(){this.callbacks.after.change.forEach(function(callback){callback(this.value)},this)};State.prototype.changingIsAllowed=function(newValue){return this.callbacks.before.change.filter(function(callback){return callback(newValue)===false}).length==0};
State.prototype.before=function(eventName,callback){if(!this.callbacks.before[eventName])throw new TypeError("Supplied event type not supported.");this.callbacks.before[eventName].push(callback);return this};State.prototype.after=function(eventName,callback){if(!this.callbacks.after[eventName])throw new TypeError("Supplied event type not supported.");this.callbacks.after[eventName].push(callback);return this};
State.prototype.when=function(expectedValue,callback){this.after("change",function(newValue){if(newValue===expectedValue)callback(newValue)})};
function ComputedState(dependencies,computeLogic){this.dependencies=[];this.callbacks={after:{}};ComputedState.EVENTS.forEach(function(eventName){this.callbacks.after[eventName]=[]},this);if(dependencies)this.setDependencies(dependencies);if(computeLogic)this.setComputeLogic(computeLogic);return this.createShortcutFunction()}ComputedState.EVENTS=["change"];
ComputedState.prototype.createShortcutFunction=function(){var shortcutFunction=function(){return this.get()}.bind(this);for(var method in ComputedState.prototype)if(ComputedState.prototype.hasOwnProperty(method))shortcutFunction[method]=ComputedState.prototype[method].bind(this);shortcutFunction.prototype=ComputedState.prototype;return shortcutFunction};ComputedState.prototype.get=function(){return this.value};
ComputedState.prototype.setDependencies=function(dependencies){if(!Array.isArray(dependencies))dependencies=[dependencies];this.dependencies=dependencies;if(this.computeLogic)this.hookToDependenciesChangeEvents();return this};
ComputedState.prototype.hookToDependenciesChangeEvents=function(){var computedState=this;this.dependencies.forEach(function(state){if(!state||![State.prototype,ComputedState.prototype].includes(state.prototype))throw new TypeError("Given dependency is not an instance of State or ComputedState");state.after("change",function(){computedState.compute()})})};
ComputedState.prototype.setComputeLogic=function(computeLogic){if(!(computeLogic instanceof Function))throw new TypeError("Compute logic missing");this.computeLogic=computeLogic;if(this.dependencies.length>0)this.hookToDependenciesChangeEvents();return this};
ComputedState.prototype.compute=function(executeCallbacks){executeCallbacks=typeof executeCallbacks=="boolean"?executeCallbacks:true;if(!this.computeLogic)throw new Error("Compute logic has not been specified");var oldValue=this.value;var newValue=this.value=this.computeLogic();if(oldValue!==newValue&&executeCallbacks)this.callbacks.after.change.forEach(function(callback){callback(this.value)},this)};
ComputedState.prototype.after=function(eventName,callback){if(!this.callbacks.after[eventName])throw new TypeError("Supplied event type not supported.");this.callbacks.after[eventName].push(callback);return this};
function ValueState(target){var state=new State;state.bindValueToElement(target);return state}State.prototype.bindValueToElement=function(target){var state=this;var $element=this.$element=jQuery(target);this.value=$element.val();$element.on("change keyup",function(){state.set(state.get())});if($element.is(":checkbox"))state.set(state.get());$element.on("cut paste",function(){setTimeout(function(){state.set($element.val())})});return this};
State.prototype.getRadioGroup=function(filter){var $group=jQuery("body").findByName(this.$element.attr("name"));return filter?$group.filter(filter):$group};var stateSetMethodProxy=State.prototype.set;
State.prototype.set=function(){stateSetMethodProxy.apply(this,arguments);if(this.$element)if(this.$element.is(":text, textarea")){if(this.$element.val()!==this.value)this.$element.val(this.value)}else if(this.$element.is(":checkbox"))this.$element.prop("checked",this.value==true);else if(this.$element.is(":radio")){var $targetRadio=this.getRadioGroup().filter('[value\x3d"'+this.value+'"]');if(!$targetRadio.length&&!Swedbank.isProduction){var groupName=this.$element.attr("name");throw new ReferenceError('Could not find radio[name\x3d"'+
groupName+'"] with value: '+this.value);}$targetRadio.prop("checked",true)}return this};var stateGetMethodProxy=State.prototype.get;State.prototype.get=function(){var $element=this.$element;if(!$element)return stateGetMethodProxy.apply(this,arguments);if($element.is(":checkbox"))return $element.is(":checked");else if($element.is(":radio"))return this.getRadioGroup(":checked").val();else return $element.val()};
Swedbank.Helpers=class{static createParam(name,value){const param={};param[name]=value===undefined?true:value;return param}static breakText(text="",maxLength=40){let brokenStrings=[];text.split(/\s/).forEach(fragment=>{while(fragment.length>maxLength){brokenStrings.push(fragment.substring(0,maxLength));fragment=fragment.substring(maxLength)}brokenStrings.push(fragment)});return brokenStrings.join(" ")}static removeScripts(str=""){return str.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
"")}static checkedFunction(fn){return typeof fn==="function"?fn:()=>{}}static getUrlAttrValue(paramName){return(new URL(window.location.href)).searchParams.get(paramName)}static getMediumPlatform(){const mobile=window.matchMedia("(max-width: 767px)");const tablet=window.matchMedia("(min-width: 768px) and (max-width: 1023px)");const desktop=window.matchMedia("(min-width: 1024px)");let medium;if(mobile.matches)medium="mobile";else if(tablet.matches)medium="tablet";else if(desktop.matches)medium="desktop";
else medium="";return medium}static formatAmount(value){return value===undefined||value===null?"":value.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}};
(function(){var LabelStorage=function(){return{create:function(){var fn=function(id){return fn.get.apply(fn,arguments)};Object.assign(fn,{cache:{},get:function(id,quantity){var quantityDefined=quantity!==undefined;if(quantityDefined)id+="."+SharedComponents.Grammar.quantify(quantity);var cachedLabel=this.cache[id];var label=typeof cachedLabel==="undefined"?id:cachedLabel;if(quantityDefined)label=label.replace(/%q/g,quantity);return label},set:function(id,value){if(typeof id==="string")this.cache[id]=
value;else Object.assign(this.cache,id)},exists:function(id){return this.cache.hasOwnProperty(id)}});return fn}}}();Swedbank.Labels=LabelStorage.create();Swedbank.LabelsEng=Swedbank.LANGUAGE==="ENG"?Swedbank.Labels:LabelStorage.create()})();
Swedbank.Viewport=class{static get width(){return window.innerWidth}static get height(){return window.innerHeight}static isMobile(){return Swedbank.Viewport.width<768}static isDesktop(){return Swedbank.Viewport.height>=1024}};
(function($){var Templates=Swedbank.Templates={action:function(options,action,pageId,confirmation){confirmation=typeof confirmation==="undefined"?false:confirmation;var $action=$("\x3cbutton/\x3e",options).addClass("button");if(action||pageId)$action.click(function(event){event.preventDefault();if(!$action.hasClass("disabled"))if(confirmation){Swedbank.Modals.confirm(confirmation).done(function(){processAction()});return false}else processAction();function processAction(){if(typeof action==="function")action();
else{if(typeof action==="string"){var actionObj={};actionObj[action]=true;action=actionObj}Swedbank.Navigation.goTo(pageId,action||{})}}});return $action},createHelp:function(helpText){var $help=$("\x3cdiv/\x3e",{"class":"help-action","data-help-text":helpText});$help.on("click",function(event){event.preventDefault();return true});return $help},createRow:function(titleId,options){var defaultOptions={required:true,autoHelp:true,id:undefined};options=$.extend(defaultOptions,options);var $row=$('\x3cdt class\x3d"query-name"\x3e\x3cspan class\x3d"row-title"/\x3e\x3cspan class\x3d"row-help"/\x3e\x3c/dt\x3e\x3cdd class\x3d"query-value"/\x3e');
var $titleCell=$row.filter("dt");if(options.id)$row.attr("id",options.id);if(options["class"])$row.addClass(options["class"]);$row.on("titleidchange.sw",function(event,newTitleId){$row.trigger("titlechange.sw",Swedbank.Labels(newTitleId));if(options.autoHelp)$row.trigger("helpidchange.sw","help_"+newTitleId)});$row.on("titlechange.sw",function(event,newTitle){$titleCell.find("span.row-title").text(newTitle)});$row.on("contentchange.sw",function(event,content){$row.filter("dd").html(content)});$row.on("helpidchange.sw",
function(event,helpLabelId){var help=Swedbank.Labels.exists(helpLabelId)?Templates.createHelp(Swedbank.Labels(helpLabelId)):"";$titleCell.find("span.row-help").html(help)});$row.on("markrequired.sw",function(event,isRequired){isRequired=isRequired||isRequired===undefined;$titleCell.css({"font-weight":isRequired?"bold":"normal"});if(Swedbank.country!=="LV")if(isRequired)$titleCell.find(".row-title").after('\x3cspan class\x3d"required"\x3e * \x3c/span\x3e');else $titleCell.find(".required").remove()});
if(options.required)$row.trigger("markrequired.sw",true);if(titleId)$row.trigger("titleidchange.sw",titleId);return $row},createRow_old:function(titleId,options){var defaultOptions={titleAlignment:"right",required:true,autoHelp:true,id:undefined};options=$.extend(defaultOptions,options);var $tr=$('\x3ctr\x3e\x3ctd\x3e\x3cspan class\x3d"row-title"/\x3e\x3cspan class\x3d"row-help"/\x3e\x3c/td\x3e\x3ctd/\x3e\x3c/tr\x3e');if(options.id)$tr.attr("id",options.id);var $titleCell=$tr.find("td:eq(0)");$titleCell.css({"text-align":options.titleAlignment});
$tr.on("titleidchange.sw",function(event,newTitleId){$tr.trigger("titlechange.sw",Swedbank.Labels(newTitleId));if(options.autoHelp)$tr.trigger("helpidchange.sw","help_"+newTitleId)});$tr.on("titlechange.sw",function(event,newTitle){$titleCell.find("span.row-title").text(newTitle)});$tr.on("contentchange.sw",function(event,content){$tr.find("td:eq(1)").html(content)});$tr.on("helpidchange.sw",function(event,helpLabelId){var help=Swedbank.Labels.exists(helpLabelId)?Templates.createHelp(Swedbank.Labels(helpLabelId)):
"";$titleCell.find("span.row-help").html(help)});$tr.on("markrequired.sw",function(event,isRequired){isRequired=isRequired||isRequired===undefined;$titleCell.css({"font-weight":isRequired?"bold":"normal"});if(Swedbank.country!=="LV")if(isRequired)$titleCell.find(".row-title").after('\x3cspan class\x3d"required"\x3e * \x3c/span\x3e');else $titleCell.find(".required").remove()});if(options.required)$tr.trigger("markrequired.sw",true);if(titleId)$tr.trigger("titleidchange.sw",titleId);return $tr}}})(jQuery);
(function($,SharedComponents){var Modals=Swedbank.Modals={},$window=$(window);var debounce=SharedComponents.helpers.debounce;Modals.cache={};Modals.$mask=null;Modals._scrollTop=0;function Modal(id,options){var modal=Modals.cache[id]=this;this.id=id;this.$=$("#"+id);this.options=$.extend({showCloseAction:true},options);if(!this.$.length)this.$=createBlankModal(id);this.$.data("instance",this);this.$.attr("data-close-action",this.options.showCloseAction);this.$body=this.$.find(".modal-body");for(var i=
0;i<this.$body.children().length;i++)if(this.$body.children()[i].tagName.toLowerCase()==="iframe"||this.$body.children()[i].tagName.toLowerCase()==="object"||this.$body.children()[i].tagName.toLowerCase()==="embed")this.$.find(this.$body.children()[i]).wrap('\x3cdiv class\x3d"media"\x3e');this.$.on("click",".modal-close-action",function(e){e.preventDefault();modal.$.trigger("modalclose",modal)});this.$body.on("curtain-opened curtain-closed",function(){modal.center(true);Modals.resizeMask()});return this}
function createBlankModal(id){var $modal=$("\x3cdiv/\x3e",{"class":"modal-window","id":id,"tabindex":0,"role":"dialog"});$modal.append('\x3ca href\x3d"#" class\x3d"modal-close-action" role\x3d"button" aria-label\x3d"'+Swedbank.Labels("close")+'"/\x3e'+'\x3cdiv class\x3d"modal-messages"\x3e'+' \x3cdiv id\x3d"modalErrorMessagesContainer" style\x3d"display:none" class\x3d"error-message-container"\x3e\x3cdiv id\x3d"modalErrorMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+' \x3cdiv id\x3d"modalLoginErrorMessagesContainer" style\x3d"display:none" class\x3d"error-message-container"\x3e\x3cdiv id\x3d"modalLoginErrorMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+
' \x3cdiv id\x3d"modalWarningMessagesContainer" style\x3d"display:none" class\x3d"warning-message-container"\x3e\x3cdiv id\x3d"modalWarningMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+' \x3cdiv id\x3d"modal-login-error" style\x3d"display:none" class\x3d"warning-message-container"\x3e\x3cdiv id\x3d"modal-login-warning"\x3e\x3c/div\x3e\x3c/div\x3e'+' \x3cdiv id\x3d"modalInfoMessagesContainer" style\x3d"display:none" class\x3d"info-message-container"\x3e\x3cdiv id\x3d"modalInfoMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+
' \x3cdiv id\x3d"modalSuccessMessagesContainer" style\x3d"display:none" class\x3d"success-message-container"\x3e\x3cdiv id\x3d"modalSuccessMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+"\x3c/div\x3e"+'\x3cdiv class\x3d"modal-body"\x3e\x3c/div\x3e');return $modal.insertAfter(Modals.$mask)}Modal.prototype.open=function(callback){var modal=this;if(modal)modal.$.trigger("modalopen",modal);modal.$.css("z-index",modal.$.next(".modal-window").getZIndex()+1);var hasModalTooltip=$(".tooltip-container.-open").length>
0;if(hasModalTooltip&&!!Tooltip.instance)Tooltip.instance.close();var modalsNotToMove=["movePopup","saveToFilePanel","exceedLimitPanel","becomeClient","flashPanel","flashPanel2","flashPanel3","contactForm","writeUs","termLifeConsultPopup","valuationReportPopup","ihomeofferform","changeDatePopup","companysList","form-register","form-register-cashless","form-register-partner","form-register-challenge","goForARide","activateSecureShopping","goForARide","checkRegistration","paymentPortalRegister","consult-popup",
"offerModal","renovationForm","contactlessForm","carForm","courseRegistration","gatewayForm","askAdvice","leasePopUp","portalForm","erply-demodays","eSmartCloseForm","amlpforced","askOfferForm","askTrafficOffer"];if(!this.$.parent().is(Modals.$container)&&!modalsNotToMove.includes(this.id)){var that=this;$(function(){that.$.appendTo(Modals.$container);that.center()})}if(modalsNotToMove.includes(this.id)&&!this.$.parent().is("#mainForm")){this.$.find("script").remove();this.$.prependTo("#mainForm")}Modals.applyShadowing();
if(this.$body.find("iframe").exists())$(".media iframe").each(function(){if(!$(this).attr("src").includes("?enablejsapi\x3d1"))$(this).attr("src",$(this).attr("src")+"?enablejsapi\x3d1")});this.$.addClass("modal-visible");$("body").addClass("modal-open");if(!this.$.data("original-height"))this.$.data("original-height",this.$.height());if(!this.$.isInside("#mainForm"))this.$.find(":input:visible:first").trigger("focus");this.$.find(".modal-messages").prependTo(this.$body);this.center();Modals.resizeMask();
this.$.focus();if(typeof callback==="function")callback();return this};Modal.prototype.close=function(){this.$.removeClass("modal-visible");var top;if($("body").hasClass("modal-open")){top=-parseInt($(".page-content").css("margin-top"));$(".page-content").removeAttr("style")}$("body").removeClass("modal-open");if(this.$body.find(".media").exists())$(".media iframe").each(function(){$(this)[0].contentWindow.postMessage('{"event": "command", "func": "pauseVideo", "args": ""}',"*")});if(!$(".modal-visible").length)Modals.removeShadowing();
if(top>0)window.scrollTo(0,top);return this};Modal.prototype.setTitle=function(title){var $title=this.$body.find("h2").first();if(!$title.length){$title=$("\x3ch2/\x3e");this.$body.prepend($title)}$title.html(title);return this};Modal.prototype.setContent=function(content,callback){var $content=$($.parseHTML(content));var modal=this;if(callback){var body=this.$body[0];var observables={childList:true};var delayedCallback=debounce(function(observer){modal.center();callback();observer.disconnect()},
20);var mutation=function(mutations,observer){delayedCallback(observer)};var observer=new MutationObserver(mutation);observer.observe(body,observables)}if($content.first().is(":header"))this.$body.html($content);else{this.$body.html(this.$body.find("h2").first());this.$body.append(content)}return this};Modal.prototype.loadContent=function(params){var modal=this;modal.setContent('\x3cdiv style\x3d"text-align: center"\x3e\x3cins class\x3d"loader"\x3e\x3c/ins\x3e').open();var pageId=params.pageId||Swedbank.Navigation.pageId||
"";if(Swedbank.Navigation.pageId.startsWith("business")&&pageId.split(".")[0]=="private")params.securityId="";return makeAjaxRequest(document.mainForm,params,function(response){ErrorMessage.clear();var json=response.responseJSON;if(json&&json.exception){modal.setContent("");ErrorMessage.add(json.exception)}else{modal.setContent(response.responseText.replace(/name="navForm"/g,'name\x3d"__fakeNavForm__"'));Swedbank.Forms.generateDefinitionListClasses(modal.$body.find(".query-params-list"));try{Swedbank.responsiveTables(modal.$body.find(".default-table"))}catch(e){}}modal.center()})};
Modal.prototype.center=function(animate){this.$body.css("max-height",window.innerHeight-80)};Modal.prototype.onOpen=function(callback){this.$.on("modalopen",callback)};Modal.prototype.onClose=function(callback){this.$.on("modalclose",callback)};Modals.create=function(id,options){return new Modal(id,options)};Modals.get=function(id){return Modals.cache[id]};Modals.open=function(id,callback){var modal=Modals.get(id)||Modals.create(id);modal.open(callback)};Modals.close=function(id){var modal=Modals.get(id)||
$(".modal-visible").data("instance");if(modal)modal.$.trigger("modalclose",modal)};Modals.getActive=function(){return $(".modal-visible").first().data("instance")};Modals.closeActive=function(){var modal=Swedbank.Modals.getActive();if(modal)modal.$.trigger("modalclose",modal)};Modals.confirm=function(title,description,options){description=description||"";options=$.extend({id:"confirm-modal",showCloseAction:false},options||{});var modal=Modals.create(options.id,options),deferred=new $.Deferred;var buttons=
getConfirmationButtons();modal.setTitle(title).setContent((description!=""?"\x3cp\x3e"+description+"\x3c/p\x3e":"")+'\x3cdiv class\x3d"form-button-bar"\x3e'+'  \x3ca href\x3d"#" class\x3d"button -destructive"\x3e'+buttons.negative+"\x3c/a\x3e"+'  \x3ca href\x3d"#" class\x3d"button"\x3e'+buttons.positive+"\x3c/a\x3e"+"\x3c/div\x3e").open();modal.$.addClass("-confirmation");modal.$.find(".button").setDefault("click",function(){modal.$.trigger("modalclose",modal);var $action=$(this);if($action.hasClass("-destructive"))deferred.reject();
else deferred.resolve()});function getConfirmationButtons(){var buttons=options.buttons;if(SharedComponents.helpers.isPlainObject(buttons)&&"positive"in buttons&&"negative"in buttons)return buttons;else if(buttons==="confirmDecline")return{positive:Swedbank.Labels("btnConfirm"),negative:Swedbank.Labels("btnDecline")};else return{positive:Swedbank.Labels("yes"),negative:Swedbank.Labels("no")}}return deferred.promise()};Modals.alert=function(title,description,options){description=description||"";return $.Deferred(function(deferred){var modal=
Modals.create("alert-modal",options);modal.setTitle(title).setContent((description!=""?"\x3cp\x3e"+description+"\x3c/p\x3e":"")+'\x3cdiv class\x3d"form-button-bar"\x3e'+'  \x3ca href\x3d"#" class\x3d"button"\x3e'+Swedbank.Labels("btnOk")+"\x3c/a\x3e"+"\x3c/div\x3e").open();modal.$.addClass("-alert");modal.$.find(".button").setDefault("click",function(){modal.$.trigger("modalclose",modal)});modal.$.on("modalclose",function(){deferred.resolve()})})};Modals.applyShadowing=function(){Modals._scrollTop=
Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop);$("html").addClass("modal-window-open")};Modals.removeShadowing=function(){$("html").removeClass("modal-window-open")};Modals.resizeMask=function(){if(!Modals.$mask)return;var activeModal=Modals.getActive();if(activeModal);};Modals.loadOffer=function(params){var offerPageId=Swedbank.Navigation.isBusiness()?"business.useful.offerdetail":"private.home.important.offers.offerdetail";params=$.extend({pageId:offerPageId},
params);Swedbank.Modals.create("bankOfferModal").loadContent(params)};Modals.loadBankOffer=function(params){var offerPageId=Swedbank.Navigation.isBusiness()?"business.useful.bankOffer":"private.home.important.offers.bankOffer";params=$.extend({pageId:offerPageId},params);Swedbank.Modals.create("bankOfferModal").loadContent(params)};Modals.loadContent=function(pageId,data){var params=$.extend({},data,{pageId:pageId});Modals.create("loadContentModal").loadContent(params)};Modals.loadBody=function(panelContainerId,
pageId,addParams){var params=$.extend({pageId:pageId},addParams);if(document.mainForm.attributesCheckNumber)params.attributesCheckNumber=$(document.mainForm.attributesCheckNumber).val();Modals.create(panelContainerId+"Modal").loadContent(params).done(function(r){if(r.responseJSON!=null&&r.responseJSON.exception!=null)ErrorMessage.set(r.responseJSON.exception);BankOffers.changeOffersGiven(params.offerUniqueId)})};Swedbank.PageLoad.onFirst(function(){Modals.$container=$('\x3cdiv id\x3d"modal-container"/\x3e').appendTo("body");
Modals.$mask=$('\x3cdiv id\x3d"modal-mask"/\x3e').appendTo(Modals.$container);document.querySelector("#modal-container").addEventListener("touchmove",function(e){var activeModal=document.querySelectorAll(".modal-visible .modal-body")[0];if(activeModal.scrollHeight===activeModal.offsetHeight||$(activeModal).isInside("#mainForm")){e.preventDefault();e.stopPropagation()}},{capture:false});Modals.$mask.on("click",function(event){var activeModal=Modals.getActive();var $target=$(event.target);if(activeModal&&
!$target.is(activeModal.$)&&!$target.closest(".modal-window").is(activeModal.$)&&!$target.is(".modal-close-action"))activeModal.$.trigger("modalclose",activeModal)});$("body").on("modalclose",".modal-window",function(event,modal){if(!event.isDefaultPrevented())modal.close()});document.addEventListener("keydown",function(event){if(SharedComponents.keyboard.isEscapePressed(event))Modals.closeActive()});const resizeCb=function(){$(".modal-visible").each(function(){$(this).data("instance").center()});
Modals.resizeMask()};$window.on("resize",SharedComponents.helpers.debounce(resizeCb,250));var hash=Swedbank.Navigation.getHash();var modalIdPattern=/modal=(\w+(-\w+)+|\w+)/;var matches=hash&&hash.match(modalIdPattern);var modalId=matches&&matches[1];if(modalId)try{if($("#"+modalId).is(".modal-window"))setTimeout(function(){Swedbank.Modals.open(modalId)},200)}catch(e){}});const modalResetCallback=()=>{$("#modal-container").find(".modal-window").remove();Modals.removeShadowing();Modals.cache={};$("body").removeClass("modal-open");
$("#wrap").removeAttr("style")};if(Swedbank.isUiSpaEnabled)SharedComponents.eventBus.addEventListener("spa-navigation-start",modalResetCallback);else Swedbank.PageLoad.onEachUnload(modalResetCallback)})(jQuery,SharedComponents);
(function(){var Navigation=Swedbank.Navigation=function(){return{sessionIdPattern:/;jsessionid=([A-z0-9!\-.]+)/,pageId:"",privateHomeId:"private.d2d.start",businessHomeId:"business.d2d.start",referrer:document.referrer,getLastPageId:function(){return Swedbank.Navigation.lastPageId},getHash:function(unescape){var escape=!unescape;var hash=!!location.hash?location.hash.substr(1):false;return hash&&escape&&encodeURI(hash)||hash},setHash:function(hash){location.hash=hash},getSessionId:function(){var jsessionid=
this.sessionIdPattern.test(location.href)&&location.href.match(this.sessionIdPattern)[1];if(jsessionid===false){var url=Swedbank.Navigation.url;jsessionid=this.sessionIdPattern.test(url)&&url.match(this.sessionIdPattern)[1]}return jsessionid},removeSessionId:function(url){return url.replace(Navigation.sessionIdPattern,"")},getBasePath:function(path){path=path||location.pathname;path=Navigation.removeSessionId(path);path=path.replace(location.protocol+"//","");path=path.replace(location.host,"");if(path.match("/$")!=
null)path=path.replace(/.$/,"");return path},addHashListener:function(callback){if(typeof callback==="function")jQuery(function(){var hash=Navigation.getHash();if(hash!==false)callback(hash)})},isPrivate:function(){return Navigation.pageId.lastIndexOf("private",0)===0},isBusiness:function(){return Navigation.pageId.lastIndexOf("business",0)===0},goTo:function(pageId,parameters){if(Swedbank.chatStartable!=null)Swedbank.chatStartable=false;if(typeof pageId==="object"){parameters=pageId;pageId=Swedbank.Navigation.pageId}if(parameters){var propertiesCount=
0;parameters=jQuery.map(parameters,function(value,key){propertiesCount++;return[key,value]});if(propertiesCount>2&&Swedbank.isDevelopment){ErrorMessage.add("Swedbank.Navigation.goTo(): "+"More than 2 key-value pairs are not supported.");return}linkAction.apply(this,[pageId].concat(parameters))}else navigateTo(pageId)},browserBack:function(){window.history.back()},createAction:function(options,params){options=jQuery.extend({href:"#"},options);var $action=jQuery("\x3ca/\x3e",options).addClass("button");
$action.data(params);return $action},parseHash:function(){var hash=Navigation.getHash();if(hash){var params={};var hashParts=hash.split("_");for(var i=0;i<hashParts.length;i++){var varValue=hashParts[i].split("\x3d");params[varValue[0]]=varValue[1]}}return params||false},generateHash:function(params){var pairs=[];for(i in params)if(params.hasOwnProperty(i))pairs.push(i+"\x3d"+params[i]);return pairs.join("_")},activateCurtain:function(target){return this.activateTarget(target)},activateTab:function(target){return this.activateTarget(target,
100)},activateTarget:function(target,offset){return new Promise(function(resolve,reject){var element=typeof target==="string"?document.querySelector(target):target;if(element&&typeof element.activate==="function")requestAnimationFrame(function(){element.activate();SharedComponents.helpers.scrollTo(element,offset).then(resolve)});else resolve()})}}}()})();
(function($){var Forms=Swedbank.Forms={};Forms.connectDateFields=function($dateFields){$dateFields.filter(":first-child").each(function(){var $startDateField=$(this);var $endDateField=$startDateField.nextAll(".date-field:not(:disabled)");$startDateField.datepicker("option","onSelect",function(selectedDate){$endDateField.datepicker("option","minDate",selectedDate);setTimeout(function(){$endDateField.datepicker("show")})})})};Forms.enhanceDateFields=function(){$.datepicker._gotoToday=function(id){var today=
new Date;var $dateRef=jQuery("\x3ctd\x3e\x3ca\x3e"+today.getDate()+"\x3c/a\x3e\x3c/td\x3e");this._selectDay(id,today.getMonth(),today.getFullYear(),$dateRef)};$(".date-field:not(.hasDatepicker)").addDatepicker();$(".date-field").on("click",function(){$(this).datepicker("show")});Forms.connectDateFields($(".period-selection-component .date-field:first-child"))};Forms.generateAdditionalForm=function(id,fields,options){options=$.extend({targetControlId:undefined,addCommonFields:true},options);$("#"+
id).remove();if(options.targetControlId)jQuery.extend(fields,{"pageId":"controls","controlId":options.targetControlId});var $mainForm=$("#mainForm");var commonFieldsToAdd=["field1","value1","field2","value2"];var commonFieldsToCopy=["securityId","encoding","language","duplicateToken","raw","timestamp","state","serial"];if(!options.targetControlId)commonFieldsToCopy.unshift("pageId");var $form=$('\x3cform method\x3d"POST" style\x3d"display:none"/\x3e');$form.attr("id",id).attr("name",id).attr("action",
$mainForm.attr("action"));addFormToDom();$.each(fields,function(name,value){addFieldToForm($('\x3cinput type\x3d"hidden"/\x3e').attr("name",name).val(value))});if(options.addCommonFields)addCommonFields();function addCommonFields(){commonFieldsToAdd.forEach(function(fieldName){$('\x3cinput type\x3d"hidden"/\x3e').attr("name",fieldName).appendTo($form)});commonFieldsToCopy.forEach(function(fieldName){var fieldInMainForm=$mainForm[0][fieldName];if(fieldInMainForm)addFieldToForm($('\x3cinput type\x3d"hidden"/\x3e').attr("name",
fieldName).val(fieldInMainForm.value))});var checkNumber=Swedbank.commonRequestParams.attributesCheckNumber;if(checkNumber)addFieldToForm($('\x3cinput type\x3d"hidden"/\x3e').attr("name","attributesCheckNumber").val(checkNumber))}function addFieldToForm($field){Forms.addFieldToForm($field,$form)}function addFormToDom(){$form.appendTo(document.body)}return $form};Forms.addFieldToForm=function($field,$form){$field.appendTo($form)};Forms.generateDefinitionListClasses=function(definitionList){$(definitionList).find("dd").each(function(){var $element=
$(this);var $row=$element.add($element.prev("dt"));if($row.parent().is("dl \x3e div"))$row=$row.add($row.parent());if(!$element.hasClass("fillable-row","text-row","checkable-row","slider-row"))if($element.find(":checkbox, :radio").length)$row.addClass("checkable-row");else if($element.find(':text, :file, :password, [type\x3d"number"], [type\x3d"tel"], [type\x3d"month"], [type\x3d"time"], select, textarea, .button, .period').length)$row.addClass("fillable-row");else if($element.find(".slider-component").length)$row.addClass("slider-row");
else $row.addClass("text-row")})};Swedbank.PageLoad.onFirst(function(){var curtainStorage=new CustomStorage("curtains");$("body").on("curtain-open curtain-close",".additional-form-content-container",function(event){var $container=$(event.target);var $content=$container.children(".hidden-content");var rememberState=$container.data("rememberState")===true;var state=event.type=="curtain-open"?"opened":"closed";if(event.type=="curtain-open"){$content.find(":input[disabled-until-closed]").removeAttr("disabled");
$content.slideDown(300,function(){$container.trigger("curtain-opened")})}else{$content.find(":input:not(:disabled)").attr("disabled-until-closed",true).prop("disabled",true);$content.slideUp(300,function(){$container.trigger("curtain-closed")})}$container.toggleClass("opened",event.type=="curtain-open");if(rememberState)if(this.id)curtainStorage.set(Swedbank.Navigation.pageId+":"+this.id+"State",state);else Swedbank.warn("\x3cadditionalFormContent/\x3e template requires ID to be set to work properly:",
this)});$(".additional-form-content-container[id]").each(function(){var $container=$(this);var $content=$container.children(".hidden-content");if(curtainStorage.get(Swedbank.Navigation.pageId+":"+this.id+"State")==="opened"){$container.addClass("opened");$content.show()}});$("body").setDefault("click",".additional-form-content-container \x3e a",function(){var $button=$(this);var $container=$button.parent();var $content=$button.next(".hidden-content");if($content.is(":animated")||!$content.length)return;
$container.trigger($content.is(":hidden")?"curtain-open":"curtain-close")});$("body").on("curtain-open curtain-close",".additional-form-content-container",function(event){var $container=$(this);var $title=$container.children("a");if(!$container.data("openedTitle"))return;var titleText=event.type==="curtain-open"?$container.data("openedTitle"):$container.data("closedTitle");$title.text(titleText)})});const formsLoadCallback=()=>{Forms.generateDefinitionListClasses($(".query-params-list:not(.calculator-results dl, .reward-details dl)"))};
if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",formsLoadCallback);jQuery(formsLoadCallback)}else Swedbank.PageLoad.onEach(formsLoadCallback)})(jQuery);
(function($){var Steps=Swedbank.Forms.Steps={};Steps.data=null;Steps.active=null;Steps.$list=null;function visualizeProgress(){stylizeFormSteps(Steps.$list)}function renderStep(step){Steps.$list.append($("\x3cli\x3e").text(step.text).toggleClass("active",step.active===true)).append(" ")}function getActive(){return Steps.data.filter(function(step){return step.active}).first()}function makePreviousStepsNavigable(){Steps.data.forEach(function(step){step.$header=$("\x3ch3\x3e").text(step.text);if(step.nr<
Steps.active.nr)step.$header.wrap($('\x3ca href\x3d"#"/\x3e').data("setStep",step.id))})}function augmentStepsData(){Steps.data.forEach(function(step,index,steps){step.index=index;step.nr=index+1;step.isFirst=step.nr===1;step.isLast=step.nr===steps.length;step.showHelp=step.isFirst||!step.isLast})}Steps.renderList=function(data,$container){Steps.data=data;Steps.active=getActive();augmentStepsData();if(Steps.data.length>1){Steps.$list=$('\x3col class\x3d"form-steps"/\x3e').appendTo($container);Steps.data.forEach(renderStep);
makePreviousStepsNavigable();visualizeProgress()}};Steps.disableNavigation=function(){Steps.$list.addClass("navigation-disabled").on("click","a",false)}})(jQuery);
(function($,Forms){var Navigation=Forms.Navigation={},createParam=Swedbank.Helpers.createParam,createAction=Swedbank.Navigation.createAction;Navigation.navigate=function(params){$(document).trigger("form-navigate");Swedbank.Navigation.goTo(params)};Navigation.attachNavigationBehaviour=function($form){var targetSelectors=[".button:not(.save-action, #executeButton, .info-action, .disabled, .custom-functionality)",".delete-action",".form-steps:not(.navigation-disabled) a"];$form.setDefault("click",targetSelectors.join(","),
function(){var $action=$(this);var confirmMsg=$action.attr("confirm");var params=$.data(this);if($.isEmptyObject(params))return;if(confirmMsg)Swedbank.Modals.confirm(confirmMsg).done(function(){Navigation.navigate(params)});else Navigation.navigate(params)})};function renderAction(text,customOptions,paramName){var options=$.extend({text:text},customOptions);var param=paramName?createParam(paramName):{};var $action=createAction(options,param);if($action.hasClass("-destructive"))Navigation.$bar.prepend($action);
else Navigation.$bar.append($action);return $action}Navigation.renderNeutralAction=function(text,paramName,options){renderAction(text,$.extend({"class":"-guiding"},options),paramName)};Navigation.renderPositiveAction=function(text,paramName,options){return renderAction(text,options,paramName)};Navigation.renderNegativeAction=function(text,paramName,options){renderAction(text,$.extend({"class":"-destructive"},options),paramName)};function renderBackAction(text,param){text=text||Swedbank.Labels("btnBack");
param=param||"previousStep";Navigation.renderNeutralAction(text,param)}function renderNextAction(text,param){text=text||Swedbank.Labels("btnNext");param=param||"nextStep";return Navigation.renderPositiveAction(text,param)}Navigation.renderActionBar=function(){var activeStep=Forms.Steps.active;Navigation.$bar=$('\x3cdiv class\x3d"form-button-bar"\x3e\x3c/div\x3e');if(activeStep.signing){var param=activeStep.paramOnPreviousStep||"previousStep";Swedbank.Signing.addNegativeAction(param,Swedbank.Labels("btnBack"))}else{if(!activeStep.isFirst)renderBackAction(activeStep.textOnPreviousStep,
activeStep.paramOnPreviousStep);if(Forms.Steps.data.length>1)Navigation.$saveAction=renderNextAction(activeStep.textOnNextStep,activeStep.paramOnNextStep)}Forms.$container.append(Navigation.$bar)}})(jQuery,Swedbank.Forms);
(function($,Forms){var Fields=Forms.Fields={};function createTextField(field){return field.multiline?$("\x3ctextarea/\x3e"):$('\x3cinput type\x3d"text"/\x3e')}function hasBooleanValuesOnly(field){return!!field.values.filter(o=>typeof o["value"]==="boolean")[0]}function createBooleanListField(field,value){var $container=$();var booleanValues=field.values.filter(x=>x.value!=="");[].forEach.call(booleanValues,function(option,index){var fieldId=field.name+"-"+index;var $radio=$("\x3cinput/\x3e",{"type":"radio",
"value":option.value,"checked":option.value===value,"id":fieldId,"name":field.name});var $label=$("\x3clabel/\x3e",{"for":fieldId,"text":option.text});var $field=$('\x3cdiv class\x3d"checkable-input-container"/\x3e').append($radio).append($label);$container=$container.add($field)});return $container}function createBooleanField(field,value){var $checkbox=$("\x3cinput/\x3e",{"type":"checkbox","name":field.name,"checked":value===true});return $checkbox}function createDropdownField(field){var $select=
$("\x3cselect/\x3e");[].forEach.call(field.values,function(option){var text=option.text;if(field.legend)text+=" "+field.legend;$("\x3coption/\x3e",{text:text,value:option.value}).appendTo($select)});return $select}function createListField(field,value){var $field=$();if(field.multiselect)$field=createMultiSelectListField(field,value);else if(hasBooleanValuesOnly(field))if(field.emptyOption)$field=createBooleanListField(field,value);else $field=createBooleanField(field,value);else if(field.listType===
"radio")$field=createBooleanListField(field,value);else $field=createDropdownField(field);return $field}function createMultiSelectListField(field,selectedFields){var $container=$();[].forEach.call(field.values,function(option,index){var fieldId=field.name+"-"+index;var $checkbox=$("\x3cinput/\x3e",{type:"checkbox",id:fieldId,name:field.name,value:option.value,checked:$.inArray(option.value,selectedFields)!==-1});var $label=$("\x3clabel/\x3e",{"for":fieldId,"text":option.text});var $field=$('\x3cdiv class\x3d"multiselect-input"/\x3e').append($checkbox).append($label);
$container=$container.add($field)});return $container}function createDateField(field){return $('\x3cinput type\x3d"text" class\x3d"date-field"/\x3e').data(field.dateOptions||{})}function createDisabledField(field,value){var $field=$("\x3cspan/\x3e");if(typeof value!=="undefined"&&field.values){var descriptor=field.values.filter(o=>o["value"]===value)[0];if(descriptor)value=descriptor.text}return $field.text(value||"")}function createLabelField(field){return $('\x3cspan class\x3d"label"/\x3e').html(" "+
(field.legend||""))}function getField(fieldName){return Forms.$body.field(fieldName)}Fields.render=function(field,value){var $field=$();if(field.type==="label")$field=createLabelField(field);else if(field.disabled)$field=createDisabledField(field,value);else{switch(field.type){case "list":$field=createListField(field,value);break;case "text":$field=createTextField(field);break;case "date":$field=createDateField(field);break;case "computed":$field=createDisabledField(field);break}if($field.is(":text, select")){if(field.minFractionDigits&&
$.isNumeric(value))if(value===parseFloat(value).toFixed(field.minFractionDigits))value=parseFloat(value).toFixed(field.minFractionDigits);$field.val(value)}if($field.is(":input"))$field.copyAttributesFrom(field,"name maxLength")}if(field.type!=="list"&&field.type!=="label"&&field.legend)$field.attr("placeholder",field.legend);return $field};Fields.show=function(fieldName){return getField(fieldName).closest("dd").prev().removeClass("hidden")};Fields.hide=function(fieldName){return getField(fieldName).closest("dd").prev().addClass("hidden")}})(jQuery,
Swedbank.Forms);
(function($,Forms){var JSONRenderer=Forms.JSONRenderer={};Forms.data=null;Forms.$container=null;Forms.$body=null;var createParam=Swedbank.Helpers.createParam;var createHelp=Swedbank.Templates.createHelp;var createAction=Swedbank.Navigation.createAction;function checkFieldValidity(field,$row){var error=Forms.data.validationErrors.filter(o=>o["target"]===field.name)[0];if(error)markRowAsInvalid($row,error.text)}function specifyLayoutRules($row){var $dropdowns=$row.find("select");var $inputs=$row.find("input:not(:radio)");
if($inputs.length==2||$dropdowns.length==2)$row.addClass("equal-fields");if($inputs.length==1&&$row.find(".label").length==1)$row.addClass("input-and-label");if($inputs.length===1&&$dropdowns.length===1){$row.addClass("select-and-input");var $option=$dropdowns.children().first();if($option.width()>$dropdowns.width())$row.removeClass("select-and-input").addClass("equal-fields")}}function getCheckedValues($inputs){var selectedValues=[];$inputs.filter(":checked").each(function(){var value=$(this).parent().text();
selectedValues.push(value)});return selectedValues.join(", ")}function toEscapedJQueryString(string){return string.replace(/\.|\[|\]/ig,function(match){return"\\"+match})}function getPreviewValue($row){var values=[];$row.find(":input").each(function(){var $field=$(this);var $connectedFields=$row.findByName(toEscapedJQueryString(this.name));if($field.data("value-retrieved")){$field.removeData("value-retrieved");return}$connectedFields.not($field).data("value-retrieved",true);if($field.is(":checkbox"))if($connectedFields.length>
1)values=values.concat(getCheckedValues($connectedFields));else values=values.concat($field.prop("checked")?"Yes":"No");else if($field.is("select"))values=values.concat($field.children(":selected").text());else if($field.is(":radio"))values=values.concat(getCheckedValues($connectedFields));else values=values.concat($field.val())});return values.join(" ")}function updatePreviewValue($row){var value=getPreviewValue($row);$row.find(".current-value").text(value)}function equalizeRowHeight($row){var $label=
$row.prev();$row.add($label).css("height","auto");var contentHeight=$row.height();if($label.height()>contentHeight)$row.height($label.height());else $label.height($row.height())}function startEditingRow($row){Forms.$body.addClass("editing-single-row");$row.add($row.prev()).switchClass("not-editing","editing");equalizeRowHeight($row)}function stopEditingRow($row){Forms.$body.removeClass("editing-single-row");$row.add($row.prev()).switchClass("editing","not-editing");equalizeRowHeight($row)}function addEditingButtons($row){var $editAction=
$('\x3ca href\x3d"#" class\x3d"edit-action"/\x3e'),$saveAction=$('\x3ca href\x3d"#" class\x3d"save-action button -guiding"/\x3e'),valueContainerHtml='\x3cspan class\x3d"current-value"/\x3e';$editAction.setDefault("click",function(){startEditingRow($row)});$saveAction.setDefault("click",function(){updatePreviewValue($row);stopEditingRow($row)});stopEditingRow($row);$editAction.prependTo($row);$saveAction.prependTo($row).text(Swedbank.Labels("save"));if($row.find(".label").length)$row.find(".label").before(valueContainerHtml);
else $row.append(valueContainerHtml)}function clearValidationErrors($row){$row.removeClass("validation-error");$row.find(".validation-message").remove()}function addEditing($row){addEditingButtons($row);updatePreviewValue($row);$row.find(".save-action").on("click",function(){var rowData=$row.parseAsJSON();rowData.editSingle=true;clearValidationErrors($row);makeAjaxRequest(document.mainForm,rowData,function(response){var data=response.responseJSON;[].forEach.call(data.validationErrors||[],function(error){markRowAsInvalid($row,
error.text)})})})}function renderRowTitle(row){var $dt=$("\x3cdt\x3e"+(row.legend||"")+"\x3c/dt\x3e");if(row.optional)$dt.addClass("optional");return $dt}function renderRowContent(row){row.children.forEach(function(field){var value=Forms.data.data[field.name];if(row.cloneable&&row.isNew){field.name=row.cloneable.targetOnAdd+"."+field.name;if(row.isNew&&field.insertOnly)delete field.disabled}field.$=Forms.Fields.render(field,value).appendTo(row.$);if(field.values.some(x=>!!x["help"])&&Forms.Steps.active.showHelp)addInfoModal(field,
row.$);attachValueUpdateBehaviourTo(field);if(field.type==="computed")row.$.addClass("computed-value-container");if(field.type==="text"&&field.multiline)field.$.characterCounter();checkFieldValidity(field,row.$)})}function renderRow(row,$fieldsList){row.$=$("\x3cdd/\x3e").appendTo($fieldsList);renderRowTitle(row).insertBefore(row.$);renderRowContent(row);specifyLayoutRules(row.$);attachValueUpdateBehaviourTo(row);if(Forms.Steps.active.isLast){var fields=row.children;var fieldCount=fields.length;var onlyLabelField=
fieldCount===1&&fields[0].type==="label";var allFieldsDisabled=fields.every(x=>!!x.disabled);if(!onlyLabelField&&!allFieldsDisabled)addEditing(row.$)}else if(!row.optional)row.$.append('\x3cspan class\x3d"validation-status"/\x3e');if(Forms.Steps.active.showHelp&&row.help)createHelp(row.help).appendTo(row.$)}function parseValue(value){if(value&&!isNaN(value))value*=1;return value}function addInfoModal(field,$row){var infoModal=Swedbank.Modals.create("info-modal");var $infoAction=$("\x3ca/\x3e",{"class":"button -guiding info-action",
"href":"#","text":field.valueHelpActionText});field.$.on("change",function(){var value=parseValue(this.value);var valueExists=value!=="";$infoAction.css("display",valueExists?"inline-block":"none");if(field.disabled){var option=field.values.find(x=>!!x.help)[0];infoModal.setTitle(option.text).setContent(option.help)}else if(valueExists){var option=field.values.find(x=>x.value===value)[0];infoModal.setTitle(option.text).setContent(option.help)}});field.$.trigger("change");$infoAction.before("\x3cbr\x3e").appendTo($row).setDefault("click",
function(){infoModal.open()})}function createDynamicPrefix(start,index){if(typeof index==="number")return start+"["+index+"]";else return start+"['"+index+"']"}function renderCloneableBlock(block){var renderAsTable=!Forms.Steps.active.isLast;var blockInListStyle=getBlockStyle()=="list";var $block=getInitialBlock();addTableHeader();addDataBlocks();if(renderAsTable||blockInListStyle)addEmptyBlockAndAction();function getBlockStyle(){return block.cloneable.style?block.cloneable.style:"table"}function getInitialBlock(){return renderAsTable&&
blockInListStyle?$('\x3cdiv id\x3d"'+block.name+'" class\x3d"cloneable-list"/\x3e').appendTo(Forms.$body):$(renderAsTable?'\x3ctable class\x3d"cloneable"/\x3e':'\x3cdiv class\x3d"cloneable"/\x3e').appendTo(Forms.$body)}function addTableHeader(){if(renderAsTable&&!blockInListStyle)addTableHeaderRow()}function addTableHeaderRow(){var $headerRow=$("\x3ctr/\x3e").appendTo($block);block.children.forEach(function(row){var $headerCell=$("\x3cth/\x3e",{"text":row.legend}).appendTo($headerRow);if(row.children[0].type===
"date")$headerCell.addClass("date-column");if(row.help)createHelp(row.help).appendTo($headerCell)});$headerRow.append("\x3cth/\x3e")}function appendDeleteButton($deleteAction){if(renderAsTable&&!blockInListStyle)$("\x3ctd/\x3e").append($deleteAction).appendTo($block);else if(blockInListStyle)$block.find("dl:last").append($("\x3cdt/\x3e")).append($("\x3cdd/\x3e").append($deleteAction));else $block.find("dd:first").append($deleteAction)}function addDataBlocks(){[].forEach.call(Forms.data.data[block.name]||
[],function(blockData){var identifier=blockData["@id"];var namePrefix=createDynamicPrefix(block.name,identifier);var $block=addBlock(namePrefix);if(block.cloneable.paramOnDelete&&!Forms.Steps.active.isLast){var $deleteAction=createAction({"class":"delete-action","confirm":block.cloneable.confirmOnDelete},createParam(block.cloneable.paramOnDelete,identifier)).removeClass("button");appendDeleteButton($deleteAction)}})}function getInitialBlockSection(){return $(renderAsTable&&!blockInListStyle?"\x3ctr/\x3e":
'\x3cdl class\x3d"query-params-list"/\x3e').appendTo($block)}function appendRow(newRow,$section){if(renderAsTable&&!blockInListStyle){newRow.$=$("\x3ctd/\x3e").appendTo($section);renderRowContent(newRow)}else renderRow(newRow,$section)}function addBlock(namePrefix,isNewBlock){var $section=getInitialBlockSection();block.children.forEach(function(row){var newRow=$.extend(true,{},row,{name:row.name?namePrefix+"."+row.name:namePrefix});[].forEach.call(newRow.children||[],function(field){field.name=newRow.name+
"."+field.name;if(isNewBlock&&(field.insertOnly||row.insertOnly))delete field.disabled});appendRow(newRow,$section)});return $section}function addEmptyBlockAndAction(){if(block.cloneable.paramOnAdd){addBlock(block.cloneable.targetOnAdd,true);if(!Forms.Steps.active.isLast){var $actionAdd=createAction({"class":"-guiding","text":block.cloneable.textOnAdd},createParam(block.cloneable.paramOnAdd));$block.after($actionAdd);if(blockInListStyle&&block.cloneable.paramOnDelete){var $deleteAction=createAction({"class":"delete-action",
"confirm":block.cloneable.confirmOnDelete},createParam(block.cloneable.paramOnDelete,-1)).removeClass("button");appendDeleteButton($deleteAction)}}}}}function renderSimpleBlock(block){var $fieldsList=$('\x3cdl class\x3d"query-params-list"/\x3e').appendTo(Forms.$body);if(block.alwaysEditable)$fieldsList.addClass("always-editable");block.children.forEach(function(row){renderRow(row,$fieldsList);if(row.cloneable&&row.cloneable.paramOnDelete&&!row.isNew)addDeleteAction(row);if(row.cloneable&&row.isNew)addNewRowAction(row)})}
function renderBlock(block){if(block.legend)Forms.$body.append('\x3ch3 class\x3d"form-header"\x3e'+(block.legend||"")+"\x3c/h3\x3e");if(block.help&&Forms.Steps.active.showHelp)Forms.$body.append('\x3cp class\x3d"form-block-description"\x3e'+block.help+"\x3c/p\x3e");if(block.cloneable)renderCloneableBlock(block);else renderSimpleBlock(block)}function addDeleteAction(row){var $deleteAction=createAction({"class":"delete-action","confirm":row.cloneable.confirmOnDelete},createParam(row.cloneable.paramOnDelete,
row.identifier));$deleteAction.removeClass("button").appendTo(row.$)}function addNewRowAction(row){createAction({"class":"-guiding","text":row.cloneable.textOnAdd},createParam(row.cloneable.paramOnAdd)).appendTo(row.$)}function attachValueUpdateBehaviourTo(target){if(target.paramsOnChange){function callback(){Swedbank.Navigation.goTo(target.paramsOnChange)}if(target.$.is(":input"))target.$.on("change",callback);else target.$.on("change",":input",callback)}}function renderDisclaimer(){var activeStep=
Forms.Steps.active;if(activeStep.disclaimer){var $disclaimer=$('\x3cdiv class\x3d"disclaimer"/\x3e').appendTo(Forms.$body);$("\x3cp/\x3e").text(activeStep.disclaimer).appendTo($disclaimer)}}function renderLegalDisclaimer(confirmation,disclaimer){var $disclaimerBody=$("\x3cdiv/\x3e");$("\x3cinput/\x3e",{type:"checkbox",id:"disclaimer-checkbox",name:"legalAccept",value:confirmation}).appendTo($disclaimerBody);$('\x3clabel for\x3d"disclaimer-checkbox"/\x3e').html(confirmation).appendTo($disclaimerBody);
if(disclaimer)$disclaimerBody=$disclaimerBody.add($('\x3cdiv class\x3d"legalBlock"/\x3e',{id:"disclaimer-text"}).html(disclaimer));Forms.$body.append($disclaimerBody)}function markRowAsInvalid($container,errorMessage){$container.addClass("validation-error");$('\x3cp class\x3d"validation-message"/\x3e').text(errorMessage).appendTo($container)}function augmentFormData(){updateHierarchicNames();updateAllowedFieldValues();generateDynamicFieldValues();Forms.data.dataDefinition.forEach(function(block){block.children.filter(x=>
!!x.cloneable).forEach(function(row,index){[].forEach.call(Forms.data.data[row.name]||[],function(rowData){var identifier=rowData["@id"];var namePrefix=createDynamicPrefix(row.name,identifier);var clonedRow=$.extend({},row,{identifier:identifier,children:[]});row.children.forEach(function(child){clonedRow.children.push($.extend({},child,{name:namePrefix+"."+child.name}))});block.children.splice(index,0,clonedRow);index++});row.isNew=true})});function updateAllowedFieldValues(){Forms.data.dataDefinition.forEach(updateValues);
function updateValues(element){if(element.range)element.values=Array.from(new Array(element.range[1]),function(a,i){return i+element.range[0]+1});else if(!element.values)element.values=[];if(element.emptyOption)element.values.unshift("");element.values.forEach(function(option,index){if(typeof option!=="object")element.values[index]={value:option,text:option}});[].forEach.call(element.children||[],updateValues)}}function updateHierarchicNames(){Forms.data.dataDefinition.forEach(function(element){updateName(element)});
function updateName(element,prefix){if(!element.name)element.name=prefix;else if(prefix)element.name=prefix+"."+element.name;[].forEach.call(element.children||[],function(child){updateName(child,element.cloneable?null:element.name)})}}function generateDynamicFieldValues(){$.each(Forms.data.data,function(prefix,arr){if(Array.isArray(arr))arr.forEach(function(entry){var uniqueId=entry["@id"];$.each(entry,function(key,value){if(key!=="@id"){var dynamicPrefix=createDynamicPrefix(prefix,uniqueId);Forms.data.data[dynamicPrefix+
"."+key]=value}})})})}}function renderBlankFormSections(){Forms.$container=$('\x3csection class\x3d"form frame" id\x3d"form-container"/\x3e');var signingContainer=$("#signingContainer, signing-widget");if(signingContainer.length)Forms.$container.insertBefore(signingContainer[0]);else Forms.$container.appendTo("#mainForm");Forms.Steps.renderList(Forms.data.steps,Forms.$container);Forms.$body=$('\x3cdiv id\x3d"form-body" class\x3d"form-content"/\x3e').appendTo(Forms.$container);renderDisclaimer();Forms.Navigation.renderActionBar()}
JSONRenderer.render=function(source){Forms.data=source;augmentFormData();renderBlankFormSections();Forms.data.dataDefinition.forEach(renderBlock);var signing=Forms.Steps.active.signing;if(signing)renderLegalDisclaimer(signing.confirmationText,signing.disclaimerText);Forms.Navigation.attachNavigationBehaviour(Forms.$container);Forms.enhanceDateFields();$(document).untilUnload("form-navigate",function(){Forms.$body.find(":checkbox:not(.multiselect-input input)").each(function(){$("\x3cinput/\x3e",{"type":"hidden",
"name":this.name,"value":this.checked===true}).appendTo(Forms.$container);$(this).attr("name","")})})}})(jQuery,Swedbank.Forms);
if(!Object.create)Object.create=function(o,properties){if(typeof o!=="object"&&typeof o!=="function")throw new TypeError("Object prototype may only be an Object: "+o);else if(o===null)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(typeof properties!="undefined")throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function F(){}F.prototype=o;return new F};
(function($){Swedbank.Forms.Sepa=new function(){const ID_MAX_LENGTH=35;const PartyTypes={ORGANISATION:"ORGANISATION",PRIVATE:"PRIVATE",NONE:"NONE"};function countryExists(value){for(const code in countries)if(code===value)return true;return false}const inputs=new function(){const defaultIdentificationNumber={setter:function(object){const self=this;$.each(object,function(key,value){$(self).find("input[name$\x3d"+key+"]").val(value)})},builder:function(entityName,partyField,defaultValues,readonly){const input=
$("\x3cinput/\x3e");const id=entityName+"."+partyField+".identificationNumber";input.attr("id",id);input.attr("name",id);input.attr("type","text");input.attr("maxlength",ID_MAX_LENGTH);input.on("input",_event=>input.val(input.val().toUpperCase()));if(defaultValues.identificationNumber!==undefined)input.val(defaultValues.identificationNumber);if(readonly)input.prop("readonly",true);return input},validator:function(shouldValidateCharacters,callback){const input=$(this).find("input[name$\x3didentificationNumber]");
Swedbank.Forms.Sepa.Validation.validateIdentificationNumber(input,true,shouldValidateCharacters,callback)}};return{"NONE":{setter:function(){},builder:function(){}},"BIC_OR_BEI":{setter:defaultIdentificationNumber.setter,builder:function(entityName,partyField,defaultValues,readonly,isForeign){const fieldName=isForeign?"bicOrBei":"identificationNumber";const defaultValue=isForeign?defaultValues.bicOrBei:defaultValues.identificationNumber;const input=$("\x3cinput/\x3e");const id=entityName+"."+partyField+
"."+fieldName;input.attr("id",id);input.attr("name",id);input.attr("type","text");input.attr("maxlength",ID_MAX_LENGTH);if(defaultValue!==undefined)input.val(defaultValue);if(readonly)input.prop("readonly",true);return input},validator:function(shouldValidateCharacters,callback,isForeign){const fieldName=isForeign?"bicOrBei":"identificationNumber";const input=$(this).find("input[name$\x3d"+fieldName+"]");input.val(input.val().replace(/\s/g,"").toUpperCase());Swedbank.Forms.Sepa.Validation.validateBICorBEI(input,
true,callback)}},"ANY_BIC":{_getFieldName:isForeign=>isForeign?"bicOrBei":"identificationNumber",setter:defaultIdentificationNumber.setter,builder:function(entityName,partyField,defaultValues,readonly,isForeign){const fieldName=inputs["ANY_BIC"]._getFieldName(isForeign);const id=entityName+"."+partyField+"."+fieldName;const input=$("\x3cinput/\x3e");input.attr("id",id);input.attr("name",id);input.attr("type","text");input.attr("maxlength",ID_MAX_LENGTH);input.on("input",_event=>input.val(input.val().toUpperCase()));
const defaultValue=isForeign?defaultValues.bicOrBei:defaultValues.identificationNumber;if(typeof defaultValue!=="undefined")input.val(defaultValue);if(readonly)input.prop("readonly",true);return input},validator:function(_shouldValidateCharacters,callback,isForeign){const fieldName=inputs["ANY_BIC"]._getFieldName(isForeign);const input=$(this).find(`input[name\$=${fieldName}]`);input.val(input.val().replace(/\s/g,""));Swedbank.Forms.Sepa.Validation.validateAnyBIC(input,true,callback)}},"BANK":defaultIdentificationNumber,
"CENTRAL_BANK":defaultIdentificationNumber,"CERTIFICATE_OF_INCORPORATION":defaultIdentificationNumber,"TELEPHONE_NUMBER":defaultIdentificationNumber,"CLEARING_NUMBER":defaultIdentificationNumber,"DUNS":defaultIdentificationNumber,"EMPLOYER_ID_NUMBER_V4":defaultIdentificationNumber,"GS1GLN":defaultIdentificationNumber,"SIREN":defaultIdentificationNumber,"SIRET":defaultIdentificationNumber,"LEGAL_ENTITY_IDENTIFIER":{_getFieldName:(isForeign,isForeignStandingOrder)=>isForeign&&!isForeignStandingOrder?
"lei":"identificationNumber",setter:defaultIdentificationNumber.setter,builder:function(entityName,partyField,defaultValues,readonly,isForeign,_partyType,isForeignStandingOrder){const maxLength=20;const fieldName=inputs["LEGAL_ENTITY_IDENTIFIER"]._getFieldName(isForeign,isForeignStandingOrder);const id=entityName+"."+partyField+"."+fieldName;const input=$("\x3cinput/\x3e");input.attr("id",id);input.attr("name",id);input.attr("type","text");input.attr("maxlength",maxLength);input.on("input",_event=>
input.val(input.val().toUpperCase()));const defaultValue=isForeign&&!isForeignStandingOrder?defaultValues.lei:defaultValues.identificationNumber;if(typeof defaultValue!=="undefined")input.val(defaultValue);if(readonly)input.prop("readonly",true);return input},validator:function(_shouldValidateCharacters,callback,isForeign,isForeignStandingOrder){const fieldName=inputs["LEGAL_ENTITY_IDENTIFIER"]._getFieldName(isForeign,isForeignStandingOrder);const input=$(this).find(`input[name\$=${fieldName}]`);
input.val(input.val().replace(/\s/g,""));Swedbank.Forms.Sepa.Validation.validateLEI(input,true,callback)}},"SOCIAL_SECURITY_NUMBER_V4":defaultIdentificationNumber,"ALIEN_REGISTRATION_NUMBER_V4":defaultIdentificationNumber,"PASSPORT_NUMBER_V4":defaultIdentificationNumber,"COMPANY_ID":defaultIdentificationNumber,"NATIONAL_ID_NUMBER":defaultIdentificationNumber,"TAX_ID_NUMBER_V4":defaultIdentificationNumber,"CUSTOMER_ID_NUMBER_V4":defaultIdentificationNumber,"DRIVER_LICENCE_NUMBER":defaultIdentificationNumber,
"DATE_AND_PLACE_OF_BIRTH":{setter:function(values){const self=this;const dateField=$(self).find("input[name$\x3dbirthDate]");dateField.addDatepicker();const dateSplit=values.birthDate.split(".");const date=new Date(dateSplit[2],dateSplit[1]-1,dateSplit[0],0,0,0);const dateFormat=dateField.datepicker("option","dateFormat");dateField.val($.datepicker.formatDate(dateFormat,date));$(self).find("input[name$\x3dbirthCity]").val(values.birthCity);$(self).find("input[name$\x3dbirthProvince]").val(values.birthProvince);
for(const code in countries)if(countries[code]===values["birthCountry"]||code===values["birthCountry"]){$(self).find("select[name$\x3dbirthCountry]").val(code);break}},builder:function(entityName,partyField,defaultValues,readonly){const oldIE=$("body").hasClass("old-ie");const countriesSelect=function(prefix){let html='\x3cselect id\x3d"'+prefix+'.birthCountry" name\x3d"'+prefix+'.birthCountry" class\x3d"countries form-field-medium"\x3e';$.each(countries,function(i,val){let option='\x3coption value\x3d"'+
i+'" '+(i===Swedbank.country?'selected\x3d"true"':"")+"\x3e"+val+"\x3c/option\x3e";if(oldIE)option=option.replace("\x3coption",'\x3coption title\x3d"'+val+'"');html+=option});return html+="\x3c/select\x3e"};const prefix=`${entityName}.${partyField}Extended`;let html='\x3cdl class\x3d"query-params-list id-type-list"\x3e';html+=`<ui-field label="${Swedbank.Labels("label_birthDate")}" required="true">`+`<ui-datepicker>`+`<input type="text" id="${prefix}.birthDate" name="${prefix}.birthDate" max="today" />`+
`</ui-datepicker>`+`</ui-field>`;html+=`<ui-field label="${Swedbank.Labels("label_birthCity")}" required="true">`+`<input type="text" id="${prefix}.birthCity" name="${prefix}.birthCity" maxlength="${ID_MAX_LENGTH}" />`+`</ui-field>`;html+=`<ui-field label="${Swedbank.Labels("label_birthProvince")}">`+`<input type="text" id="${prefix}.birthProvince" name="${prefix}.birthProvince" maxlength="${ID_MAX_LENGTH}" />`+`</ui-field>`;html+=`<ui-field label="${Swedbank.Labels("label_birthCountry")}" required="true">`+
countriesSelect(prefix)+`</ui-field>`;html+="\x3c/dl\x3e";return $(html)},postRender:function(){Swedbank.Forms.enhanceDateFields()},validator:function(shouldValidateCharacters,callback){const dateField=$(this).find("input[name$\x3dbirthDate]");const cityField=$(this).find("input[name$\x3dbirthCity]");const countryField=$(this).find("select[name$\x3dbirthCountry]");const provinceField=$(this).find("input[name$\x3dbirthProvince]");Swedbank.Forms.Sepa.Validation.validateBirthDate(dateField,"date",true,
callback);Swedbank.Forms.Sepa.Validation.validateIdField(cityField,"city",true,shouldValidateCharacters,callback);Swedbank.Forms.Sepa.Validation.validateIdField(provinceField,"province",false,shouldValidateCharacters,callback);Swedbank.Forms.Sepa.Validation.validateBirthCountry(countryField,"country",true,callback,countryExists)}},"OTHER":{setter:function(values){const self=this;$.each(values,function(i,val){$(self).find("input[name$\x3d"+i+"]").val(val)})},builder:function(entityName,partyField,
defaultValues,readonly,isForeign,partyType){const isIdProprietary=!isForeign||partyType===PartyTypes.ORGANISATION;const prefix=`${entityName}.${partyField}`;let html='\x3cdl class\x3d"query-params-list id-type-list"\x3e';html+=`<ui-field label="${Swedbank.Labels("labelId")}" required="true">`+`<input class="document-field" type="text" id="${prefix}.identificationNumber" name="${prefix}.identificationNumber" maxlength="${ID_MAX_LENGTH}" />`+`</ui-field>`;const idAndName=isIdProprietary?`${prefix}Extended.idProprietary`:
`${prefix}Extended.documentType`;html+=`<ui-field label="${Swedbank.Labels("label_idProprietary")}" >`+`<input class="document-field" type="text" id="${idAndName}" name="${idAndName}" maxlength="${ID_MAX_LENGTH}" />`+`</ui-field>`;html+=`<ui-field label="${Swedbank.Labels("label_idIssuer")}">`+`<input class="document-field" type="text" id="${prefix}Extended.idIssuer" name="${prefix}Extended.idIssuer" maxlength="${ID_MAX_LENGTH}" />`+`</ui-field>`;html+="\x3c/dl\x3e";return $(html)},validator:function(shouldValidateCharacters,
callback,isForeign,partyType){const isIdProprietary=!isForeign||partyType===PartyTypes.ORGANISATION;const proprietaryIdType=isIdProprietary?$(this).find("input[name$\x3didProprietary]"):$(this).find("input[name$\x3ddocumentType]");const id=$(this).find("input[name$\x3didentificationNumber]");const idIssuer=$(this).find("input[name$\x3didIssuer]");Swedbank.Forms.Sepa.Validation.validateIdField(proprietaryIdType,"proprietary",false,shouldValidateCharacters,callback);Swedbank.Forms.Sepa.Validation.validateIdentificationNumber(id,
true,shouldValidateCharacters,callback);Swedbank.Forms.Sepa.Validation.validateIdField(idIssuer,"issuer",false,shouldValidateCharacters,callback)}}}};const createOption=function(value,text){const option=$("\x3coption\x3e\x3c/option\x3e");option.text(Swedbank.Labels("identificatorType_"+text));option.val(value);if($("body").hasClass("old-ie"))option.attr("title",option.text());return option};const IsoPostalAddress=function(containerSelector,togglerType){const bankType={CREDITOR_BANK:"CREDITOR_BANK",
CORRESPONDENT_BANK:"CORRESPONDENT_BANK",INTERMEDIARY_BANK:"INTERMEDIARY_BANK"};const addressType={STRUCTURED:"STRUCTURED",UNSTRUCTURED:"UNSTRUCTURED"};let radio;let container;let hasUnstructuredOption;let isDestinationWorldwide;let isUrgent;let type;let prevType;let country;let address;let addressLine1;let addressLine2;let province;let districtName;let town;let townLocationName;let street;let houseNumber;let apartmentNumber;let floor;let houseName;let department;let subDepartment;let postBox;let postCode;
this.getContainer=function(){return containerSelector};this.create=function(){const isoPostalAddress=this;radio=$("input[name$\x3d"+containerSelector+"]");container=$("#"+containerSelector);hasUnstructuredOption=radio.length===3;isDestinationWorldwide=false;isUrgent=false;prevType="";type=$("#"+containerSelector+"\\.type");country=$("#"+containerSelector+"\\.countryCode");address=$("#"+containerSelector+"\\.address");addressLine1=$("#"+containerSelector+"\\.addressLine1");addressLine2=$("#"+containerSelector+
"\\.addressLine2");province=$("#"+containerSelector+"\\.countrySubDivision");districtName=$("#"+containerSelector+"\\.districtName");town=$("#"+containerSelector+"\\.townName");townLocationName=$("#"+containerSelector+"\\.townLocationName");street=$("#"+containerSelector+"\\.streetName");houseNumber=$("#"+containerSelector+"\\.buildingNumber");apartmentNumber=$("#"+containerSelector+"\\.room");floor=$("#"+containerSelector+"\\.floor");houseName=$("#"+containerSelector+"\\.buildingName");department=
$("#"+containerSelector+"\\.department");subDepartment=$("#"+containerSelector+"\\.subDepartment");postBox=$("#"+containerSelector+"\\.postBox");postCode=$("#"+containerSelector+"\\.postCode");country.on("change",function(event){if(detailedAddressIsMandatory())isoPostalAddress.setDetailedAddressCurtainsOpen(true)});radio.click({param1:isoPostalAddress},function(){handleRadioButtonEvent(isoPostalAddress,this)});if(hasUnstructuredOption){address.on("change keyup",{param1:isoPostalAddress},function(){handleAddressFieldFilling(isoPostalAddress,
this)});this.initAddressField(addressLine1.val(),addressLine2.val())}this.hide();return isoPostalAddress};this.unhideDoNotSpecifyOption=function(){const radioButtonsContainer=$("#"+containerSelector+"SelectionRow");radioButtonsContainer.children()[0].show();radioButtonsContainer.children()[1].show();if(!this.hasAnyValues())$(radio[0]).trigger("click")};this.hideDoNotSpecifyOption=function(){const radioButtonsContainer=$("#"+containerSelector+"SelectionRow");radioButtonsContainer.children()[0].hide();
radioButtonsContainer.children()[1].hide();if(!this.hasAnyValues())$(radio[1]).trigger("click")};this.fillFields=function(payment){const data=this.getValues(payment,containerSelector.replace("\\",""));prevType=data.prevType;country.val(data.country);province.val(data.province);districtName.val(data.districtName);town.val(data.town);townLocationName.val(data.townLocationName);street.val(data.street);houseNumber.val(data.houseNumber);apartmentNumber.val(data.apartmentNumber);floor.val(data.floor);houseName.val(data.houseName);
department.val(data.department);subDepartment.val(data.subDepartment);postBox.val(data.postBox);postCode.val(data.postCode);if(hasUnstructuredOption){address.val("");addressLine1.val(data.addressLine1);addressLine2.val(data.addressLine2);if(!this.hasAnyValues()&&togglerType==="CREDITOR"&&!isEmpty(payment["beneficiaryAddress"]))addressLine1.val(payment["beneficiaryAddress"]);this.initAddressField(addressLine1.val(),addressLine2.val())}};this.getValues=function(data,party){return{"prevType":data[party+
".type"],"country":data[party+".countryCode"],"addressLine1":data[party+".addressLine1"],"addressLine2":data[party+".addressLine2"],"province":data[party+".province"],"districtName":data[party+".districtName"],"town":data[party+".townName"],"townLocationName":data[party+".townLocationName"],"street":data[party+".streetName"],"houseNumber":data[party+".buildingNumber"],"apartmentNumber":data[party+".apartmentNumber"],"floor":data[party+".floor"],"houseName":data[party+".buildingName"],"department":data[party+
".department"],"subDepartment":data[party+".subDepartment"],"postBox":data[party+".postBox"],"postCode":data[party+".postCode"]}};this.clearExtraFields=function(retainCountry){if(!retainCountry)country.val("");address.val("");addressLine1.val("");addressLine2.val("");province.val("");districtName.val("");town.val("");townLocationName.val("");street.val("");houseNumber.val("");apartmentNumber.val("");floor.val("");houseName.val("");department.val("");subDepartment.val("");postBox.val("");postCode.val("")};
this.toggleAfterFilling=function(){if(this.hasAnyValues())this.show()};this.show=function(){if(this.hasStructuredValues()){this.selectStructured();this.setDetailedAddressCurtainsOpen(this.hasStructuredOptionalValues()||detailedAddressIsMandatory())}else if(hasUnstructuredOption&&this.hasUnStructuredValues())this.selectUnstructured();else if(!isEmpty(country.val()))if(hasUnstructuredOption&&addressType.UNSTRUCTURED===prevType)this.selectUnstructured();else{this.selectStructured();this.setDetailedAddressCurtainsOpen(this.hasStructuredOptionalValues()||
detailedAddressIsMandatory())}container.show()};this.selectStructured=function(){type.val(addressType.STRUCTURED);$(radio[1]).prop("checked",true);$("#"+containerSelector+"\\.unstructuredFields").hide();$("#"+containerSelector+"\\.structuredFields").show();$("#"+containerSelector+"\\.countryDropdown").show();this.markMandatoryFields()};this.selectUnstructured=function(){type.val(addressType.UNSTRUCTURED);$(radio[2]).prop("checked",true);$("#"+containerSelector+"\\.unstructuredFields").show();$("#"+
containerSelector+"\\.structuredFields").hide();if(this.isBankPostAddress())$("#"+containerSelector+"\\.countryDropdown").hide();this.markMandatoryFields()};function handleRadioButtonEvent(isoPostalAddress,event){if($(event).val()==="structured")showStructured(isoPostalAddress,event);else if($(event).val()==="unstructured")showUnstructured(isoPostalAddress,event);else{type.val("");container.hide();isoPostalAddress.clearExtraFields();isoPostalAddress.setDetailedAddressCurtainsOpen(false)}}function showStructured(isoPostalAddress,
event){type.val(addressType.STRUCTURED);$(event).prop("checked",true);$("#"+containerSelector+"\\.unstructuredFields").hide();$("#"+containerSelector+"\\.structuredFields").show();$("#"+containerSelector+"\\.countryDropdown").show();isoPostalAddress.markMandatoryFields();isoPostalAddress.clearExtraFields(true);isoPostalAddress.setDetailedAddressCurtainsOpen(detailedAddressIsMandatory());container.show()}function showUnstructured(isoPostalAddress,event){type.val(addressType.UNSTRUCTURED);$(event).prop("checked",
true);$("#"+containerSelector+"\\.unstructuredFields").show();$("#"+containerSelector+"\\.structuredFields").hide();if(isoPostalAddress.isBankPostAddress()){$("#"+containerSelector+"\\.countryDropdown").hide();isoPostalAddress.clearExtraFields()}else isoPostalAddress.clearExtraFields(true);isoPostalAddress.setDetailedAddressCurtainsOpen(false);isoPostalAddress.markMandatoryFields();container.show()}function handleAddressFieldFilling(isoPostalAddress,event){const input=$(event).val();if(input.length>
70){isoPostalAddress.getAddressLine1().val(input.substring(0,70));isoPostalAddress.getAddressLine2().val(input.substring(70))}else{isoPostalAddress.getAddressLine1().val(input);isoPostalAddress.getAddressLine2().val("")}}function detailedAddressIsMandatory(){const countries=["CA","CN","HK","IN","UA"];return(isDestinationWorldwide||isUrgent)&&togglerType==="CREDITOR"&&countries.includes(country.val())}this.initAddressField=function(line1,line2){if(!isEmpty(line1)&&!isEmpty(line2))address.val(line1+
line2);else if(!isEmpty(line1))address.val(line1)};this.markMandatoryFields=function(){if(addressType.STRUCTURED===type.val())this.markStructuredMandatoryFields();if(addressType.UNSTRUCTURED===type.val())this.markUnstructuredMandatoryFields()};this.markStructuredMandatoryFields=function(){this.setCountryCodeRequired(true)};this.markUnstructuredMandatoryFields=function(){this.setCountryCodeRequired(false)};this.setCountryCodeRequired=function(isRequired){const element=$("#"+containerSelector+"\\.countryCodeUiField");
isRequired?element.attr("required","true"):element.removeAttr("required")};this.setDetailedAddressCurtainsOpen=function(value){const element=$("#"+containerSelector+"\\.curtain")[0];if(element&&element.open!==value)element.open=value};this.hide=function(){type.val("");$(radio[0]).prop("checked",true);container.hide()};this.hasAnyValues=function(){return!isEmpty(country.val())||this.hasStructuredValues()||this.hasUnStructuredValues()};this.hasStructuredValues=function(){return this.hasStructuredMandatoryValues()||
this.hasStructuredOptionalValues()};this.hasStructuredMandatoryValues=function(){return!isEmpty(town.val())};this.hasStructuredOptionalValues=function(){return!isEmpty(province.val())||!isEmpty(districtName.val())||!isEmpty(townLocationName.val())||!isEmpty(street.val())||!isEmpty(houseNumber.val())||!isEmpty(apartmentNumber.val())||!isEmpty(floor.val())||!isEmpty(houseName.val())||!isEmpty(department.val())||!isEmpty(subDepartment.val())||!isEmpty(postBox.val())||!isEmpty(postCode.val())};this.hasUnStructuredValues=
function(){return!isEmpty(address.val())||!isEmpty(addressLine1.val())||!isEmpty(addressLine2.val())};this.isBankPostAddress=function(){return!isEmpty(togglerType)&&(bankType.CREDITOR_BANK===togglerType||bankType.CORRESPONDENT_BANK===togglerType||bankType.INTERMEDIARY_BANK===togglerType)};this.modifyAddressLineMaxLength=function(maxLen){$("#"+containerSelector+"\\.address").attr("maxlength",maxLen)};this.setIsDestinationWorldwide=function(value){isDestinationWorldwide=value};this.setIsUrgent=function(value){isUrgent=
value};this.isDestinationWorldwide=function(){return isDestinationWorldwide};this.getCountry=function(){return country};this.getAddress=function(){return address};this.getAddressLine1=function(){return addressLine1};this.getAddressLine2=function(){return addressLine2}};const PartyId=function(selector,options){const hideMainIdTypeRow=function(){mainIdTypeRow.find(".input-fields").hide()};const hideExtendedIdTypeRow=function(){if(extendedIdTypeRow)extendedIdTypeRow.hide()};const removeExtendedIdTypeRow=
function(){if(extendedIdTypeRow)extendedIdTypeRow.remove()};const clearInputFieldsContainerValues=function(){if(inputFieldsContainer)inputFieldsContainer.find("input").val("")};const clearInputFields=function(row){row.find(".input-fields").html("")};const targetRowSelector=selector;const entityName=options.entityName;const partyField=options.partyField;const isForeign=options.isForeign||false;const isForeignStandingOrder=options.isForeignStandingOrder||false;if(!options.mainIdTypes)throw new Error("mainIdTypes is not defined");
this.mainIdTypes=options.mainIdTypes;if(!options.extendedIdTypes)throw new Error("extendedIdTypes is not defined");this.extendedIdTypes=options.extendedIdTypes;let mainIdTypeRow;let mainIdTypesDropdown;let extendedIdTypeRow;let extendedIdTypesDropdown;let partyTypeValueInput;let idTypeValueInput;let inputFieldsContainer;this.create=function(){mainIdTypeRow=$(targetRowSelector);mainIdTypesDropdown=this.createMainIdTypeDropdown();partyTypeValueInput=createPartyTypeValueInput();idTypeValueInput=createIdTypeValueInput();
mainIdTypeRow.empty().append(idTypeValueInput).append(partyTypeValueInput).append(createTable(mainIdTypesDropdown));mainIdTypeRow.show();this.onMainIdTypeChange();mainIdTypeRow.data("partyId",this);return this};this.update=function(){const currentIdType=idTypeValueInput.val();const newMainIdTypesDropdown=this.createMainIdTypeDropdown();if(newMainIdTypesDropdown.find("option[value\x3d"+currentIdType+"]").length===0)this.create();else{mainIdTypesDropdown.replaceWith(newMainIdTypesDropdown);mainIdTypesDropdown=
newMainIdTypesDropdown;mainIdTypesDropdown.val(currentIdType)}};this.getMainIdDropdownIdTypes=function(partyType){return this.mainIdTypes[partyType]};this.getExtendedIdDropdownIdTypes=function(partyType){return this.extendedIdTypes[partyType].slice(0)};this.createMainIdTypeDropdown=function(){const dropdown=$('\x3cselect class\x3d"form-field-long"\x3e\x3c/select\x3e');dropdown.append(createOption("NONE","doNotSpecify"));dropdown.append(createOptGroup(PartyTypes.ORGANISATION,this.getMainIdDropdownIdTypes(PartyTypes.ORGANISATION)));
dropdown.append(createOptGroup(PartyTypes.PRIVATE,this.getMainIdDropdownIdTypes(PartyTypes.PRIVATE)));dropdown.change($.proxy(this.onMainIdTypeChange,this));return dropdown};this.onMainIdTypeChange=function(){const idType=mainIdTypesDropdown.val();const partyType=this.getCurrentPartyType();idTypeValueInput.val(idType);partyTypeValueInput.val(partyType?partyType:PartyTypes.NONE);if(idType==="NONE"){hideExtendedIdTypeRow();hideMainIdTypeRow();clearInputFieldsContainerValues()}else{clearInputFields(mainIdTypeRow);
removeExtendedIdTypeRow();if(idType==="EXTENDED"){idTypeValueInput.val("");this.createExtendedIdTypeRow(mainIdTypeRow,partyType)}else{inputFieldsContainer=mainIdTypeRow.find(".input-fields");setInputFields(inputFieldsContainer,partyType,idType,this.getDefaultValues(idType),this.isReadonly(idType))}}};this.getCurrentPartyType=function(){return $(mainIdTypesDropdown).find("option:selected").closest("optgroup").data("partyType")};this.getCurrentIdType=function(){return $(idTypeValueInput).val()};this.getMainIdDropdownValue=
function(){return $(mainIdTypesDropdown).val()};this.getExtendedIdDropdownValue=function(){return $(mainIdTypesDropdown).val()};this.createExtendedIdTypeRow=function(mainIdTypesRow,partyType){extendedIdTypesDropdown=this.createExtendedIdTypeDropdown(partyType);extendedIdTypeRow=$("\x3cdt\x3e"+Swedbank.Labels("labelIdType")+"\x3c/dt\x3e\x3cdd\x3e\x3c/dd\x3e");extendedIdTypeRow.filter("dd").html(createTable(extendedIdTypesDropdown,null));extendedIdTypeRow.insertAfter(mainIdTypesRow)};this.createExtendedIdTypeDropdown=
function(partyType){const dropdown=$('\x3cselect class\x3d"form-field-medium"\x3e\x3c/select\x3e');const idTypes=this.getExtendedIdDropdownIdTypes(partyType);dropdown.append(createOption("","NONE"));$.each(idTypes,function(i,val){let text=val;if(partyType===PartyTypes.ORGANISATION&&text==="EMPLOYER_ID_NUMBER_V4")text=text.slice(0,-3);dropdown.append(createOption(val,text==="NONE"?"doNotSpecify":text))});dropdown.change($.proxy(this.onExtendedIdTypeChange,this));return dropdown};this.onExtendedIdTypeChange=
function(){const idType=extendedIdTypesDropdown.val();const partyType=this.getCurrentPartyType();idTypeValueInput.val(idType);if(idType===""){clearInputFieldsContainerValues();inputFieldsContainer.hide()}else{clearInputFields(extendedIdTypeRow);inputFieldsContainer=extendedIdTypeRow.find(".input-fields");setInputFields(inputFieldsContainer,partyType,idType,this.getDefaultValues(idType),this.isReadonly(idType))}};const createRow=function(titleId,id,clazz,helpId){let rowOptions={required:false};if(helpId)rowOptions=
$.extend(rowOptions,{helpId:helpId});const row=Swedbank.Templates.createRow_old(titleId,rowOptions);if(id)row.attr("id",id);if(clazz)row.attr("class",clazz);row.find("\x3e td").removeClass("bg-light").filter(":nth-child(1)").addClass("party-title").css({"height":"25"});return row};function createOptGroup(partyType,idTypes){const optgroup=$("\x3coptgroup\x3e\x3c/optgroup\x3e");optgroup.data("partyType",partyType);optgroup.attr("label",Swedbank.Labels("partyType_"+partyType));$.each(idTypes,function(i,
val){optgroup.append(createOption(val,val))});optgroup.append(createOption("EXTENDED","EXTENDED"));return optgroup}function createTable(dropdown){const table=$('\x3cdiv class\x3d"party-identification-container"\x3e\x3c/div\x3e');let col=$('\x3cdiv class\x3d"dropdown"\x3e\x3c/div\x3e');col.append(dropdown);table.append(col);col=$('\x3cdiv class\x3d"input-fields"\x3e\x3c/div\x3e');table.append(col);return table}function createPartyTypeValueInput(){const input=$("\x3cinput/\x3e");input.attr("type","hidden");
input.attr("name",entityName+"."+partyField+".partyType");input.attr("class","party-type-input");return input}function createIdTypeValueInput(){const input=$("\x3cinput/\x3e");input.attr("type","hidden");input.attr("name",entityName+"."+partyField+".idType");input.attr("class","id-type-input");return input}this.getDefaultValues=function(idType){return{}};this.isReadonly=function(idType){return false};this.isEmpty=function(){const notSelected=mainIdTypesDropdown.val()==="EXTENDED"&&!extendedIdTypesDropdown.val();
return(idTypeValueInput.val()==="NONE"||idTypeValueInput.val()==="")&&!notSelected};function setInputFields(container,partyType,idType,defaultValues,readonly){const html=inputs[idType].builder.call(this,entityName,partyField,defaultValues,readonly,isForeign,partyType,isForeignStandingOrder);container.html(html);container.show();if(inputs[idType].postRender!==undefined)inputs[idType].postRender.call(inputs,inputs)}this.setValue=function(partyType,idType,values){if(partyType===PartyTypes.NONE||!partyType||
!idType){this.setMainIdTypesDropdownValue("NONE");partyTypeValueInput.val(PartyTypes.NONE);return}const isMainIdType=this.getMainIdDropdownIdTypes(partyType).indexOf(idType)!==-1;let optgroup;$.each(mainIdTypesDropdown.find("optgroup"),function(i,val){if($(this).data("partyType")===partyType)optgroup=$(this)});if(isMainIdType){optgroup.find("[value\x3d"+idType+"]").prop("selected",true);mainIdTypesDropdown.trigger("change");inputs[idType].setter.call(inputFieldsContainer,values)}else{optgroup.find("[value\x3dEXTENDED]").prop("selected",
true);mainIdTypesDropdown.trigger("change");this.setExtendedIdTypesDropdownValue(idType);inputs[idType].setter.call(inputFieldsContainer,values)}$(".ui-datepicker-trigger").remove()};this.setMainIdTypesDropdownValue=function(idType){mainIdTypesDropdown.find("[value\x3d"+idType+"]").prop("selected",true);mainIdTypesDropdown.trigger("change")};this.setExtendedIdTypesDropdownValue=function(idType){extendedIdTypesDropdown.val(idType);extendedIdTypesDropdown.trigger("change")};this.getMainIdTypesRow=function(){return mainIdTypeRow};
this.getExtendedIdTypesRow=function(){return extendedIdTypeRow};this.validate=function(shouldValidateCharacters,callback){const idType=idTypeValueInput.val();if(mainIdTypesDropdown.val()==="EXTENDED"&&idType===""){callback(extendedIdTypesDropdown,"empty");return}if(idType&&inputs[idType].validator)inputs[idType].validator.call(inputFieldsContainer,shouldValidateCharacters,callback,isForeign,isForeignStandingOrder)};this.clear=function(){this.setValue(PartyTypes.NONE,null,{})};return this};const DebtorId=
function(selector,options){const isDefaultTypeSelected=function(){const idTypes=p.getMainIdDropdownIdTypes(partyType,requiredIdSpecialAttribute);return p.getCurrentIdType()===idTypes[0]};const p=new PartyId(selector,options);const partyType=options.partyType;let requiredIdSpecialAttribute=null;const debtorRegistrationCode=options.debtorRegistrationCode;const noneInExtended=options.noneInExtended!==undefined?options.noneInExtended:true;p.getMainIdDropdownIdTypes=function(partyType,requiredIdSpecialAttribute){let dropdownIdTypes=
[];if(requiredIdSpecialAttribute===null&&!noneInExtended)dropdownIdTypes.push("NONE");if(Swedbank.country!=="LT"){dropdownIdTypes=dropdownIdTypes.concat(options.mainIdTypes[partyType]);dropdownIdTypes.push("EXTENDED");return dropdownIdTypes}else{if(partyType===PartyTypes.ORGANISATION&&requiredIdSpecialAttribute!=="PC")dropdownIdTypes.push("COMPANY_ID");else if(partyType===PartyTypes.PRIVATE&&requiredIdSpecialAttribute!=="PC")dropdownIdTypes.push("NATIONAL_ID_NUMBER");if(requiredIdSpecialAttribute!==
"AK")dropdownIdTypes.push("CUSTOMER_ID_NUMBER_V4");if(!requiredIdSpecialAttribute)dropdownIdTypes.push("EXTENDED");return dropdownIdTypes}};p.getExtendedIdDropdownIdTypes=function(partyType){const idTypes=p.extendedIdTypes[partyType].slice(0);if(noneInExtended)idTypes.push("NONE");return idTypes};p.createMainIdTypeDropdown=function(){const dropdown=$("\x3cselect\x3e\x3c/select\x3e");const dropdownIdTypes=p.getMainIdDropdownIdTypes(partyType,requiredIdSpecialAttribute);$.each(dropdownIdTypes,function(i,
val){dropdown.append(createOption(val,val==="NONE"?"doNotSpecify":val))});dropdown.change($.proxy(this.onMainIdTypeChange,p));return dropdown};p.setRequiredIdType=function(specialAttribute){if(requiredIdSpecialAttribute!==specialAttribute){requiredIdSpecialAttribute=specialAttribute;p.update()}};p.getDefaultValues=function(idType){if(idType==="NATIONAL_ID_NUMBER"||idType==="COMPANY_ID")return{"identificationNumber":debtorRegistrationCode};return{}};p.isReadonly=function(idType){return idType==="NATIONAL_ID_NUMBER"||
idType==="COMPANY_ID"};p.getCurrentPartyType=function(){return p.getMainIdDropdownValue()!=="NONE"?partyType:PartyTypes.NONE};p.setValue=function(idType,values){let c;const mainAvailableIdTypes=p.getMainIdDropdownIdTypes(partyType,requiredIdSpecialAttribute);const extendedAvailableIdTypes=p.getExtendedIdDropdownIdTypes(partyType);const isIdTypeAvailable=$.inArray(idType,mainAvailableIdTypes)!==-1||$.inArray(idType,extendedAvailableIdTypes)!==-1;if(!idType||!isIdTypeAvailable){idType=mainAvailableIdTypes[0];
values={}}const isMainIdType=$.inArray(idType,mainAvailableIdTypes)!==-1;if(isMainIdType){p.setMainIdTypesDropdownValue(idType);if(idType==="NATIONAL_ID_NUMBER"||idType==="COMPANY_ID"){c=p.getMainIdTypesRow().find(".input-fields");inputs[idType].setter.call(c,{"identificationNumber":debtorRegistrationCode});c.find("input").prop("readonly",true)}else{c=p.getMainIdTypesRow().find(".input-fields");inputs[idType].setter.call(c,values)}}else{p.setMainIdTypesDropdownValue("EXTENDED");p.setExtendedIdTypesDropdownValue(idType);
c=p.getExtendedIdTypesRow().find(".input-fields");inputs[idType].setter.call(c,values)}$(".ui-datepicker-trigger").remove()};p.isEmpty=function(){const notSelected=p.getMainIdDropdownValue()==="EXTENDED"&&!p.getExtendedIdDropdownValue();return isDefaultTypeSelected()||(p.getCurrentIdType()==="NONE"||p.getCurrentIdType()==="")&&!notSelected};return p};const FormHelper=new function(){const getPartyType=function(data,party){return data[party+".partyType"]};const getIdType=function(data,party){return data[party+
".idType"]};const getValues=function(data,party){return{"idProprietary":data[party+".idProprietary"],"idIssuer":data[party+".idIssuer"],"identificationNumber":data[party+".identificationNumber"],"documentType":data[party+".documentType"],"bicOrBei":data[party+".bicOrBei"],"lei":data[party+".lei"],"birthDate":data[party+".birthDate"],"birthCity":data[party+".birthCity"],"birthProvince":data[party+".birthProvince"],"birthCountry":data[party+".birthCountry"]}};this.fillPartiesId=function(data,parties){$.each(parties,
function(name,party){if(name==="debtor")party.setValue(getIdType(data,name),getValues(data,name));else party.setValue(getPartyType(data,name),getIdType(data,name),getValues(data,name))})};return this};const Validation=new function(){const validateAddressCountry=function(field,fieldName,onErrorCallback){const value=$.trim(field.find("option:selected").val());if(value.length!==0)if(!countryExists(value))onErrorCallback(field,fieldName,"invalid")};const validateAddressField=function(field,fieldName,
maxLength,onErrorCallback,typeOfAllowedCharacters){if(isEmpty(field)||isEmpty(field.val()))return;const value=$.trim(field.val());if(value.length>maxLength){onErrorCallback(field,fieldName,"tooLong");return}const characterValidationResult=validateCharacters(value,typeOfAllowedCharacters);if(characterValidationResult.containsInvalidCharacters())onErrorCallback(field,fieldName,"containsInvalidCharacters",{characterValidationResult:characterValidationResult})};const isFollowingDatePatternStandards=function(value){if(!isEmpty(value)){const pattern=
Swedbank.country==="LT"?DATE_PATTERN_LT:DATE_PATTERN;if(!value.match(pattern))return false}return true};const CharactersType={ID:"ID",LOCAL:"LOCAL"};this.CharactersType=CharactersType;const NAME_MAX_LENGTH=140;const UNSTRUCTURED_REMITTANCE_INFO_MAX_LENGTH=140;const CREDITOR_REFERENCE_MAX_LENGTH=35;const DOMESTIC_CREDITOR_ADDRESS_MAX_LENGTH=140;const POST_ADDRESS_UNSTRUCTURED_ADDRESS_MAX_LENGTH=140;const POST_ADDRESS_COUNTRY_SUB_DIVISION_MAX_LENGTH=35;const POST_ADDRESS_DISTRICT_NAME_MAX_LENGTH=35;
const POST_ADDRESS_TOWN_NAME_MAX_LENGTH=35;const POST_ADDRESS_TOWN_LOCATION_NAME_MAX_LENGTH=35;const POST_ADDRESS_STREET_NAME_MAX_LENGTH=70;const POST_ADDRESS_BUILDING_NUMBER_MAX_LENGTH=16;const POST_ADDRESS_FLOOR_MAX_LENGTH=70;const POST_ADDRESS_BUILDING_NAME_MAX_LENGTH=35;const POST_ADDRESS_ROOM_MAX_LENGTH=70;const POST_ADDRESS_DEPARTMENT_MAX_LENGTH=70;const POST_ADDRESS_SUB_DEPARTMENT_MAX_LENGTH=70;const POST_ADDRESS_POST_BOX_MAX_LENGTH=16;const POST_ADDRESS_POST_CODE_MAX_LENGTH=16;const DATE_PATTERN=
"^(((0[1-9]|[12]\\d|3[01])\\.(0[13578]|1[02])\\.((1[6-9]|[2-9]\\d)\\d{2}))|((0[1-9]|[12]\\d|30)\\.(0[13456789]|1[012])\\.((1[6-9]|[2-9]\\d)\\d{2}))|((0[1-9]|1\\d|2[0-8]).02.((1[6-9]|[2-9]\\d)\\d{2}))|(29\\.02\\.((1[6-9]|[2-9]\\d)(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00))))$";const DATE_PATTERN_LT="^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$";const BIC_OR_BEI_PATTERN="^[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}$";
const ANY_BIC_PATTERN="^([A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9]{2,2}([A-Z0-9]{3,3}){0,1})$";const LEI_PATTERN="^([A-Z0-9]{18,18}[0-9]{2,2})?$";const latinCharacters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789/-?:().,'+ \r\n";const countrySpecificCharacters={"EE":"\u00f5\u00e4\u00f6\u00fc\u0161\u017e\u00d5\u00c4\u00d6\u00dc\u0160\u017d","LV":"\u0101\u010d\u0113\u0123\u012b\u0137\u013c\u0146\u0161\u016b\u017e\u0100\u010c\u0112\u0122\u012a\u0136\u013b\u0145\u0160\u016a\u017d","LT":"\u0105\u010d\u0117\u0119\u012f\u0161\u016b\u0173\u017e\u0104\u010c\u0116\u0118\u012e\u0160\u016a\u0172\u017d"};
const swedbankWhitelistCharacters='_\x26%#|";\x3d!\u20ac\u2013';const getValidCharacters=function(typeOfAllowedCharacters){if(typeOfAllowedCharacters===CharactersType.LOCAL)return latinCharacters+countrySpecificCharacters[Swedbank.country]+swedbankWhitelistCharacters;else return latinCharacters};const CharacterValidationResult=function(invalidCharacters,_allowedCharacters,charactersType){const _invalidCharacters=invalidCharacters;const _charactersType=charactersType;this.containsInvalidCharacters=
function(){return _invalidCharacters.length>0};this.getInvalidCharacters=function(){return _invalidCharacters};this.getCharactersType=function(){return _charactersType};return this};const validateCharacters=function(string,typeOfAllowedCharacters){const validCharacters=getValidCharacters(typeOfAllowedCharacters);if(!string)return new CharacterValidationResult([],validCharacters,typeOfAllowedCharacters);const invalidCharacters=[];for(let i=0;i<string.length;i++){const character=string[i];if(validCharacters.indexOf(character)===
-1)if(invalidCharacters.indexOf(character)===-1)invalidCharacters.push(character)}return new CharacterValidationResult(invalidCharacters,validCharacters,typeOfAllowedCharacters)};const startsOrEndsWithSlash=function(string){if(!string)return false;return string[0]==="/"||string[string.length-1]==="/"};const containsSlashPair=function(string){if(!string)return false;return string.indexOf("//")!==-1};this.validateIdField=function(field,fieldName,required,shouldValidateCharacters,onErrorCallback){const value=
$.trim($(field).val());if(required&&value.length===0)return onErrorCallback(field,"empty",{fieldName:fieldName});if(value.length>ID_MAX_LENGTH)return onErrorCallback(field,"tooLong",{fieldName:fieldName});if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,CharactersType.ID);if(characterValidationResult.containsInvalidCharacters())return onErrorCallback(field,"containsInvalidCharacters",{characterValidationResult:characterValidationResult,fieldName:fieldName});if(startsOrEndsWithSlash(value))return onErrorCallback(field,
"startsOrEndsWithSlash",{fieldName:fieldName});if(containsSlashPair(value))return onErrorCallback(field,"containsSlashPair",{fieldName:fieldName})}};this.validateName=function(field,required,shouldValidateCharacters,onErrorCallback){const name=$.trim($(field).val());if(required&&name.length===0)onErrorCallback(field,"empty");else{if(name.length>NAME_MAX_LENGTH)onErrorCallback(field,"tooLong");if(shouldValidateCharacters){const characterValidationResult=validateCharacters(name,CharactersType.LOCAL);
if(characterValidationResult.containsInvalidCharacters())onErrorCallback(field,"containsInvalidCharacters",{characterValidationResult:characterValidationResult})}}};this.validateRemittanceInfo=function(unstructuredRemittanceInfo,creditorReference,options){const unstructuredRemittanceInfoRequired=options.unstructuredRemittanceInfoRequired;const creditorReferenceRequired=options.creditorReferenceRequired;const shouldValidateCharacters=options.shouldValidateCharacters;const typeOfAllowedCharacters=options.typeOfAllowedCharacters?
options.typeOfAllowedCharacters:CharactersType.LOCAL;const onErrorCallback=options.onErrorCallback;this.validateUnstructuredRemittanceInfo(unstructuredRemittanceInfo,shouldValidateCharacters,unstructuredRemittanceInfoRequired,onErrorCallback,typeOfAllowedCharacters);this.validateCreditorReference(creditorReference,shouldValidateCharacters,creditorReferenceRequired,onErrorCallback,typeOfAllowedCharacters)};this.validateUnstructuredRemittanceInfo=function(unstructuredRemittanceInfo,shouldValidateCharacters,
required,onErrorCallback,typeOfAllowedCharacters){const value=$.trim($(unstructuredRemittanceInfo).val());if(required&&value.length===0)onErrorCallback(unstructuredRemittanceInfo,"emptyUnstructuredRemittanceInfo");else{if(value.length>UNSTRUCTURED_REMITTANCE_INFO_MAX_LENGTH)onErrorCallback(unstructuredRemittanceInfo,"unstructuredRemittanceInfoTooLong");if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,typeOfAllowedCharacters);if(characterValidationResult.containsInvalidCharacters())onErrorCallback(unstructuredRemittanceInfo,
"unstructuredRemittanceInfoContainsInvalidCharacters",{characterValidationResult:characterValidationResult})}}};this.validateCreditorReference=function(creditorReference,shouldValidateCharacters,required,onErrorCallback,typeOfAllowedCharacters){const value=$.trim($(creditorReference).val());if(required&&value.length===0)onErrorCallback(creditorReference,"emptyCreditorReferenceNumber");else{if(value.length>CREDITOR_REFERENCE_MAX_LENGTH){onErrorCallback(creditorReference,"creditorReferenceNumberTooLong");
return}if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,typeOfAllowedCharacters);if(characterValidationResult.containsInvalidCharacters())onErrorCallback(creditorReference,"creditorReferenceNumberContainsInvalidCharacters",{characterValidationResult:characterValidationResult})}}};this.validateIdentificationNumber=function(field,required,shouldValidateCharacters,onErrorCallback){const value=$.trim($(field).val());if(required&&value.length===0)onErrorCallback(field,
"empty");else if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,CharactersType.ID);if(characterValidationResult.containsInvalidCharacters()){onErrorCallback(field,"containsInvalidCharacters",{characterValidationResult:characterValidationResult});return}if(startsOrEndsWithSlash(value)){onErrorCallback(field,"startsOrEndsWithSlash");return}if(containsSlashPair(value))onErrorCallback(field,"containsSlashPair")}};this.validateDate=function(field,required,onErrorCallback){const value=
$.trim(field.val());if(required&&isEmpty(value))onErrorCallback(field,"empty");else if(!isFollowingDatePatternStandards(value))onErrorCallback(field,"doesNotFollowStandard")};this.validateBirthDate=function(field,fieldName,required,onErrorCallback){const value=$.trim(field.val());if(required&&isEmpty(value))return onErrorCallback(field,"empty",{fieldName:fieldName});if(!isFollowingDatePatternStandards(value))return onErrorCallback(field,"doesNotFollowStandard",{fieldName:fieldName});const inputDate=
$.datepicker.parseDate(Swedbank.country==="LT"?"yy-mm-dd":"dd.mm.yy",$.trim(field.val()));const currentDate=new Date;if(inputDate.getTime()>currentDate.getTime())return onErrorCallback(field,"invalid",{fieldName:fieldName})};this.validateBirthCountry=function(dropdown,fieldName,required,onErrorCallback,checkCountry){const value=$.trim(dropdown.find("option:selected").val());if(required&&value.length===0)return onErrorCallback(dropdown,"empty",{fieldName:fieldName});if(!checkCountry(value))return onErrorCallback(dropdown,
"invalid",{fieldName:fieldName})};this.validateBICorBEI=function(field,required,onErrorCallback){const value=$.trim(field.val());if(required&&value.length===0)onErrorCallback(field,"empty");else if(!value.match(BIC_OR_BEI_PATTERN))onErrorCallback(field,"doesNotFollowStandard",{fieldName:"bicOrBei"})};this.validateAnyBIC=function(field,required,onErrorCallback){const value=$.trim(field.val());if(required&&value.length===0)return onErrorCallback(field,"empty");if(!value.match(ANY_BIC_PATTERN))onErrorCallback(field,
"doesNotFollowStandard",{fieldName:"anyBic"})};this.validateLEI=function(field,required,onErrorCallback){const value=$.trim(field.val());if(required&&value.length===0)return onErrorCallback(field,"empty");if(!value.match(LEI_PATTERN))onErrorCallback(field,"doesNotFollowStandard",{fieldName:"lei"})};this.validateAccountNumber=function(field,required,onErrorCallback,validateIBAN){const value=$.trim(field.val());if(required&&value.length===0){onErrorCallback(field,"empty");return}if(validateIBAN)this.validateIBANAccount(field,
onErrorCallback)};this.validateIBANAccount=function(field,onErrorCallback){const accountNumber=$.trim(field.val());if(!AccountNumber.isValid(accountNumber))onErrorCallback(field,"doesNotFollowStandard")};this.validateDomesticPartyAddress=function(field,required,shouldValidateCharacters,onErrorCallback){const value=$.trim(field.val());if(value.length>DOMESTIC_CREDITOR_ADDRESS_MAX_LENGTH){onErrorCallback(field,"tooLong");return}if(shouldValidateCharacters){const characterValidationResult=validateCharacters(value,
CharactersType.LOCAL);if(characterValidationResult.containsInvalidCharacters())onErrorCallback(field,"containsInvalidCharacters",{characterValidationResult:characterValidationResult})}};this.validateDomesticPartyPostAddress=function(postAddress,onErrorCallback){const typeOfAllowedCharacters=CharactersType.LOCAL;validateAddressField(postAddress.address,"addressRow",POST_ADDRESS_UNSTRUCTURED_ADDRESS_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressCountry(postAddress.countryCode,"countryCode",
onErrorCallback);validateAddressField(postAddress.countrySubDivision,"countrySubDivision",POST_ADDRESS_COUNTRY_SUB_DIVISION_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.districtName,"districtName",POST_ADDRESS_DISTRICT_NAME_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.townName,"townName",POST_ADDRESS_TOWN_NAME_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.townLocationName,"townLocationName",
POST_ADDRESS_TOWN_LOCATION_NAME_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.streetName,"streetName",POST_ADDRESS_STREET_NAME_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.buildingNumber,"buildingNumber",POST_ADDRESS_BUILDING_NUMBER_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.room,"room",POST_ADDRESS_ROOM_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.floor,
"floor",POST_ADDRESS_FLOOR_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.buildingName,"buildingName",POST_ADDRESS_BUILDING_NAME_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.department,"department",POST_ADDRESS_DEPARTMENT_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.subDepartment,"subDepartment",POST_ADDRESS_SUB_DEPARTMENT_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.postBox,
"postBox",POST_ADDRESS_POST_BOX_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters);validateAddressField(postAddress.postCode,"postCode",POST_ADDRESS_POST_CODE_MAX_LENGTH,onErrorCallback,typeOfAllowedCharacters)}};const DetailsChooser=function(options){const typeOfRemittanceInfo=options.typeOfRemittanceInfo;const details=options.details;const creditorReference=options.creditorReference;const creditorIssuer=options.creditorIssuer;const row=function(field){return field.closest("dd").add(field.closest("dd").prev("dt"))};
const onTypeChange=function(){const type=$(typeOfRemittanceInfo).filter("input[type\x3dradio]:checked").val();if(type==="details"){creditorReference.val("");row(creditorReference).hide();if(creditorIssuer){creditorIssuer.val("");row(creditorIssuer).hide()}row(details).show()}else if(type==="creditorReference"){row(creditorReference).show();if(creditorIssuer)row(creditorIssuer).show();details.val("");row(details).hide()}};this.setType=function(type){if($(typeOfRemittanceInfo).attr("disabled")!=="disabled"){$(typeOfRemittanceInfo).filter("input[value\x3d"+
type+"]").prop("checked",true);typeOfRemittanceInfo.trigger("change")}};this.setValue=function(detailsVal,creditorReferenceVal){if($(typeOfRemittanceInfo).attr("disabled")!=="disabled"){details.val(detailsVal);creditorReference.val(creditorReferenceVal);if(creditorReferenceVal)this.setType("creditorReference");else this.setType("details")}};this.disableChoosing=function(){$(typeOfRemittanceInfo).prop("disabled",true)};this.enableChoosing=function(){$(typeOfRemittanceInfo).prop("disabled",false)};
$(typeOfRemittanceInfo).on("change",onTypeChange);typeOfRemittanceInfo.trigger("change")};const UICurtainExtraFieldsToggler=function(options){const self=this;this.toggler=document.querySelector(options.containerId);this.toggler.addEventListener("curtain-toggle",event=>{if(this.toggler===event.target&&!event.target.open)self.clearExtraFields()})};UICurtainExtraFieldsToggler.prototype={show:function(){this.toggler.show()},hide:function(){this.clearExtraFields();this.toggler.hide()},showAndOpenIfNeeded:function(){this.show();
if(this.mustShow())this.toggler.open=true}};const ExtraFieldsToggler=function(options){const self=this;this.isVisible=false;this.shouldClearData=options.shouldClearData?options.shouldClearData:false;this.toggler=$(options.containerId);this.toggler.on("curtain-closed",event=>{if(self.shouldClearData){self.clearExtraFields();$(event.target).find(":input[disabled-until-closed]").removeAttr("disabled")}});this.link=this.toggler.find("\x3e a");this.link.on("click",function(){self.isVisible=!self.isVisible})};
ExtraFieldsToggler.prototype={toggle:function(){if(this.isVisible)this.hide();else this.show()},show:function(){if(!this.isVisible)this.link.trigger("click")},showIfNeeded:function(){if(this.mustShow())this.show()},hide:function(){if(this.isVisible)this.link.trigger("click")},completeDisable:function(){this.toggler.hide()},completeEnable:function(){this.toggler.show()},disable:function(){this.link.add(this.link.prev("div.separator")).hide()},enable:function(){this.link.add(this.link.prev("div.separator")).show()},
toggleAfterFilling:function(){if(this.mustShow())this.show();else this.hide()}};const SepaExtraFieldsToggler=function(options){ExtraFieldsToggler.call(this,options);this.endToEndId=options.endToEndId;this.creditorId=options.creditorId;this.ultimateDebtorName=options.ultimateDebtorName;this.ultimateDebtorAddressType=options.ultimateDebtorAddressType;this.ultimateDebtorId=options.ultimateDebtorId;this.ultimateCreditorName=options.ultimateCreditorName;this.ultimateCreditorAddressType=options.ultimateCreditorAddressType;
this.ultimateCreditorId=options.ultimateCreditorId;this.isPrivate=options.isPrivate;this.isDefined=options.isDefined;this.defaultDocumentNumber=options.defaultDocumentNumber;this.ultimateDebtorPostAddressToggler=options.ultimateDebtorPostAddressToggler;this.ultimateCreditorPostAddressToggler=options.ultimateCreditorPostAddressToggler};SepaExtraFieldsToggler.prototype=Object.create(ExtraFieldsToggler.prototype);SepaExtraFieldsToggler.prototype.getRows=function(){return $("dd.extra-row").add($("dd.extra-row").prev("dt"))};
SepaExtraFieldsToggler.prototype.constructor=SepaExtraFieldsToggler;const DomesticSepaExtraFieldsToggler=function(options){SepaExtraFieldsToggler.call(this,options)};DomesticSepaExtraFieldsToggler.prototype=Object.create(SepaExtraFieldsToggler.prototype);DomesticSepaExtraFieldsToggler.prototype.constructor=DomesticSepaExtraFieldsToggler;const DomesticSepaExtraFieldsTogglerLT=function(options){DomesticSepaExtraFieldsToggler.call(this,options);this.valueDate=options.valueDate;this.documentNumber=options.documentNumber;
this.defaultDocumentNumber=options.defaultDocumentNumber};DomesticSepaExtraFieldsTogglerLT.prototype=Object.create(DomesticSepaExtraFieldsToggler.prototype);DomesticSepaExtraFieldsTogglerLT.prototype.mustShow=function(){const getDefaultDate=function(){const defaultDate=new Date;defaultDate.setHours(0,0,0,0);return defaultDate};const identificationNotEmpty=!this.creditorId.isEmpty()||!this.ultimateDebtorId.isEmpty()||!this.ultimateCreditorId.isEmpty();const nameNotEmpty=$.trim(this.ultimateDebtorName.val()).length!==
0||$.trim(this.ultimateCreditorName.val()).length!==0;const ultimateDebtorAddressStructured=this.ultimateDebtorAddressType==="structured";const ultimateCreditorAddressStructured=this.ultimateCreditorAddressType==="structured";const endToEndIdNotEmpty=$.trim(this.endToEndId.val()).length!==0;let dateOrDocumentNumberChanged=false;if(this.isPrivate&&!this.isDefined){const dateSplit=this.valueDate.val().split("-");const currentValueDate=new Date(dateSplit[0],dateSplit[1]-1,dateSplit[2]);const currentDocumentNumber=
this.documentNumber.val();if(currentValueDate.getTime()!==getDefaultDate().getTime()||currentDocumentNumber!==this.defaultDocumentNumber)dateOrDocumentNumberChanged=true}return identificationNotEmpty||nameNotEmpty||ultimateDebtorAddressStructured||ultimateCreditorAddressStructured||dateOrDocumentNumberChanged||this.isPrivate&&endToEndIdNotEmpty};DomesticSepaExtraFieldsTogglerLT.prototype.clearExtraFields=function(){this.creditorId.clear();this.ultimateCreditorId.clear();this.ultimateDebtorId.clear();
if(this.isPrivate)this.endToEndId.val("");this.ultimateDebtorName.val("");this.ultimateCreditorName.val("")};DomesticSepaExtraFieldsTogglerLT.prototype.constructor=DomesticSepaExtraFieldsTogglerLT;const DomesticSepaExtraFieldsTogglerLV=function(options){DomesticSepaExtraFieldsToggler.call(this,options)};DomesticSepaExtraFieldsTogglerLV.prototype=Object.create(DomesticSepaExtraFieldsToggler.prototype);DomesticSepaExtraFieldsTogglerLV.prototype.mustShow=function(){const identificationNotEmpty=!this.ultimateDebtorId.isEmpty()||
!this.ultimateCreditorId.isEmpty();const nameNotEmpty=$.trim(this.ultimateDebtorName.val()).length!==0||$.trim(this.ultimateCreditorName.val()).length!==0;const ultimateDebtorAddressStructured=this.ultimateDebtorAddressType==="structured";const ultimateCreditorAddressStructured=this.ultimateCreditorAddressType==="structured";const endToEndIdNotEmpty=$.trim(this.endToEndId.val()).length!==0;return identificationNotEmpty||nameNotEmpty||ultimateDebtorAddressStructured||ultimateCreditorAddressStructured||
endToEndIdNotEmpty};DomesticSepaExtraFieldsTogglerLV.prototype.clearExtraFields=function(){this.ultimateCreditorId.clear();this.ultimateDebtorId.clear();this.endToEndId.val("");this.ultimateDebtorName.val("");this.ultimateCreditorName.val("")};DomesticSepaExtraFieldsTogglerLV.prototype.constructor=DomesticSepaExtraFieldsTogglerLV;const DomesticSepaExtraFieldsTogglerEE=function(options){DomesticSepaExtraFieldsToggler.call(this,options)};DomesticSepaExtraFieldsTogglerEE.prototype=Object.create(DomesticSepaExtraFieldsToggler.prototype);
DomesticSepaExtraFieldsTogglerEE.prototype.mustShow=function(){const identificationNotEmpty=!this.creditorId.isEmpty()||!this.ultimateDebtorId.isEmpty()||!this.ultimateCreditorId.isEmpty();const nameNotEmpty=$.trim(this.ultimateDebtorName.val()).length!==0||$.trim(this.ultimateCreditorName.val()).length!==0;const ultimateDebtorAddressStructured=this.ultimateDebtorAddressType==="structured";const ultimateCreditorAddressStructured=this.ultimateCreditorAddressType==="structured";const endToEndIdNotEmpty=
$.trim(this.endToEndId.val()).length!==0;return identificationNotEmpty||nameNotEmpty||ultimateDebtorAddressStructured||ultimateCreditorAddressStructured||endToEndIdNotEmpty};DomesticSepaExtraFieldsTogglerEE.prototype.clearExtraFields=function(){this.creditorId.clear();this.ultimateCreditorId.clear();this.ultimateDebtorId.clear();this.endToEndId.val("");this.ultimateDebtorName.val("");this.ultimateCreditorName.val("")};DomesticSepaExtraFieldsTogglerLV.prototype.constructor=DomesticSepaExtraFieldsTogglerLV;
const ForeignSepaExtraFieldsToggler=function(options){SepaExtraFieldsToggler.call(this,options)};ForeignSepaExtraFieldsToggler.prototype=Object.create(SepaExtraFieldsToggler.prototype);ForeignSepaExtraFieldsToggler.prototype.clearExtraFields=function(){this.ultimateCreditorId.clear();this.ultimateDebtorId.clear();if(this.isPrivate)this.endToEndId.val("");this.ultimateDebtorName.val("");this.ultimateCreditorName.val("");this.ultimateDebtorPostAddressToggler.clearExtraFields();this.ultimateDebtorPostAddressToggler.hide();
this.ultimateCreditorPostAddressToggler.clearExtraFields();this.ultimateCreditorPostAddressToggler.hide()};ForeignSepaExtraFieldsToggler.prototype.mustShow=function(){const getDefaultDate=function(){const defaultDate=new Date;defaultDate.setHours(0,0,0,0);return defaultDate};const isUltimateAddressNotEmpty=this.ultimateDebtorPostAddressToggler.hasAnyValues()||this.ultimateCreditorPostAddressToggler.hasAnyValues();const identificationNotEmpty=!this.ultimateDebtorId.isEmpty()||!this.ultimateCreditorId.isEmpty();
const nameNotEmpty=$.trim(this.ultimateDebtorName.val()).length!==0||$.trim(this.ultimateCreditorName.val()).length!==0;let dateOrDocumentNumberChanged=false;const endToEndIdNotEmpty=$.trim(this.endToEndId.val()).length!==0;if(this.isPrivate&&!this.isDefined){const dateSplit=$("#valueDate").val().split(Swedbank.country==="LT"?"-":".");let currentValueDate;if(Swedbank.country==="LT")currentValueDate=new Date(dateSplit[0],dateSplit[1]-1,dateSplit[2]);else currentValueDate=new Date(dateSplit[2],dateSplit[1]-
1,dateSplit[0]);const currentDocumentNumber=$("input[name$\x3dpayment\\.documentNumber]").val();if(currentValueDate.getTime()!==getDefaultDate().getTime()||currentDocumentNumber!==this.defaultDocumentNumber)dateOrDocumentNumberChanged=true}return identificationNotEmpty||nameNotEmpty||dateOrDocumentNumberChanged||this.isPrivate&&endToEndIdNotEmpty||isUltimateAddressNotEmpty};ForeignSepaExtraFieldsToggler.prototype.constructor=ForeignSepaExtraFieldsToggler;const CreditorAddressFieldsToggler=function(options){ExtraFieldsToggler.call(this,
options);this.creditorAddress=options.creditorAddress;this.creditorCountry=options.creditorCountry;this.creditorAddressType=options.creditorAddressType;this.hide()};CreditorAddressFieldsToggler.prototype=Object.create(ExtraFieldsToggler.prototype);CreditorAddressFieldsToggler.prototype.getRows=function(){return $("#creditorAddressRow").add($("#creditorAddressRow").prev("dt")).add("#creditorCountryRow").add($("#creditorCountryRow").prev("dt"))};CreditorAddressFieldsToggler.prototype.mustShow=function(){return typeof this.creditorAddress.val()!==
"undefined"&&this.creditorAddress.val()!==""||typeof this.creditorCountry.val()!=="undefined"&&this.creditorCountry.val()!==""||this.areStructuredFieldsSet()};CreditorAddressFieldsToggler.prototype.setAddressType=function(addressType){this.creditorAddressType=addressType};CreditorAddressFieldsToggler.prototype.areStructuredFieldsSet=function(){return typeof this.creditorAddressType!=="undefined"&&this.creditorAddressType!=="unspecified"};CreditorAddressFieldsToggler.prototype.constructor=CreditorAddressFieldsToggler;
return{PartyTypes:PartyTypes,PartyId:PartyId,DebtorId:DebtorId,IsoPostalAddress:IsoPostalAddress,FormHelper:FormHelper,ForeignSepaExtraFieldsToggler:ForeignSepaExtraFieldsToggler,DomesticSepaExtraFieldsTogglerLT:DomesticSepaExtraFieldsTogglerLT,DomesticSepaExtraFieldsTogglerLV:DomesticSepaExtraFieldsTogglerLV,DomesticSepaExtraFieldsTogglerEE:DomesticSepaExtraFieldsTogglerEE,Validation:Validation,DetailsChooser:DetailsChooser,UICurtainExtraFieldsToggler:UICurtainExtraFieldsToggler,ExtraFieldsToggler:ExtraFieldsToggler,
CreditorAddressFieldsToggler:CreditorAddressFieldsToggler}}})(jQuery);
var divs=["forwardButtons","downloadPdf"];function showElements(){var args=Array.prototype.slice.call(arguments);divs.forEach(function(id){jQuery("#"+id).toggle(args.includes(id))})}function disableExecuteButton(){toggleExecuteButton(false)}function toggleExecuteButton(flag){jQuery("#executeButton").prop("disabled",!flag).toggleClass("disabled",!flag).toggleClass("positive",flag)}
function getSignMethod(){var $signMethod=document.getElementById("signMethod");return{name:$signMethod&&$signMethod.value?$signMethod.value:"sign"}}function addOnClickToElement(element,method){document.querySelector("#"+element).on("click",method)}
function selectConfirmationType(customSubmitFields){document.querySelector("#ddcontrol").show();UI.focusInteractiveElement(document.querySelector("#mainForm"));addOnClickToElement("executeButton",function(){Swedbank.Signing.initSigningProcess(customSubmitFields)})}
function downloadFile(type,targetControlId,customSubmitFields){Swedbank.Signing.generateFileDownloadForm(targetControlId);if(typeof customSubmitFields!=="undefined"&&customSubmitFields.size()>0)copyOrSetFields("mainForm","downloadForm",customSubmitFields);var form=document.downloadForm;form.downloadDate.value=(new Date).getTime();form.downloadFile.value=type;form.setAttribute("target","_blank");if(beforeSubmitHandler(form))submitDownloadForm()}
function submitDownloadForm(){document.downloadForm.submit()}function paymentAmountsMatch(expected,actual){expected=Number(expected.replace(",",".").replace(/\s/g,""));actual=Number(actual.replace(",",".").replace(/\s/g,""));return expected==actual}Swedbank.Signing={actions:{"#signingPositiveActions":[],"#signingNegativeActions":[]},config:null,labels:null};
(function($){var Signing=Swedbank.Signing;Signing.appendSigningFormTo=function($target){var $templateDestination=$target;Signing.createSigningButtonsBar().appendTo($target);Signing.createLoaderIndicator().add(Signing.createExecuteButton()).appendAsListItemTo("#signingPositiveActions");const signingResetCallback=()=>{Signing.resetActions();window.signingAllowed=undefined};const signingInitActionsCallback=()=>{Object.entries(Swedbank.Signing.actions).forEach(([container,array])=>{array.forEach($action=>
$action.prependAsListItemTo(container))})};if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-start",signingResetCallback);SharedComponents.eventBus.addEventListener("spa-navigation-complete",signingInitActionsCallback);signingInitActionsCallback()}else{Swedbank.PageLoad.onEachUnload(signingResetCallback);Swedbank.PageLoad.onEach(signingInitActionsCallback)}};Signing.createLoaderIndicator=function(){return $('\x3cdiv id\x3d"buttonLoaderAnimation" style\x3d"display: none;"\x3e'+
'  \x3cimg id\x3d"widgetLoaderAnimation" src\x3d"/shared/graphics/payments/grayIndicator.gif"/\x3e'+"\x3c/div\x3e")};Signing.createSigningButtonsBar=function(){return $('\x3cdiv id\x3d"forwardButtons" class\x3d"form-button-bar"\x3e'+' \x3cul id\x3d"signingNegativeActions"/\x3e'+' \x3cul id\x3d"signingPositiveActions"/\x3e'+"\x3c/div\x3e")};Signing.createAndRememberAction=function(action,label,pageId,clazz,selector,confirmation){confirmation=typeof confirmation==="undefined"?false:confirmation;var $action=
Swedbank.Templates.action({"class":clazz,"text":label,"type":"button"},action,pageId,confirmation);Signing.actions[selector].unshift($action);return $action};Signing.resetActions=function(){Signing.actions={"#signingPositiveActions":[],"#signingNegativeActions":[]}};Signing.addPositiveAction=function(action,label,pageId,confirmation){confirmation=typeof confirmation==="undefined"?false:confirmation;return Signing.createAndRememberAction(action,label,pageId,"positive","#signingPositiveActions",confirmation)};
Signing.addNeutralAction=function(action,label,pageId,confirmation){confirmation=typeof confirmation==="undefined"?false:confirmation;return Signing.createAndRememberAction(action,label,pageId,"-guiding","#signingPositiveActions",confirmation)};Signing.addNegativeAction=function(action,label,pageId,confirmation){confirmation=typeof confirmation==="undefined"?false:confirmation;label=label||Signing.labels.btnBack;return Signing.createAndRememberAction(action,label,pageId,"-destructive","#signingNegativeActions",
confirmation)};Signing.addNegativeBackAction=function(action,label,pageId,confirmation){confirmation=typeof confirmation==="undefined"?false:confirmation;label=label||Signing.labels.btnBack;return Signing.createAndRememberAction(action,label,pageId,"-destructive back","#signingNegativeActions",confirmation)};Signing.createExecuteButton=function(){var $executeButtonContainer=$('\x3cspan id\x3d"ddcontrol" style\x3d"display:none"/\x3e');Swedbank.Templates.action({"id":"executeButton","class":"positive signing-button-offset",
"text":Signing.config.confirmationMethod.buttonText,"type":"button"}).appendTo($executeButtonContainer);return $executeButtonContainer};Signing.generateFileDownloadForm=function(targetControlId){Swedbank.Forms.generateAdditionalForm("downloadForm",{"downloadFile":true,"downloadDate":""},{"targetControlId":targetControlId})};Signing.initSigningProcess=function(customSubmitFields){var signingWidget=document.querySelector("signing-widget");var forwardButtons=document.querySelector("#forwardButtons");
var executeButton=document.querySelector("#executeButton");SharedComponents.loader.toggleLoaderInButton(executeButton,true,{disabled:true});function handleSigningCanceled(e){SharedComponents.loader.toggleLoaderInButton(executeButton,false,{disabled:false});forwardButtons.show();unsubscribe()}function handleSigningCompleted(e){unsubscribe();linkAction(null,getSignMethod().name,"true")}function handleSigningFailed(e){var error=e.detail;ErrorMessage.add(error);ErrorMessage.scrollTo();SharedComponents.loader.toggleLoaderInButton(executeButton,
false,{disabled:false});forwardButtons.show();unsubscribe()}function unsubscribe(){signingWidget.removeEventListener("signing-completed",handleSigningCompleted);signingWidget.removeEventListener("signing-canceled",handleSigningCanceled);signingWidget.removeEventListener("signing-failed",handleSigningFailed)}signingWidget.addEventListener("signing-completed",handleSigningCompleted);signingWidget.addEventListener("signing-canceled",handleSigningCanceled);signingWidget.addEventListener("signing-failed",
handleSigningFailed);function getCustomParams(fields){var customParams={};fields=fields||[];if(typeof fields=="function")fields=fields();if(Array.isArray(fields)){var formFields=SharedComponents.UIField.prototype.getData.call(document.getElementById("mainForm"));customParams=fields.reduce(function(result,field){if(formFields.hasOwnProperty(field))result[field]=formFields[field];return result},Object.assign({},customParams))}else if(fields)customParams=Object.assign({},customParams,fields);return customParams}
ErrorMessage.clear();var allowedToSign=typeof signingAllowed==="function"?signingAllowed():true;if(!allowedToSign){ErrorMessage.add(Swedbank.Signing.labels.signingNotAllowedError);ErrorMessage.scrollTo();SharedComponents.loader.toggleLoaderInButton(executeButton,false,{disabled:false});forwardButtons.show();unsubscribe()}else{forwardButtons.hide();signingWidget.sign(null,getCustomParams(customSubmitFields))}}})(jQuery);
Swedbank.Time=class{static get now(){const m=moment();let diff=m.valueOf()-Swedbank.Time.serverTime;if(diff<0)diff=0;return moment(m.valueOf()+diff)}static get labels(){return this._labels||{}}static set labels(o){this._labels=o}static showDateSensitiveContent(){const format=moment.defaultFormat+" HH:mm:ss";const sensitiveElements=document.mainForm.querySelectorAll("[data-visible-from], [data-visible-until]");sensitiveElements.forEach(elem=>{const minDate=moment(elem.dataset.visibleFrom||Swedbank.Time.now,
format);const maxDate=moment(elem.dataset.visibleUntil||Swedbank.Time.now,format);const afterMinDate=Swedbank.Time.now.valueOf()>=minDate.valueOf();const beforeMaxDate=Swedbank.Time.now.valueOf()<=maxDate.valueOf();const timeFormat=/^\d{2}:\d{2}(:\d{2})?$/;let timeAllowed=false;if(timeFormat.test(elem.dataset.visibleFrom)&&timeFormat.test(elem.dataset.visibleUntil)){const from=moment();from.hour(elem.dataset.visibleFrom.split(":")[0]);from.minute(elem.dataset.visibleFrom.split(":")[1]);from.second(0);
const until=moment();until.hour(elem.dataset.visibleUntil.split(":")[0]);until.minute(elem.dataset.visibleUntil.split(":")[1]);until.second(0);timeAllowed=Swedbank.Time.now.valueOf()>=from.valueOf()&&Swedbank.Time.now.valueOf()<=until.valueOf()}elem.classList.toggle("-hidden",!(afterMinDate&&beforeMaxDate||timeAllowed))})}};if(!Swedbank.isUiSpaEnabled)Swedbank.PageLoad.onEach(Swedbank.Time.showDateSensitiveContent);
jQuery(function($){window._dl=window._dl||{};Swedbank=Swedbank||{};Swedbank.AdobeTracking={BANNERS_CSS_CLASSES:".wt-link-banner, span.csp-wt-span, .card + span.wt-link-news, ui-card + span.wt-link-news",SCROLL_DISTANCES:{sc35:false,sc70:false},TRACKABLE_ELEMENTS:{click:["a:not(.clickable a):not(ui-product a):not(a.sort)",".clickable","li.wt-link-anchor","img.wt-link-img","h3.curtain-head",'ui-curtain[layout!\x3d"spoiler"] \x3e h3',"span.ico","li.ui-tabs__caption",'ui-curtain[layout\x3d"spoiler"] \x3e h3 div[class$\x3d"content"]',
"ui-product","ui-card a","ui-caption","ui-award","th.sort button","th a.sort","ui-icon:not(ui-curtain ui-icon):not(button ui-icon):not(a ui-icon):not(ui-caption ui-icon)",'button:not([class^\x3d"ui-slider"]):not(.ui-tabs__control):not([class^\x3d"ui-dropdown"]):not(li[class^\x3d"ui-dropdown"] button):not(#nav-search-submit)','input[type\x3d"button"]'],change:["select",":checkbox",":radio",'input:not([class^\x3d"ui-slider"]):not([id^\x3d"searchPhrase"]):not(#nav-search-query)'],slidechange:[".slider-container"],
mousedown:["input.-button"]},trackPageview:function(event,obj){this.track("virtualpageview",_dl);if(_dl.flow&&_dl.flow.event&&_dl.flow.event.customerFeedbackShown)_dl.flow.event.customerFeedbackShown=""},track:function(event,obj){if(typeof s==="undefined")return;var p=JSON.parse(Swedbank.sessionStorage.get("p"));if(p&&p.isRefreshNeeded&&!p.waitForPageload)setTimeout(()=>this.trackTrigger(event,obj),250);else this.trackTrigger(event,obj)},trackTrigger:function(event,obj){this.setIds();this.beforeTracking(event);
if(typeof obj!=="undefined"){if(event=="flownopageview")this.setFlowTimer();s.directCall(event,obj)}else s.directCall(event);this.afterTracking(event)},afterTracking:function(event){triggerSiteSpectEvent();if(_dl&&_dl.partnerOffer&&_dl.partnerOffer.event&&_dl.partnerOffer.event.offerViewed)_dl.partnerOffer.event.offerViewed="";if(_dl&&_dl.page)_dl.page.messages=[]},beforeTracking:function(event){var offersModal=document.querySelector("#offers-modal")||document.querySelector("#dynamic-content-detailed");
if(_dl&&_dl.partnerOffer&&_dl.partnerOffer.event&&!_dl.partnerOffer.event.offerViewed&&offersModal&&!offersModal.isActive())_dl.partnerOffer={};this.setMessageLabels();setSiteSpectEventName(event)},loginErrorHelper:function(msgInEnglish){loginFlow.formErrors=[];loginFlow.formErrors.push(msgInEnglish);this.track("loginError",{account:_dl.account,page:_dl.page,flow:loginFlow})},getAuthMethodHelper:function(method){switch(method){case 0:return"logged-out";case 1:return"id-card";case 2:return"pin-calculator";
case 3:return"password-card";case 5:return"mobile-id";case 9:return"smart-id";default:return"unknown"}},resolveFrontEndLoginMethod:function(){var cok=Swedbank.UICookies.readCookie("hanzaLoginTab")||LoginTypes.SMART_ID;switch(cok){case LoginTypes.CERTIFICATE:return"id-card";case LoginTypes.PIN_CALCULATOR:return"pin-calculator";case LoginTypes.MOBILE_ID:return"mobile-id";case LoginTypes.SMART_ID:return"smart-id";default:return"logged-out"}},getBannerIds:function(){return jQuery(this.BANNERS_CSS_CLASSES).map(function(){return this.id}).toArray()},
bannerActuallySeen:function(){var context=this;jQuery(this.BANNERS_CSS_CLASSES).each(function(){var $elem=jQuery(this);var $loginBar=jQuery("#loginbar");if(jQuery(this).isInViewport()){if($loginBar.css("opacity")==1&&Swedbank.Helpers.getMediumPlatform()!="desktop")return false;if(_dl.marketing.internalCampaignSeen.indexOf($elem.attr("id"))==-1){_dl.marketing.internalCampaignSeen.push($elem.attr("id"));_dl.marketing.internalCampaignViewed.push($elem.attr("id"));context.track("internalCampaignView",
_dl);_dl.marketing.internalCampaignViewed=[]}}})},getURLParamByName:function(name){name=name.replace(/[\[\]]/g,"\\$;");var regex=new RegExp(name+"(\x3d([^\x26#]*)|\x26|#|$)"),result=regex.exec(window.location.href);if(!result||!result[2])return"";return decodeURIComponent(result[2].replace(/\+/g," "))},campaignReferral:function(bannerId){var result=null;if(bannerId!==null&&typeof bannerId!=="undefined")Swedbank.localStorage.set("mcrvalue",bannerId);else{result=Swedbank.localStorage.get("mcrvalue");
Swedbank.localStorage.erase("mcrvalue")}return result},getMobileAppPassedVisitorExists:function(){try{if(this.getURLParamByName("adobe_mc")){Swedbank.sessionStorage.set("amc",1);return true}else if(Swedbank.sessionStorage.get("amc"))return true;else return false}catch(e){}},getMessageLabels:function(selector,messageType){const phoneNumberRegExp=new RegExp("\\+?\\(?\\d*\\)? ?\\(?\\d+\\)?\\d*([\\s./-]?\\d{2,})+","g");let labels=[],str,instr,CUT_LENGTH=120;$(selector).each(function(){if($(this).is(":visible")){let instr=
$(this).text().replace(/\s+/g," ").replace(phoneNumberRegExp,"(removed)");str=instr.substring(0,CUT_LENGTH);if(instr.length>CUT_LENGTH)str=str.substring(0,str.lastIndexOf(" "))+"...[cut]";if(str.length)labels.push(messageType+":"+str)}});return labels},setMessageLabels:function(){if(_dl&&_dl.page){var errorLabels=Swedbank.AdobeTracking.getMessageLabels('.errorMsg, ui-message[type\x3d"error"]',"error");var warningLabels=Swedbank.AdobeTracking.getMessageLabels('.warningMsg, ui-message[type\x3d"warning"]',
"warning");var infoLabels=Swedbank.AdobeTracking.getMessageLabels('.infoMsg, ui-message[type\x3d"info"]',"info");var urgentLabels=Swedbank.AdobeTracking.getMessageLabels('.urgentMsg, ui-message[type\x3d"urgent"]',"urgent");var validationLabels=Swedbank.AdobeTracking.getMessageLabels('.validation-message, ui-hint[type\x3d"error"]',"validation");_dl.page.messages=errorLabels.concat(warningLabels,infoLabels,urgentLabels,validationLabels)}},sendScrollTracking:function(percentage){this.track("scroll",
{account:_dl.account,page:_dl.page,flow:_dl.flow,scroll:{scrollPercentage:percentage,event:{scroll:"1"}}})},collectCustomerFeedback:function(){var feedbackContainers=$("#mainForm ui-feedback");if(feedbackContainers&&_dl&&_dl.flow)if(feedbackContainers.length==1){var container=$(feedbackContainers[0]);Swedbank.AdobeTracking.sendFeedbackShown(container,true)}else $.each(feedbackContainers,function(i){Swedbank.AdobeTracking.sendFeedbackShown($(feedbackContainers[i]),false)})},sendFeedbackShown:function($container,
includeWithPageview){if(!(_dl&&_dl.flow))return;var dataObj=includeWithPageview?_dl:JSON.parse(JSON.stringify(_dl));dataObj.flow.customerFeedbackCategory=_dl.flow.category?"flow:"+_dl.flow.category:"content";dataObj.flow.customerFeedbackName=$container.attr("id")||"";if(includeWithPageview){if(!dataObj.flow.event)dataObj.flow.event={};dataObj.flow.event.customerFeedbackShown="1"}else{dataObj.flow.event={customerFeedbackShown:"1"};Swedbank.AdobeTracking.track("customerFeedbackShown",dataObj)}$container.on("confirm",
function(e){sendFeedbackConfirmed(dataObj,e.detail.rating,e.detail.text)})},getDocumentHeight:function(){var D=document;return Math.max(D.body.scrollHeight,D.documentElement.scrollHeight,D.body.offsetHeight,D.documentElement.offsetHeight,D.body.clientHeight,D.documentElement.clientHeight)},distanceScrolled:function(){var D=document;var docheight=this.getDocumentHeight();var winheight=window.innerHeight||(D.documentElement||D.body).clientHeight;var scrollTop=window.pageYOffset||(D.documentElement||
D.body.parentNode||D.body).scrollTop;var trackLength=docheight-winheight;var pctScrolled=Math.floor(scrollTop/trackLength*100);if(!this.SCROLL_DISTANCES.sc35&&pctScrolled>=35&&pctScrolled<70){this.SCROLL_DISTANCES.sc35=true;this.sendScrollTracking("35")}if(!this.SCROLL_DISTANCES.sc70&&pctScrolled>=70){this.SCROLL_DISTANCES.sc70=true;this.sendScrollTracking("70")}},getTimeInSeconds:function(){return Math.ceil((new Date).getTime()/1E3)},setNewFlowTimerData:function(){var now=this.getTimeInSeconds();
var timerData={flowName:_dl.flow.name,startStep:_dl.flow.step,startTime:now,currentStep:_dl.flow.step,currentStepTime:now};_dl.flow.timer={duration:timerData.startStep+":0",startStep:timerData.startStep,stepDuration:0};Swedbank.sessionStorage.set("flowTimer",JSON.stringify(timerData))},setFlowTimer:function(){var timer=Swedbank.sessionStorage.get("flowTimer");if(timer&&typeof _dl.flow.name=="undefined")Swedbank.sessionStorage.erase("flowTimer");else if(!timer&&_dl.flow&&_dl.flow.name)this.setNewFlowTimerData();
else if(timer&&_dl.flow&&_dl.flow.name){var timerData=JSON.parse(timer);var now=this.getTimeInSeconds();if(timerData.flowName==_dl.flow.name&&timerData.currentStep!=_dl.flow.step){_dl.flow.timer={duration:timerData.startStep+":"+(now-timerData.startTime),startStep:timerData.startStep,stepDuration:now-timerData.currentStepTime};if(_dl.flow.step!="complete"){timerData.currentStep=_dl.flow.step;timerData.currentStepTime=now;Swedbank.sessionStorage.set("flowTimer",JSON.stringify(timerData))}else Swedbank.sessionStorage.erase("flowTimer")}else if(timerData.flowName!=
_dl.flow.name)this.setNewFlowTimerData()}},chatFlowTracking:function(chatName,eventDescription){chatFlow={name:chatName,category:"web",type:"support",behaviourType:"selfservice",step:"",stepDescription:"",supportReason:"",supportStatus:"",supportId:"",productArray:[],formErrors:[]};switch(eventDescription){case "proactiveChatShow":chatFlow.step="step0";chatFlow.stepDescription="proactive-chat-show";chatFlow.event={formView:"1"};Swedbank.AdobeTrackingHelpers.setProactiveChat();break;case "virtualAssistantStart":chatFlow.step=
"start";chatFlow.supportReason="support-green";chatFlow.supportStatus="contacted-VA";chatFlow.event={behaviourStart:"1",formView:"1"};break;case "chatStart":chatFlow.step="start";chatFlow.stepDescription=Swedbank.AdobeTrackingHelpers.chatType+"-start";chatFlow.supportStatus="support-green";chatFlow.supportReason="contacted-agent";chatFlow.supportId=Swedbank.AdobeTrackingHelpers.chatId;chatFlow.event={behaviourStart:"1",formView:"1"};break;case "chatComplete":chatFlow.step="complete";chatFlow.stepDescription=
Swedbank.AdobeTrackingHelpers.chatType+"-complete";chatFlow.supportStatus="support-green";chatFlow.supportReason="contacted-agent";chatFlow.supportId=Swedbank.AdobeTrackingHelpers.chatId;chatFlow.event={behaviourComplete:"1",behaviourGreen:"1",formView:"1"};break;case "liveChatUserComplete":chatFlow.supportStatus="support-green";chatFlow.supportReason="contacted-agent-ended-by-user";chatFlow.stepDescription=Swedbank.AdobeTrackingHelpers.chatType+"-complete";chatFlow.step="complete";chatFlow.event=
{behaviourGreen:"1",behaviourComplete:"1",formView:"1"};break;default:}Swedbank.AdobeTracking.track("flownopageview",{account:_dl.account,page:_dl.page,flow:chatFlow})},getTrackableElements:function(eventType){if(!this.TRACKABLE_ELEMENTS.hasOwnProperty(eventType))return"";return this.TRACKABLE_ELEMENTS[eventType].join(",")},getStringLargeNumbersMasked:function(str,limit,doReplace){if(doReplace&&typeof doReplace==="function"&&!doReplace())return str;var l=limit||5;var regex=new RegExp("[0-9]{"+l+",}",
"g");return str.replace(regex,function($0){return Array($0.length+1).join("n")})},getEnglishPageTitle:function(){return $("body").data("wtPageTitle")},getVersionNum:function(){return 216+Math.floor(Swedbank.Time.now.diff(moment([2022,6,28]),"days")/14)},setIdRefreshNeeded:function(){var p=JSON.parse(Swedbank.sessionStorage.get("p"));if(p&&Swedbank.isAuthenticated){p.isRefreshNeeded=true;p.waitForPageload=true;Swedbank.sessionStorage.set("p",JSON.stringify(p))}},setIds:function(){var p=JSON.parse(Swedbank.sessionStorage.get("p"));
if(p&&Swedbank.isAuthenticated){_dl.page.userId=p.userId;if(!p.isRefreshNeeded&&Swedbank.Navigation.isBusiness())_dl.page.businessId=p.businessId}else if(p&&!Swedbank.isAuthenticated)Swedbank.sessionStorage.erase("p")},setPartnerOfferData:function($element){if($element&&_dl)_dl.partnerOffer={offer:$element.attr("data-preview")||$element.find("article p").text()||"",offerCategory:$element.attr("data-category")||"",partnerName:$element.attr("data-offer")||$element.find("article h3").text()||"",group:$element.attr("data-group")||
"",event:{offerViewed:"1"}}},setClickTrackingListeners:function(){$.each(this.TRACKABLE_ELEMENTS,function(eventName,selectors){$(document).untilUnload(eventName,selectors.join(","),trackingHandler)});$(document).untilUnload("change","ui-slider",SharedComponents.helpers.debounce(trackingHandler,500))},whenAnalyticsScriptsReady:function(callback){const container=document.getElementById("analytics-container");const loadScript=script=>{return new Promise((resolve,reject)=>{script.type="text/javascript";
script.src=script.dataset.src;script.async=false;script.onload=resolve;script.onerror=reject;script.parentElement.replaceChild(script,script)})};const analyticsExternalScripts=document.querySelectorAll(".aa-external-script");const analyticsInternalScripts=document.querySelectorAll(".aa-internal-script");const analyticsPromises=[].map.call(analyticsExternalScripts,loadScript);Promise.all(analyticsPromises).then(()=>{[].forEach.call(analyticsInternalScripts,script=>{const ns=document.createElement("script");
ns.innerHTML=script.innerText;ns.async=false;container.appendChild(ns);script.remove()});if(typeof callback==="function")callback();SharedComponents.eventBus.dispatchCustomEvent("analytics-script-loaded")}).catch(err=>Swedbank.error(err))},trackEverything:function(){if(Swedbank.isAuthInProgress)return;Swedbank.AdobeTracking.collectCustomerFeedback();Swedbank.AdobeTracking.trackPageview();Swedbank.AdobeTracking.bannerActuallySeen();Swedbank.AdobeTracking.setClickTrackingListeners()},isTrackingEnabled:function(){try{return Swedbank.UICookies.getConsentElem().getSelectedCategories().ANALYTICAL===
SharedComponents.UICookieConsent.CATEGORY_ALLOWED}catch(e){return false}}};Swedbank.AdobeTrackingHelpers={chatId:"",setChatId:function(chatId){this.chatId=chatId},chatType:"live-chat",setProactiveChat:function(){this.chatType="proactive-chat"},startChat:function(){Swedbank.AdobeTracking.chatFlowTracking("live-chat","chatStart")},endChat:function(){Swedbank.AdobeTracking.chatFlowTracking("live-chat","chatComplete");this.reset()},reset:function(){this.chatType="live-chat";this.chatId=""}};function sendFeedbackConfirmed(dataObj,
rating,comment){if(dataObj&&dataObj.flow){var sendObj=JSON.parse(JSON.stringify(dataObj));sendObj.flow.customerFeedbackRating=rating;sendObj.flow.event={customerFeedbackRatingTotal:rating,customerFeedbackComplete:"1",customerFeedbackWritten:comment&&comment.split("").length>9?"1":""};Swedbank.AdobeTracking.track("customerFeedbackComplete",sendObj)}}jQuery.fn.isInViewport=function(){var elementTop=$(this).offset().top;var elementBottom=elementTop+$(this).outerHeight();var viewportTop=$(window).scrollTop();
var viewportBottom=viewportTop+$(window).height();return elementBottom>viewportTop&&elementTop<viewportBottom};function elementTriggersFlowAction($element){href=$element.attr("href");id=$element.attr("id");if($element.is("#startChat, #chat-launcher \x3e div \x3e a")&&href.includes("startChat()")){Swedbank.AdobeTracking.chatFlowTracking("live-chat","liveChatStart");setTimeout(function(){if($("#chat-exceptions-container").is(":visible"))Swedbank.AdobeTracking.chatFlowTracking("live-chat","liveChatCannotStart");
else if($("#chatAgentsBusySection").is(":visible"))Swedbank.AdobeTracking.chatFlowTracking("live-chat","liveChatBusy")},3E3)}}function getTargetType($element,event){var href=$element.attr("href")||"";var onClick=$element.attr("onclick")||"";var targetType="";var eventTargetTypes={click:{"file":["pdf","doc","docx","xls","xlsx","ppt","pptx"].includes(href.split(".").pop()),"news":$element.is("a.wt-link-news"),"modal":href.includes("Swedbank.Modals.")||href.includes("Swedbank.UIModals.")||href.includes("openCalculatorModal"),
"va-bubble":$element.is("button")&&$element.children("ui-icon").attr("glyph")==="dialog","va-chatbox":$element.is("button")&&$element.parents("#virtual-assistant-chat").length>0,"button":$element.is(":button, .button")&&!$element.is("th.sort button, ui-video button, .-iconed, ui-navtoggle button"),"icon-button":$element.is("button.-iconed"),"curtain-header":$element.is('h3[class*\x3d"curtain-head"], ui-curtain[layout!\x3d"spoiler"] \x3e h3'),"tab":$element.is(".tabsList a, .ui-tabs__caption"),"image":$element.is("a")&&
function(){return $element[0].children.length>0&&[].every.call($element[0].children,el=>el.localName==="img")},"related-product":$element.parents(".related-products-list, ui-products").length>0,"spoiler-toggle":$element.is('ui-curtain[layout\x3d"spoiler"] \x3e h3 div[class$\x3d"content"]'),"tooltip":"","virtual-assistance-link":$element.is("a")&&$element.parents("#virtual-assistant-chat").length>0,"top-bar-item":$element.parents("header").length>0&&!$element.parents(".user-assist-panel").length>0,
"nav-primary-item":$element.is('ui-navitem[type^\x3d"primary-"] \x3e a'),"nav-secondary-item":$element.is('ui-navitem[type\x3d"secondary-item"] \x3e a'),"nav-third-item":$element.is('ui-navitem[type\x3d"auxiliary-item"] \x3e a'),"form-step-icon":$element.is("ol.form-steps a"),"video-link":$element.is('a[class^\x3d"ui-video"], button[class^\x3d"ui-video"]'),"column":$element.is(".columns .clickable, ui-card a"),"info-box":$element.is("ui-infobox a"),"icon":$element.is('span[class^\x3d"ico -"], ui-icon'),
"chip":$element.is('ui-caption[layout\x3d"chip"]'),"sorter":$element.is("th.sort button, th a.sort"),"clickable-card":$element.is("ui-award")},change:{"checkbox":$element.is(":checkbox"),"radio":$element.is(":radio"),"tab":$element.is("select")&&$element.parents("ui-tabs").length>0,"dropdown":$element.is("select"),"switch":$element.is(".toggle"),"slider":$element.is("ui-slider"),"inputfield":$element.is('input[type\x3d"text"], input[type\x3d"number"], input[type\x3d"tel"], input[type\x3d"email"]')&&
!$element.is("[disabled]")},slidechange:{"slider":$element.is(".slider-container")},mousedown:{"chatbox-controller":$element.is("input.-button")&&$element.parent().is('li[class*\x3d"header-control"]')}};$.each(eventTargetTypes[event.type],function(type,expression){if($.isFunction(expression)&&expression()===true||expression===true){targetType=type;return false}});if(targetType===""&&href!==""&&event.type!=="mousedown")targetType="link";return targetType}function getBannerIdentifier(event){var element=
$(event.target);var identifier="";var campaignVisuals={"campaignVisual":element.closest('.campaign-visual, ui-offer[layout\x3d"introduction"]').next("span.wt-link-banner").attr("id"),"offerVisualOne":element.closest('.offer, ui-offer[layout\x3d"personal"]').next("span.wt-link-banner, span.csp-wt-span").attr("id"),"salesRibbonOne":element.closest("ui-salesribbon").siblings("span.wt-link-banner").attr("id"),"salesRibbonTwo":element.closest("ui-salesribbon").find("span.wt-link-banner").attr("id"),"multipleOffers":element.closest(".offer-container, ui-product").next("span.wt-link-banner, span.csp-wt-span").attr("id"),
"frontPageColumnsLT":element.closest('section.frame div.clickable, ui-column, div[class^\x3d"col"]').children(":first").next("span.wt-link-banner").attr("id"),"frontPageColumnsEELV":element.closest("section.frame div.clickable, ui-column").children(":first").next("span.wt-link-news").attr("id"),"relatedProductsOffer":element.closest(".calculator").next("span.wt-link-banner").attr("id"),"calculatorOffer":element.closest(".calculator, ui-calculator").next("span.wt-link-banner").attr("id"),"cardsOffer":element.closest("ui-offer \x3e section.frame").next("span.wt-link-banner").attr("id"),
"offerVisualTwo":element.closest(".offer").find("span.wt-link-banner").attr("id"),"offerWithScript":element.closest("ui-offer").next("script").next("span.wt-link-banner").attr("id"),"webinarRegistration":element.closest("ui-webinar-registration").next("span.wt-link-banner").attr("id"),"infoboxoffer":element.closest("ui-infobox").next("span.wt-link-banner").attr("id"),"offersInViews":element.closest("ui-views").nextAll("span:first").attr("id")};$.each(campaignVisuals,function(type,expression){if(expression){identifier=
expression;return false}});return identifier}function getTargetGroup(event,targetType){var element=$(event.target);var groupType="";elementGroupTypes={"modal":element.parents("div.modal-window, ui-modal").length>0,"tabs":element.parents("ui-tabs, .tabsList").length>0,"tab-content":element.parents("ui-tabs ui-views ui-tab, .tabsContent \x3e div").length>0,"curtain-list":element.parents("ul.curtains, ui-curtains").length>0,"curtain":element.parents('.curtain, ui-curtain[layout!\x3d"spoiler"]').length>
0,"calculator":element.closest(".calculator, ui-calculator").length>0,"form":element.parents(".form-content").length>0||targetType==="form-step-icon","bell-notifications":element.parents("ul.notification-rows").length>0||element.siblings("ui-modal ul.notification-rows").length>0,"comparison-table":element.parents('.comparison-table, ui-table[plugins*\x3d"comparison"]').length>0,"regular-table":element.parents(".default-table ,ui-table").length>0,"introduction-visual":element.parents('.campaign-visual, section#intro-section, ui-offer[layout\x3d"introduction"]').length>
0,"offer-visual":element.parents('.offer, ui-offer[layout\x3d"personal"]').length>0,"bell-notification":element.parents("ul.notification-rows \x3e li").length>0,"virtual-assistant":element.parents("va-chatbox").length>0,"top-bar":element.parents("header").length>0&&element.parents(".nav-columns.-secondary").length==0,"top-menu":targetType==="nav-primary-item"||targetType==="nav-secondary-item"||targetType==="nav-third-item","login-container":element.parents("form#loginForm").length>0,"related-products":targetType==
"related-product","footer":element.parents("footer").length>0,"ribbon":element.parents("ui-salesribbon").length>0,"info-message":element.parents('.infoMsg, ui-message[type\x3d"info"]').length>0,"warning-message":element.parents('.warningMsg, ui-message[type\x3d"warning"]').length>0,"success-message":element.parents('.successMsg, ui-message[type\x3d"success"]').length>0,"urgent-message":element.parents('.urgentMsg, ui-message[type\x3d"urgent"]').length>0,"regular-chat":element.parents("div#chat").length>
0,"top-bar-hidden-content":element.parents(".user-assist-panel").length>0,"clickable-cards":element.parents("ui-awards").length>0,"columns":element.parents("ui-columns, .columns").length>0,"cookieprompt":element.is("ui-cookieprompt button"),"customer-feedback":element.parents("ui-feedback").length>0};var topLevelGroups=["modal","form","curtain-list","curtain","columns","tabs","tab-content","bell-notifications"];$.each(elementGroupTypes,function(type,expression){if($.isFunction(expression)&&expression()===
true||expression===true){groupType=groupType===""?type:groupType+":"+type;if(!topLevelGroups.includes(type))return false}});var isCampaign=getBannerIdentifier(event);return isCampaign?groupType+(groupType!=""?":":"")+"internal-campaign":groupType}function getTargetGroupName(groupType,$element){var groupName="";var lastGroup=groupType.split(":").pop();switch(lastGroup){case "tab-content":case "bell-notification":groupName=$element.closest("li").attr("data-content-type")||"";break;case "curtain-list":var curtainList=
$element.closest("ul.curtains, ui-curtains");var curtainSection=curtainList.parent().is("section.frame")?curtainList.parent():"";if(curtainSection!=="")groupName=curtainSection.attr("data-wt-label")||curtainSection.attr("id")||"";break;case "video-link":clickName=wtAttribute||elementId||$element.parents("ui-video").attr("src")||"";clickStatus=href;break;case "modal":var modalContainer=$element.closest(".modal-window, ui-modal");var modalType=modalContainer.attr("type")||"";var modalName=modalContainer.attr("data-wt-label")||
modalContainer.attr("id")||"";if(modalType)groupName=modalType+":"+(modalName?modalName:"no-label");else groupName=modalName?modalName:"";break;case "clickable-cards":groupName=$element.closest("ui-awards").attr("id")||"";break;case "customer-feedback":groupName=$element.closest("ui-feedback").attr("id")||"";break;case "calculator":calculator=$element.closest(".calculator, ui-calculator");groupName=calculator.attr("data-wt-label")||calculator.attr("id")||"";break;case "top-menu":var topMenuRef=$element.closest("ui-navlist").attr("ref")||
"";var topMenuLabel=$element.closest("ui-navlist-menu").attr("label-id")||"";if(topMenuRef&&topMenuLabel){var regex=/\W+/g;groupName=topMenuRef.replace(regex,"-")+":"+topMenuLabel.replace(regex,"-").toLowerCase()}break;default:groupName=""}return groupName}function getSendAfterNextPageLoad($element){var href=$element.attr("href")||"";var onclick=$element.attr("onclick")||"";var sendAfterNextPageLoad=href.startsWith("/")&&!href.endsWith(".pdf")&&!href.endsWith(".xls")||href.includes("navigateTo")||
href.includes("linkAction")||onclick.includes("navigateTo")||onclick.includes("linkAction")||href.includes("submitSliderLoanApp")||onclick.includes("switchLanguage");if(Swedbank.Navigation.pageId.endsWith("eservices"))sendAfterNextPageLoad=false;return sendAfterNextPageLoad}function getUIAwardDataProperties($element){var usedAttributes=[];if($element.attr("data-offer"))usedAttributes=["data-preview","data-offer","data-group","price","data-category"];else if($element.attr("data-city"))usedAttributes=
["data-offer-link","data-company","data-city","price"];var resultAttributeValues=[];for(i=0;i<usedAttributes.length;i++){var attribute=$element.attr(usedAttributes[i])||"";resultAttributeValues.push(attribute.replace(/\s+/g,"-").toLowerCase())}return resultAttributeValues.join(":")}function trackingHandler(event){if(typeof event.isTrigger!=="undefined"&&event.type!=="slidechange")return;var evtTarget=$(event.target);var $element=$(this);var tagName=$(this).prop("tagName").toLowerCase();var isWebComponent=
!!customElements.get(tagName)||$element.is('[class^\x3d"ui-"]');var elementId=$element.attr("id");var wtAttribute=$element.attr("data-wt-label");var href=$element.attr("href")||"";var onclick=$element.attr("onclick")||"";var targetType=getTargetType($element,event);var groupType=getTargetGroup(event,targetType);var groupNameValue=getTargetGroupName(groupType.split(":").pop(),evtTarget);var clickName="";var clickType="";var clickStatus="";var adobeLinkType="o";var adobeHrefProperty;var sendAfterNextPageLoad=
getSendAfterNextPageLoad($element);var externalHref=!sendAfterNextPageLoad&&!href.includes("javascript:")?href:"";if(!sendAfterNextPageLoad)adobeHrefProperty="true";switch(targetType){case "button":clickName=wtAttribute||elementId||(!sendAfterNextPageLoad?href:"")||onclick;if(clickName===""&&$element.is(".-back, .-next"))clickName=$element.is(".-back")?"back":"next";else if(clickName.includes("navigateTo"))clickName="direct-to:"+clickName.split("'")[1];else if(clickName.includes("Hansa.loginbar.forcedLogin"))clickName=
"forced-login-toggle";else if($element.is(".ui-wizard__link"))clickName="wizard-navigation-step-"+$element.attr("data-step-id");else if(clickName===onclick)clickName="";elementTriggersFlowAction(evtTarget);break;case "icon-button":clickName=$element.find("ui-icon").attr("glyph")||"";break;case "tab":var tabsContainer=$element.closest("ul.ui-tabs__captions, ul.tabsList, ui-field.ui-tabs__dropdown");var tabsList=$element.closest("ul.ui-tabs__captions, ul.tabsList").find("li");var tabParent=isWebComponent?
$element:$element.parents("li");var tabIndex=$element.is("select")?$element.prop("selectedIndex"):tabsList.index(tabParent);var uiViewTabs=tabsContainer.next().is("ui-views")?tabsContainer.next().children("ui-tab"):[];var uiViewTab=$(uiViewTabs[tabIndex]);clickName=tabParent.find("a").attr("data-wt-label")||uiViewTab.attr("data-wt-label")||tabParent.attr("id")||tabsContainer.siblings("ui-views").find("ui-tab").not(".-hidden").attr("data-wt-label")||"";clickStatus="tab"+(tabIndex+1);break;case "slider":var sliderElement=
$element.find(".slider-component, input.ui-slider__control");clickName=wtAttribute||elementId||sliderElement.attr("id")||sliderElement.attr("data-wt-label")||"";break;case "inputfield":clickName=wtAttribute||elementId;break;case "dropdown":clickName=wtAttribute||elementId||$element.attr("name")||"";clickStatus=$element.val();break;case "switch":case "checkbox":case "radio":clickName=elementId||$element.attr("name");clickStatus=$element.is(":checked")?"checked":"unchecked";break;case "related-product":clickName=
$element.find(":header[data-wt-label]").attr("data-wt-label")||wtAttribute||$element.attr("page-id")||evtTarget.attr("href")||"";break;case "file":clickName=href.split("/").last();clickStatus="filetype:"+clickName.split(".").last();adobeLinkType="d";break;case "nav-primary-item":case "nav-secondary-item":case "nav-third-item":var glyph=$element.is('ui-navitem[type$\x3d"-icon"] \x3e a')?$element.find("ui-icon").attr("glyph"):"";clickName=wtAttribute||$element.parent().attr("data-wt-label")||elementId||
glyph||"";clickName.toLowerCase();break;case "form-step-icon":var formSteps=evtTarget.closest("ol.form-steps").find("li");var stepIndex=formSteps.index(evtTarget.parent())+1;clickName="agreementStep"+stepIndex;break;case "curtain-header":case "spoiler-toggle":var curtainList=$element.closest('ul[class*\x3d"curtains"], ui-curtains');var curtains=curtainList.find('h3[class*\x3d"curtain-head"], ui-curtain h3');var curtain=$element.parent();clickName=wtAttribute||elementId||curtain.attr("data-wt-label")||
curtain.attr("id")||"";clickStatus=targetType+"-"+(curtains.index($element)+1);if($element.parent().hasClass("-open")||typeof $element.closest("ui-curtain").attr("open")!=="undefined")clickStatus=clickStatus+"-open";else clickStatus=clickStatus+"-close";if(targetType==="spoiler-toggle"&&!clickName)clickName="read-more/less";break;case "modal":clickName=wtAttribute||elementId||href.split(/[()]/g)[1].split(",")[0].replace(/[']/g,"")||"";break;case "news":case "column":case "info-box":var columnList=
$element.closest(".columns, ui-columns").children('[class^\x3d"col-"], .clickable, ui-column');var thisColumn=$element.closest('[class^\x3d"col-"], .clickable, ui-column');clickName=thisColumn.closest("a").attr("href")||href||"";if(clickName.includes("navigateTo"))clickName="direct-to:"+clickName.split("'")[1];else if(!href.startsWith("#news\x3d"))clickName="direct-to:"+clickName;clickStatus="column-"+(columnList.index(thisColumn)+1);break;case "top-bar-item":var parentElement=$element.parent();if(parentElement.is("ui-navtoggle")){clickName=
parentElement.attr("data-wt-label")||parentElement.attr("for")||"";clickStatus=parentElement.hasClass("-off")?"close":"open"}else clickName=wtAttribute||elementId||"";break;case "va-bubble":clickName="va-bubble";break;case "va-chatbox":if($element.attr("data-event")==="va-exit-chat")Swedbank.AdobeTracking.chatFlowTracking("virtual-assistant","virtualChatUserComplete");if($element.attr("data-event")==="va-minimize-chat"){clickName="minimizeToggle";clickStatus="minimize"}break;case "virtual-assistance-link":var onClickAttr=
$element.attr("onClick")||"";clickStatus=$element.data("vtz-link-type")||"type-undefined";if(onClickAttr.includes("openVirtualAssistantLink"))clickName=wtAttribute||"link-to:"+$element.attr("onClick").split("'")[1];else if(onClickAttr.includes("virtualAssistant.startChat")){clickName="start-chat:"+onClickAttr.split("'")[1];Swedbank.AdobeTracking.chatFlowTracking("live-chat","liveChatStart")}else clickName=wtAttribute||elementId||"va-unknown-textlink";break;case "icon":clickName=elementId||wtAttribute||
$element.attr("glyph")||$element.attr("class").split(" ")[1].replace("-","")||"";break;case "image":clickName=wtAttribute||elementId||externalHref;break;case "chip":icon=$element.find("ui-icon").attr("glyph")||"";iconLabel=icon?"chip-"+icon+":":"";elementLabel=wtAttribute||elementId||"";clickName=iconLabel||elementLabel?iconLabel+(elementLabel?elementLabel:"no-label"):"";break;case "sorter":clickName=elementId||wtAttribute||$element.parent().attr("data-sort-column")||"";clickStatus=$element.parent().attr("aria-sort")||
"";break;case "clickable-card":clickName=$element.attr("data-offer")||$element.attr("data-offer-link")||$element.attr("award-id")||wtAttribute||elementId||"";Swedbank.AdobeTracking.setPartnerOfferData($element);clickStatus=getUIAwardDataProperties($element);break;default:if(targetType!=="")clickName=wtAttribute||elementId||externalHref}if(groupType.indexOf("comparison-table")!==-1)clickStatus=getComparisonTableElementRowColLocation(evtTarget);if(groupType.split(":").includes("bell-notification")||
$element.closest("#nc-notification-list").length>0){var referenceId=$element.closest("li").attr("data-reference-id");clickStatus=referenceId?"referenceId:"+referenceId:""}clickName=getElementNameBasedOnSurroundingElements($element,targetType,groupType,clickName);if(targetType!==""&&typeof clickName!=="undefined"){if(groupType.indexOf("internal-campaign")!=-1)setBannerIdentifierInDatalayer(event,$element.is(".ui-offer__close-button"));if(clickName!=="")setClickValuesInDatalayer(clickName,clickStatus,
targetType,groupType,groupNameValue,adobeHrefProperty,adobeLinkType);triggerClick()}}function setBannerIdentifierInDatalayer(event,isBannerCloseClick){var bannerIdentifier=getBannerIdentifier(event);Swedbank.AdobeTracking.campaignReferral(bannerIdentifier);_dl.marketing.internalCampaignClick=bannerIdentifier;_dl.marketing.internalCampaignActivity=isBannerCloseClick?"internalCampaignClose":"internalCampaignClick"}function setClickValuesInDatalayer(clickName,clickStatus,targetType,groupType,groupName,
hrefPropValue,linkTypeValue){var statusCondition=function(){return!clickStatus.startsWith("referenceId:")};if(_dl)_dl.click={name:Swedbank.AdobeTracking.getStringLargeNumbersMasked(clickName),type:targetType,group:groupType,groupName:Swedbank.AdobeTracking.getStringLargeNumbersMasked(groupName),status:Swedbank.AdobeTracking.getStringLargeNumbersMasked(clickStatus,8,statusCondition),hrefProperty:hrefPropValue,linkType:linkTypeValue,event:{click:"1"}}}function triggerClick(){if(_dl&&_dl.marketing&&
_dl.marketing.internalCampaignClick&&_dl.marketing.internalCampaignActivity){Swedbank.AdobeTracking.track(_dl.marketing.internalCampaignActivity,_dl);_dl.marketing.internalCampaignClick="";_dl.marketing.internalCampaignActivity="";_dl.click={}}else if(_dl&&_dl.click&&Object.keys(_dl.click).length!=0){Swedbank.Eventbucket&&Swedbank.Eventbucket.trackClick(_dl.click.type,_dl.click.group,_dl.click.name,"",{status:_dl.click.status});Swedbank.AdobeTracking.track("click",_dl);_dl.click={}}}function triggerSiteSpectEvent(){if(_dl&&
_dl.sitespectEvent){if(window.SS&&SS.Require){var eventName=_dl.sitespectEvent;SS.Require(function(){SS.EventTrack.rp(eventName)})}_dl.sitespectEvent=""}}function setSiteSpectEventName(adobeEvent){var trackedEvents=["virtualpageview","flownopageview","click","internalCampaignClick"];if(!_dl||!_dl.flow||!_dl.flow.name||!_dl.flow.step||!_dl.flow.type||!trackedEvents.includes(adobeEvent))return;var trackedGroups=["introduction-visual","offer-visual","calculator","regular-table","comparison-table","tabs"];
var trackedTargets=["button","slider","tab"];var trackedSteps=["step0","start","step2","step3","step4","step5","complete"];var trackedFlowTypes=["application","lead","service","transfer","transaction","support"];var name=_dl.flow.name;var step=_dl.flow.step.split(":").shift();var type=_dl.flow.type;var eventType=adobeEvent.indexOf("view")!=-1?"pageview":"click";var c=_dl.click;if(trackedFlowTypes.includes(type)&&trackedSteps.includes(step))if(eventType==="pageview")_dl.sitespectEvent=name+":"+step+
":"+eventType;else if(eventType==="click"&&c&&c.group&&step==="step0"){var group=c.group.replace(":internal-campaign","").split(":").pop();if(c.type&&trackedTargets.includes(c.type)&&trackedGroups.includes(group)){group=group.indexOf("table")!==-1?"table":group;var target=c.type;if(c.type==="button")target="cta";else if(c.type==="tab")target=c.status;_dl.sitespectEvent=name+":"+step+":"+eventType+":"+group+"-"+target}}}function getComparisonTableElementRowColLocation($element){var rowList=$element.closest('table.comparison-table, ui-table[plugins*\x3d"comparison"]').find("tr:visible");
var colList=$element.closest("tr").find("th:visible, td:visible");var parentRow=$element.closest("tr");var parentCol=$element.closest("td");var rowIndex=rowList.index(parentRow)+1;var colIndex=colList.index(parentCol)+1;return"row:"+rowIndex+"-"+"col:"+colIndex}function getElementNameBasedOnSurroundingElements($element,targetType,groupType,label){var clickName="";var lastGroup=groupType.split(":").pop();var suitableGroups=["introduction-visual","internal-campaign","comparison-table","calculator",
"ribbon","bell-notification","modal","curtain","offer-visual","regular-table","form"];if(suitableGroups.includes(lastGroup)||groupType.indexOf("-message")!==-1){if(targetType==="button")if($element.is(".-guiding"))clickName=lastGroup+"-cta-guiding";else if($element.is(".-back, .-next, .-destructive"))clickName=lastGroup+"-ctrl";else clickName=lastGroup+"-cta";else if(targetType==="link")clickName=lastGroup+"-textlink";else if(targetType==="related-product")clickName="related-product-offer-textlink";
else if(targetType==="modal")clickName=lastGroup+"-modal-link";else if(targetType==="curtain-header"){var glyph=$element.find("div \x3e ui-icon").attr("glyph")||"";clickName=lastGroup+(glyph?"-with-icon-"+glyph:"")}else if(targetType==="slider")clickName=lastGroup+"-slider";else clickName=lastGroup+"-"+targetType;return clickName+":"+(label===""?"no-label":label)}else if(label===""&&$element.closest("#nc-notification-list li").length>0)return"view";else return label}});
jQuery(function($){Swedbank=Swedbank||{};Swedbank.AdobeTracking=Swedbank.AdobeTracking||{};Swedbank.AdobeTracking.Products={PRODUCT_NAMES:{loans:[{category:"loans",name:"small-loan",id:"1000215"},{category:"loans",name:"car-leasing",id:"1000024"},{category:"loans",name:"car-loan",id:"1002832"},{category:"loans",name:"home-loan",id:"1000231"},{category:"loans",name:"home-small-loan",id:"1002843"},{category:"loans",name:"home-equity-loan",id:"1000223"},{category:"loans",name:"credit-line",id:"1002831"},
{category:"loans",name:"co-borrower",id:"1309"},{category:"loans",name:"student-loan",id:"1000258"},{category:"loans",name:"student-loan-with-state-guarantee",id:"1002637"},{category:"loans",name:"apartment-building-loan",id:"1000033"},{category:"loans",name:"commercial-vehicles-leasing",id:"1000025"},{category:"loans",name:"industrial-equipment-leasing",id:"1002826"},{category:"loans",name:"wheeled-equipment-leasing",id:"1002825"}],cards:[{category:"debit-cards",cardTypeId:{EE:[2,6],LV:[41,901],
LT:[901]},name:"debit-card-plus",id:"1002698"},{category:"debit-cards",cardTypeId:{EE:[5,14],LV:[46,47,902],LT:[110,815,902]},name:"private-banking-card",id:"1000138"},{category:"debit-cards",cardTypeId:{EE:[10,15],LV:[903],LT:[]},name:"isic-mastercard-student-debit-card",id:"1002790"},{category:"debit-cards",cardTypeId:{EE:[],LV:[48,904],LT:[]},name:"isic-mastercard-scholar-debit-card",id:"1002865"},{category:"debit-cards",cardTypeId:{EE:[],LV:[359,380],LT:[]},name:"my-design-card",id:"1000193"},
{category:"debit-cards",cardTypeId:{EE:[],LV:[],LT:[111]},name:"debit-maestro-basic-card",id:"1002927"},{category:"debit-cards",cardTypeId:{EE:[9],LV:[],LT:[108]},name:"debit-maestro-senior-card",id:"1002738"},{category:"debit-cards",cardTypeId:{EE:[],LV:[42],LT:[107,903]},name:"debit-mastercard-youth-card",id:"1002741"},{category:"debit-cards",cardTypeId:{EE:[16,105],LV:[4,23],LT:[1,4,6,105]},name:"debit-maestro-card",id:"1000260"},{category:"debit-cards",cardTypeId:{EE:[1],LV:[5],LT:[11]},name:"atm-card",
id:"1000254"},{category:"debit-cards",cardTypeId:{EE:[7],LV:[],LT:[55]},name:"debit-maestro-youth-card",id:"1002564"},{category:"debit-cards",cardTypeId:{EE:[],LV:[3],LT:[59]},name:"debit-visa-electron-junior-card",id:"1002568"},{category:"debit-cards",cardTypeId:{EE:[4,8],LV:[908],LT:[908]},name:"mastercard-business-debit-card",id:"1000155"},{category:"credit-cards",cardTypeId:{EE:[53,59],LV:[811,907],LT:[818,907]},name:"revolving-gold-mc",id:"1000240"},{category:"credit-cards",cardTypeId:{EE:[57,
58],LV:[813,906],LT:[817,906]},name:"revolving-standard-mc",id:"1000239"},{category:"credit-cards",cardTypeId:{EE:[54,56],LV:[722,905],LT:[820,905]},name:"fixed-payment",id:"1000238"},{category:"credit-cards",cardTypeId:{EE:[96],LV:[913],LT:[816,914]},name:"mastercard-platinum-revolving-card",id:"1000156"},{category:"credit-cards",cardTypeId:{EE:[],LV:[],LT:[817,906]},name:"revolving-silver-mc",id:"1000219"},{category:"credit-cards",cardTypeId:{EE:[37],LV:[],LT:[37]},name:"visa-gold-charge-card",
id:"1000124"},{category:"credit-cards",cardTypeId:{EE:[38],LV:[],LT:[38]},name:"visa-platinum-charge-card",id:"1000125"},{category:"credit-cards",cardTypeId:{EE:[92,93],LV:[805,910],LT:[802,823,910]},name:"revolving-platinum-visa",id:"1000218"},{category:"credit-cards",cardTypeId:{EE:[815],LV:[],LT:[815]},name:"visa-vip-private-banking-revolving-card",id:"1002829"},{category:"credit-cards",cardTypeId:{EE:[806],LV:[302,801],LT:[203,213,806,913]},name:"revolving-gold-visa",id:"1000213"},{category:"credit-cards",
cardTypeId:{EE:[62,65],LV:[],LT:[65,201,212,801]},name:"visa-standard-revolving-card",id:"1000173"},{category:"credit-cards",cardTypeId:{EE:[39,91,95],LV:[815,912],LT:[39,217,811,822,912]},name:"revolving-visa-business-gold-card",id:"1002859"},{category:"credit-cards",cardTypeId:{EE:[90,94],LV:[814,911],LT:[814,821,911]},name:"revolving-visa-business-card",id:"1002860"},{category:"credit-cards",cardTypeId:{EE:[97],LV:[914],LT:[915]},name:"revolving-mastercard-business-card",id:"1000217"},{category:"credit-cards",
cardTypeId:{EE:[98],LV:[915],LT:[916]},name:"revolving-mastercard-business-gold-card",id:"1002838"},{category:"credit-cards",cardTypeId:{EE:[],LV:[],LT:[9]},name:"priority-pass",id:""}],insurances:[{category:"insurances",name:"credit-life",id:"1000234"},{category:"insurances",name:"life-insurance-plus",id:"1002587"},{category:"insurances",name:"traffic-insurance",id:"1000375"},{category:"insurances",name:"casco-insurance",id:"1000374"},{category:"insurances",name:"home-insurance",id:"1000371"},{category:"insurances",
name:"home-cover",id:"1002614"},{category:"insurances",name:"klm-home",id:"1002612"},{category:"insurances",name:"compulsory-home",id:"1002613"},{category:"insurances",name:"apartment-building-insurance",id:"1000370"},{category:"insurances",name:"credit-cover",id:"1000369"},{category:"insurances",name:"loan-payment-protection",id:"1002783"},{category:"insurances",name:"travel-insurance",id:"1002647"},{category:"insurances",name:"life-insurance",id:"1002592"}],savings:[{category:"deposits",name:"current-account",
id:"1000241"},{category:"deposits",name:"term-deposit",id:"1000176"},{category:"deposits",name:"savings-deposit",id:"1000192"},{category:"deposits",name:"easy-saver",id:"1002985"},{category:"deposits",name:"overnight-deposit",id:"1000002"},{category:"savings-child",name:"college-fund",id:"1002665"},{category:"savings-p2p",name:"pension-index-p2p",id:"1003021",isin:"EE3600001814"},{category:"savings-p2p",name:"pension-conservative",id:"1000157"},{category:"savings-p2p",name:"pension-k1960-1969",id:"1000158"},
{category:"savings-p2p",name:"pension-k1970-1979",id:"1000159"},{category:"savings-p2p",name:"pension-k1980-1989",id:"1002636"},{category:"savings-p2p",name:"pension-k1990-1999",id:"1002903"},{category:"savings-p2p",name:"pension-k2000-2009",id:"1003037",isin:"EE3600001848"},{category:"savings-p2p",name:"non-swedbank-p2p-fund ",id:"1002640"},{category:"savings-p2p",name:"pension-investment-account",id:"1003017"},{category:"savings-p2p",name:"pension-2003-2009",id:"1003008"},{category:"savings-p2p",
name:"pension-1996-2002",id:"1002954"},{category:"savings-p2p",name:"pension-1989-1995",id:"1002955"},{category:"savings-p2p",name:"pension-1982-1988",id:"1002956"},{category:"savings-p2p",name:"pension-1975-1981",id:"1002957"},{category:"savings-p2p",name:"pension-1968-1974",id:"1002958"},{category:"savings-p2p",name:"pension-1961-1967",id:"1002959"},{category:"savings-p2p",name:"pension-1954-1960",id:"1002971"},{category:"savings-p2p",name:"pension-preservation-fund",id:"1002972"},{category:"savings-p2p",
name:"hansapensdin",id:"1000114"},{category:"savings-p2p",name:"hansapenssta",id:"1000115"},{category:"savings-p2p",name:"investment-p2p-1970",id:"1002974"},{category:"savings-p2p",name:"investment-p2p-1980",id:"1002975"},{category:"savings-p2p",name:"investment-p2p-1990",id:"1002966"},{category:"savings-p2p",name:"dynamic-index",id:"1003023"},{category:"savings-p3p",name:"pension-v30",id:"1000353",isin:"EE3600007530",fundId:"SWEDPENSV1",internalId:"ee-p3p-1"},{category:"savings-p3p",name:"pension-v60",
id:"1000354",isin:"EE3600071031",fundId:"SWEDPENSV2",internalId:"ee-p3p-2"},{category:"savings-p3p",name:"pension-v100",id:"1000355",isin:"EE3600071049",fundId:"SWEDPENSV3",internalId:"ee-p3p-3"},{category:"savings-p3p",name:"pension-v100-index",id:"1002970",isin:"EE3600109484",fundId:"SWEDPENSV100",internalId:"ee-p3p-4"},{category:"savings-p3p",name:"pension-v60-index",id:"1003012",isin:"EE3600001731",fundId:"SWEDPV60I",internalId:"ee-p3p-6"},{category:"savings-p3p",name:"pension-v30-index",id:"1003013",
isin:"EE3600001749",fundId:"SWEDPV30I",internalId:"ee-p3p-7"},{category:"savings-p3p",name:"pension-index-p3p",id:"1003022",isin:"EE3600001822",fundId:"SWED3INDEX",internalId:"ee-p3p-index"},{category:"savings-p3p",name:"pension-hansapensstab+",id:"1000359",fundId:"SWPENSSTAB+"},{category:"savings-p3p",name:"pension-hansapensdinus+",id:"1000358",fundId:"HANSAPENSDINUS+"},{category:"savings-p3p",name:"pension-hansapensdineu+",id:"1000357",fundId:"HANSAPENSDINEU+"},{category:"savings-p3p",name:"pension-hansapensdin100",
id:"1000356",fundId:"SWPENSDIN100"},{category:"savings-p3p",name:"pension-hansapensdinindex",id:"1003024"},{category:"savings-p3p",name:"non-swedbank-p3p",id:"1002873",internalId:"ee-p3p-5"},{category:"savings-p3p",name:"pension-60-plus",id:"1003031"},{category:"savings-p3p",name:"pension-18-plus",id:"1003028"},{category:"savings-p3p",name:"pension-18-plus-limited",id:"1003028"},{category:"savings-p3p",name:"pension-50-plus",id:"1003029"},{category:"savings-p3p",name:"pension-50-plus-limited",id:"1003029"},
{category:"savings-p3p",name:"pension-60-plus",id:"1003030"},{category:"savings-p3p",name:"pension-60-plus-limited",id:"1003030"},{category:"savings-investments",name:"sw-robur-real-estate",id:"1002986",fundId:"SWRFASTC"},{category:"savings-investments",name:"sw-robur-technology",id:"1002987",fundId:"SWRTECC"},{category:"savings-investments",name:"sw-robur-medical",id:"1002988",fundId:"SWRMEDC"},{category:"savings-investments",name:"sw-robur-global-high-dividend",id:"1002989",fundId:"SWRGHDC"},{category:"savings-investments",
name:"sw-robur-access-europe",id:"1002990",fundId:"SWRAEUC"},{category:"savings-investments",name:"sw-robur-access-global",id:"1002991",fundId:"SWRAGLC"},{category:"savings-investments",name:"sw-robur-access-sweden",id:"1002992",fundId:"SWRASVC"},{category:"savings-investments",name:"sw-robur-access-usa",id:"1002993",fundId:"SWBRUSAC"},{category:"savings-investments",name:"sw-robur-access-japan",id:"1002994",fundId:"SWBACJPC"},{category:"savings-investments",name:"sw-robur-access-asia",id:"1002995",
fundId:"SWBACASC"},{category:"savings-investments",name:"sw-robur-global-impact",id:"1002996",fundId:"SWRGLIMPC"},{category:"savings-investments",name:"sw-robur-access-edge-emerging-markets",id:"1002997",fundId:"SWERAEEC"},{category:"savings-investments",name:"sw-robur-corp-bond-eu",id:"1003018",fundId:"SWRCBEUC"},{category:"savings-investments",name:"sw-robur-corp-bond-eu-high-yield",id:"1003019",fundId:"SWRCBEHYC"},{category:"savings-investments",name:"sw-robur-corp-bond-nordic",id:"1003020",fundId:"SWEDCB1"},
{category:"savings-investments",name:"swedbank-fund-funds-30",id:"1002797",fundId:"HANSAFF30E"},{category:"savings-investments",name:"swedbank-fund-funds-60",id:"1002798",fundId:"HANSAFF60E"},{category:"savings-investments",name:"swedbank-fund-funds-100",id:"1002799",fundId:"HANSAFF100E"},{category:"savings-investments",name:"savings-funds-10",id:"1002998",fundId:"SWBSF10"},{category:"savings-investments",name:"savings-funds-30",id:"1002999",fundId:"SWBSF30"},{category:"savings-investments",name:"savings-funds-60",
id:"1003000",fundId:"SWBSF60"},{category:"savings-investments",name:"savings-funds-100",id:"1003001",fundId:"SWBSF100"},{category:"savings-investments",name:"swedbank-eastern-europe-eq-fund",id:"1002803",fundId:"HIEAFEUR"},{category:"savings-investments",name:"swedbank-russian-eq-fund",id:"1002800",fundId:"HVAFEUR"},{category:"savings-investments",name:"non-swedbank-fund",id:"1002870",fundId:"non-swedbank-fund"},{category:"savings-investments",name:"investment-account",id:"1004012",fundId:"investment-account"},
{category:"savings-investments",name:"securities-account",id:"1000247"},{category:"savings-investments",name:"saving-notes",id:"1002863"}],serviceplans:[{category:"service-plans",name:"payments-plan",id:"1002979"},{category:"service-plans",name:"service-plan-convenient",id:"1002904"},{category:"service-plans",name:"service-plan-convenient-plus",id:"1002905"},{category:"service-plans",name:"service-plan-convenient-gold",id:"1002906"},{category:"service-plans",name:"service-plan-convenient-plus-gold",
id:"1002907"},{category:"service-plans",name:"service-plan-convenient-youth-one-two-three",id:"1002908"},{category:"service-plans",name:"service-plan-convenient-youth-four",id:"1002909"},{category:"service-plans",name:"service-plan-convenient-senior",id:"1002910"},{category:"service-plans",name:"service-plan-convenient-plus-private-banking",id:"1002911"},{category:"service-plans",name:"service-plan-convenient-private-banking",id:"1002912"},{category:"service-plans",name:"service-plan-convenient-salary-receivers",
id:"1002913"},{category:"service-plans",name:"service-plan-convenient-plus-salary-receivers",id:"1002914"},{category:"service-plans",name:"service-plan-convenient-sw-employees",id:"1002915"},{category:"service-plans",name:"service-plan-basic",id:"1002916"},{category:"service-plans",name:"service-plan-business-10",id:"1002922"},{category:"service-plans",name:"service-plan-business-20",id:"1002923"},{category:"service-plans",name:"service-plan-business-50",id:"1002924"},{category:"service-plans",name:"service-plan-business-100",
id:"1002925"},{category:"service-plans",name:"service-plan-business-plus",id:"1002926"},{category:"service-plans",name:"service-plan-farmer-bundle",id:"1002933"},{category:"service-plans",name:"service-plan",id:"1002921"}],ecommerce:[{category:"POS",name:"e-commerce-payments-platform",id:"1003006"},{category:"e-channels",name:"bank-link-services",id:"1000005"},{category:"POS",name:"online-card-acquiring",id:"1002552"},{category:"POS",name:"swedbank-payment-portal",id:"1002840"},{category:"POS",name:"e-commerce-payment-cards-servicing",
id:"1002552"}]},getProductParameterByKeyValue:function(parameter,key,value,optionalCategory){if(this.PRODUCT_NAMES.hasOwnProperty(optionalCategory)){var name=getListProductParameterByKeyValue(parameter,key,value,optionalCategory);if(name!=="")return name}else{var categories=Object.keys(this.PRODUCT_NAMES);for(var i=0;i<categories.length;i++){var name=getListProductParameterByKeyValue(parameter,key,value,categories[i]);if(name!=="")return name}}return"unknown"},getProductNameByKeyValue:function(key,
value,optionalCategory){return this.getProductParameterByKeyValue("name",key,value,optionalCategory)},getProductIdByKeyValue:function(key,value,optionalCategory){return this.getProductParameterByKeyValue("id",key,value,optionalCategory)},getProductCategoryByKeyValue:function(key,value,optionalCategory){return this.getProductParameterByKeyValue("category",key,value,optionalCategory)}};var getListProductParameterByKeyValue=function(parameter,key,value,category){var products=Swedbank.AdobeTracking.Products.PRODUCT_NAMES[category];
for(var i=0;i<products.length;i++){var product=products[i];if(product.hasOwnProperty(key))if(Array.isArray(product[key][Swedbank.country]))for(var j=0;j<product[key][Swedbank.country].length;j++){if(product[key][Swedbank.country][j]==value)return product[parameter]||parameter+"-not-set"}else if(product[key]==value)return product[parameter]||parameter+"-not-set"}return""}});
Swedbank.News=class{load(id){Swedbank.UIModals.loadContent({pageId:"controls",securityId:document.mainForm.securityId.value,encoding:document.mainForm.encoding.value,language:document.mainForm.language.value,controlId:"news.NewsDetailsControl",layout:"details",newsId:id});return this}extractNewsIdFromURL(url){return encodeURI(url.split("#news\x3d")[1])}static loadCallback(){if(!document.mainForm)return;const news=new Swedbank.News;let params={pageId:"controls",securityId:document.mainForm.securityId.value,
encoding:document.mainForm.encoding.value,language:document.mainForm.language.value,controlId:"news.NewsDetailsControl",layout:"details"};[].forEach.call(document.querySelectorAll('a[href^\x3d"#news\x3d"]'),function(atag){atag.addEventListener("click",function(event){event.preventDefault();const newsId=news.extractNewsIdFromURL(atag.getAttribute("href"));params=Object.assign({},params,{newsId:newsId});Swedbank.UIModals.loadContent(params)})});const newsId=news.extractNewsIdFromURL(window.location.href);
if(newsId&&newsId!=="undefined")news.load(newsId)}};if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",Swedbank.News.loadCallback);UI.whenDOMReady(Swedbank.News.loadCallback)}else Swedbank.PageLoad.onEach(Swedbank.News.loadCallback);
Swedbank.Blinker=function(){var notificationInterval=null;var queue=[];var originalTitle=null;const HIGH_PRIORITY=0;const LOW_PRIORITY=10;var removeBlink=function(blinkId){queue=queue.filter(function(blink){return blink.id!==blinkId})};var addBlink=function(blink){var index;for(index=0;index<queue.length;index++)if(blink.priority<=queue[index].priority)break;queue.splice(index,0,blink)};var doBlinkCallback=function(blink){if(blink.onBlink)try{blink.onBlink()}catch(err){console.error("Blinker: Exception calling onBlinkCallback:",
err.message)}};var blinker={start:function(blinkId,title,hasHighPriority,onBlinkCallback){clearInterval(notificationInterval);removeBlink(blinkId);addBlink({id:blinkId,title:title,onBlink:onBlinkCallback,priority:hasHighPriority?HIGH_PRIORITY:LOW_PRIORITY});if(originalTitle===null)originalTitle=document.title;var showOriginalTitle=false;notificationInterval=setInterval(function(){document.title=showOriginalTitle?originalTitle:queue[0].title;showOriginalTitle=!showOriginalTitle;queue.forEach(doBlinkCallback)},
1E3)},stop:function(blinkId){removeBlink(blinkId);if(queue.length===0){clearInterval(notificationInterval);if(originalTitle!==null){document.title=originalTitle;originalTitle=null}}}};return blinker}();
(function($){var CURTAIN_LIST_SELECTOR=".curtains";var CURTAIN_SELECTOR_DEPRECATED=CURTAIN_LIST_SELECTOR+" .-expandable .curtain-head";var CURTAIN_SELECTOR=CURTAIN_LIST_SELECTOR+" .curtain-head";$(function(){$(".curtain.-open").trigger("curtain-open",{slideDuration:500});var hash=Swedbank.Navigation.getHash();if(hash)$('#content a[data-curtain-id\x3d"'+hash+'"]').trigger("curtain-open");$(".curContentDefault:has(.validation-message, .errorMsg)").prev().find("a").trigger("curtain-open");$(".curtain-body:has(.validation-message, .errorMsg)").prev().find("a").trigger("curtain-open")});
Swedbank.PageLoad.onFirst(function($){$("body").setDefault("click",CURTAIN_SELECTOR_DEPRECATED,function(e){var href=$(e.target).prop("tagName")=="A"?$(e.target).attr("href"):$(e.target).parents("a").attr("href");if(href!="#");if($(e.target).prop("tagName")=="A"&&!$(e.target).hasClass("curtain-expander"))return;var $curtain=$(this);var targetEvent=$curtain.parent().is(".-open")?"curtain-close":"curtain-open";$curtain.trigger(targetEvent)}).on("curtain-open curtain-close",CURTAIN_SELECTOR_DEPRECATED,
function(event,options){var $anchor=$(this);var $header=$anchor;var $content=$header.next();var $curtainsList=$anchor.closest(CURTAIN_LIST_SELECTOR);var attr=$anchor.attr("data-show-accounts");options=$.extend({slideDuration:300,autoClose:false},$curtainsList.data(),options);if(event.type=="curtain-open"){$content.slideDown(options.slideDuration,function(){$anchor.trigger("curtain-opened");if(Swedbank.Helpers.getMediumPlatform()==="mobile")if($anchor.parents(".modal-body").length===0)$anchor.scrollTo("slow",
-60);else{var top=0;$anchor.parentsUntil(".modal-body").each(function(){if($(this).css("position")==="relative"||this.classList.contains("curtain"))top+=this.offsetTop});SharedComponents.helpers.scrollTo($anchor.parents(".modal-body")[0],5)}});$anchor.find("a").attr("aria-expanded",true);$content.attr("aria-hidden",null);$content.focus()}else{$content.slideUp(options.slideDuration,function(){$anchor.trigger("curtain-closed")});$anchor.find("a").removeAttr("aria-expanded");$content.attr("aria-hidden",
true)}if(attr==="true")window.showAccounts(false);if(attr==="false")window.showAccounts(true);if(event.type==="curtain-open"&&options.autoClose){var $target=typeof options.autoCloseContainer!=="undefined"?$("#"+options.autoCloseContainer):$curtainsList;$target.find(".curtain.-expandable.-open .curtain-head").not(this).trigger("curtain-close")}$anchor.parent().toggleClass("-open",event.type==="curtain-open");$anchor.parent()[0].dispatchEvent(new CustomEvent(event.type==="curtain-open"?"open":"close"))}).on("curtain-disable curtain-enable",
CURTAIN_SELECTOR,function(event,options){var $content=$(this).next();if(event.type=="curtain-disable")$content.addClass("-disabled");if(event.type=="curtain-enable")$content.removeClass("-disabled")})})})(jQuery);
(function($){Swedbank.PageLoad.onFirst(function($){$("body").on("click",'ul.tabsList a[href\x3d"#"]',function(e){e.preventDefault();var $tab=$(this);var $list=$tab.closest("ul.tabsList");var tabIndex=$list.find("a").index($tab);var $content=$list.next(".tabsContent").children().eq(tabIndex);if($content.length&&Swedbank.Navigation.pageId!="private.investor.deposits.my.interests"){$list.find(".active").removeClass("active");$tab.addClass("active");$content.show().attr("aria-hidden","false");$content.siblings().hide().attr("aria-hidden",
"true")}toggleTabs()});$(window).resize(function(){setTimeout(function(){toggleTabs()},300)})});$(function(){$(".tabsContent").each(function(){var $wrapper=$(this);var $contentDivs=$wrapper.children("div");if($contentDivs.length==$contentDivs.filter(":empty").length)$wrapper.remove()});var hash=Swedbank.Navigation.getHash();var tabIdPattern=/tab=([\w\-]+)/;var matches=hash&&hash.match(tabIdPattern);var tabId=matches&&matches[1];var tabElem=$("#"+tabId);if(tabElem.length>0&&tabElem[0].nodeName.indexOf("UI-")===
-1){$('#content .tabsList a[id\x3d"'+tabId+'"]').trigger("click");tabElem.scrollTo(200)}$("#mainForm .tabsList").each(function(){var $list=$(this);var $tabSelection=$('\x3cli class\x3d"tab-selection"/\x3e');var $tabContainer=$('\x3cdiv class\x3d"tab-container"/\x3e').hide();var $icon=$('\x3ca\x3e\x3cspan class\x3d"ico ellipsis"/\x3e\x3c/a\x3e');if($list.parent().hasClass("-vertical"))return;$list.children().each(function(tabIndex){var $tab=$(this);$("\x3cdiv\x3e",{html:$tab.find("a").html()}).attr("data-tab-index",
tabIndex).untilUnload("click",function(){var selectedTabIndex=$(this).data("tab-index");$list.find("a").get(selectedTabIndex).click();$icon.addClass("active");$tabContainer.find("div").removeClass("active");$tabContainer.find("[data-tab-index\x3d'"+tabIndex+"']").addClass("active");$tabContainer.hide()}).appendTo($tabContainer).hide()});$tabSelection.untilUnload("click",function(){$list.find("a.active").toggleClass("active");$tabSelection.find("a").toggleClass("active");$tabContainer.toggle()});$list.untilUnload("click",
"a",function(){var tabIndex=$list.find("a").index(this);if(!$(this).parent().hasClass("tab-selection"))$tabContainer.find("div").removeClass("active");$tabSelection.val(tabIndex)});$icon.appendTo($tabSelection);$tabContainer.insertBefore($list);$tabSelection.appendTo($list);$("body").untilUnload("click",function(event){if(!$tabSelection.is(event.target)&&!$tabSelection.children().is(event.target))$tabContainer.hide()})});toggleTabs()});function toggleTabs(){var MAX_CONTENT_WIDTH=$("#content").width();
$("#mainForm").find(".tabs-wrapper ul.tabsList").each(function(){var $tabList=$(this),$tabListChildren=$tabList.children(),$tabs=$tabListChildren.filter(":visible"),$lastHiddenTab=$tabListChildren.eq($tabs.length-1),$lastVisibleTab=$tabs.not(".tab-selection").last(),$tabContainer=$tabList.prev(".tab-container"),tabsTotalWidth=$tabs.calculateTotalWidth();if($tabList.parents(".frame").length||$tabList.parent().hasClass("-vertical")&&Swedbank.Viewport.isMobile()){$tabListChildren.removeAttr("style");
return}if($tabList.parents(".tabsContent").length)MAX_CONTENT_WIDTH=$tabList.parent().width();if(tabsTotalWidth>MAX_CONTENT_WIDTH&&MAX_CONTENT_WIDTH!==0){if($tabList.hasClass("tabs-wide-format")){var $tabContainerElement=$tabContainer.find("[data-tab-index\x3d'"+$lastVisibleTab.index()+"']");$tabContainerElement.show();$lastVisibleTab.hide();if($lastVisibleTab.find("a").hasClass("active")){$tabList.find(".tab-selection \x3e a").addClass("active");$tabContainerElement.addClass("active")}}else $tabList.addClass("tabs-wide-format");
toggleTabs()}if(MAX_CONTENT_WIDTH-tabsTotalWidth>$lastHiddenTab.width()){$tabContainer.find("[data-tab-index\x3d'"+($lastVisibleTab.index()+1)+"']").hide();$lastHiddenTab.show();if($lastHiddenTab.find("a").hasClass("active"))$tabList.find(".tab-selection \x3e a").removeClass("active")}var $tabListHeight=$tabList.height();var tabContainerOffsetTop=parseInt($tabContainer.css("top"));var tabContainerMarginTop=parseInt($tabContainer.css("margin-top"));if($tabListHeight!==tabContainerOffsetTop+tabContainerMarginTop){$tabContainer.css("top",
$tabListHeight);if(tabContainerMarginTop>0)$tabContainer.css("margin-top",0)}})}})(jQuery);
(function(window,$){function responsiveTables($table){this.$table=$table;var cssTables=["-mobile-merge-columns","-mobile-fits"];if(this.$table.find("thead .-hide-small").length>0)this.hideColumns(this.$table);for(var i=0;i<cssTables.length;i++)if(this.$table.hasClass(cssTables[i]))return;if(this.$table.hasClass("-mobile-invert")){if(this.$table.hasClass("-scrollable")){this.addAdditionalHorizontalScroll(this.$table);this.addResizeListener(this.$table)}this.transformHeaderToDataAttributes(this.$table)}else if(this.$table.hasClass("-mobile-first-col-expandable"))this.transformToExpandable(this.$table);
else if(this.$table.hasClass("-mobile-comparison")){this.fitTableColumns(this.$table);this.transformComparison(this.$table)}else this.fitTableColumns(this.$table)}responsiveTables.prototype={transformToExpandable:function($table){var $row=$table.find("tr");$row.children(":first-child").addClass("js-row-trigger -mobile-trigger");$row.find(".js-row-trigger").on("click",function(){var $this=$(this);if(Swedbank.Viewport.isMobile()){if(!$this.hasClass("-open"))$this.scrollTo("slow",-70);$this.toggleClass("-open");
$this.siblings().toggleClass("-expanded")}})},fitWithArrows:function($table){this.helpers.addWrapper($table);var interval,$btn=$table.closest(".responsive-table-container").find(".scroll-table-btn");$btn.on("touchstart",function(e){var $wrapper=$(this).siblings("div"),$self=$(this);interval=setInterval(function(){var offset=$wrapper.scrollLeft();if($self.hasClass("-right"))$wrapper.scrollLeft(offset+1);else $wrapper.scrollLeft(offset-1)},1)});$btn.on("touchend",function(e){clearInterval(interval)});
var setNav=this.setNavigationPosition;var $window=$(window);$window.untilUnload("scroll resize",function(){setNav($table)})},shouldShrinkColumns:function($table){if($table.hasClass("-shrink-columns"))return true;if($table.hasClass("-mobile-comparison")){var columnCount=this.helpers.getComparisonTableColumnCount($table);var maxColumnsToBeShrink=this.helpers.getMaxColumnsToBeShrink();return columnCount-1<=maxColumnsToBeShrink}return false},fitTableColumns:function($table){if(this.shouldShrinkColumns($table))this.$table.addClass("-shrink-columns");
else this.fitWithArrows($table)},transformHeaderToDataAttributes:function($table){var $header_rows=$table.find("thead tr");this.helpers.removeColAndRowSpan(this.$table.find("tr \x3e *"));switch($header_rows.length){case 0:if(!$table.hasClass("-no-class-remove")){$table.removeClass("-mobile-invert");this.fitWithArrows($table)}break;case 1:this.addSingleAttribute($table,$header_rows,"data-th");break;default:this.addMultipleAttributes($table);break}this.helpers.addColAndRowSpan(this.$table.find("tr \x3e *"))},
transformComparison:function($table){var $rows=$table.find("tbody tr"),$expandRow=$table.find(".row-expand").children(),cols=[],isMobile=Swedbank.Viewport.isMobile(),desktopColSpan=$expandRow.attr("colspan"),mobileColSpan=desktopColSpan-1,$window=$(window);$rows.each(function(){var $this=$(this);if($this.hasClass("row-expand"))$this.find(":first-child").wrapInner('\x3cdiv class\x3d"fixed-title"/\x3e');else{cols.push($this.children().length-1);if(!$this.children(":first").is(":empty"))$this.before('\x3ctr class\x3d"fixed-row"\x3e\x3ctd colspan\x3d"'+
Math.max.apply(null,cols)+'"\x3e\x3cdiv class\x3d"fixed-title"\x3e'+$this.find(":first-child").html()+"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e")}});if(isMobile){$expandRow.attr("colspan",mobileColSpan);var $clone=$table.clone();$clone.find("tbody, tfoot").remove();$table.closest(".responsive-table-container").append($clone);$clone.wrap('\x3cdiv class\x3d"fixed-table-clone-container"\x3e\x3cdiv class\x3d"responsive-table-wrapper"/\x3e\x3c/div\x3e\x3c/div\x3e');var fn=function(){var elTop=$table.offset().top,
elBottom=elTop+$table.outerHeight(),scrollTop=$window.scrollTop(),tableHeadHeight=$table.find("thead").outerHeight();if(scrollTop>=elTop&&scrollTop<=elBottom-tableHeadHeight&&$table.is(":visible"))$table.parent().siblings(".fixed-table-clone-container").addClass("-visible");else $table.parents(".responsive-table-container").find(".fixed-table-clone-container").removeClass("-visible")};$window.untilUnload("scroll",fn);$table.parent().on("scroll",function(){$clone.parent().animate({"scrollLeft":$(this).scrollLeft()},
10)})}function setAbsoluteRowHeight(){$(".fixed-row, .row-expand").each(function(){var $this=$(this),$fixedTitle=$this.find(".fixed-title");if($this.is(":hidden")){var $clone=$fixedTitle.clone().appendTo("body");$clone.css({position:"absolute",visibility:"hidden",display:"block",padding:"10px 0"});$this.css("height",$clone.outerHeight());$clone.remove()}else $this.css("height",$fixedTitle.outerHeight())})}$(document).ready(function(){setAbsoluteRowHeight()});$window.untilUnload("resize",function(){setAbsoluteRowHeight();
var isMobileNow=Swedbank.Viewport.isMobile();if(isMobile!==isMobileNow){$expandRow.attr("colspan",desktopColSpan);isMobile=isMobileNow;if(isMobile)$expandRow.attr("colspan",mobileColSpan)}})},addSingleAttribute:function($table,$header_row,$attr_name){var $body_cells=$table.find("tr").children();var $header_cells=$header_row.children();$body_cells.each(function(){var $header_cell_text=$header_cells.eq($(this).index()).text();if($header_cell_text)$(this).attr($attr_name,$header_cell_text)})},addMultipleAttributes:function($table){var self=
this;$table.find("thead tr").each(function(i){self.addSingleAttribute($table,$(this),"data-th-"+i)})},addAdditionalHorizontalScroll:function($table){if($table.parent().width()<$table.width()&&$(window).width()>767){this.fitWithArrows($table);$table.closest(".responsive-table-container").find(".scroll-table-btn").show()}else this.helpers.removeWrapper($table)},addResizeListener:function($table){var self=this;$(window).untilUnload("resize",function(){self.addAdditionalHorizontalScroll($table)})},setNavigationPosition:function($table){var $nav=
$table.closest(".responsive-table-container").find(".scroll-table-btn"),navMargin=-((Swedbank.Viewport.width-$table.parent().width())/2);$nav.filter(":not(.-left)").css("right",navMargin);$nav.filter(":not(.-right)").css("left",navMargin);if($table.height()>Swedbank.Viewport.height){var scrollTop=$(this).scrollTop(),scrollBot=scrollTop+Swedbank.Viewport.height,elTop=$table.offset().top,elBottom=elTop+$table.outerHeight(),visibleTop=elTop<scrollTop?scrollTop:elTop,visibleBottom=elBottom>scrollBot?
scrollBot:elBottom,visibleHeight=visibleBottom-visibleTop,navPos=visibleHeight/2,isTopVisible=elTop<scrollTop?false:true,isBottomVisible=elBottom>scrollBot?false:true;$nav.addClass("-dynamic");if(visibleHeight>10&&isTopVisible&&!isBottomVisible)$nav.css({"top":navPos,"bottom":"auto"});else if(visibleHeight===Swedbank.Viewport.height&&!isTopVisible&&!isBottomVisible)$nav.css({"top":scrollTop-elTop+navPos,"bottom":"auto"});else if(visibleHeight>10&&!isTopVisible&&isBottomVisible)$nav.css({"top":"auto",
"bottom":navPos})}},hideColumns:function($table){var $th=$table.find("thead .-hide-small");$th.each(function(){$table.find("tr td:nth-child("+($(this).index()+1)+")").addClass("-hide-small")})},helpers:{addWrapper:function($table){if(!$table.hasClass("-js-init")){if($table.parent().hasClass("container"))$table.parent().addClass("responsive-table-container");else $table.wrap('\x3cdiv class\x3d"responsive-table-container"/\x3e');$table.addClass("-js-init");$table.wrap('\x3cdiv class\x3d"responsive-table-wrapper"/\x3e');
$table.closest(".responsive-table-container").append('\x3cspan class\x3d"scroll-table-btn -left"\x3e\x3c/span\x3e\x3cspan class\x3d"scroll-table-btn -right"\x3e\x3c/span\x3e')}},removeWrapper:function($table){if($table.hasClass("-js-init")){$table.removeClass("-js-init");$table.closest(".responsive-table-container").find(".scroll-table-btn").remove();$table.unwrap().unwrap()}},removeColSpan:function($elements){$elements.each(function(){var $this=$(this);if($this.attr("colspan")){var $colspan_value=
$this.attr("colspan"),tagName=$this.prop("tagName");for(i=1;i<$colspan_value;i++)$this.after("\x3c"+tagName+' class\x3d"colspan-filler"\x3e\x3c/'+tagName+"\x3e");$this.removeAttr("colspan")}})},addColSpan:function($elements){$elements.not(".colspan-filler").each(function(){var $this=$(this);var $colspan_fillers=$this.nextUntil(':not(".colspan-filler")');var $colspan_filler_length=$colspan_fillers.length;if($colspan_filler_length>0){$this.attr("colspan",$colspan_filler_length+1);$colspan_fillers.remove()}})},
removeRowSpan:function($elements){$elements.each(function(){var $this=$(this);if($this.attr("rowspan")){$this.addClass("rowspan-cell");var $index=$this.index(),$rowspan_value=$this.attr("rowspan"),$rowspan_rows=$this.parent().nextAll("tr").slice(0,$rowspan_value-1);$rowspan_rows.children().each(function(){var $row_element=$(this);if($row_element.index()==$index)$row_element.before("\x3ctd\x3e\x3c/td\x3e").parent().addClass("rowspan-filler-row")});$this.removeAttr("rowspan")}})},addRowSpan:function($elements){$elements.filter(".rowspan-cell").each(function(){var $this=
$(this);var $filler_rows=$this.parent().nextUntil(':not(".rowspan-filler-row")');$this.attr("rowspan",$filler_rows.length+1).removeClass("rowspan-cell");$filler_rows.each(function(){$(this).removeClass("rowspan-filler-row").children().eq($this.index()).remove()})})},getComparisonTableColumnCount:function($table){return $table.find("thead tr").first().find("th").size()},getMaxColumnsToBeShrink:function(){return 2},removeColAndRowSpan:function($elements){this.removeColSpan($elements);this.removeRowSpan($elements)},
addColAndRowSpan:function($elements){this.addColSpan($elements);this.addRowSpan($elements)}}};responsiveTables.loadCallback=()=>{$(".default-table, .comparison-table").each(function(){var $this=$(this);new responsiveTables($this)})};Swedbank.responsiveTables=responsiveTables||{};if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",responsiveTables.loadCallback);UI.whenDOMReady(responsiveTables.loadCallback)}else Swedbank.PageLoad.onEach(responsiveTables.loadCallback)})(window,
jQuery);
(function($){var defaultOptions={showOn:"button",buttonText:"",firstDay:1,changeYear:true,selectOtherMonths:true,showOtherMonths:true,changeMonth:true,showButtonPanel:true,yearRange:"1900:c+30",dateFormat:"dd.mm.yy",onClose:function(val,ui){$(this).next().focus()}};var localization={"EST":{dayNamesMin:["P","E","T","K","N","R","L"],prevText:"Eelmine kuu",nextText:"J\u00e4rgmine kuu",currentText:"T\u00e4nane kuup\u00e4ev",closeText:"Sulge",timeText:"Aeg",hourText:"Tund",minuteText:"Minut",secondText:"Sekund"},
"RUS":{dayNamesMin:["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],prevText:"\u041c\u0435\u0441\u044f\u0446 \u043d\u0430\u0437\u0430\u0434",nextText:"\u041c\u0435\u0441\u044f\u0446 \u0432\u043f\u0435\u0440\u0435\u0434",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",timeText:"\u0412\u0440\u0435\u043c\u044f",hourText:"\u0427\u0430\u0441\u044b",minuteText:"\u041c\u0438\u043d\u0443\u0442\u044b",
secondText:"\u0421\u0435\u043a\u0443\u043d\u0434\u044b"},"LAT":{dayNamesMin:["Sv","Pr","Ot","Tr","Ce","Pk","Se"],prevText:"Iepr. m\u0113nesis",nextText:"N\u0101ko\u0161ais m\u0113nesis",currentText:"\u0160odien",closeText:"Aizv\u0113rt",timeText:"Laiks",hourText:"Stunda",minuteText:"Min\u016bte",secondText:"Sekunde"},"LIT":{dayNamesMin:["Sek","Pir","Ant","Tre","Ket","Pen","\u0160e\u0161"],prevText:"Ankstesnis m\u0117nuo (laikykite, jei norite meniu)",nextText:"Kitas m\u0117nuo (laikykite, jei norite meniu)",
currentText:"Pasirinkti \u0161iandien\u0105",closeText:"U\u017edaryti",timeText:"Laikas",hourText:"Valanda",minuteText:"\u041cinut\u0117",secondText:"Sekund\u0117"}};function interpretDateValue(value){var interpretedValue;if(value==="today")interpretedValue=new Date;else if(typeof value==="number")interpretedValue=new Date(value);else interpretedValue=value;return interpretedValue}function connectDateFieldsBySelector($sourceField,targetSelector,dateType){var $connectedDateField=$(targetSelector);
$connectedDateField.on("change",function(){var date=$connectedDateField.val();$sourceField.datepicker("option",dateType,date)})}function isSelector(value){return typeof value==="string"&&value.startsWith("#")}function getOptionsFromFieldElement($field){var options=$.extend({},defaultOptions);var data=$field.data();["minDate","maxDate","timeFormat"].forEach(function(property){var value=data[property];if(value&&!isSelector(value))options[property]=interpretDateValue(value)});options.gotoCurrent=data.enableToday;
return options}function interpretDateRangeValue(value){var date;if(value instanceof Date)date=moment(value).startOf("day");else if(typeof value==="string")if(value.length===10)date=moment(value,moment.defaultFormat);else if(value.startsWith("-")||value.startsWith("+")){var amount=value.match(/\d+/)[0];var unit=value.split("").last();if(unit==="m")unit="M";if(value.startsWith("-"))date=moment().startOf("day").subtract(amount,unit);else date=moment().startOf("day").add(amount,unit)}return date}function showErrorMessage($field,
message){var $container=$field.closest("dd");$container.addClass("validation-error");$("\x3cdiv\x3e",{"class":"validation-message",text:message}).appendTo($container)}function hideErrorMessage($field){var $container=$field.closest("dd");$container.removeClass("validation-error");$container.find(".validation-message").remove()}function toggleReadOnly($field){if(Swedbank.Viewport.isMobile()&&$field.attr("readonly")!=="readonly")$field.attr("readonly","readonly");else if(!Swedbank.Viewport.isMobile())$field.removeAttr("readonly")}
$.fn.addDatepicker=function(){return this.each(function(){var originalValue=this.value;var $field=$(this);var data=$field.data();var options=getOptionsFromFieldElement($field);["minDate","maxDate"].forEach(function(property){if(data[property]&&isSelector(data[property]))connectDateFieldsBySelector($field,data[property],property)});if(!$field.isInside(".modal-window"))options.beforeShow=function(field,datepicker){setTimeout(function(){datepicker.dpDiv.css("z-index",4).attr({"aria-label":Swedbank.Labels("date"),
"aria-region":Swedbank.Labels("date"),"role":"complementary"});datepicker.dpDiv.find("a.ui-state-active").attr("tabindex",0).focus();datepicker.dpDiv.find(".ui-datepicker-prev,.ui-datepicker-prev").attr({"role":"button","href":"javascript:void(0)"})},0)};toggleReadOnly($field);var callback=function(){toggleReadOnly($field)};$(window).untilUnload("resize",callback);$field.on("change",function(){options=getOptionsFromFieldElement($field);var dateFormat=moment.defaultFormat;var minDate=options.minDate;
var maxDate=options.maxDate;var selectedDate=moment($field.val(),dateFormat);var errorLabel;hideErrorMessage($field);if(options.minDate){minDate=interpretDateRangeValue(options.minDate);if(minDate&&selectedDate.isBefore(minDate)){errorLabel=Swedbank.Labels("dateFieldValueOutOfMinRange").supplementWith({from:minDate.format(dateFormat)});showErrorMessage($field,errorLabel)}}if(options.maxDate){maxDate=interpretDateRangeValue(options.maxDate);if(maxDate&&selectedDate.isAfter(maxDate)){errorLabel=Swedbank.Labels("dateFieldValueOutOfMaxRange").supplementWith({before:maxDate.add(1,
"day").format(dateFormat)});showErrorMessage($field,errorLabel)}else hideErrorMessage($field)}});if(options.timeFormat)$field.datetimepicker(options);else{$field.datepicker(options);if($field.isInside(".period-selection-component"))setTimeout(function(){if($field.val()!==originalValue)$field.val(originalValue)})}if(data.calendarIconId)$field.next("button").attr("id",data.calendarIconId)})};Swedbank.PageLoad.onFirst(function(){if(Swedbank.country==="LT")defaultOptions.dateFormat="yy-mm-dd";if(Swedbank.language!==
"ENG")$.extend(defaultOptions,localization[Swedbank.language],{dayNames:Swedbank.Time.labels.days,monthNames:Swedbank.Time.labels.months,monthNamesShort:Swedbank.Time.labels.months});$("body").on("click",".datepicker-time-field + .ico.time",function(){var $timefield=$(this).prev().toggleClass("visible");if($timefield.is(".visible"))fillTimeFromDataAttributes($timefield);else $timefield.val("")})});$(function(){$(".datepicker-time-field").each(function(){if($(this).attr("data-rule-required")||$(this).attr("data-current-time")){var $timefield=
$(this).addClass("visible");fillTimeFromDataAttributes($timefield)}})});function fillTimeFromDataAttributes($timefield){if($timefield.data("currentTime"))$timefield.val($timefield.data("currentTime"));else if($timefield.data("defaultTime"))$timefield.val($timefield.data("defaultTime"))}})(jQuery);if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",Swedbank.Forms.enhanceDateFields);UI.whenDOMReady(Swedbank.Forms.enhanceDateFields)}else Swedbank.PageLoad.onEach(Swedbank.Forms.enhanceDateFields);
(function($){var $lastClicked=null;window.Tooltip=function(target,content,options){this.$target=$(target);if(!this.$target.length){Swedbank.log('Tooltip: No match found for selector "'+this.$target.selector+'".');return}this.options=$.extend({"closeOnBackgroundClick":true},options);if(this.$target.data("tooltip"))$.extend(this,this.$target.data("tooltip"));else{this.render();this.$target.data("tooltip",this)}this.open();if(content)this.setContent(content);return this};Tooltip.prototype.render=function(){var tooltip=
this;this.$=$('\x3cdiv class\x3d"tooltip-container tooltip-loading" aria-hidden\x3d"true"/\x3e').appendTo("body");this.$content=$('\x3cdiv class\x3d"tooltip-content"/\x3e').appendTo(this.$);if(this.options.closeOnBackgroundClick)$("body").untilUnload("click",function(event){var isBackgroundClick=!tooltip.$.find(event.target).length&&!tooltip.$.is(event.target)&&!tooltip.$target.is(event.target);if(isBackgroundClick&&!tooltip.justOpened)tooltip.close()});if($("body").hasClass("april-fools-day"))tooltip.$content.html('\x3cimg src\x3d"/img/icons/mchammer.gif"/\x3e');
this.$.on("keydown",function(event){if(event.keyCode===27||event.which===27)tooltip.close();if(event.keyCode===9||event.which===9)$lastClicked.focus()});this.$.on("focusout",function(event){$lastClicked.focus()});this.repositionAfterViewportResize();return this};Tooltip.prototype.renderPointer=function(){this.$pointer=$('\x3cdiv class\x3d"tooltip-pointer"\x3e').prependTo(this.$);return this};Tooltip.prototype.renderOverlay=function(){this.$overlay=$('\x3cdiv class\x3d"tooltip-overlay"\x3e').prependTo(this.$);
this.$overlay.on("click",function(){this.close()}.bind(this));return this};Tooltip.prototype.getPointerDimensions=function(){var dimensions={width:20,height:10,position:{}};dimensions.position.left=20;dimensions.position.right=20;return dimensions};Tooltip.prototype.position=function(){var pointer=this.getPointerDimensions();var $offsetTop=this.$target.offset().top+this.$target.outerHeight()+pointer.height;if(Swedbank.Viewport.isMobile()){var scrollPosition=$("html").scrollTop()||$("body").scrollTop();
var $offsetTopMobile=($(window).height()-this.$.height())/2+scrollPosition;$offsetTop=$offsetTopMobile}this.$.css({top:$offsetTop});if(this.$target.offset().left>$(window).width()/2)this.$.addClass("tooltip-right").removeClass("tooltip-left").css({right:$(window).width()-(this.$target.offset().left+(this.$target.hasClass("caption-right")?this.$target.outerWidth():pointer.width))-pointer.position.left-1});else this.$.addClass("tooltip-left").removeClass("tooltip-right").css({left:this.$target.offset().left-
pointer.position.left+(this.$target.hasClass("caption-right")?this.$target.outerWidth()-pointer.width:0)});return this};Tooltip.prototype.repositionAfterViewportResize=function(){var tooltip=this;var delayTimer;$(window).untilUnload("resize",function(){clearTimeout(delayTimer);if(!Swedbank.Viewport.isMobile())$(".tooltip-close",this.$,this.$overlay).hide();tooltip.position()})};Tooltip.prototype.setContent=function(content){var tooltip=this;this.$.removeClass("tooltip-loading");function setContent(content){tooltip.$content.html(content)}
if($("body").hasClass("april-fools-day"))tooltip.$content.find("img").delay(2E3).fadeOut("slow",function(){setContent(content)});else setContent(content);if(!$(".tooltip-close",this.$).length)$('\x3cdiv class\x3d"tooltip-close"\x3e').on("click",function(){tooltip.close()}).prependTo(this.$);if(Swedbank.Viewport.isMobile())$(".tooltip-close",this.$).show();else $(".tooltip-close",this.$).hide();$(".tooltip-content a").on("click",function(){tooltip.close()});return this};Tooltip.prototype.calculateZIndex=
function(){this.$.css("z-index",this.$target.getZIndex()+1)};Tooltip.prototype.open=function(){var tooltip=this;Tooltip.instance=tooltip;if(!this.$pointer)this.renderPointer();if(!this.$overlay)this.renderOverlay();if(!this.$target.length){Swedbank.error("Tooltip target doesn't exist, looked for selector: ",this.$target.selector);return this}this.$overlay.show();this.$.show();this.$.removeAttr("aria-hidden");this.$target.addClass("help-action-open");this.position();this.$.attr("tabindex",0);if(!this.$target.is("#mainForm *")&&
!this.$target.is(".yui-panel-container *")&&!this.$target.is(".modal-window *"))this.calculateZIndex();tooltip.justOpened=true;setTimeout(function(){tooltip.justOpened=false},300);return this};Tooltip.prototype.close=function(){this.$overlay.fadeOut("fast");this.$.fadeOut("fast");this.$.attr("aria-hidden","true");this.$target.removeClass("help-action-open");this.$.removeAttr("tabindex");this.$.removeClass("-open");return this};Swedbank.PageLoad.onFirst(function(){$("body").on("click","[data-help-id], [data-help-text]",
function(event){$lastClicked=$(this);var $help=$(this);var isOpen=$help.is(".help-action-open");var content=Swedbank.Helpers.removeScripts($help.attr("data-help-text"));var helpId=$help.data("helpId");var tooltip=new Tooltip($help);if($help.is("a")||$help.is("span.help-action"))event.preventDefault();if(isOpen){tooltip.close();return false}if($help.next().hasClass("content-tooltip"))content=$help.next().clone().attr("aria-hidden","false");if(content){tooltip.setContent(content);tooltip.position();
tooltip.$.focus();tooltip.$.addClass("-open")}else if(helpId){tooltip.$.attr("aria-busy",true);var params=$.extend(getSessionParams(),{pageId:"help.smallhelp",labelId:helpId,helpId:Swedbank.Navigation.pageId});$.post(document.mainForm.action,params,function(data){tooltip.setContent(data);tooltip.$.attr("aria-busy",false);tooltip.$.focus();tooltip.$.addClass("-open")})}});$("body").on("keypress","[data-help-id], [data-help-text]",function(event){if(event.which===13||event.keyCode==13||event.which==
32||event.keyCode==32){event.preventDefault();$(this).trigger("click")}})})})(jQuery);
function Slider(selector,options){if(jQuery(selector).data("sliderinstance"))return jQuery(selector).data("sliderinstance");this.callbacks={"slide":[],"slidechange":[]};this.$element=jQuery(selector).data("sliderinstance",this);this.options=jQuery.extend({},Slider.defaultOptions,this.$element.data(),options);if(this.options.range===true)this.options.values=this.options.initialValue?String(this.options.initialValue).split(","):[this.options.min,this.options.max];else this.options.value=this.options.initialValue===
null?this.options.min:this.options.initialValue;this.renderContainer();this.createStepper();if(this.options.rangeMarkers)this.renderRangeMarkers();if(this.options.lim)this.createAdditionalLimit();if(this.options.limLabel)this.createAdditionalLimitLabel();this.initialize()}
Slider.defaultOptions={min:0,max:100,lim:null,limLabel:"",limLabelSize:"",initialValue:null,step:1,range:"min",valueSuffix:"",currentValueHidden:false,rangeMarkers:true,fixedValues:[],displayInput:"no",rangeMarkerFormatter:function(type){var marker=this.options[type];if(this.options.valueSuffix)marker+=" "+this.options.valueSuffix;return marker},valueMarkerFormatter:function(value){if(this.options.valueSuffix)value+=" "+this.options.valueSuffix;return value}};
Slider.prototype.renderContainer=function(){this.$element.wrap('\x3cdiv class\x3d"slider-container"\x3e');this.$container=this.$element.parent();this.$container.attr("data-current-value-hidden",this.options.currentValueHidden);if(this.options.displayInput==="yes")this.$container.addClass("-display-input")};
Slider.prototype.initialize=function(){var slider=this;this.options.create=function(){slider.renderValueMarker()};this.options.slide=function(event,ui){if(typeof ui!=="undefined")if(ui.values)slider.options.values=ui.values;else if(slider.options.fixedValues.length>1)slider.options.value=slider.options.fixedValues[ui.value];else slider.options.value=ui.value;slider.refreshValueMarker();slider.callbacks.slide.forEach(function(callback){callback(slider.getCurrentValue())})};this.options.stop=function(){slider.callbacks.slidechange.forEach(function(callback){callback(slider.getCurrentValue())})};
this.$element.slider(this.options);var $slider=this.$element;this.$element.on({"sliderrefresh":function(){if(slider.options.fixedValues.length>0)slider.createRangeMarkers(slider.options.fixedValues[0],slider.options.fixedValues[length-1]);else slider.createRangeMarkers($slider.slider("option","min"),$slider.slider("option","max"));slider.updateValueMarker(slider.options.range===true?$slider.slider("option","values"):$slider.slider("option","value"));if($slider.slider("option","lim")!=slider.options.lim){slider.options.lim=
$slider.slider("option","lim");slider.createAdditionalLimit()}if(slider.options.lim&&$slider.slider("option","lim-label")!=slider.options.limLabel){slider.options.limLabel=$slider.slider("option","lim-label");slider.createAdditionalLimitLabel()}},"slidermarkervalueupdate":function(event,value,addSuffix){slider.updateValueMarker(value,addSuffix)}})};
Slider.prototype.setMinValue=function(min){this.options.min=min;this.$element.slider("option","min",min);this.refreshRangeMarkers();if(this.getCurrentValue()<min)this.setCurrentValue(min)};Slider.prototype.setMaxValue=function(max){this.options.max=max;this.$element.slider("option","max",max);this.refreshRangeMarkers();if(this.getCurrentValue()>max)this.setCurrentValue(max)};
Slider.prototype.setCurrentValue=function(values){if(Array.isArray(values)){this.$element.slider("option","values",values);this.options.values=values}else{this.$element.slider("option","value",values);this.options.value=values}this.refreshValueMarker()};Slider.prototype.getCurrentValue=function(){return this.options.values||this.options.value};
Slider.prototype.renderValueMarker=function(){this.$element.find(".ui-slider-handle").append('\x3cdiv class\x3d"current-value-container"\x3e'+'  \x3cdiv class\x3d"current-value"\x3e\x3c/div\x3e'+"\x3c/div\x3e");this.refreshValueMarker()};Slider.prototype.renderRangeMarkers=function(){this.$container.append('\x3cdiv class\x3d"slider-range-point"\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"slider-range-point"\x3e\x3c/div\x3e');this.refreshRangeMarkers()};
Slider.prototype.createAdditionalLimit=function(){var that=this;var left;if(this.options.displayInput==="yes")left=(this.options.lim-this.options.min)/(this.options.max-this.options.min)*65;else left=(this.options.lim-this.options.min)/(this.options.max-this.options.min)*100;this.$element.parent().find(".slider-additional-limit").remove();if(this.options.displayInput==="yes"&&left<65||this.options.displayInput!="yes"&&left<100){this.$element.parent().append('\x3cdiv class\x3d"slider-additional-limit"\x3e\x3c/div\x3e');
this.$element.parent().find(".slider-additional-limit").css("left",left+"%").untilUnload("click",function(){that.setCurrentValue(that.options.lim)})}};
Slider.prototype.createAdditionalLimitLabel=function(){this.$element.parent().find(".slider-additional-limit-label").remove();this.$element.parent().find(".slider-additional-limit").append('\x3cdiv class\x3d"slider-additional-limit-label"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e');this.$element.parent().find(".slider-additional-limit-label div").html(this.options.limLabel);this.$container.addClass("-additional-limit");if(this.options.limLabelSize!=""){var limitLabel=this.$element.find(".slider-additional-limit-label");
if(this.options.limLabelSize=="small")limitLabel.addClass("-small");if(this.options.limLabelSize=="large")limitLabel.addClass("-large")}};
Slider.prototype.createStepper=function(){var $slider=this;var $minus=this.$element.parent().append('\x3cbutton class\x3d"ui-slider-minus"\x3e\x3c/button\x3e').find(".ui-slider-minus");var $input=this.$element.parent().append('\x3cinput type\x3d"tel" class\x3d"ui-slider-input"/\x3e').find(".ui-slider-input");var $plus=this.$element.parent().append('\x3cbutton class\x3d"ui-slider-plus"\x3e\x3c/button\x3e').find(".ui-slider-plus");$input.val(this.$element.data("initial-value"));$input.on("focus",function(e){$input.val($slider.getCurrentValue())});
$input.on("blur",function(e){$slider.setCurrentValue(parseInt($input.val()));$slider.$element.trigger("slide");$slider.options.slide()});$input.on("change",function(e){var get=parseInt($input.val());var set=get;if(!get||get<$slider.options.min)set=$slider.options.min;if(get>$slider.options.max)set=$slider.options.max;$slider.setCurrentValue(set);$slider.$element.trigger("slide");$slider.options.slide()});$minus.on("click",function(e){e.preventDefault()});$minus.on("mousedown touchstart",function(e){e.preventDefault();
var value=$slider.getCurrentValue()-$slider.options.step;if(value>=$slider.options.min)$slider.setCurrentValue(value);else $slider.setCurrentValue($slider.options.min);$slider.$element.trigger("slide");$slider.options.slide()});$plus.on("click",function(e){e.preventDefault()});$plus.on("mousedown touchstart",function(e){e.preventDefault();var value=$slider.getCurrentValue()+$slider.options.step;if(value<=$slider.options.max)$slider.setCurrentValue(value);else $slider.setCurrentValue($slider.options.max);
$slider.$element.trigger("slide");$slider.options.slide()})};
Slider.prototype.refreshRangeMarkers=function(){var min,max;if(this.options.fixedValues.length>0){min=this.options.fixedValues[0];max=this.options.fixedValues[this.options.fixedValues.length-1]}else{min=this.options.rangeMarkerFormatter.call(this,"min");max=this.options.rangeMarkerFormatter.call(this,"max")}if(this.options.valueSuffix&&this.options.fixedValues.length>0){min+=" "+this.options.valueSuffix;max+=" "+this.options.valueSuffix}this.$container.find(".slider-range-point").each(function(index){this.innerHTML=index==
0?min:max})};Slider.prototype.createRangeMarkers=function(min,max){if(this.options.valueSuffix){min+=" "+this.options.valueSuffix;max+=" "+this.options.valueSuffix}this.$container.find(".slider-range-point").remove();this.$container.append('\x3cdiv class\x3d"slider-range-point"\x3e'+min+"\x3c/div\x3e"+'\x3cdiv class\x3d"slider-range-point"\x3e'+max+"\x3c/div\x3e")};
Slider.prototype.refreshValueMarker=function(){var values=this.options.values||[this.options.value];values.forEach(function(value,index){var $arrow=this.$element.find(".ui-slider-handle").eq(index);var $value=$arrow.find(".current-value");var $input=this.$element.parent().find(".ui-slider-input");$value.html(this.options.valueMarkerFormatter.call(this,value));$input.val(this.options.valueMarkerFormatter.call(this,value));if(values.length===2)if(index===0){var distanceBetween=$arrow.next().position().left-
($arrow.position().left+$arrow.width());$arrow.toggleClass("align-left",distanceBetween<40)}else $arrow.toggleClass("align-right",$arrow.prev().is(".align-left"))},this)};
Slider.prototype.updateValueMarker=function(values,addSuffix){if(!Array.isArray(values))values=[values];values.forEach(function(value,index){var $arrow=this.$element.find(".ui-slider-handle").eq(index);var $value=$arrow.find(".current-value");var $input=this.$element.parent().find(".ui-slider-input");if(this.options.valueSuffix&&addSuffix!==false)value+=" "+this.options.valueSuffix;$value.html(value);$input.val(value);if(values.length===2){var className=index==1?"align-right":"align-left";var threshold=
.1;var condition=values[1]-values[0]<(this.options.max-this.options.min)*threshold;$arrow.toggleClass(className,condition)}},this)};Slider.prototype.onSlide=function(callback){this.callbacks.slide.push(callback)};Slider.prototype.onSlideChange=function(callback){this.callbacks.slidechange.push(callback)};Slider.prototype.setValueMarkerFormatter=function(callback){this.options.valueMarkerFormatter=callback;this.refreshValueMarker()};
Slider.prototype.setRangeMarkerFormatter=function(callback){this.options.rangeMarkerFormatter=callback;this.refreshRangeMarkers()};var initLegacySliders=()=>{jQuery(".slider-component").each(function(){var slider=new Slider(this);jQuery.extend(this,{slider:slider})})};if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",initLegacySliders);jQuery(initLegacySliders)}else Swedbank.PageLoad.onEach(initLegacySliders);
(function(root,factory){if(typeof define==="function"&&define.amd)define(factory);else if(typeof exports!=="undefined")module.exports=factory();else root.atmosphere=factory()})(this,function(){var atmosphere={},guid,offline=false,requests=[],callbacks=[],uuid=0,hasOwn=Object.prototype.hasOwnProperty;atmosphere={version:"2.3.5-javascript",onError:function(response){},onClose:function(response){},onOpen:function(response){},onReopen:function(response){},onMessage:function(response){},onReconnect:function(request,
response){},onMessagePublished:function(response){},onTransportFailure:function(errorMessage,_request){},onLocalMessage:function(response){},onFailureToReconnect:function(request,response){},onClientTimeout:function(request){},onOpenAfterResume:function(request){},WebsocketApiAdapter:function(request){var _socket,_adapter;request.onMessage=function(e){_adapter.onmessage({data:e.responseBody})};request.onMessagePublished=function(e){_adapter.onmessage({data:e.responseBody})};request.onOpen=function(e){_adapter.onopen(e)};
_adapter={close:function(){_socket.close()},send:function(data){_socket.push(data)},onmessage:function(e){},onopen:function(e){},onclose:function(e){},onerror:function(e){}};_socket=new atmosphere.subscribe(request);return _adapter},AtmosphereRequest:function(options){var _request={timeout:3E5,method:"GET",headers:{},contentType:"",callback:null,url:"",data:"",suspend:true,maxRequest:-1,reconnect:true,maxStreamingLength:1E7,lastIndex:0,logLevel:"info",requestCount:0,fallbackMethod:"GET",fallbackTransport:"streaming",
transport:"long-polling",webSocketImpl:null,webSocketBinaryType:null,dispatchUrl:null,webSocketPathDelimiter:"@@",enableXDR:false,rewriteURL:false,attachHeadersAsQueryString:true,executeCallbackBeforeReconnect:false,readyState:0,withCredentials:false,trackMessageLength:false,messageDelimiter:"|",connectTimeout:-1,reconnectInterval:0,dropHeaders:true,uuid:0,async:true,shared:false,readResponsesHeaders:false,maxReconnectOnClose:5,enableProtocol:true,disableDisconnect:false,pollingInterval:0,heartbeat:{client:null,
server:null},ackInterval:0,closeAsync:false,reconnectOnServerError:true,handleOnlineOffline:true,maxWebsocketErrorRetries:1,curWebsocketErrorRetries:0,onError:function(response){},onClose:function(response){},onOpen:function(response){},onMessage:function(response){},onReopen:function(request,response){},onReconnect:function(request,response){},onMessagePublished:function(response){},onTransportFailure:function(reason,request){},onLocalMessage:function(request){},onFailureToReconnect:function(request,
response){},onClientTimeout:function(request){},onOpenAfterResume:function(request){}};var _response={status:200,reasonPhrase:"OK",responseBody:"",messages:[],headers:[],state:"messageReceived",transport:"polling",error:null,request:null,partialMessage:"",errorHandled:false,closedByClientTimeout:false,ffTryingReconnect:false};var _websocket=null;var _sse=null;var _activeRequest=null;var _ieStream=null;var _jqxhr=null;var _subscribed=true;var _requestCount=0;var _heartbeatInterval=0;var _heartbeatPadding=
"X";var _abortingConnection=false;var _localSocketF=null;var _storageService;var _localStorageService=null;var guid=atmosphere.util.now();var _traceTimer;var _sharingKey;var _beforeUnloadState=false;_subscribe(options);function _init(){_subscribed=true;_abortingConnection=false;_requestCount=0;_websocket=null;_sse=null;_activeRequest=null;_ieStream=null}function _reinit(){_clearState();_init()}function _canLog(level){if(level=="debug")return _request.logLevel==="debug";else if(level=="info")return _request.logLevel===
"info"||_request.logLevel==="debug";else if(level=="warn")return _request.logLevel==="warn"||_request.logLevel==="info"||_request.logLevel==="debug";else if(level=="error")return _request.logLevel==="error"||_request.logLevel==="warn"||_request.logLevel==="info"||_request.logLevel==="debug";else return false}function _debug(msg){if(_canLog("debug"))atmosphere.util.debug(new Date+" Atmosphere: "+msg)}function _verifyStreamingLength(ajaxRequest,rq){if(_response.partialMessage===""&&rq.transport==="streaming"&&
ajaxRequest.responseText.length>rq.maxStreamingLength)return true;return false}function _disconnect(){if(_request.enableProtocol&&!_request.disableDisconnect&&!_request.firstMessage){var query="X-Atmosphere-Transport\x3dclose\x26X-Atmosphere-tracking-id\x3d"+_request.uuid;atmosphere.util.each(_request.headers,function(name,value){var h=atmosphere.util.isFunction(value)?value.call(this,_request,_request,_response):value;if(h!=null)query+="\x26"+encodeURIComponent(name)+"\x3d"+encodeURIComponent(h)});
var url=_request.url.replace(/([?&])_=[^&]*/,query);url=url+(url===_request.url?(/\?/.test(_request.url)?"\x26":"?")+query:"");var rq={connected:false};var closeR=new atmosphere.AtmosphereRequest(rq);closeR.connectTimeout=_request.connectTimeout;closeR.attachHeadersAsQueryString=false;closeR.dropHeaders=true;closeR.url=url;closeR.contentType="text/plain";closeR.transport="polling";closeR.method="GET";closeR.data="";closeR.heartbeat=null;if(_request.enableXDR)closeR.enableXDR=_request.enableXDR;closeR.async=
_request.closeAsync;_pushOnClose("",closeR)}}function _close(){_debug("Closing (AtmosphereRequest._close() called)");_abortingConnection=true;if(_request.reconnectId){clearTimeout(_request.reconnectId);delete _request.reconnectId}if(_request.heartbeatTimer)clearTimeout(_request.heartbeatTimer);_request.reconnect=false;_response.request=_request;_response.state="unsubscribe";_response.responseBody="";_response.status=408;_response.partialMessage="";_request.curWebsocketErrorRetries=0;_invokeCallback();
_disconnect();_clearState()}function _clearState(){_response.partialMessage="";if(_request.id)clearTimeout(_request.id);if(_request.heartbeatTimer)clearTimeout(_request.heartbeatTimer);if(_request.reconnectId){clearTimeout(_request.reconnectId);delete _request.reconnectId}if(_ieStream!=null){_ieStream.close();_ieStream=null}if(_jqxhr!=null){_jqxhr.abort();_jqxhr=null}if(_activeRequest!=null){_activeRequest.abort();_activeRequest=null}if(_websocket!=null){if(_websocket.canSendMessage){_debug("invoking .close() on WebSocket object");
_websocket.close()}_websocket=null}if(_sse!=null){_sse.close();_sse=null}_clearStorage()}function _clearStorage(){if(_storageService!=null){clearInterval(_traceTimer);document.cookie=_sharingKey+"\x3d; expires\x3dThu, 01 Jan 1970 00:00:00 GMT; path\x3d/";_storageService.signal("close",{reason:"",heir:!_abortingConnection?guid:(_storageService.get("children")||[])[0]});_storageService.close()}if(_localStorageService!=null)_localStorageService.close()}function _subscribe(options){_reinit();_request=
atmosphere.util.extend(_request,options);_request.mrequest=_request.reconnect;if(!_request.reconnect)_request.reconnect=true}function _supportWebsocket(){return _request.webSocketImpl!=null||window.WebSocket||window.MozWebSocket}function _supportSSE(){var url=atmosphere.util.getAbsoluteURL(_request.url.toLowerCase());var parts=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/.exec(url);var crossOrigin=!!(parts&&(parts[1]!=window.location.protocol||parts[2]!=window.location.hostname||(parts[3]||(parts[1]===
"http:"?80:443))!=(window.location.port||(window.location.protocol==="http:"?80:443))));return window.EventSource&&(!crossOrigin||!atmosphere.util.browser.safari||atmosphere.util.browser.vmajor>=7)}function _execute(){if(_request.shared){_localStorageService=_local(_request);if(_localStorageService!=null){if(_canLog("debug"))atmosphere.util.debug("Storage service available. All communication will be local");if(_localStorageService.open(_request))return}if(_canLog("debug"))atmosphere.util.debug("No Storage service available.");
_localStorageService=null}_request.firstMessage=uuid==0?true:false;_request.isOpen=false;_request.ctime=atmosphere.util.now();if(_request.uuid===0)_request.uuid=uuid;_response.closedByClientTimeout=false;if(_request.transport!=="websocket"&&_request.transport!=="sse")_executeRequest(_request);else if(_request.transport==="websocket")if(!_supportWebsocket())_reconnectWithFallbackTransport("Websocket is not supported, using request.fallbackTransport ("+_request.fallbackTransport+")");else _executeWebSocket(false);
else if(_request.transport==="sse")if(!_supportSSE())_reconnectWithFallbackTransport("Server Side Events(SSE) is not supported, using request.fallbackTransport ("+_request.fallbackTransport+")");else _executeSSE(false)}function _local(request){var trace,connector,orphan,name="atmosphere-"+request.url,connectors={storage:function(){function onstorage(event){if(event.key===name&&event.newValue)listener(event.newValue)}if(!atmosphere.util.storage)return;var storage=window.localStorage,get=function(key){var item=
storage.getItem(name+"-"+key);return item===null?[]:atmosphere.util.parseJSON(item)},set=function(key,value){storage.setItem(name+"-"+key,atmosphere.util.stringifyJSON(value))};return{init:function(){set("children",get("children").concat([guid]));atmosphere.util.on(window,"storage",onstorage);return get("opened")},signal:function(type,data){storage.setItem(name,atmosphere.util.stringifyJSON({target:"p",type:type,data:data}))},close:function(){var children=get("children");atmosphere.util.off(window,
"storage",onstorage);if(children)if(removeFromArray(children,request.id))set("children",children)}}},windowref:function(){var win=window.open("",name.replace(/\W/g,""));if(!win||win.closed||!win.callbacks)return;return{init:function(){win.callbacks.push(listener);win.children.push(guid);return win.opened},signal:function(type,data){if(!win.closed&&win.fire)win.fire(atmosphere.util.stringifyJSON({target:"p",type:type,data:data}))},close:function(){if(!orphan){removeFromArray(win.callbacks,listener);
removeFromArray(win.children,guid)}}}}};function removeFromArray(array,val){var i,length=array.length;for(i=0;i<length;i++)if(array[i]===val)array.splice(i,1);return length!==array.length}function listener(string){var command=atmosphere.util.parseJSON(string),data=command.data;if(command.target==="c")switch(command.type){case "open":_open("opening","local",_request);break;case "close":if(!orphan){orphan=true;if(data.reason==="aborted")_close();else if(data.heir===guid)_execute();else setTimeout(function(){_execute()},
100)}break;case "message":_prepareCallback(data,"messageReceived",200,request.transport);break;case "localMessage":_localMessage(data);break}}function findTrace(){var matcher=(new RegExp("(?:^|; )("+encodeURIComponent(name)+")\x3d([^;]*)")).exec(document.cookie);if(matcher)return atmosphere.util.parseJSON(decodeURIComponent(matcher[2]))}trace=findTrace();if(!trace||atmosphere.util.now()-trace.ts>1E3)return;connector=connectors.storage()||connectors.windowref();if(!connector)return;return{open:function(){var parentOpened;
_traceTimer=setInterval(function(){var oldTrace=trace;trace=findTrace();if(!trace||oldTrace.ts===trace.ts)listener(atmosphere.util.stringifyJSON({target:"c",type:"close",data:{reason:"error",heir:oldTrace.heir}}))},1E3);parentOpened=connector.init();if(parentOpened)setTimeout(function(){_open("opening","local",request)},50);return parentOpened},send:function(event){connector.signal("send",event)},localSend:function(event){connector.signal("localSend",atmosphere.util.stringifyJSON({id:guid,event:event}))},
close:function(){if(!_abortingConnection){clearInterval(_traceTimer);connector.signal("close");connector.close()}}}}function share(){var storageService,name="atmosphere-"+_request.url,servers={storage:function(){function onstorage(event){if(event.key===name&&event.newValue)listener(event.newValue)}if(!atmosphere.util.storage)return;var storage=window.localStorage;return{init:function(){atmosphere.util.on(window,"storage",onstorage)},signal:function(type,data){storage.setItem(name,atmosphere.util.stringifyJSON({target:"c",
type:type,data:data}))},get:function(key){return atmosphere.util.parseJSON(storage.getItem(name+"-"+key))},set:function(key,value){storage.setItem(name+"-"+key,atmosphere.util.stringifyJSON(value))},close:function(){atmosphere.util.off(window,"storage",onstorage);storage.removeItem(name);storage.removeItem(name+"-opened");storage.removeItem(name+"-children")}}},windowref:function(){var neim=name.replace(/\W/g,""),container=document.getElementById(neim),win;if(!container){container=document.createElement("div");
container.id=neim;container.style.display="none";container.innerHTML='\x3ciframe name\x3d"'+neim+'" /\x3e';document.body.appendChild(container)}win=container.firstChild.contentWindow;return{init:function(){win.callbacks=[listener];win.fire=function(string){var i;for(i=0;i<win.callbacks.length;i++)win.callbacks[i](string)}},signal:function(type,data){if(!win.closed&&win.fire)win.fire(atmosphere.util.stringifyJSON({target:"c",type:type,data:data}))},get:function(key){return!win.closed?win[key]:null},
set:function(key,value){if(!win.closed)win[key]=value},close:function(){}}}};function listener(string){var command=atmosphere.util.parseJSON(string),data=command.data;if(command.target==="p")switch(command.type){case "send":_push(data);break;case "localSend":_localMessage(data);break;case "close":_close();break}}_localSocketF=function propagateMessageEvent(context){storageService.signal("message",context)};function leaveTrace(){document.cookie=_sharingKey+"\x3d"+encodeURIComponent(atmosphere.util.stringifyJSON({ts:atmosphere.util.now()+
1,heir:(storageService.get("children")||[])[0]}))+"; path\x3d/"}storageService=servers.storage()||servers.windowref();storageService.init();if(_canLog("debug"))atmosphere.util.debug("Installed StorageService "+storageService);storageService.set("children",[]);if(storageService.get("opened")!=null&&!storageService.get("opened"))storageService.set("opened",false);_sharingKey=encodeURIComponent(name);leaveTrace();_traceTimer=setInterval(leaveTrace,1E3);_storageService=storageService}function _open(state,
transport,request){if(_request.shared&&transport!=="local")share();if(_storageService!=null)_storageService.set("opened",true);request.close=function(){_close()};if(_requestCount>0&&state==="re-connecting"){request.isReopen=true;_tryingToReconnect(_response)}else if(_response.error==null){_response.request=request;var prevState=_response.state;_response.state=state;var prevTransport=_response.transport;_response.transport=transport;var _body=_response.responseBody;_invokeCallback();_response.responseBody=
_body;_response.state=prevState;_response.transport=prevTransport}}function _jsonp(request){request.transport="jsonp";var rq=_request,script;if(request!=null&&typeof request!=="undefined")rq=request;_jqxhr={open:function(){var callback="atmosphere"+ ++guid;function _reconnectOnFailure(){rq.lastIndex=0;if(rq.openId)clearTimeout(rq.openId);if(rq.heartbeatTimer)clearTimeout(rq.heartbeatTimer);if(rq.reconnect&&_requestCount++<rq.maxReconnectOnClose){_open("re-connecting",rq.transport,rq);_reconnect(_jqxhr,
rq,request.reconnectInterval);rq.openId=setTimeout(function(){_triggerOpen(rq)},rq.reconnectInterval+1E3)}else _onError(0,"maxReconnectOnClose reached")}function poll(){var url=rq.url;if(rq.dispatchUrl!=null)url+=rq.dispatchUrl;var data=rq.data;if(rq.attachHeadersAsQueryString){url=_attachHeaders(rq);if(data!=="")url+="\x26X-Atmosphere-Post-Body\x3d"+encodeURIComponent(data);data=""}var head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;script=document.createElement("script");
script.src=url+"\x26jsonpTransport\x3d"+callback;script.clean=function(){script.clean=script.onerror=script.onload=script.onreadystatechange=null;if(script.parentNode)script.parentNode.removeChild(script);if(++request.scriptCount===2){request.scriptCount=1;_reconnectOnFailure()}};script.onload=script.onreadystatechange=function(){_debug("jsonp.onload");if(!script.readyState||/loaded|complete/.test(script.readyState))script.clean()};script.onerror=function(){_debug("jsonp.onerror");request.scriptCount=
1;script.clean()};head.insertBefore(script,head.firstChild)}window[callback]=function(msg){_debug("jsonp.window");request.scriptCount=0;if(rq.reconnect&&rq.maxRequest===-1||rq.requestCount++<rq.maxRequest){if(!rq.executeCallbackBeforeReconnect)_reconnect(_jqxhr,rq,rq.pollingInterval);if(msg!=null&&typeof msg!=="string")try{msg=msg.message}catch(err){}var skipCallbackInvocation=_trackMessageSize(msg,rq,_response);if(!skipCallbackInvocation)_prepareCallback(_response.responseBody,"messageReceived",
200,rq.transport);if(rq.executeCallbackBeforeReconnect)_reconnect(_jqxhr,rq,rq.pollingInterval);_timeout(rq)}else{atmosphere.util.log(_request.logLevel,["JSONP reconnect maximum try reached "+_request.requestCount]);_onError(0,"maxRequest reached")}};setTimeout(function(){poll()},50)},abort:function(){if(script&&script.clean)script.clean()}};_jqxhr.open()}function _getWebSocket(location){if(_request.webSocketImpl!=null)return _request.webSocketImpl;else if(window.WebSocket)return new WebSocket(location);
else return new MozWebSocket(location)}function _buildWebSocketUrl(){return _attachHeaders(_request,atmosphere.util.getAbsoluteURL(_request.webSocketUrl||_request.url)).replace(/^http/,"ws")}function _buildSSEUrl(){var url=_attachHeaders(_request);return url}function _executeSSE(sseOpened){_response.transport="sse";var location=_buildSSEUrl();if(_canLog("debug")){atmosphere.util.debug("Invoking executeSSE");atmosphere.util.debug("Using URL: "+location)}if(sseOpened&&!_request.reconnect){if(_sse!=
null)_clearState();return}try{_sse=new EventSource(location,{withCredentials:_request.withCredentials})}catch(e){_onError(0,e);_reconnectWithFallbackTransport("SSE failed. Downgrading to fallback transport and resending");return}if(_request.connectTimeout>0)_request.id=setTimeout(function(){if(!sseOpened)_clearState()},_request.connectTimeout);_sse.onopen=function(event){_debug("sse.onopen");_timeout(_request);if(_canLog("debug"))atmosphere.util.debug("SSE successfully opened");if(!_request.enableProtocol)if(!sseOpened)_open("opening",
"sse",_request);else _open("re-opening","sse",_request);else if(_request.isReopen){_request.isReopen=false;_open("re-opening",_request.transport,_request)}sseOpened=true;if(_request.method==="POST"){_response.state="messageReceived";_sse.send(_request.data)}};_sse.onmessage=function(message){_debug("sse.onmessage");_timeout(_request);if(!_request.enableXDR&&window.location.host&&message.origin&&message.origin!==window.location.protocol+"//"+window.location.host){atmosphere.util.log(_request.logLevel,
["Origin was not "+window.location.protocol+"//"+window.location.host]);return}_response.state="messageReceived";_response.status=200;message=message.data;var skipCallbackInvocation=_trackMessageSize(message,_request,_response);if(!skipCallbackInvocation){_invokeCallback();_response.responseBody="";_response.messages=[]}};_sse.onerror=function(message){_debug("sse.onerror");clearTimeout(_request.id);if(_request.heartbeatTimer)clearTimeout(_request.heartbeatTimer);if(_response.closedByClientTimeout)return;
_invokeClose(sseOpened);_clearState();if(_abortingConnection)atmosphere.util.log(_request.logLevel,["SSE closed normally"]);else if(!sseOpened)_reconnectWithFallbackTransport("SSE failed. Downgrading to fallback transport and resending");else if(_request.reconnect&&_response.transport==="sse")if(_requestCount++<_request.maxReconnectOnClose){_open("re-connecting",_request.transport,_request);if(_request.reconnectInterval>0)_request.reconnectId=setTimeout(function(){_executeSSE(true)},_request.reconnectInterval);
else _executeSSE(true);_response.responseBody="";_response.messages=[]}else{atmosphere.util.log(_request.logLevel,["SSE reconnect maximum try reached "+_requestCount]);_onError(0,"maxReconnectOnClose reached")}}}function _executeWebSocket(webSocketOpened){_response.transport="websocket";var location=_buildWebSocketUrl(_request.url);if(_canLog("debug"))atmosphere.util.debug("Invoking executeWebSocket, using URL: "+location);if(webSocketOpened&&!_request.reconnect){if(_websocket!=null)_clearState();
return}_websocket=_getWebSocket(location);if(_request.webSocketBinaryType!=null)_websocket.binaryType=_request.webSocketBinaryType;if(_request.connectTimeout>0)_request.id=setTimeout(function(){if(!webSocketOpened){var _message={code:1002,reason:"",wasClean:false};_websocket.onclose(_message);try{_clearState()}catch(e){}return}},_request.connectTimeout);_websocket.onopen=function(message){_debug("websocket.onopen");_timeout(_request);offline=false;if(_canLog("debug"))atmosphere.util.debug("Websocket successfully opened");
var reopening=webSocketOpened;if(_websocket!=null)_websocket.canSendMessage=true;if(!_request.enableProtocol){webSocketOpened=true;if(reopening)_open("re-opening","websocket",_request);else _open("opening","websocket",_request)}if(_websocket!=null)if(_request.method==="POST"){_response.state="messageReceived";_websocket.send(_request.data)}};_websocket.onmessage=function(message){_debug("websocket.onmessage");_timeout(_request);if(_request.enableProtocol)webSocketOpened=true;_response.state="messageReceived";
_response.status=200;message=message.data;var isString=typeof message==="string";if(isString){var skipCallbackInvocation=_trackMessageSize(message,_request,_response);if(!skipCallbackInvocation){_invokeCallback();_response.responseBody="";_response.messages=[]}}else{message=_handleProtocol(_request,message);if(message==="")return;_response.responseBody=message;_invokeCallback();_response.responseBody=null}};_websocket.onerror=function(message){_debug("websocket.onerror");clearTimeout(_request.id);
if(_request.heartbeatTimer)clearTimeout(_request.heartbeatTimer);if(++_request.curWebsocketErrorRetries<_request.maxWebsocketErrorRetries&&_request.fallbackTransport!=="websocket")_reconnectWithFallbackTransport("Failed to connect via Websocket. Downgrading to "+_request.fallbackTransport+" and resending")};_websocket.onclose=function(message){_debug("websocket.onclose");clearTimeout(_request.id);if(_response.state==="closed")return;var reason=message.reason;if(reason==="")switch(message.code){case 1E3:reason=
"Normal closure; the connection successfully completed whatever purpose for which it was created.";break;case 1001:reason="The endpoint is going away, either because of a server failure or because the "+"browser is navigating away from the page that opened the connection.";break;case 1002:reason="The endpoint is terminating the connection due to a protocol error.";break;case 1003:reason="The connection is being terminated because the endpoint received data of a type it "+"cannot accept (for example, a text-only endpoint received binary data).";
break;case 1004:reason="The endpoint is terminating the connection because a data frame was received that is too large.";break;case 1005:reason="Unknown: no status code was provided even though one was expected.";break;case 1006:reason="Connection was closed abnormally (that is, with no close frame being sent).";break}if(_canLog("warn"))atmosphere.util.warn("Websocket closed, reason: "+reason+" - wasClean: "+message.wasClean);if(_response.closedByClientTimeout||_request.handleOnlineOffline&&offline){if(_request.reconnectId){clearTimeout(_request.reconnectId);
delete _request.reconnectId}return}_invokeClose(webSocketOpened);_response.state="closed";if(_abortingConnection)atmosphere.util.log(_request.logLevel,["Websocket closed normally"]);else if(!webSocketOpened&&_request.fallbackTransport!=="websocket")_reconnectWithFallbackTransport("Websocket failed on first connection attempt. Downgrading to "+_request.fallbackTransport+" and resending");else if(_request.reconnect&&_response.transport==="websocket"){_clearState();if(_requestCount++<_request.maxReconnectOnClose){_open("re-connecting",
_request.transport,_request);if(_request.reconnectInterval>0)_request.reconnectId=setTimeout(function(){_response.responseBody="";_response.messages=[];_executeWebSocket(true)},_request.reconnectInterval);else{_response.responseBody="";_response.messages=[];_executeWebSocket(true)}}else{atmosphere.util.log(_request.logLevel,["Websocket reconnect maximum try reached "+_requestCount]);if(_canLog("warn"))atmosphere.util.warn("Websocket error, reason: "+message.reason);_onError(0,"maxReconnectOnClose reached")}}};
var ua=navigator.userAgent.toLowerCase();var isAndroid=ua.indexOf("android")>-1;if(isAndroid&&_websocket.url===undefined)_websocket.onclose({reason:"Android 4.1 does not support websockets.",wasClean:false})}function _handleProtocol(request,message){var nMessage=message;if(request.transport==="polling")return nMessage;if(request.enableProtocol&&request.firstMessage&&atmosphere.util.trim(message).length!==0){var pos=request.trackMessageLength?1:0;var messages=message.split(request.messageDelimiter);
if(messages.length<=pos+1)return nMessage;request.firstMessage=false;request.uuid=atmosphere.util.trim(messages[pos]);if(messages.length<=pos+2)atmosphere.util.log("error",["Protocol data not sent by the server. "+"If you enable protocol on client side, be sure to install JavascriptProtocol interceptor on server side."+"Also note that atmosphere-runtime 2.2+ should be used."]);_heartbeatInterval=parseInt(atmosphere.util.trim(messages[pos+1]),10);_heartbeatPadding=messages[pos+2];if(request.transport!==
"long-polling")_triggerOpen(request);uuid=request.uuid;nMessage="";pos=request.trackMessageLength?4:3;if(messages.length>pos+1)for(var i=pos;i<messages.length;i++){nMessage+=messages[i];if(i+1!==messages.length)nMessage+=request.messageDelimiter}if(request.ackInterval!==0)setTimeout(function(){_push("...ACK...")},request.ackInterval)}else if(request.enableProtocol&&request.firstMessage&&atmosphere.util.browser.msie&&+atmosphere.util.browser.version.split(".")[0]<10)atmosphere.util.log(_request.logLevel,
["Receiving unexpected data from IE"]);else _triggerOpen(request);return nMessage}function _timeout(_request){clearTimeout(_request.id);if(_request.timeout>0&&_request.transport!=="polling")_request.id=setTimeout(function(){_onClientTimeout(_request);_disconnect();_clearState()},_request.timeout)}function _onClientTimeout(_request){_response.closedByClientTimeout=true;_response.state="closedByClient";_response.responseBody="";_response.status=408;_response.messages=[];_invokeCallback()}function _onError(code,
reason){_clearState();clearTimeout(_request.id);_response.state="error";_response.reasonPhrase=reason;_response.responseBody="";_response.status=code;_response.messages=[];_invokeCallback()}function _trackMessageSize(message,request,response){message=_handleProtocol(request,message);if(message.length===0)return true;response.responseBody=message;if(request.trackMessageLength){message=response.partialMessage+message;var messages=[];var messageStart=message.indexOf(request.messageDelimiter);if(messageStart!=
-1){while(messageStart!==-1){var str=message.substring(0,messageStart);var messageLength=+str;if(isNaN(messageLength)){response.partialMessage="";throw new Error('message length "'+str+'" is not a number');}messageStart+=request.messageDelimiter.length;if(messageStart+messageLength>message.length)messageStart=-1;else{messages.push(message.substring(messageStart,messageStart+messageLength));message=message.substring(messageStart+messageLength,message.length);messageStart=message.indexOf(request.messageDelimiter)}}response.partialMessage=
message;if(messages.length!==0){response.responseBody=messages.join(request.messageDelimiter);response.messages=messages;return false}else{response.responseBody="";response.messages=[];return true}}}response.responseBody=message;response.messages=[message];return false}function _reconnectWithFallbackTransport(errorMessage){atmosphere.util.log(_request.logLevel,[errorMessage]);if(typeof _request.onTransportFailure!=="undefined")_request.onTransportFailure(errorMessage,_request);else if(typeof atmosphere.util.onTransportFailure!==
"undefined")atmosphere.util.onTransportFailure(errorMessage,_request);var reconnectInterval=_request.connectTimeout===-1?0:_request.connectTimeout;if(_request.reconnect&&_request.transport!=="none"||_request.transport==null){_request.transport=_request.fallbackTransport;_request.method=_request.fallbackMethod;_response.transport=_request.fallbackTransport;_response.state="";_request.fallbackTransport="none";if(reconnectInterval>0)_request.reconnectId=setTimeout(function(){_execute()},reconnectInterval);
else _execute()}else _onError(500,"Unable to reconnect with fallback transport")}function _attachHeaders(request,url){var rq=_request;if(request!=null&&typeof request!=="undefined")rq=request;if(url==null)url=rq.url;if(!rq.attachHeadersAsQueryString)return url;if(url.indexOf("X-Atmosphere-Framework")!==-1)return url;url+=url.indexOf("?")!==-1?"\x26":"?";url+="X-Atmosphere-tracking-id\x3d"+rq.uuid;url+="\x26X-Atmosphere-Framework\x3d"+atmosphere.version;url+="\x26X-Atmosphere-Transport\x3d"+rq.transport;
if(rq.trackMessageLength)url+="\x26X-Atmosphere-TrackMessageSize\x3d"+"true";if(rq.heartbeat!==null&&rq.heartbeat.server!==null)url+="\x26X-Heartbeat-Server\x3d"+rq.heartbeat.server;if(rq.contentType!=="")url+="\x26Content-Type\x3d"+(rq.transport==="websocket"?rq.contentType:encodeURIComponent(rq.contentType));if(rq.enableProtocol)url+="\x26X-atmo-protocol\x3dtrue";atmosphere.util.each(rq.headers,function(name,value){var h=atmosphere.util.isFunction(value)?value.call(this,rq,request,_response):value;
if(h!=null)url+="\x26"+encodeURIComponent(name)+"\x3d"+encodeURIComponent(h)});return url}function _triggerOpen(rq){if(!rq.isOpen){rq.isOpen=true;_open("opening",rq.transport,rq)}else if(rq.isReopen){rq.isReopen=false;_open("re-opening",rq.transport,rq)}else if(_response.state==="messageReceived"&&(rq.transport==="jsonp"||rq.transport==="long-polling"))_openAfterResume(_response);else return;_startHeartbeat(rq)}function _startHeartbeat(rq){if(rq.heartbeatTimer!=null)clearTimeout(rq.heartbeatTimer);
if(!isNaN(_heartbeatInterval)&&_heartbeatInterval>0){var _pushHeartbeat=function(){if(_canLog("debug"))atmosphere.util.debug("Sending heartbeat");_push(_heartbeatPadding);rq.heartbeatTimer=setTimeout(_pushHeartbeat,_heartbeatInterval)};rq.heartbeatTimer=setTimeout(_pushHeartbeat,_heartbeatInterval)}}function _executeRequest(request){var rq=_request;if(request!=null||typeof request!=="undefined")rq=request;rq.lastIndex=0;rq.readyState=0;if(rq.transport==="jsonp"||rq.enableXDR&&atmosphere.util.checkCORSSupport()){_jsonp(rq);
return}if(atmosphere.util.browser.msie&&+atmosphere.util.browser.version.split(".")[0]<10){if(rq.transport==="streaming"){if(rq.enableXDR&&window.XDomainRequest)_ieXDR(rq);else _ieStreaming(rq);return}if(rq.enableXDR&&window.XDomainRequest){_ieXDR(rq);return}}var reconnectFExec=function(force){rq.lastIndex=0;_requestCount++;if(force||rq.reconnect&&_requestCount<=rq.maxReconnectOnClose){var delay=force?0:request.reconnectInterval;_response.ffTryingReconnect=true;_open("re-connecting",request.transport,
request);_reconnect(ajaxRequest,rq,delay)}else _onError(0,"maxReconnectOnClose reached")};var reconnectF=function(force){if(atmosphere._beforeUnloadState){atmosphere.util.debug(new Date+" Atmosphere: reconnectF: execution delayed due to _beforeUnloadState flag");setTimeout(function(){reconnectFExec(force)},5E3)}else reconnectFExec(force)};var disconnected=function(){_response.errorHandled=true;_clearState();reconnectF(false)};if(rq.force||rq.reconnect&&(rq.maxRequest===-1||rq.requestCount++<rq.maxRequest)){rq.force=
false;var ajaxRequest=atmosphere.util.xhr();ajaxRequest.hasData=false;_doRequest(ajaxRequest,rq,true);if(rq.suspend)_activeRequest=ajaxRequest;if(rq.transport!=="polling"){_response.transport=rq.transport;ajaxRequest.onabort=function(){_debug("ajaxrequest.onabort");_invokeClose(true)};ajaxRequest.onerror=function(){_debug("ajaxrequest.onerror");_response.error=true;_response.ffTryingReconnect=true;try{_response.status=XMLHttpRequest.status}catch(e){_response.status=500}if(!_response.status)_response.status=
500;if(!_response.errorHandled){_clearState();reconnectF(false)}}}ajaxRequest.onreadystatechange=function(){_debug("ajaxRequest.onreadystatechange, new state: "+ajaxRequest.readyState);if(_abortingConnection){_debug("onreadystatechange has been ignored due to _abortingConnection flag");return}_response.error=null;var skipCallbackInvocation=false;var update=false;if(rq.transport==="streaming"&&rq.readyState>2&&ajaxRequest.readyState===4){_clearState();reconnectF(false);return}rq.readyState=ajaxRequest.readyState;
if(rq.transport==="streaming"&&ajaxRequest.readyState>=3)update=true;else if(rq.transport==="long-polling"&&ajaxRequest.readyState===4)update=true;_timeout(_request);if(rq.transport!=="polling"){var status=200;if(ajaxRequest.readyState===4)status=ajaxRequest.status>1E3?0:ajaxRequest.status;if(!rq.reconnectOnServerError&&(status>=300&&status<600)){_onError(status,ajaxRequest.statusText);return}if(status>=300||status===0){disconnected();return}if((!rq.enableProtocol||!request.firstMessage)&&ajaxRequest.readyState===
2)if(atmosphere.util.browser.mozilla&&_response.ffTryingReconnect){_response.ffTryingReconnect=false;setTimeout(function(){if(!_response.ffTryingReconnect)_triggerOpen(rq)},500)}else _triggerOpen(rq)}else if(ajaxRequest.readyState===4)update=true;if(update){var responseText=ajaxRequest.responseText;_response.errorHandled=false;if(rq.transport==="long-polling"&&atmosphere.util.trim(responseText).length===0){if(!ajaxRequest.hasData)reconnectF(true);else ajaxRequest.hasData=false;return}ajaxRequest.hasData=
true;_readHeaders(ajaxRequest,_request);if(rq.transport==="streaming")if(!atmosphere.util.browser.opera){var message=responseText.substring(rq.lastIndex,responseText.length);skipCallbackInvocation=_trackMessageSize(message,rq,_response);rq.lastIndex=responseText.length;if(skipCallbackInvocation)return}else atmosphere.util.iterate(function(){if(_response.status!==500&&ajaxRequest.responseText.length>rq.lastIndex){try{_response.status=ajaxRequest.status;_response.headers=atmosphere.util.parseHeaders(ajaxRequest.getAllResponseHeaders());
_readHeaders(ajaxRequest,_request)}catch(e){_response.status=404}_timeout(_request);_response.state="messageReceived";var message=ajaxRequest.responseText.substring(rq.lastIndex);rq.lastIndex=ajaxRequest.responseText.length;skipCallbackInvocation=_trackMessageSize(message,rq,_response);if(!skipCallbackInvocation)_invokeCallback();if(_verifyStreamingLength(ajaxRequest,rq)){_reconnectOnMaxStreamingLength(ajaxRequest,rq);return}}else if(_response.status>400){rq.lastIndex=ajaxRequest.responseText.length;
return false}},0);else skipCallbackInvocation=_trackMessageSize(responseText,rq,_response);var closeStream=_verifyStreamingLength(ajaxRequest,rq);try{_response.status=ajaxRequest.status;_response.headers=atmosphere.util.parseHeaders(ajaxRequest.getAllResponseHeaders());_readHeaders(ajaxRequest,rq)}catch(e){_response.status=404}if(rq.suspend)_response.state=_response.status===0?"closed":"messageReceived";else _response.state="messagePublished";var isAllowedToReconnect=!closeStream&&request.transport!==
"streaming"&&request.transport!=="polling";if(isAllowedToReconnect&&!rq.executeCallbackBeforeReconnect)_reconnect(ajaxRequest,rq,rq.pollingInterval);if(_response.responseBody.length!==0&&!skipCallbackInvocation)_invokeCallback();if(isAllowedToReconnect&&rq.executeCallbackBeforeReconnect)_reconnect(ajaxRequest,rq,rq.pollingInterval);if(closeStream)_reconnectOnMaxStreamingLength(ajaxRequest,rq)}};try{ajaxRequest.send(rq.data);_subscribed=true}catch(e){atmosphere.util.log(rq.logLevel,["Unable to connect to "+
rq.url]);_onError(0,e)}}else{if(rq.logLevel==="debug")atmosphere.util.log(rq.logLevel,["Max re-connection reached."]);_onError(0,"maxRequest reached")}}function _reconnectOnMaxStreamingLength(ajaxRequest,rq){_response.messages=[];rq.isReopen=true;_close();_abortingConnection=false;_reconnect(ajaxRequest,rq,500)}function _doRequest(ajaxRequest,request,create){var url=request.url;if(request.dispatchUrl!=null&&request.method==="POST")url+=request.dispatchUrl;url=_attachHeaders(request,url);url=atmosphere.util.prepareURL(url);
if(create){ajaxRequest.open(request.method,url,request.async);if(request.connectTimeout>0)request.id=setTimeout(function(){if(request.requestCount===0){_clearState();_prepareCallback("Connect timeout","closed",200,request.transport)}},request.connectTimeout)}if(_request.withCredentials&&_request.transport!=="websocket")if("withCredentials"in ajaxRequest)ajaxRequest.withCredentials=true;if(!_request.dropHeaders){ajaxRequest.setRequestHeader("X-Atmosphere-Framework",atmosphere.version);ajaxRequest.setRequestHeader("X-Atmosphere-Transport",
request.transport);if(request.heartbeat!==null&&request.heartbeat.server!==null)ajaxRequest.setRequestHeader("X-Heartbeat-Server",ajaxRequest.heartbeat.server);if(request.trackMessageLength)ajaxRequest.setRequestHeader("X-Atmosphere-TrackMessageSize","true");ajaxRequest.setRequestHeader("X-Atmosphere-tracking-id",request.uuid);atmosphere.util.each(request.headers,function(name,value){var h=atmosphere.util.isFunction(value)?value.call(this,ajaxRequest,request,create,_response):value;if(h!=null)ajaxRequest.setRequestHeader(name,
h)})}if(request.contentType!=="")ajaxRequest.setRequestHeader("Content-Type",request.contentType)}function _reconnect(ajaxRequest,request,delay){if(_response.closedByClientTimeout)return;if(request.reconnect||request.suspend&&_subscribed){var status=0;if(ajaxRequest&&ajaxRequest.readyState>1)status=ajaxRequest.status>1E3?0:ajaxRequest.status;_response.status=status===0?204:status;_response.reason=status===0?"Server resumed the connection or down.":"OK";clearTimeout(request.id);if(request.reconnectId){clearTimeout(request.reconnectId);
delete request.reconnectId}if(delay>0)_request.reconnectId=setTimeout(function(){_executeRequest(request)},delay);else _executeRequest(request)}}function _tryingToReconnect(response){response.state="re-connecting";_invokeFunction(response)}function _openAfterResume(response){response.state="openAfterResume";_invokeFunction(response);response.state="messageReceived"}function _ieXDR(request){if(request.transport!=="polling"){_ieStream=_configureXDR(request);_ieStream.open()}else _configureXDR(request).open()}
function _configureXDR(request){var rq=_request;if(request!=null&&typeof request!=="undefined")rq=request;var transport=rq.transport;var lastIndex=0;var xdr=new window.XDomainRequest;var reconnect=function(){if(rq.transport==="long-polling"&&(rq.reconnect&&(rq.maxRequest===-1||rq.requestCount++<rq.maxRequest))){xdr.status=200;_ieXDR(rq)}};var rewriteURL=rq.rewriteURL||function(url){var match=/(?:^|;\s*)(JSESSIONID|PHPSESSID)=([^;]*)/.exec(document.cookie);switch(match&&match[1]){case "JSESSIONID":return url.replace(/;jsessionid=[^\?]*|(\?)|$/,
";jsessionid\x3d"+match[2]+"$1");case "PHPSESSID":return url.replace(/\?PHPSESSID=[^&]*&?|\?|$/,"?PHPSESSID\x3d"+match[2]+"\x26").replace(/&$/,"")}return url};xdr.onprogress=function(){handle(xdr)};xdr.onerror=function(){if(rq.transport!=="polling"){_clearState();if(_requestCount++<rq.maxReconnectOnClose)if(rq.reconnectInterval>0)rq.reconnectId=setTimeout(function(){_open("re-connecting",request.transport,request);_ieXDR(rq)},rq.reconnectInterval);else{_open("re-connecting",request.transport,request);
_ieXDR(rq)}else _onError(0,"maxReconnectOnClose reached")}};xdr.onload=function(){};var handle=function(xdr){clearTimeout(rq.id);var message=xdr.responseText;message=message.substring(lastIndex);lastIndex+=message.length;if(transport!=="polling"){_timeout(rq);var skipCallbackInvocation=_trackMessageSize(message,rq,_response);if(transport==="long-polling"&&atmosphere.util.trim(message).length===0)return;if(rq.executeCallbackBeforeReconnect)reconnect();if(!skipCallbackInvocation)_prepareCallback(_response.responseBody,
"messageReceived",200,transport);if(!rq.executeCallbackBeforeReconnect)reconnect()}};return{open:function(){var url=rq.url;if(rq.dispatchUrl!=null)url+=rq.dispatchUrl;url=_attachHeaders(rq,url);xdr.open(rq.method,rewriteURL(url));if(rq.method==="GET")xdr.send();else xdr.send(rq.data);if(rq.connectTimeout>0)rq.id=setTimeout(function(){if(rq.requestCount===0){_clearState();_prepareCallback("Connect timeout","closed",200,rq.transport)}},rq.connectTimeout)},close:function(){xdr.abort()}}}function _ieStreaming(request){_ieStream=
_configureIE(request);_ieStream.open()}function _configureIE(request){var rq=_request;if(request!=null&&typeof request!=="undefined")rq=request;var stop;var doc=new window.ActiveXObject("htmlfile");doc.open();doc.close();var url=rq.url;if(rq.dispatchUrl!=null)url+=rq.dispatchUrl;if(rq.transport!=="polling")_response.transport=rq.transport;return{open:function(){var iframe=doc.createElement("iframe");url=_attachHeaders(rq);if(rq.data!=="")url+="\x26X-Atmosphere-Post-Body\x3d"+encodeURIComponent(rq.data);
url=atmosphere.util.prepareURL(url);iframe.src=url;doc.body.appendChild(iframe);var cdoc=iframe.contentDocument||iframe.contentWindow.document;stop=atmosphere.util.iterate(function(){try{if(!cdoc.firstChild)return;var res=cdoc.body?cdoc.body.lastChild:cdoc;if(res.omgThisIsBroken);var readResponse=function(){var clone=res.cloneNode(true);clone.appendChild(cdoc.createTextNode("."));var text=clone.innerText;text=text.substring(0,text.length-1);return text};if(!cdoc.body||!cdoc.body.firstChild||cdoc.body.firstChild.nodeName.toLowerCase()!==
"pre"){var head=cdoc.head||cdoc.getElementsByTagName("head")[0]||cdoc.documentElement||cdoc;var script=cdoc.createElement("script");script.text="document.write('\x3cplaintext\x3e')";head.insertBefore(script,head.firstChild);head.removeChild(script);res=cdoc.body.lastChild}if(rq.closed)rq.isReopen=true;stop=atmosphere.util.iterate(function(){var text=readResponse();if(text.length>rq.lastIndex){_timeout(_request);_response.status=200;_response.error=null;res.innerText="";var skipCallbackInvocation=
_trackMessageSize(text,rq,_response);if(skipCallbackInvocation)return"";_prepareCallback(_response.responseBody,"messageReceived",200,rq.transport)}rq.lastIndex=0;if(cdoc.readyState==="complete"){_invokeClose(true);_open("re-connecting",rq.transport,rq);if(rq.reconnectInterval>0)rq.reconnectId=setTimeout(function(){_ieStreaming(rq)},rq.reconnectInterval);else _ieStreaming(rq);return false}},null);return false}catch(err){_response.error=true;_open("re-connecting",rq.transport,rq);if(_requestCount++<
rq.maxReconnectOnClose)if(rq.reconnectInterval>0)rq.reconnectId=setTimeout(function(){_ieStreaming(rq)},rq.reconnectInterval);else _ieStreaming(rq);else _onError(0,"maxReconnectOnClose reached");doc.execCommand("Stop");doc.close();return false}})},close:function(){if(stop)stop();doc.execCommand("Stop");_invokeClose(true)}}}function _push(message){if(_localStorageService!=null)_pushLocal(message);else if(_activeRequest!=null||_sse!=null)_pushAjaxMessage(message);else if(_ieStream!=null)_pushIE(message);
else if(_jqxhr!=null)_pushJsonp(message);else if(_websocket!=null)_pushWebSocket(message);else{_onError(0,"No suspended connection available");atmosphere.util.error("No suspended connection available. Make sure atmosphere.subscribe has been called and request.onOpen invoked before trying to push data")}}function _pushOnClose(message,rq){if(!rq)rq=_getPushRequest(message);rq.transport="polling";rq.method="GET";rq.withCredentials=false;rq.reconnect=false;rq.force=true;rq.suspend=false;rq.timeout=1E3;
_executeRequest(rq)}function _pushLocal(message){_localStorageService.send(message)}function _intraPush(message){if(message.length===0)return;try{if(_localStorageService)_localStorageService.localSend(message);else if(_storageService)_storageService.signal("localMessage",atmosphere.util.stringifyJSON({id:guid,event:message}))}catch(err){atmosphere.util.error(err)}}function _pushAjaxMessage(message){var rq=_getPushRequest(message);_executeRequest(rq)}function _pushIE(message){if(_request.enableXDR&&
atmosphere.util.checkCORSSupport()){var rq=_getPushRequest(message);rq.reconnect=false;_jsonp(rq)}else _pushAjaxMessage(message)}function _pushJsonp(message){_pushAjaxMessage(message)}function _getStringMessage(message){var msg=message;if(typeof msg==="object")msg=message.data;return msg}function _getPushRequest(message){var msg=_getStringMessage(message);var rq={connected:false,timeout:6E4,method:"POST",url:_request.url,contentType:_request.contentType,headers:_request.headers,reconnect:true,callback:null,
data:msg,suspend:false,maxRequest:-1,logLevel:"info",requestCount:0,withCredentials:_request.withCredentials,async:_request.async,transport:"polling",isOpen:true,attachHeadersAsQueryString:true,enableXDR:_request.enableXDR,uuid:_request.uuid,dispatchUrl:_request.dispatchUrl,enableProtocol:false,messageDelimiter:"|",trackMessageLength:_request.trackMessageLength,maxReconnectOnClose:_request.maxReconnectOnClose,heartbeatTimer:_request.heartbeatTimer,heartbeat:_request.heartbeat};if(typeof message===
"object")rq=atmosphere.util.extend(rq,message);return rq}function _pushWebSocket(message){var msg=atmosphere.util.isBinary(message)?message:_getStringMessage(message);var data;try{if(_request.dispatchUrl!=null)data=_request.webSocketPathDelimiter+_request.dispatchUrl+_request.webSocketPathDelimiter+msg;else data=msg;if(!_websocket.canSendMessage){atmosphere.util.error("WebSocket not connected.");return}_websocket.send(data)}catch(e){_websocket.onclose=function(message){};_clearState();_reconnectWithFallbackTransport("Websocket failed. Downgrading to "+
_request.fallbackTransport+" and resending "+message);_pushAjaxMessage(message)}}function _localMessage(message){var m=atmosphere.util.parseJSON(message);if(m.id!==guid)if(typeof _request.onLocalMessage!=="undefined")_request.onLocalMessage(m.event);else if(typeof atmosphere.util.onLocalMessage!=="undefined")atmosphere.util.onLocalMessage(m.event)}function _prepareCallback(messageBody,state,errorCode,transport){_response.responseBody=messageBody;_response.transport=transport;_response.status=errorCode;
_response.state=state;_invokeCallback()}function _readHeaders(xdr,request){if(!request.readResponsesHeaders){if(!request.enableProtocol)request.uuid=guid}else try{var tempUUID=xdr.getResponseHeader("X-Atmosphere-tracking-id");if(tempUUID&&tempUUID!=null)request.uuid=tempUUID.split(" ").pop()}catch(e){}}function _invokeFunction(response){_f(response,_request);_f(response,atmosphere.util)}function _f(response,f){switch(response.state){case "messageReceived":_debug("Firing onMessage");_requestCount=
0;if(typeof f.onMessage!=="undefined")f.onMessage(response);if(typeof f.onmessage!=="undefined")f.onmessage(response);break;case "error":var dbgReasonPhrase=typeof response.reasonPhrase!="undefined"?response.reasonPhrase:"n/a";_debug("Firing onError, reasonPhrase: "+dbgReasonPhrase);if(typeof f.onError!=="undefined")f.onError(response);if(typeof f.onerror!=="undefined")f.onerror(response);break;case "opening":delete _request.closed;_debug("Firing onOpen");if(typeof f.onOpen!=="undefined")f.onOpen(response);
if(typeof f.onopen!=="undefined")f.onopen(response);break;case "messagePublished":_debug("Firing messagePublished");if(typeof f.onMessagePublished!=="undefined")f.onMessagePublished(response);break;case "re-connecting":_debug("Firing onReconnect");if(typeof f.onReconnect!=="undefined")f.onReconnect(_request,response);break;case "closedByClient":_debug("Firing closedByClient");if(typeof f.onClientTimeout!=="undefined")f.onClientTimeout(_request);break;case "re-opening":delete _request.closed;_debug("Firing onReopen");
if(typeof f.onReopen!=="undefined")f.onReopen(_request,response);break;case "fail-to-reconnect":_debug("Firing onFailureToReconnect");if(typeof f.onFailureToReconnect!=="undefined")f.onFailureToReconnect(_request,response);break;case "unsubscribe":case "closed":var closed=typeof _request.closed!=="undefined"?_request.closed:false;if(!closed){_debug("Firing onClose ("+response.state+" case)");if(typeof f.onClose!=="undefined")f.onClose(response);if(typeof f.onclose!=="undefined")f.onclose(response)}else _debug("Request already closed, not firing onClose ("+
response.state+" case)");_request.closed=true;break;case "openAfterResume":if(typeof f.onOpenAfterResume!=="undefined")f.onOpenAfterResume(_request);break}}function _invokeClose(wasOpen){if(_response.state!=="closed"){_response.state="closed";_response.responseBody="";_response.messages=[];_response.status=!wasOpen?501:200;_invokeCallback()}}function _invokeCallback(){var call=function(index,func){func(_response)};if(_localStorageService==null&&_localSocketF!=null)_localSocketF(_response.responseBody);
_request.reconnect=_request.mrequest;var isString=typeof _response.responseBody==="string";var messages=isString&&_request.trackMessageLength?_response.messages.length>0?_response.messages:[""]:new Array(_response.responseBody);for(var i=0;i<messages.length;i++){if(messages.length>1&&messages[i].length===0)continue;_response.responseBody=isString?atmosphere.util.trim(messages[i]):messages[i];if(_localStorageService==null&&_localSocketF!=null)_localSocketF(_response.responseBody);if((_response.responseBody.length===
0||isString&&_heartbeatPadding===_response.responseBody)&&_response.state==="messageReceived")continue;_invokeFunction(_response);if(callbacks.length>0){if(_canLog("debug"))atmosphere.util.debug("Invoking "+callbacks.length+" global callbacks: "+_response.state);try{atmosphere.util.each(callbacks,call)}catch(e){atmosphere.util.log(_request.logLevel,["Callback exception"+e])}}if(typeof _request.callback==="function"){if(_canLog("debug"))atmosphere.util.debug("Invoking request callbacks");try{_request.callback(_response)}catch(e){atmosphere.util.log(_request.logLevel,
["Callback exception"+e])}}}}this.subscribe=function(options){_subscribe(options);_execute()};this.execute=function(){_execute()};this.close=function(){_close()};this.disconnect=function(){_disconnect()};this.getUrl=function(){return _request.url};this.push=function(message,dispatchUrl){if(dispatchUrl!=null){var originalDispatchUrl=_request.dispatchUrl;_request.dispatchUrl=dispatchUrl;_push(message);_request.dispatchUrl=originalDispatchUrl}else _push(message)};this.getUUID=function(){return _request.uuid};
this.pushLocal=function(message){_intraPush(message)};this.enableProtocol=function(message){return _request.enableProtocol};this.init=function(){_init()};this.request=_request;this.response=_response}};atmosphere.subscribe=function(url,callback,request){if(typeof callback==="function")atmosphere.addCallback(callback);if(typeof url!=="string")request=url;else request.url=url;uuid=typeof request!=="undefined"&&typeof request.uuid!=="undefined"?request.uuid:0;var rq=new atmosphere.AtmosphereRequest(request);
rq.execute();requests[requests.length]=rq;return rq};atmosphere.unsubscribe=function(){if(requests.length>0){var requestsClone=[].concat(requests);for(var i=0;i<requestsClone.length;i++){var rq=requestsClone[i];rq.close();clearTimeout(rq.response.request.id);if(rq.heartbeatTimer)clearTimeout(rq.heartbeatTimer)}}requests=[];callbacks=[]};atmosphere.unsubscribeUrl=function(url){var idx=-1;if(requests.length>0)for(var i=0;i<requests.length;i++){var rq=requests[i];if(rq.getUrl()===url){rq.close();clearTimeout(rq.response.request.id);
if(rq.heartbeatTimer)clearTimeout(rq.heartbeatTimer);idx=i;break}}if(idx>=0)requests.splice(idx,1)};atmosphere.addCallback=function(func){if(atmosphere.util.inArray(func,callbacks)===-1)callbacks.push(func)};atmosphere.removeCallback=function(func){var index=atmosphere.util.inArray(func,callbacks);if(index!==-1)callbacks.splice(index,1)};atmosphere.util={browser:{},parseHeaders:function(headerString){var match,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,headers={};while(match=rheaders.exec(headerString))headers[match[1]]=
match[2];return headers},now:function(){return(new Date).getTime()},isArray:function(array){return Object.prototype.toString.call(array)==="[object Array]"},inArray:function(elem,array){if(!Array.prototype.indexOf){var len=array.length;for(var i=0;i<len;++i)if(array[i]===elem)return i;return-1}return array.indexOf(elem)},isBinary:function(data){return/^\[object\s(?:Blob|ArrayBuffer|.+Array)\]$/.test(Object.prototype.toString.call(data))},isFunction:function(fn){return Object.prototype.toString.call(fn)===
"[object Function]"},getAbsoluteURL:function(url){if(typeof document.createElement==="undefined")return url;var div=document.createElement("div");div.innerHTML='\x3ca href\x3d"'+url+'"/\x3e';return encodeURI(decodeURI(div.firstChild.href))},prepareURL:function(url){var ts=atmosphere.util.now();var ret=url.replace(/([?&])_=[^&]*/,"$1_\x3d"+ts);return ret+(ret===url?(/\?/.test(url)?"\x26":"?")+"_\x3d"+ts:"")},trim:function(str){if(!String.prototype.trim)return str.toString().replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,
"").replace(/\s+/g," ");else return str.toString().trim()},param:function(params){var prefix,s=[];function add(key,value){value=atmosphere.util.isFunction(value)?value():value==null?"":value;s.push(encodeURIComponent(key)+"\x3d"+encodeURIComponent(value))}function buildParams(prefix,obj){var name;if(atmosphere.util.isArray(obj))atmosphere.util.each(obj,function(i,v){if(/\[\]$/.test(prefix))add(prefix,v);else buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v)});else if(Object.prototype.toString.call(obj)===
"[object Object]")for(name in obj)buildParams(prefix+"["+name+"]",obj[name]);else add(prefix,obj)}for(prefix in params)buildParams(prefix,params[prefix]);return s.join("\x26").replace(/%20/g,"+")},storage:function(){try{return!!(window.localStorage&&window.StorageEvent)}catch(e){return false}},iterate:function(fn,interval){var timeoutId;interval=interval||0;(function loop(){timeoutId=setTimeout(function(){if(fn()===false)return;loop()},interval)})();return function(){clearTimeout(timeoutId)}},each:function(obj,
callback,args){if(!obj)return;var value,i=0,length=obj.length,isArray=atmosphere.util.isArray(obj);if(args)if(isArray)for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false)break}else for(i in obj){value=callback.apply(obj[i],args);if(value===false)break}else if(isArray)for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false)break}else for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false)break}return obj},extend:function(target){var i,options,name;for(i=
1;i<arguments.length;i++)if((options=arguments[i])!=null)for(name in options)target[name]=options[name];return target},on:function(elem,type,fn){if(elem.addEventListener)elem.addEventListener(type,fn,false);else if(elem.attachEvent)elem.attachEvent("on"+type,fn)},off:function(elem,type,fn){if(elem.removeEventListener)elem.removeEventListener(type,fn,false);else if(elem.detachEvent)elem.detachEvent("on"+type,fn)},log:function(level,args){if(window.console){var logger=window.console[level];if(typeof logger===
"function")logger.apply(window.console,args)}},warn:function(){atmosphere.util.log("warn",arguments)},info:function(){atmosphere.util.log("info",arguments)},debug:function(){atmosphere.util.log("debug",arguments)},error:function(){atmosphere.util.log("error",arguments)},xhr:function(){try{return new window.XMLHttpRequest}catch(e1){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e2){}}},parseJSON:function(data){return!data?null:window.JSON&&window.JSON.parse?window.JSON.parse(data):
(new Function("return "+data))()},stringifyJSON:function(value){var escapable=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function quote(string){return'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'}function f(n){return n<10?"0"+n:n}return window.JSON&&
window.JSON.stringify?window.JSON.stringify(value):function str(key,holder){var i,v,len,partial,value=holder[key],type=typeof value;if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key);type=typeof value}switch(type){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":return String(value);case "object":if(!value)return"null";switch(Object.prototype.toString.call(value)){case "[object Date]":return isFinite(value.valueOf())?
'"'+value.getUTCFullYear()+"-"+f(value.getUTCMonth()+1)+"-"+f(value.getUTCDate())+"T"+f(value.getUTCHours())+":"+f(value.getUTCMinutes())+":"+f(value.getUTCSeconds())+"Z"+'"':"null";case "[object Array]":len=value.length;partial=[];for(i=0;i<len;i++)partial.push(str(i,value)||"null");return"["+partial.join(",")+"]";default:partial=[];for(i in value)if(hasOwn.call(value,i)){v=str(i,value);if(v)partial.push(quote(i)+":"+v)}return"{"+partial.join(",")+"}"}}}("",{"":value})},checkCORSSupport:function(){if(atmosphere.util.browser.msie&&
!window.XDomainRequest&&+atmosphere.util.browser.version.split(".")[0]<11)return true;else if(atmosphere.util.browser.opera&&+atmosphere.util.browser.version.split(".")<12)return true;else if(atmosphere.util.trim(navigator.userAgent).slice(0,16)==="KreaTVWebKit/531")return true;else if(atmosphere.util.trim(navigator.userAgent).slice(-7).toLowerCase()==="kreatel")return true;var ua=navigator.userAgent.toLowerCase();var androidVersionMatches=ua.match(/.+android ([0-9]{1,2})/i),majorVersion=parseInt(androidVersionMatches&&
androidVersionMatches[0]||-1,10);if(!isNaN(majorVersion)&&majorVersion>-1&&majorVersion<3)return true;return false}};guid=atmosphere.util.now();(function(){var ua=navigator.userAgent.toLowerCase(),match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||/(trident)(?:.*? rv:([\w.]+)|)/.exec(ua)||ua.indexOf("android")<0&&/version\/(.+) (safari)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];if(match[2]===
"safari"){match[2]=match[1];match[1]="safari"}atmosphere.util.browser[match[1]||""]=true;atmosphere.util.browser.version=match[2]||"0";atmosphere.util.browser.vmajor=atmosphere.util.browser.version.split(".")[0];if(atmosphere.util.browser.trident)atmosphere.util.browser.msie=true;if(atmosphere.util.browser.msie||atmosphere.util.browser.mozilla&&+atmosphere.util.browser.version.split(".")[0]===1)atmosphere.util.storage=false})();atmosphere.callbacks={unload:function(){atmosphere.util.debug(new Date+
" Atmosphere: "+"unload event");atmosphere.unsubscribe()},beforeUnload:function(){atmosphere.util.debug(new Date+" Atmosphere: "+"beforeunload event");atmosphere._beforeUnloadState=true;setTimeout(function(){atmosphere.util.debug(new Date+" Atmosphere: "+"beforeunload event timeout reached. Reset _beforeUnloadState flag");atmosphere._beforeUnloadState=false},5E3)},offline:function(){atmosphere.util.debug(new Date+" Atmosphere: offline event");offline=true;if(requests.length>0){var requestsClone=[].concat(requests);
for(var i=0;i<requestsClone.length;i++){var rq=requestsClone[i];if(rq.request.handleOnlineOffline){rq.close();clearTimeout(rq.response.request.id);if(rq.heartbeatTimer)clearTimeout(rq.heartbeatTimer)}}}},online:function(){atmosphere.util.debug(new Date+" Atmosphere: online event");if(requests.length>0)for(var i=0;i<requests.length;i++)if(requests[i].request.handleOnlineOffline){requests[i].init();requests[i].execute()}offline=false}};atmosphere.bindEvents=function(){atmosphere.util.on(window,"unload",
atmosphere.callbacks.unload);atmosphere.util.on(window,"beforeunload",atmosphere.callbacks.beforeUnload);atmosphere.util.on(window,"offline",atmosphere.callbacks.offline);atmosphere.util.on(window,"online",atmosphere.callbacks.online)};atmosphere.unbindEvents=function(){atmosphere.util.off(window,"unload",atmosphere.callbacks.unload);atmosphere.util.off(window,"beforeunload",atmosphere.callbacks.beforeUnload);atmosphere.util.off(window,"offline",atmosphere.callbacks.offline);atmosphere.util.off(window,
"online",atmosphere.callbacks.online)};atmosphere.bindEvents();return atmosphere});
IOChannel=function(){if(IOChannel.instance)return IOChannel.instance;IOChannel.instance=this;this.signals={};this.socket=null;var IOMessage=function(signal,content){this.signal=signal;this.content=content};this.connectAsync=function(){var request={url:"https://"+window.location.host+"/ajax;jsessionid\x3d"+Swedbank.Navigation.getSessionId(),transport:"websocket",fallbackTransport:"streaming",contentType:"application/json;charset\x3dUTF-8",rewriteURL:true,dropHeaders:true,trackMessageLength:true,timeout:45E3,
reconnectInterval:1E4,connectTimeout:-1,heartbeatTimer:8E3,pollingInterval:3E3,attachHeadersAsQueryString:true};request.onMessage=function(response){var message=JSON.parse(response.responseBody);if(message)IOChannel.instance.call(message.signal,message)};request.onopen=function(response){jQuery(document).on("messageSendEvent",function(event,triggerParam){IOChannel.instance.send("message",triggerParam)});jQuery(document).trigger("communicationChannelReady")};IOChannel.instance.socket=atmosphere.subscribe(request)};
this.on=function(signal,operation){this.signals[signal]=operation};this.call=function(receivedSignal,data){for(var registeredSignal in this.signals)if(receivedSignal===registeredSignal){var func=this.signals[receivedSignal];return func(data)}console.log("Event "+event+" do not have defined function")};this.send=function(signal,content){var json=JSON.stringify(new IOMessage(signal,content));IOChannel.instance.socket.push(json)};this.disconnect=function(webrtc,event){};this.init=function(){this.on("ready",
function(message){});this.on("resume",function(message){});this.on("ping",function(message){});this.on("message",function(message){if(message){var json=jQuery.parseJSON(message.content);if(json)jQuery(document).trigger("messageReceivedEvent",json)}})};this.init()};function initReverseAjax(){(new IOChannel).connectAsync()};
(function($){const pageStartCallback=()=>{renderFormSteps();$('input[type\x3d"file"]').each(function(){let component=this.closest("ui-upload");if(!component)transformFileInput($(this))})};if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",pageStartCallback);UI.whenDOMReady(pageStartCallback)}else Swedbank.PageLoad.onEach(pageStartCallback)})(jQuery);
function stylizeFormSteps($steps){$steps.find("li \x3e ins").remove();jQuery("li",$steps).each(function(i){if(i>0)jQuery("\x3cins/\x3e").width(jQuery(this).position().left-jQuery(this).prev().position().left-jQuery(this).prev().width()/2+jQuery(this).width()/2-36).appendTo(this)});jQuery("li.active",$steps).prev().addClass("passed")}
function transformFileInput($input,customData){if($input.parents(".input-file").length)return;var usesCustomClearBtn=customData&&customData.customClearBtn;var $element=jQuery('\x3cdiv class\x3d"input-file" /\x3e'),$label=jQuery('\x3cspan class\x3d"file-name empty" /\x3e'),$button=jQuery("\x3cbutton/\x3e",{"type":"button"}).addClass("button -guiding").text(Swedbank.Labels("browse")),$clear=usesCustomClearBtn?customData.customClearBtn:jQuery('\x3cspan class\x3d"ico erase"/\x3e'),placeholder=$input.attr("data-placeholder");
if(typeof placeholder!==typeof undefined&&placeholder!==false&&placeholder!="1")$label.text(placeholder);$input.after($element);if(!usesCustomClearBtn)$element.append($input).append($label).after($clear).after($button);else $button.insertAfter($element.append($input).append($label));if(!usesCustomClearBtn)$clear.hide();$button.on("click",function(event){event.preventDefault?event.preventDefault():event.returnValue=false;$input.click()});$input.on("change",function(){var name=$input.val().split("\\").pop();
$label.text(name);$label.removeClass("empty");if(!usesCustomClearBtn)if(name!="")$clear.show();else $clear.hide();if(customData&&customData.inputChangeCallback)customData.inputChangeCallback($input,name)});$clear.off("click").on("click",function(){var $clone=$input.val("").off().clone(true);$element.after($clone);$element.remove();if(!usesCustomClearBtn)$clear.remove();$button.remove();transformFileInput($clone,customData);if(customData&&customData.inputChangeCallback)customData.inputChangeCallback($clone,
"")})}var renderedFormSteps=[];
function renderFormSteps(){var formSteps=document.querySelectorAll(".form-steps");if(formSteps.length)renderedFormSteps=renderedFormSteps.concat(formSteps);var agreementStepsTab=document.getElementById("agreementStepsTab");if(agreementStepsTab)renderedFormSteps.push(agreementStepsTab);var agreementStepsTabs=document.querySelectorAll(".agreementStepsTab");if(agreementStepsTabs.length)renderedFormSteps=renderedFormSteps.concat(agreementStepsTabs);if(renderedFormSteps.length)[].forEach.call(renderedFormSteps,function(element){stylizeFormSteps(jQuery(element));
document.addEventListener("widthchange",function(){stylizeFormSteps(jQuery(element))})})}window.addEventListener("resize",SharedComponents.helpers.throttle(function(){document.dispatchEvent(new CustomEvent("widthchange"))},300));
var Swedbank=Swedbank||{};
(function(exports){class Countries{static fetch(){const params=Object.assign({},getSessionParams(),{pageId:"shared.ajaxResponse",getCountriesDialInfo:true});const storageKey=`countriesCodesStorage:${params.language}`;const rest=Swedbank.RestService.get();const cachedCountries=Swedbank.localStorage.get(storageKey);return new Promise((resolve,reject)=>{if(cachedCountries===null){if(Swedbank.isAuthenticated||!Swedbank.isLoggedIn)rest.performRequest(params).then(response=>{Swedbank.localStorage.set(storageKey,response,
{expiresIn:"1 day"});resolve(response)}).catch(err=>reject(err))}else resolve(cachedCountries)})}}exports.Countries=Countries})(Swedbank);
var Navigate=function(){function createDynamicParameterFields(form,index){jQuery("\x3cinput/\x3e",{"type":"hidden","name":"field"+index}).appendTo(form);jQuery("\x3cinput/\x3e",{"type":"hidden","name":"value"+index}).appendTo(form)}function setDynamicParameter($form,index,name,value){$form.field("field"+index).val(name);$form.field("value"+index).val(value)}function setParamValues(form,params){var index=0;var $form=jQuery(form);jQuery.each(params,function(name,value){index++;if(!$form.field("field"+
index).exists())createDynamicParameterFields($form,index);setDynamicParameter($form,index,name,value)});for(var i=index+1;jQuery("#navForm").find('input[name\x3d"field'+i+'"]').exists();i++)setDynamicParameter($form,i,"","")}return{to:function(pageId,params,form){form=form||document.navForm;setPageId(form,pageId);setParamValues(form,params);form.submit()}}}();
function navigateTo(pageId,paramName1,paramValue1,paramName2,paramValue2){if(Swedbank.chatStartable!=null)Swedbank.chatStartable=false;setPageId(document.navForm,pageId);setParamNamesAndValues(document.navForm,paramName1,paramValue1,paramName2,paramValue2);document.navForm.submit()}
function logout(){if(typeof Swedbank.virtualAssistant!=="undefined"&&Swedbank.virtualAssistant.active)Swedbank.communication.virtualAssistant.cleanUpVirtualAssistant("logout");sessionStorage.clear();document.navForm.action+="?forceLogout\x3dtrue";handleLeasingRedirect();navigateTo(null,"pageId","logout")}
function doSubmitWithValidationAndDisable(event,trackingHandler){if(!jQuery("#mainForm").valid()){event.preventDefault();return}if(trackingHandler)trackingHandler();doSubmitWithDisable(event.target)}
function doSubmit(control,pageId,paramValue1,paramName2,paramValue2,target){var form=document.mainForm;saveFormState(form);setPageId(form,pageId);if(control&&control.name){form.field1.value=control.name;form.value1.value=paramValue1?paramValue1:"true"}if(paramName2){form.field2.value=paramName2;form.value2.value=paramValue2}else{form.field2.value="";form.value2.value=""}form.target=target?target:"";TimeoutNotifier.prolongSessionWithoutRequest();if(form.onsubmit){var onsubmitResult=form.onsubmit();
if(onsubmitResult!=null&&!onsubmitResult)return}form.submit();restoreFormState(form);clearParams(form)}function doSubmitWithDisable(control){if(control instanceof jQuery)control=control[0];if(control.localName==="a")control.classList.add("disabled");else control.disabled="disabled";doSubmit.apply(this,Array.prototype.slice.apply(arguments))}
function clearParams(form){if(form){if(form.field1)form.field1.value="";if(form.value1)form.value1.value="";if(form.field2)form.field2.value="";if(form.value2)form.value2.value=""}}
function setParamNamesAndValues(form,paramName1,paramValue1,paramName2,paramValue2){if(form.field1&&form.value1)if(paramName1){form.field1.value=paramName1;form.value1.value=isEmpty(paramValue1)?paramName1:paramValue1}else{form.field1.value="";form.value1.value=""}if(form.field2&&form.value2)if(paramName2){form.field2.value=paramName2;form.value2.value=isEmpty(paramValue2)?paramName2:paramValue2}else{form.field2.value="";form.value2.value=""}}
function setPageId(form,pageId){if(!pageId)return;if(form.pageId.value!=pageId){if(form.prevAction)form.prevAction.value="";if(form.state)form.state.value=""}form.action=Hansa.action;form.pageId.value="";var newPath=pageId.replace(/\./g,"/");var hashId="";var hashPos=newPath.indexOf("#");if(hashPos>=0){hashId=newPath.substring(hashPos);newPath=newPath.substring(0,hashPos)}var sessionid="";var sessionPos=form.action.indexOf(";");if(sessionPos>=0){sessionid=form.action.substring(sessionPos);form.action=
form.action.substring(0,sessionPos)}form.action+=(!form.action.endsWith("/")?"/":"")+newPath;form.action+=sessionid+hashId}function getParamsForCalcPage(){var params={};function setElem(element){if(element)params[element.name]=element.value}var form=document.mainForm;setElem(form.pageId);setElem(form.securityId);setElem(form.attributesCheckNumber);setElem(form.encoding);setElem(form.language);setElem(form.serial);setElem(form.timestamp);setElem(form.state);return params}
function openCalculatorModal(pageId,preserveSession,extendedParams){var params=getParamsForCalcPage(),action=document.mainForm.action,$modal;params["pageId"]=pageId;params["selectedLoan"]=extendedParams?extendedParams["selectedLoan"]:null;if(!preserveSession&&action&&action.indexOf(";")>=0)action=action.substring(0,action.indexOf(";"));Swedbank.UIModals.loadContent(params)}
function navigate(source,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target){var form=jQuery(source).closest("form")[0];if(form==undefined)return;runLinkAction(form,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target)}
function navLinkAction(pageId,sourcePageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target){if(document.mainForm.sourcePageId)document.mainForm.sourcePageId.value=sourcePageId;if("null"==sourcePageId)document.mainForm.sourcePageId.value=document.mainForm.pageId.value;runLinkAction(document.mainForm,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target)}function openInNewWindow(pageId,bookmark){linkAction(pageId,"","","","",bookmark,"products")}
function linkAction(pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target,targetOptions,width,height){if(document.mainForm.sourcePageId)document.mainForm.sourcePageId.value="";runLinkAction(document.mainForm,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target,targetOptions,width,height)}function linkActionWithDisable(button){button.disabled="disabled";linkAction.apply(this,Array.prototype.slice.apply(arguments,[1]))}
function runLinkAction(form,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor,target){saveFormState(form);setPageId(form,pageId);setParamNamesAndValues(form,paramName1,paramValue1,paramName2,paramValue2);setAnchor(form,anchor);if(target){window.open("",target);form.target=target}else form.target="";TimeoutNotifier.prolongSessionWithoutRequest();form.submit()}function setAnchor(form,anchor){if(anchor)form.action+="#"+anchor}var originalState=null;
function saveFormState(form){if(originalState==null){originalState={target:form.target,pageId:form.pageId.value};if(form.state)originalState.state=form.state.value}}function restoreFormState(form){form.target=originalState.target;form.pageId.value=originalState.pageId;if(form.state)form.state.value=originalState.state}function submitMainForm(){document.mainForm.submit()}
function _fillForm(form,fields){var $form=jQuery(form);var values=fields||{},fieldElements=[];var getField=function(name){var field=$form.field(name);if(field.exists())return field;var $element=jQuery("\x3cinput/\x3e",{name:name,type:"hidden"});$element.appendTo($form);return $element};for(var key in values){if(!values.hasOwnProperty(key))continue;var $element=getField(key);$element.val(values[key]);fieldElements.push($element)}return fieldElements}
function submitForm(form,pageId,fields){var additionalFields=fields||{},clearFields=arguments[3]||false;setPageId(form,pageId);var fieldElements=_fillForm(form,additionalFields);form.submit();if(clearFields)fieldElements.forEach(function(field){field.clear()})}function submitNavForm(pageId,fields){submitForm(document.navForm,pageId,fields)}function investorAppPage(pageId){return(Swedbank.Navigation.isPrivate()?"private.investor.":"business.invest.")+pageId}
function addUrlParamsAndRedirect(pageId,paramName1,paramValue1,paramName2,paramValue2){if(Swedbank.isAuthenticated)linkAction(pageId,paramName1,paramValue1,paramName2,paramValue2);else{let url=new URL(window.location.origin+"/"+pageId.replaceAll(".","/"));url.searchParams.set(paramName1,paramValue1);if(paramName2!==undefined||paramValue2!==undefined)url.searchParams.set(paramName2,paramValue2);url.searchParams.set("language",Swedbank.language);window.location.href=url}}
function handleLeasingRedirect(){if(getApplicationName()==="vendornet"&&["confirm","agreements"].includes(document.navForm.pageId.value.split(".")[1]))navigateTo(`private.credit.leasing${Swedbank.country!=="LT"?`.car`:""}`)};
function setFieldValue(field,value){var $field=jQuery('[id\x3d"'+field+'"]');if(!$field.exists())return;if(value==null)if($field.attr("type")=="text"||$field.attr("type")=="textarea")$field.val("");else{if($field.attr("type")=="select-one")$field.prop("selectedIndex",0)}else if($field.length>0&&$field.is(":radio"))$field.each(function(){var $element=jQuery(this);if($element.val()==value)$element.prop("checked",true)});else $field.val(value)}
function lookupByAttribute(jsonArray,attributeName,attributeValue,returnAttributeName){var foundObject=null;jsonArray.forEach(function(jsonObject){if(jsonObject&&jsonObject[attributeName]==attributeValue)foundObject=jsonObject});return foundObject?foundObject[returnAttributeName]:null}
function ensureFieldExists(formIdOrObject,fieldId){var $form=getFormFromIdOrObject(formIdOrObject);var $field=$form.find([':input[name\x3d"'+fieldId+'"]',':input[id\x3d"'+fieldId+'"]'].join(","));if(!$field.exists())$form.prepend('\x3cinput name\x3d"'+fieldId+'" type\x3d"hidden" id\x3d"'+fieldId+'" value\x3d""\x3e')}
function safeSetFieldValue(formIdOrObject,fieldId,value,element){ensureFieldExists(formIdOrObject,fieldId);var $form=getFormFromIdOrObject(formIdOrObject);var $element=jQuery(element);var $field=$form.find(":input").filter('[id\x3d"'+fieldId+'"],[name\x3d"'+fieldId+'"]');$field.val(value);if($element.is(":checkbox"))$field.val($element.prop("checked"));if($element.is(":radio"))$field.val($element.filter(":checked").val())}
function getFormFromIdOrObject(formIdOrObject){var $form;if(formIdOrObject.id)$form=jQuery("#"+formIdOrObject.id);else $form=jQuery("#"+formIdOrObject);return $form}
function copyOrSetFields(fromForm,toForm,fields){fields=fields||[];if(typeof fields=="function")fields=fields();if(Array.isArray(fields)){var $form=jQuery("#"+fromForm);jQuery(fields).each(function(){var $input=$form.find([':input[name\x3d"'+this+'"]',':input[id\x3d"'+this+'"]'].join(","));if($input.exists())safeSetFieldValue(toForm,this,$input.val(),$input)})}else jQuery.each(fields,function(key,value){safeSetFieldValue(toForm,key,value)})}function popup(){document.mainForm.popup.value="yes"}
function isEmpty(val){return val==null?true:String(val).replace(/ /g,"")==""}function check_all(match,ref){if(!document.mainForm)return;var $selectAllBox=jQuery(ref?"#"+ref:document.mainForm.select_all);var $checkboxes=jQuery("#mainForm").find(":checkbox");if(match)$checkboxes=$checkboxes.filter('[name\x3d"'+match+'"]');$checkboxes.prop("checked",$selectAllBox.prop("checked"))}
function isValidAmount(amount){amount=amount.trim();return/^\d+([,.]\d{0,2})?$/.test(amount)&&parseFloat(amount.replace(",","."))>0};
var AccountNumber={isValidShort:function(accountNumber){return!(accountNumber.length<4||accountNumber.length>14)&&check731(accountNumber,false)},isValidIBAN:function(accountNumber){return!(accountNumber.length<15||accountNumber.length>34||Number(accountNumber.substr(2,2))!=98-mod97(accountNumber.substr(4)+accountNumber.substr(0,2)+"00"))},isValidLocalIBAN:function(accountNumber){return AccountNumber.isValidIBAN(accountNumber)&&accountNumber.substr(0,2)==Swedbank.country},isValid:function(accountNumber){if(Swedbank.country==
"EE")return AccountNumber.isValidShort(accountNumber)||AccountNumber.isValidLocalIBAN(accountNumber)&&!isNaN(+accountNumber.substr(2));else if(Swedbank.country=="LT")return AccountNumber.isValidLocalIBAN(accountNumber)&&!isNaN(+accountNumber.substr(2));else return AccountNumber.isValidLocalIBAN(accountNumber)},format:function(accountNumber){return accountNumber.replace(/\s/g,"").toUpperCase()},formatField:function(accountNumberField){accountNumberField.val(AccountNumber.format(accountNumberField.val()))}};
function check731(number,charactersAllowed){if(charactersAllowed==null)charactersAllowed=false;var value=number.replace(/^\s+|\s+$/g,"");if(value.length<2)return false;var cleanedValue="";for(var i=0;i<value.length;i++){var c=value.charAt(i);if(c>="0"&&c<="9"){cleanedValue+=c;continue}if(!charactersAllowed)return false}var weights=[1,7,3];var sum=0;for(var i=0;i<cleanedValue.length;sum+=cleanedValue.charAt(cleanedValue.length-i-1)*weights[i++%3]);return sum%10==0}
function mod97(s){var mod=0;for(var i=0;i<s.length;i++){var ch=s.charCodeAt(i);if(ch>=65&&ch<=90){var n=ch-65+10;mod=(mod*10+Math.floor(n/10))%97;mod=(mod*10+n%10)%97}else if(ch>=48&&ch<=57)mod=(mod*10+(ch-48))%97}return mod};
Swedbank.RegistrationNumber={isValid:function(regNr){var num=Hansa.deleteWhitespaces(regNr);if(!/^\d{11}$/.test(num))return false;if(Swedbank.RegistrationNumber.calculateCheckNumber(num)!=num.substring(10,11))return false;return true},getAge:function(regNr){var num=Hansa.deleteWhitespaces(regNr);return!Swedbank.RegistrationNumber.isValid(num)?null:(new PersonalCodeEE(num)).getAge()},calculateWeightRemainder:function(number,weights){return Swedbank.RegistrationNumber.calculateWeightsSum(number,weights)%
11},calculateWeightsSum:function(number,weights){var sum=0;for(var i=0;i<weights.length;i++)sum+=Number(number.substring(i,i+1))*weights[i];return sum},calculateCheckNumber:function(number){var remainder=Swedbank.RegistrationNumber.calculateWeightRemainder(number,[1,2,3,4,5,6,7,8,9,1]);if(remainder<10)return remainder;if(remainder==10)remainder=Swedbank.RegistrationNumber.calculateWeightRemainder(number,[3,4,5,6,7,8,9,1,2,3]);return remainder<10?remainder:0}};
var PersonalCodeEE=function(number){this.number=number;if(!this.isValid())return;var i=parseInt(number.substr(0,1));var centuryPrefix=17+(i%2+i)/2;var year=number.substr(1,2);var month=parseInt(number.substr(3,2),10);var day=parseInt(number.substr(5,2),10);if(month==0||day==0)return;this.birthday=new Date(centuryPrefix+year,month-1,day)};
PersonalCodeEE.prototype.isValid=function(){var num=this.number;if(!num||num.length<1||!/^\d{11}$/.test(num))return false;return this.calculateCheckNumber(num)==num.substring(10,11)};PersonalCodeEE.prototype.getAge=function(){if(!this.birthday||!this.isValid())return null;else{var age=this._dateDiff(new Date,this.birthday)[0];return age<0?null:age}};
PersonalCodeEE.prototype._dateDiff=function(start,end){var y1=start.getFullYear(),m1=start.getMonth(),d1=start.getDate(),y2=end.getFullYear(),m2=end.getMonth(),d2=end.getDate();if(d1<d2){m1--;d1+=this._daysInMonth(y2,m2)}if(m1<m2){y1--;m1+=12}return[y1-y2,m1-m2,d1-d2]};PersonalCodeEE.prototype._daysInMonth=function(year,month){with(new Date(year,month,1,12)){setDate(0);return getDate()}};PersonalCodeEE.prototype.calculateCheckNumber=function(number){return Swedbank.RegistrationNumber.calculateCheckNumber(number)};
function PersonalCodeLV(number){this.number=number;if(!this.isValid())return;var centuryPrefix=18+parseInt(number.substr(7,1),10);var year=number.substr(4,2);var month=parseInt(number.substr(2,2),10);var day=parseInt(number.substr(0,2),10);if(month==0||day==0)return;this.birthday=new Date(centuryPrefix+year,month-1,day)}
PersonalCodeLV.prototype.isValid=function(){if(!/^\d{6}-\d{5}/.test(this.number))return false;var num=this.number.replace("-","");if(!num||!num.trim()||!/^\d{11}$/.test(num))return false;return this.calculateCheckNumber(num)==num.substring(10,11)};PersonalCodeLV.prototype.getAge=function(){if(!this.birthday||!this.isValid())return null;else{var age=this._dateDiff(new Date,this.birthday)[0];return age<0?null:age}};
PersonalCodeLV.prototype._dateDiff=function(start,end){var y1=start.getFullYear(),m1=start.getMonth(),d1=start.getDate(),y2=end.getFullYear(),m2=end.getMonth(),d2=end.getDate();if(d1<d2){m1--;d1+=this._daysInMonth(y2,m2)}if(m1<m2){y1--;m1+=12}return[y1-y2,m1-m2,d1-d2]};PersonalCodeLV.prototype._daysInMonth=function(year,month){with(new Date(year,month,1,12)){setDate(0);return getDate()}};
PersonalCodeLV.prototype.calculateCheckNumber=function(number){return(1101-Swedbank.RegistrationNumber.calculateWeightsSum(number,[1,6,3,7,9,10,5,8,4,2]))%11};
const SB_SESSION_TIMEOUT_NOTIFIER_BLINK="SB_SESSION_TIMEOUT_NOTIFIER_BLINK";
var TimeoutNotifier=function($,window,document,SharedComponents){var self={},expirationIntervalId,expirationTimeoutId,notificationTimeoutId,secondsToExpiration,activityTimeout,hasUserActivityListeners=false,userActivityListenersActive=true,throttle=SharedComponents.helpers.throttle;var options={timeout:5*60*1E3,notificationRatio:4/5,activityListenerRatio:1/5,controller:{showNotification:function(seconds){},updateNotificationTimer:function(seconds){},generateHeadingMessage:function(seconds){}}};self.setup=
function(sessionTimeout,timeoutMessageController){if(sessionTimeout)options.timeout=sessionTimeout;if(timeoutMessageController)options.controller=timeoutMessageController;activityTimeout=options.timeout*options.activityListenerRatio;clearTimeouts();notificationTimeoutId=window.setTimeout(initTimeoutNotification,options.timeout*options.notificationRatio);initUserActivityListeners()};self.prolongSession=function(){if(!userActivityListenersActive)self.listenUserActivity();makeAjaxRequest(document.mainForm,
{pageId:"shared.ajaxResponse",refreshSession:true},function(){self.setup()})};self.prolongSessionWithoutRequest=function(){if(Swedbank.isAuthenticated&&Swedbank.isAuthenticated===true)self.setup()};self.expireSession=function(){clearTimeouts();logout()};self.listenUserActivity=function(){userActivityListenersActive=true};self.bypassUserActivity=function(){userActivityListenersActive=false};function clearTimeouts(){window.clearInterval(expirationIntervalId);window.clearTimeout(notificationTimeoutId);
window.clearTimeout(expirationTimeoutId)}function initUserActivityListeners(){if(hasUserActivityListeners)return;var preventSessionTimeout=throttle(function(event){if(userActivityListenersActive)self.prolongSession()},activityTimeout,true);hasUserActivityListeners=true;document.addEventListener("mousemove",preventSessionTimeout,false);document.addEventListener("click",preventSessionTimeout,false);document.addEventListener("keypress",preventSessionTimeout,false);document.addEventListener("touchmove",
preventSessionTimeout,false);window.addEventListener("scroll",preventSessionTimeout,false);window.addEventListener("focus",preventSessionTimeout,false)}function initTimeoutNotification(){var sessionExpiredTimeout=options.timeout-options.timeout*options.notificationRatio;var second=1E3;if(userActivityListenersActive)self.bypassUserActivity();secondsToExpiration=Math.round(sessionExpiredTimeout/second);expirationIntervalId=window.setInterval(updateNotificationTimer,second);expirationTimeoutId=window.setTimeout(closeChatAndShowSessionExpiredNotification,
sessionExpiredTimeout);options.controller.showNotification(secondsToExpiration);options.controller.updateNotificationTimer(secondsToExpiration);Swedbank.Blinker.start(SB_SESSION_TIMEOUT_NOTIFIER_BLINK,Swedbank.Labels("continueSessionPageTitle"),true)}function updateNotificationTimer(){if(--secondsToExpiration>0)options.controller.updateNotificationTimer(secondsToExpiration);else{window.clearTimeout(expirationTimeoutId);closeChatAndShowSessionExpiredNotification()}}function showSessionExpiredNotification(){var navForm=
$("#navForm");navForm.append('\x3cinput type\x3d"hidden" name\x3d"sessionExpirationReasonAjax" value\x3d"sessionExpired"/\x3e');self.expireSession()}function closeChatAndShowSessionExpiredNotification(){var formParams={onLogOut:"true",rendererType:"JSON"};var controlsCallback={onFailure:showSessionExpiredNotification,onSuccess:showSessionExpiredNotification};Controls.executeControl("CommunicationControlContainer","CommunicationControl",formParams,controlsCallback)}return self}(jQuery,window,document,
SharedComponents);
Swedbank.SessionTimeoutNotifier=function($,window,eventBus){var self={};var modal;self.setup=function(timeout){Swedbank.PageLoad.onFirst(function(){TimeoutNotifier.setup(timeout,controller)})};var controller={showNotification:function(seconds){var message=this.generateHeadingMessage(seconds);var ads=document.querySelector("#sessionModalAds");eventBus.dispatchCustomEvent("modal-open",{type:"confirmation",content:{title:message,description:Swedbank.Labels("sessionTimeoutNotificationDescription")},params:{attributes:{id:"modal-sessiontimeout",
closable:false,compact:true,"label-decline":Swedbank.Labels("sessionTimeoutNotificationDecline"),"label-accept":Swedbank.Labels("sessionTimeoutNotificationAccept")},onAction:function(e){if(e.detail.type==="accept"){Swedbank.Blinker.stop(SB_SESSION_TIMEOUT_NOTIFIER_BLINK);TimeoutNotifier.prolongSession();this.close()}else if(e.detail.type==="decline"){Swedbank.Blinker.stop(SB_SESSION_TIMEOUT_NOTIFIER_BLINK);TimeoutNotifier.expireSession();this.close()}}}});modal=document.querySelector("#modal-sessiontimeout");
modal.querySelector("button.-accept").setAttribute("data-wt-label","continue-session");modal.querySelector("button.-decline").setAttribute("data-wt-label","log-out");if(ads){ads.style.display="block";modal.querySelector(".ui-modal__body").appendChild(ads)}},updateNotificationTimer:function(seconds){var heading=modal&&modal.querySelector("h2");var message=this.generateHeadingMessage(seconds);if(heading)heading.innerHTML=message},generateHeadingMessage:function(seconds){return[Swedbank.Labels("sessionTimeoutNotification"),
"\x3cem\x3e"+seconds+"\x3c/em\x3e",Swedbank.Labels("sessionTimeoutNotificationSeconds",seconds)].join(" ")}};return self}(jQuery,window,SharedComponents.eventBus);
var ErrorMessage=new Message("errorMsg","#errorMessageBox","#errorMessage","#modalErrorMessagesContainer","#modalErrorMessage");var LoginErrorMessage=new Message("errorMsg","#loginErrorMessageBox","#loginErrorMessage","#modalLoginErrorMessagesContainer","#modalLoginErrorMessage");var WarningMessage=new Message("warningMsg","#pageWarningMessagesContainer","#warningMessage","#modalWarningMessagesContainer","#modalWarningMessage");
var LoginWarningMessage=new Message("warningMsg","#login-warning","#login-warning-message","#modal-login","#modal-login-warning");var InfoMessage=new Message("infoMsg","#pageInfoMessagesContainer","#infoMessage","#modalInfoMessagesContainer","#modalInfoMessage");var LoginInfoMessage=new Message("infoMsg","#login-info","#login-info-message");var SuccessMessage=new Message("successMsg","#pageSuccessMessagesContainer","#successMessage","#modalSuccessMessagesContainer","#modalSuccessMessage");
var UrgentMessage=new Message("urgentMsg","#login-info","#login-info-message");
function Message(className,pageContainerId,pageElementId,modalContainerId,modalElementId){this.className=className;this.targets={"page":{getContainer:function(){return jQuery(pageContainerId)},getElement:function(){return jQuery(pageElementId)},scrollTo:function(){setTimeout(function(){jQuery(pageContainerId).scrollTo(150,-10)},50)}},"modal":{getContainer:function(){return Swedbank.Modals.getActive().$.find(modalContainerId)},getElement:function(){return Swedbank.Modals.getActive().$.find(modalElementId)},
scrollTo:function(){Swedbank.Modals.getActive().center()}},"ui-modal":{getContainer:function(){var modal=Swedbank.UIModals.getActive();if(modal)return jQuery(modal.querySelector(modalContainerId))},getElement:function(){var modal=Swedbank.UIModals.getActive();if(modal)return jQuery(modal.querySelector(modalElementId))},scrollTo:function(){}}};this.set=function(message,forcePageMessage){this.clear(forcePageMessage);this.add(message,forcePageMessage)};this.add=function(message,forcePageMessage){var messages=
[].concat(message);var that=this;var target=this._getTarget(forcePageMessage);messages.filter(function(m){return!!m}).forEach(function(m){that._add(target,m)});target.getContainer().show();target.getElement().show()};this.removeMessage=function(message,forcePageMessage){this._getMessageElement(this._getTarget(forcePageMessage),message).remove();if(this.isClear(forcePageMessage))this.clear(forcePageMessage)};this.toggleMessage=function(message,flag,forcePageMessage){if(flag)this.add(message,forcePageMessage);
else this.removeMessage(message,forcePageMessage)};this.clear=function(forcePageMessage){var target=this._getTarget(forcePageMessage);target.getContainer().hide();target.getElement().html("")};this.isClear=function(forcePageMessage){return!this._getTarget(forcePageMessage).getElement().find("div").length};this.scrollTo=function(forcePageMessage){this._getTarget(forcePageMessage).scrollTo()};this._add=function(target,message){if(!this._getMessageElement(target,message).length)target.getElement().append(this._wrapMessage(message))};
this._getMessageElement=function(target,message){var wrappedMessageHtml=this._wrapMessage(message).html();return target.getElement().find("div").filter(function(){return jQuery(this).html()===wrappedMessageHtml})};this._wrapMessage=function(message){var target=this._getTargetType();switch(target){case "ui-modal":var msg=UI.createElement({tagName:"ui-message",children:[message],attributes:{type:this._resolveUiMessageType(this.className)}});return jQuery(msg);default:return jQuery("\x3cdiv/\x3e",{"class":this.className,
html:message})}};this._getTarget=function(forcePageMessage){var target=this._getTargetType(forcePageMessage);return this.targets[target]};this._getTargetType=function(forcePageMessage){var target;var activeModals=document.querySelectorAll("ui-modal.-active.-legacy");if(!forcePageMessage&&Swedbank.Modals.getActive())target="modal";else if(!forcePageMessage&&activeModals.length>0)target="ui-modal";else target="page";return target};this._resolveUiMessageType=function(key){var types={"infoMsg":"info",
"successMsg":"success","warningMsg":"warning","errorMsg":"error","urgentMsg":"urgent"};return types.hasOwnProperty(key)?types[key]:""}};
var timeout=2E3;var lastSubmitTime=0;function readyToSubmit(){return lastSubmitTime+timeout<=(new Date).getTime()}function setSubmitTime(){lastSubmitTime=(new Date).getTime()}function addBeforeSubmitHandlers(form){if(form&&!form.oldSubmitMethod){form.oldSubmitMethod=form.submit;form.submit=function(){if(beforeSubmitHandler(this)){setSubmitTime();return this.oldSubmitMethod()}else return false}}}
function beforeSubmitHandler(form){if(!readyToSubmit())return false;if(form.timestamp)form.timestamp.value=(new Date).getTime();return true}var formSubmitWithEnterAllowed=true;function disableFormSubmitWithEnter(){formSubmitWithEnterAllowed=false}function enableFormSubmitWithEnter(){formSubmitWithEnterAllowed=true}function registerKeypressHandlers(){jQuery(document).untilUnload("keydown","body, :input, :password, button",keyPressHandler)}
function keyPressHandler(event){if(!formSubmitWithEnterAllowed||event.keyCode!==13)return;var $mainForm=jQuery("#mainForm");var $defaultButton=$mainForm.find(".defaultFormButton");if($defaultButton.length){$defaultButton.trigger("click");return}$mainForm.find(":button, :submit").first().trigger("click")}
function checkVisibility(node){var $element=jQuery(typeof node==="string"?"#"+node:node);if(!$element.is(":visible"))return true;if(!$element.is(":visible")||node.className.indexOf("yui-overlay")!==-1)return false;if(node.parentNode)return checkVisibility(node.parentNode);return true};
var ERROR_INTERNET_CANNOT_CONNECT=12029;var ERROR_INTERNET_CONNECTION_ABORTED=12030;var ERROR_INTERNET_CONNECTION_RESET=12031;var ERROR_CONNECTION=0;jQuery.ajaxSetup({traditional:true});function pollWithCallbacks(form,successFunction,onGeneralError,onConnectionError){var params=jQuery(form).parseAsJSON();var request=makeAjaxRequest(form,params,successFunction);request.fail(function(){handleAjaxError(request.status,onGeneralError,onConnectionError)})}
function handleAjaxError(status,onGeneralError,onConnectionError){if(status==ERROR_INTERNET_CANNOT_CONNECT||status==ERROR_INTERNET_CONNECTION_ABORTED||status==ERROR_INTERNET_CONNECTION_RESET||status==ERROR_CONNECTION)onConnectionError();else onGeneralError()}
function getSessionParams(){var params={};function setIfExists(element){if(element)params[element.name]=element.value}var form=document.mainForm;setIfExists(form.pageId);setIfExists(form.securityId);setIfExists(form.attributesCheckNumber);setIfExists(form.encoding);setIfExists(form.language);setIfExists(form.serial);setIfExists(form.timestamp);setIfExists(form.state);return params}
function ajaxRequest(request,action){if(action==null)action=function(){};var params=jQuery.convertQueryParamsToObject(request);makeAjaxRequest(document.mainForm,params,function(req){if(!req.responseJSON||!req.responseJSON.exception)action(req.responseText);else action("")})}function getRequestData(data){var additionalData=document.mainForm?window.getSessionParams():Swedbank.commonRequestParams;return Object.assign({},{request_timestamp:(new Date).toString()},additionalData,data)}
function getRequestConfig(form,params,options){var requestData=getRequestData(params);return Object.assign({url:form&&form.action||Swedbank.Navigation.url,method:"POST",data:jQuery.param(requestData,true)},options)}
function makeAjaxRequest(form,params,onCompleteCallback,options){var requestConfig=getRequestConfig(form,params,options);if(typeof onCompleteCallback==="function")requestConfig.complete=function(request){if(params["withoutSessionProlong"]===undefined)TimeoutNotifier.prolongSessionWithoutRequest();onCompleteCallback.apply(this,[request])};return jQuery.ajax(requestConfig)}
function makeAjaxRequestWithSuccessCallback(form,params){return new Promise(function(resolve,reject){var requestConfig=getRequestConfig(form,params);requestConfig.success=function(request){if(params["withoutSessionProlong"]===undefined)TimeoutNotifier.prolongSessionWithoutRequest();resolve.apply(this,[request])};return jQuery.ajax(requestConfig).fail(reject)})}
HTMLFormElement.prototype.request=function(options){options=options||{};var form=this;var params=form.serialize(true);var action=form.action||"";var config={};if(options.asynchronous===false)config.async=false;if(!action.trim())action=location.href;if(options.parameters){var additionalParams=typeof options.parameters==="string"?options.parameters.toQueryParams():options.parameters;jQuery.extend(params,additionalParams)}return makeAjaxRequest({action:action},params,options.onSuccess||options.onComplete,
config)};
String.prototype.format=function(){var args=arguments;return this.replace(/\{(\d+)\}/g,function(){return args[arguments[1]]})};
function validateUI(type,resolveElementRequireability,input,validatorResult){if(type==="CHANGE_LIMIT")resolveElementRequireability();[...document.querySelectorAll("#mainForm ui-field")].filter(field=>!field.classList.contains("-hidden")).forEach(field=>{const controlId=field.getControlId();var input=field.querySelector(`[id="${controlId}"]`);if(input&&!SharedComponents.FormValidator.validateField(input))validatorResult=false;else{input=field.control.querySelector("input");if(input&&!SharedComponents.FormValidator.validateField(input))validatorResult=
false}});return validatorResult}
window.BankMessages=function(containerId,parameters){var bankMessages={},container,exceptionsContainer;bankMessages.init=function(){container=jQuery("#"+containerId);exceptionsContainer=container.find("div._exceptionsContainer");bankMessages.initMessageTypeChange();bankMessages.initAddressType();bankMessages.initSendButton();bankMessages.initCardsNotDelivered();bankMessages.initCardHolders();bankMessages.initChooseCards();bankMessages.initLoanContractNumbers()};bankMessages.initCardsNotDelivered=function(){if(container.find("#cardsToReport").length>
0){bankMessages.showOrHideAddress();container.find("#cardsToReport").on("change",function(){bankMessages.showOrHideAddress()})}};bankMessages.showOrHideAddress=function(){var cityOrCounty=container.find("#cityOrCountyId");var countryCode=container.find("#countryCodeId");var index=container.find("#indexId");var address=container.find("#addressId");if(jQuery.inArray(container.find("#cardsToReport").val(),parameters.cardsWithDeliveryAbroadReminder)>-1){cityOrCounty.data("cityorcounty",cityOrCounty.val()).val("");
countryCode.data("countrycode",countryCode.val()).val("");index.data("index",index.val()).val("");address.data("address",countryCode.val()).val("")}else{cityOrCounty.val(cityOrCounty.data("cityorcounty"));countryCode.val(countryCode.data("countrycode"));index.val(index.data("index"));address.val(address.data("address"))}};bankMessages.initAddressType=function(){if(container.find("input[name\x3daddressType]:radio").length>0){if(parameters.country==="LT")container.find("#branchNameId").change(function(){if(container.find("#branchNameId").val()===
parameters.viaPostBranch)["cityOrCountyId","indexId","addressId"].each(function(element){container.find("#"+element).prop("disabled",false)});else["cityOrCountyId","indexId","addressId"].each(function(element){container.find("#"+element).prop("disabled",true)})});container.find("input[name\x3daddressType]:radio").on("change",function(){bankMessages.chooseCardDeliveryAddress(jQuery(this).val())});bankMessages.chooseCardDeliveryAddress(container.find("input[name\x3daddressType]:radio:checked").val())}};
bankMessages.initCardHolders=function(){if(parameters.country==="LV"&&container.find("#cardUser.autocomplete").length>0)Controls.executeControl(container.attr("id"),"BankMessagesControl",{activeCards:"true",type:parameters.type?parameters.type:container.find('select[name\x3d"messageType"]').val(),rendererType:"JSON"},{onSuccess:function(transport){bankMessages.hideContainers();var cardNumber=container.find("#cardNumber"),cardUser=container.find("#cardUser"),json=transport.responseJSON;var cardNumbers=
json.cards;if(cardNumbers.length<1)return;cardNumber.on("change",function(){cardUser.val(cardNumbers.filter(function(card){return card.id===cardNumber.val()}).first().holder)});var filtered=cardNumbers.filter(function(card){return card.id===cardNumber.val()}).first();if(filtered)cardUser.val(filtered.holder)}})};bankMessages.hideContainers=function(){if(exceptionsContainer){exceptionsContainer.text("");exceptionsContainer.hide()}};bankMessages.chooseContractNumber=function(){Controls.executeControl(container.attr("id"),
"BankMessagesControl",{chooseLoanContractNumber:"true",accountNumber:container.find("#account_number").val(),type:parameters.type?parameters.type:container.find('select[name\x3d"messageType"]').val(),rendererType:"JSON"},{onSuccess:function(transport){bankMessages.hideContainers();var json=transport.responseJSON;json.contracts=json.contracts||[];var contracts=json.contracts,field;if(contracts.length===1)field=jQuery('\x3cinput type\x3d"text" id\x3d"loanContractNumber" value\x3d"'+contracts[0]+'" size\x3d"15" name\x3d"loanContractNumber" maxlength\x3d "15" class\x3d"textfield" readonly\x3d"readonly"/\x3e');
else if(contracts.length>1){field=jQuery('\x3cselect id\x3d"loanContractNumber" name\x3d"loanContractNumber" class\x3d"selector-header"\x3e\x3c/select\x3e');contracts.forEach(function(contract){var option=jQuery('\x3coption value\x3d"'+contract+'"\x3e'+contract+"\x3c/option\x3e");if(contract===loanContractNumber)option.prop("selected","selected");field.append(option)})}else field=jQuery('\x3cinput type\x3d"text" id\x3d"loanContractNumber" value\x3d"" size\x3d"15" name\x3d"loanContractNumber" maxlength\x3d "15" class\x3d"textfield"/\x3e');
container.find("#loanContractNumber").parent().html(field)}})};bankMessages.initLoanContractNumbers=function(){if(parameters.country==="LT")if(container.find("#loanContractNumber.autocomplete").length>0){bankMessages.chooseContractNumber();container.find("#account_number").on("change",function(){bankMessages.chooseContractNumber()})}};bankMessages.initCardClaims=function(){if(parameters.country!=="LV")return;var contactToMerchantLabel=container.find("#contactToMerchantLabel");container.find("input[name\x3dmerchantTransactions]").change(function(){contactToMerchantLabel.toggle()});
var reasonSelect=container.find("select[name\x3dclaimReason]");if(reasonSelect.length===0)return;var reasonIdx=container.find('input[name\x3d"cardClaimReasonIdx"]');var select=container.find("select[name\x3dclaimReason]");select.off("change");select.change(function(){var cclaimControls=container.find(".card-claim-control");cclaimControls.hide();reasonIdx.val(reasonSelect[0].selectedIndex);var reasonClasz=reasonSelect.find("option:selected").data("reason");if(reasonClasz){var reasonControls=container.find("."+
reasonClasz);reasonControls.each(function(){var zis=jQuery(this);if(!(zis.hasClass("switchable1")||zis.hasClass("switchable2")))zis.show();if(reasonClasz==="services-not-provided-reason"){var sel=zis.find('select[name\x3d"cardholderAttemptedToSolveBy"]');sel.off("change");sel.change(function(){var switchable2=container.find(".card-claim-control.services-not-provided-reason.switchable2");if(jQuery(this).find("option:selected").data("switchable"))switchable2.show();else switchable2.hide()});sel.val(sel.find("option:first").val()).change();
var dateField=container.find(".card-claim-control.services-not-provided-reason.expected-deliv-date-input");var dateInput=jQuery(dateField[1]).find('input[name\x3d"expectedDeliveryDate_date"]');var chk=zis.find('input[name\x3d"deliveryDateUnknown"]');chk.off("change");var switchable1=container.find(".card-claim-control.services-not-provided-reason.switchable1");var dt=container.find(".card-claim-control.services-not-provided-reason.deliv-date-unknown-dt");chk.change(function(){if(this.checked){switchable1.show();
dateField.hide();dateInput.val("");dt[0].label=dateField[0].label;container.find("#deliveryDateUnknownValue").removeAttr("disabled")}else{switchable1.hide();dateField.show();dt[0].label="";container.find("#deliveryDateUnknownValue").attr("disabled","disabled")}});dateInput.val("");chk.attr("checked",false);chk.change()}})}});select.change()};bankMessages.initMessageTypeChange=function(){container.find('select[name\x3d"messageType"]').on("change",function(){bankMessages.changeType(jQuery(this).val())})};
bankMessages.changeType=function(type){Controls.executeControl(container.attr("id"),"BankMessagesControl",{changeType:"true",messageType:type},{onSuccess:function(transport){ErrorMessage.clear();bankMessages.hideContainers();var $content=jQuery(transport.responseText).unwrap("\x3ccontent\x3e");container.find(".container-body").html($content);Swedbank.Forms.enhanceDateFields();container.find(".phone-field").addDialCodePicker();bankMessages.initAddressType();bankMessages.initSendButton();bankMessages.initCardsNotDelivered();
bankMessages.initCardHolders();bankMessages.initChooseCards();bankMessages.initLoanContractNumbers();bankMessages.initCardClaims();bankMessages.initReportOfPaymentCardTransactions();bankMessages.removeAllMessages("bankMessagesMessages");container.trigger("changeType.BankMessageControl",{container:container});const changeObserver=new SharedComponents.EventObserver({name:"change"});changeObserver.observe(container[0]);container[0].addEventListener("limits-changed",e=>resolveElementRequireability())}})};
function validateBankMessageUI(){const reasonType=document.getElementById("messageTypeValidate");const type=reasonType.options[reasonType.selectedIndex].value;let validatorResult=true;let input;validatorResult=validateUI(type,resolveElementRequireability,input,validatorResult);if(!validatorResult){var label=Swedbank.Labels.get("error_invalid_input");bankMessages.addMessages("bankMessagesMessages",[{severity:"ERROR",label:label}],null,bankMessages)}else bankMessages.removeAllMessages("bankMessagesMessages");
return validatorResult}function resolveElementRequireability(){const limitInputs=[...document.mainForm.querySelectorAll("#dailyLimit,#monthlyLimit")];const hasAnyValue=limitInputs.some(input=>!!input.value.trim());limitInputs.forEach(input=>{input.required=!hasAnyValue;const field=input.closest("ui-field");if(field&&hasAnyValue)field.removeErrors(true);else SharedComponents.FormValidator.validateField(input)});return hasAnyValue}bankMessages.initSendButton=function(){var containerBody=container.find("div.container-body");
containerBody.find("#B_send").on("click",function(){if(validateBankMessageUI()){this.disabled=true;if(bankMessages.checkFeesAgreement(this))bankMessages.send(this)}})};bankMessages.addMessages=(uiMessagesId,messages,timeout,bankMessages)=>{if(Array.isArray(messages)&&messages.length>0){bankMessages.removeAllMessages(uiMessagesId);let messageNodes=messages.map(message=>UI.createElement({tagName:"ui-message",attributes:{type:message.severity.toLowerCase()},children:[message.label]}));let uiMessages=
document.querySelector("ui-messagebox[key\x3d"+uiMessagesId+"]");UI.insertElements(uiMessages,messageNodes);if(timeout)setTimeout(()=>messageNodes.forEach(node=>node.parentElement.removeChild(node)),timeout)}};bankMessages.removeAllMessages=uiMessagesId=>{let uiMessages=document.querySelector("ui-messagebox[key\x3d"+uiMessagesId+"]");if(uiMessages)uiMessages.removeAllMessages()};bankMessages.checkFeesAgreement=function(button){if(document.getElementById("fees-from-same-account-agreement-error")){var $effsae=
document.getElementById("fees-from-same-account-agreement-error");UI.hide($effsae);var $ffsa=document.getElementById("fees-from-same-account-agreement");if($ffsa.length>0&&!$ffsa.is(":checked")){UI.show($effsae);button.disabled=false;return false}else{UI.hide($effsae);return true}}else return true};bankMessages.send=function(button){button.disabled=true;ErrorMessage.clear();var params={send:"true",type:parameters.type?parameters.type:container.find('select[name\x3d"messageType"]').val(),rendererType:"JSON"},
elements=["input","textarea","select"],fields=[];jQuery.each(elements,function(i,element){container.find(".container-body "+element).each(function(i,field){if(jQuery(field).attr("type")==="radio"){if(jQuery(field).is(":checked")){params[field.name]=jQuery(field).val();fields.push(jQuery(field))}}else{params[field.name]=jQuery(field).attr("type")==="checkbox"?jQuery(field).prop("checked"):jQuery(field).val();fields.push(jQuery(field))}})});function handleErrors(json){if(json.message)ErrorMessage.add(json.message);
jQuery.each(json.errors,function(index,error){if(error.message)if(!error.type||error.type==="error")ErrorMessage.add(error.message);else if(error.type==="warning")WarningMessage.add(error.message)})}Controls.executeControl(container.attr("id"),"BankMessagesControl",params,{onSuccess:function(transport){bankMessages.hideContainers();var json=transport.responseJSON?transport.responseJSON:transport;if(json.errors&&json.errors.size()>0){handleErrors(json);button.disabled=false;return}exceptionsContainer.hide();
const sendEvent=new CustomEvent("send.BankMessageControl",{detail:{messageType:container.find('select[name\x3d"messageType"]').val()}});container[0].dispatchEvent(sendEvent)},onFailure:function(){button.disabled=false;handleErrors}})};bankMessages.initChooseCards=function(){if(container.find("#account_number.autocomplete").length>0){bankMessages.chooseCards();container.find("#account_number.autocomplete").on("change",function(){bankMessages.chooseCards()})}};bankMessages.chooseCards=function(){Controls.executeControl(container.attr("id"),
"BankMessagesControl",{chooseCards:"true",accountId:container.find("#account_number").val(),rendererType:"JSON"},{onSuccess:function(transport){bankMessages.hideContainers();var json=transport.responseJSON,cards=json.cards,field="";if(cards.length===1){var html='\x3cinput type\x3d"text" id\x3d"card_number" value\x3d"'+cards[0].id;html+='" size\x3d"16" name\x3d"card_number" maxlength\x3d"16" class\x3d"textfield" readonly\x3d"readonly"/\x3e';field=jQuery(html)}else if(cards.length>1){field=jQuery('\x3cselect id\x3d"card_number" name\x3d"card_number" class\x3d"selector-header"\x3e\x3c/select\x3e');
cards.each(function(card){var option=jQuery('\x3coption value\x3d"'+card.id+'"\x3e'+card.id+" "+card.holder+"\x3c/option\x3e");field.append(option)})}else{var html='\x3cinput type\x3d"text" id\x3d"card_number" value\x3d"" size\x3d"16" name\x3d"card_number" maxlength\x3d"16" class\x3d"textfield"/\x3e';field=jQuery(html)}jQuery("#card_number").parent().html(field)}})};bankMessages.chooseCardDeliveryAddress=function(type){if(type==="G"){container.find(".branches-row").hide();container.find(".country-row, .city-row, .index-row, .street-row").show();
if(parameters.country==="LT"){container.find(".cards-deliverable-abroad input").prop("disabled",false);container.find("tr:has(td.cards-deliverable-abroad)").show();container.find(".not-issued-cards input").prop("disabled",true);container.find("tr:has(td.not-issued-cards)").hide()}}if(type==="L"){container.find(".branches-row").show();container.find(".country-row, .city-row, .index-row, .street-row").hide();if(parameters.country==="LT"){container.find(".cards-deliverable-abroad input").prop("disabled",
true);container.find("tr:has(td.cards-deliverable-abroad)").hide();container.find(".not-issued-cards input").prop("disabled",false);container.find("tr:has(td.not-issued-cards)").show()}}["countryCodeId","cityOrCountyId","indexId","addressId"].each(function(element){if(parameters.country==="LT")container.find("#"+element).prop("disabled",type==="L"&&container.find("#branchNameId").val()!==parameters.viaPostBranch);else container.find("#"+element).prop("disabled",type==="L")});container.find("#branchNameId").prop("disabled",
type==="G")};bankMessages.initReportOfPaymentCardTransactions=function(){var $reportChannelSelect=jQuery("#reportChannel");var $reportCheckboxes=jQuery("#reportCheckboxContainer :checkbox");$reportChannelSelect.on("change",function(){$reportCheckboxes.each(function(index,checkbox){var $checkbox=jQuery(checkbox);var $checkboxRow=$checkbox.closest("li");var reportChannel=$checkboxRow.data("report-channel");$checkbox.prop("checked",false);$checkboxRow.toggle(typeof reportChannel==="undefined"||reportChannel===
$reportChannelSelect.val())})}).trigger("change")};jQuery(function(){bankMessages.init()});return bankMessages};
function messagesRegexUrlProcess(agentMessage){var linkRegex=new RegExp("\x3ca.*?\x3e.*?\x3c/a\x3e","igm");var innerTextExp=new RegExp("\x3ca [^\x3e]*\x3e(.*?)\x3c/a\x3e","igm");var result=agentMessage;var findHost=new RegExp("http(s|)://(.+?)/","im");var currentHost=findHost.exec(document.documentURI?document.documentURI.toString():location.href.toString())[2];var matchArr;while((matchArr=linkRegex.exec(agentMessage))!=null){var strMatch=matchArr[0];var removeJSessionId=new RegExp("(\x3ca.*?\x3e.+?);jsessionid\x3d.*?(\x3c/a\x3e)",
"im");var replacement=strMatch.replace(removeJSessionId,"$1$2");var incomingHostMatch=findHost.exec(matchArr[0]);var incomingHost=incomingHostMatch&&incomingHostMatch[2]||null;if(incomingHost!==null&&currentHost.endsWith(incomingHost)){var changeLocalLinkToNavigateToCall=new RegExp('\x3ca.*?href\x3d"http(s|)://.+?/(.+?)[\\s";].*?\x3e',"im");var localPathMatch=changeLocalLinkToNavigateToCall.exec(matchArr[0]);if(localPathMatch&&localPathMatch.length>=3){var matchInnerText=innerTextExp.exec(replacement);
var innerText=matchInnerText[1];var localPath=changeLocalLinkToNavigateToCall.exec(matchArr[0])[2];localPath=localPath.replace(/\//g,".").replace(/[\(\)'";]/g,"");var paramsStart=localPath.indexOf("?");var params="";if(paramsStart!==-1){params=localPath.substring(paramsStart+1);params=params.replace(/[=&]/g,"', '");localPath=localPath.substring(0,paramsStart);if(localPath[localPath.length-1]===".")localPath=localPath.substring(0,localPath.length-1)}var navigateToStr="javascript:navigateTo('"+localPath+
"', '"+params+"')";replacement='\x3ca href\x3d"{0}" title\x3d"{1}"\x3e{2}\x3c/a\x3e'.format(navigateToStr,innerText,incomingHost+"/...")}}else{var isNavigateToLink=replacement.match(/"javascript:navigateTo\('[^\)]+'\)"/)?true:false;if(replacement.indexOf('target\x3d"_blank"')===-1&&!isNavigateToLink){var insertTargetBlankIfNone=new RegExp('(\x3ca.*?)(target\x3d".+?"|)(.*?)(\x3e)',"im");replacement=replacement.replace(insertTargetBlankIfNone,'$1 target\x3d"_blank"$3$4')}var shortenVeryLongLinks=new RegExp("(\x3ca.*?)\x3e(http(s|)://.+?/)(.{50,})\x3c",
"im");replacement=replacement.replace(shortenVeryLongLinks,'$1 title\x3d"$2$4"\x3e$2...\x3c')}result=result.replace(strMatch,replacement)}return result}Swedbank.BankMessages=Swedbank.BankMessages||{};
Swedbank.BankMessages.handleBankMessageSubmit=function(isPrivate){const bankMessagesControl=document.querySelector("#BankMessagesControl-general");bankMessagesControl.addEventListener("send.BankMessageControl",function(e){adobeFlowBankMessageSendComplete();if(isPrivate)navigateTo("private.home.important.communication.messages.thankyou","messageType",e.detail.messageType);else navigateTo("business.useful.bank.communication.messages.thankyou","messageType",e.detail.messageType)})};
window.BankOffers=function(){var _saveOffersInProgress=[],_saveOptionsInProgress={},_savedOffers={},_errorTypes={DUPLICATE_REQUEST:"duplicate_request",DUPLICATE_UPDATE:"duplicate_update",SAVE_PROBLEMS:"save_problems",LOAD_PROBLEMS:"load_problems"};var privatePageId="business.useful.offerdetail";var businessPageId="private.home.important.offers.offerdetail";var isOfferDeliveryActive=true;function saveOffer(options,callback){options=options||{};options.pageId=options.pageId||businessPageId;options.field1=
options.field1||"answer_bank";options.value1=options.value1||"true";if(options.id){if(_saveOptionsInProgress[options])return;else if(_savedOffers[options.id])return;else _saveOptionsInProgress[options]=true;_saveOffersInProgress.push(function(){options.forceAjax=true;function onRequestStopped(response){if(typeof callback==="function"){var error=null;if(response.status!=200||!response.responseJSON)error=_errorTypes.SAVE_PROBLEMS;else if(response.responseJSON.exception||response.responseJSON.errors)error=
response.responseJSON.exception||response.responseJSON.errors;else _savedOffers[options.id]=true;delete _saveOptionsInProgress[options];callback.apply(this,Array.prototype.slice.call([error].concat(arguments)))}_saveOffersInProgress.shift();if(_saveOffersInProgress[0])_saveOffersInProgress[0].apply(null,[])}var request=makeAjaxRequest(document.mainForm,options,onRequestStopped);request.fail(onRequestStopped)});if(_saveOffersInProgress.length===1)_saveOffersInProgress[0].apply(null,[])}else throw new Error("bankOfferUniqueId not defined");
}function saveBusinessOffer(options,callback){options.pageId=options.pageId||privatePageId;return this.saveOffer(options,callback)}function saveOfferWithStatus(id,status,callback){var options={field1:"answer_bank",value1:"true",field2:"answerType",value2:status,id:id};return this.saveOffer(options,callback)}function saveBusinessOfferWithStatus(id,status,callback){var options={field1:"answer_bank",value1:"true",field2:"answerType",value2:status,id:id};return this.saveBusinessOffer(options,callback)}
function changeOffersDelivered(offers){changeOfferDeliveryState(offers,"DELIVERED")}function changeOffersGiven(offer){changeOfferDeliveryState([offer],"GIVEN")}function changeOfferDeliveryState(offers,state){if(state==="DELIVERED"||state==="GIVEN")sendAjaxStateUpdate(offers,state);else console.error("offer delivery state is not supported: "+state)}function getValidOfferIds(offers,state){var sessionKey=state+"_ID";var used=getStoredUsers(sessionKey);var valid=[];offers.forEach(function(offerId){var id=
(offerId+"").replace(/^0+/,"");if(parseInt(id)&&parseInt(id)>0&&used.indexOf(id+"")===-1){used.push(id);valid.push(id)}});setStoredUsers(sessionKey,used);return valid}function getStoredUsers(sessionKey){var value=Swedbank.sessionStorage.get(sessionKey);var stored=value?value.trim():"";return stored&&stored.split(",")||[]}function setStoredUsers(sessionKey,used){Swedbank.sessionStorage.get(sessionKey,used.join(","))}function sendAjaxStateUpdate(offers,state){if(!isOfferDeliveryActive){console.log("Offer delivery is not active");
return}var execActions={"DELIVERED":"stateDelivered","GIVEN":"stateGiven"};var execIdParameters={"DELIVERED":"collateralIdList","GIVEN":"collateralObjectId"};var action=execActions[state];var idParameter=execIdParameters[state];var validOfferIds=getValidOfferIds(offers,state);if(action&&idParameter&&validOfferIds.length){var options={pageId:getOfferDetailsPage(),field1:action,value1:"true"};options[idParameter]=validOfferIds;makeAjaxRequest(document.mainForm,options)}}function getOfferDetailsPage(){return Swedbank&&
Swedbank.Navigation&&Swedbank.Navigation.isBusiness&&Swedbank.Navigation.isBusiness()?privatePageId:businessPageId}function initializeOfferGiven(seconds){seconds=Math.abs(seconds||10);if(Swedbank&&Swedbank.isAuthenticated&&isOfferDeliveryActive)setTimeout(function(){var offers=[];jQuery(".do-delivery-state").attr("data-collateral",function(index,value){if(value)offers.push(value)});changeOffersDelivered(offers)},seconds*1E3)}function clearOfferStorage(){Swedbank.sessionStorage.clear()}function setOfferDeliveryActive(active){isOfferDeliveryActive=
active}return{ErrorTypes:_errorTypes,saveOffer:saveOffer,saveOfferWithStatus:saveOfferWithStatus,saveBusinessOffer:saveBusinessOffer,saveBusinessOfferWithStatus:saveBusinessOfferWithStatus,changeOffersDelivered:changeOffersDelivered,changeOffersGiven:changeOffersGiven,initializeOfferGiven:initializeOfferGiven,clearOfferStorage:clearOfferStorage,setOfferDeliveryActive:setOfferDeliveryActive}}();
Swedbank.PageLoad.onFirst(function($){$("body").on("click",".ad-offer .ad, .ad-offer .ad a",function(e){if(Swedbank&&Swedbank.isAuthenticated)BankOffers.changeOffersGiven($(this).closest(".ad-offer").find(".do-delivery-state").data("collateral"))})});
UI.whenDOMReady(function(){function buildMobileLoginToggle(){return{tagName:"ui-navtoggle",attributes:{id:"login-button",for:"nav-mobile-login",group:"navigation",layout:"default"},children:[{tagName:"ui-icon",attributes:{glyph:"profile",bgcolor:"default"}}]}}function buildDesktopLoginToggle(){return{tagName:"ui-navtoggle",attributes:{id:"login-button",for:"nav-desktop-login",group:"navigation",layout:"link"},children:[{tagName:"ui-caption",children:[{tagName:"ui-icon",attributes:{glyph:Swedbank.isAuthenticated?
"log-out":"log-in",color:"orange"}},Swedbank.isAuthenticated?Swedbank.Labels("exit"):Swedbank.Labels("loginButton")]}]}}function buildLoginToggle(container){if(container)UI.rebuildChildren(loginToggleContainer,window.matchMedia("(max-width: 1023px)").matches?[buildMobileLoginToggle()]:[buildDesktopLoginToggle()])}function buildSPOEBar(){if(Swedbank.isHeaderRedesign)return;var isSPOEBarUser=Swedbank.isAuthenticated&&Swedbank.Navigation.isBusiness()&&Swedbank.User&&Swedbank.User.customers.length;if(!isSPOEBarUser)return;
var isMobile=window.matchMedia("screen and (max-width: 1023px)").matches;var spoeParent=isMobile?document.querySelector("ui-navlist-menu .nav-communication-content"):document.querySelector(".page-header__wrapper");var refNode=isMobile?spoeParent.firstChild:spoeParent.querySelector(".settings");var spoeBar=document.querySelector("spoe-bar");if(!spoeBar)spoeBar=document.createElement("spoe-bar");else if(spoeBar.parentNode!==spoeParent)spoeBar.parentNode.removeChild(spoeBar);spoeParent.insertBefore(spoeBar,
refNode);UI.updateElement(spoeBar,{classList:{"nav-communication-section":isMobile}});spoeBar.querySelectorAll("ui-field").forEach(function(field){UI.setAttributes(field,{layout:!isMobile&&"inline"})})}var loginToggleContainer=document.querySelector(".page-header .login-button");buildLoginToggle(loginToggleContainer);buildSPOEBar();window.matchMedia("(max-width: 1023px)").addListener(function(){buildLoginToggle(loginToggleContainer)});if(!Swedbank.isHeaderRedesign)window.matchMedia("screen and (max-width: 1023px)").addListener(function(){buildSPOEBar()});
if(Swedbank.AdobeTracking.isTrackingEnabled()){let navSearchButton=document.getElementById("nav-search-button");if(navSearchButton)navSearchButton.addEventListener("click",function(){_dl.flow={name:"internal-search",category:"search",type:"search",behaviourType:"selfservice",step:"step0",stepDescription:"open-search",productArray:[],formErrors:[],searchKeyword:"",searchViewedResult:"",searchResultType:"",event:{formView:"1"}};_dl.page.pageName="web"+Swedbank.Navigation.getBasePath()+"/"+_dl.flow.step+
"-"+_dl.flow.stepDescription})}});
var LoginBar=function(options){this.initialized=false;this.options={};this.toggled=false;this.options={elementId:"loginbar"};this.options=Object.assign(this.options,options||{});this.loginbarElement=document.getElementById(this.options.elementId)};LoginBar.prototype.isExpanded=function(){return this.loginbarElement?.classList.contains("-expanded")};LoginBar.prototype.isHidden=function(){return this.loginbarElement?.classList.contains("-hidden")};LoginBar.prototype.setLoginVisible=function(){this.loginbarElement?.classList.add("-login-visible")};
LoginBar.prototype.init=function(){this.initialized=true;this.show()};LoginBar.prototype.updateHeaderLoginButton=function(active){if(!document.documentElement.classList.contains("redesign"))return;const loginButton=document.getElementById("page-header__login");loginButton.classList.toggle("-activated",active);loginButton.querySelector("ui-icon").glyph=Swedbank.isAuthenticated?"log-out":"log-in"};
LoginBar.prototype.handleClickOutside=function(e){const loginBar=e.target.closest(".login-inner");const toggle=e.target.closest("ui-navtoggle")&&!document.documentElement.classList.contains("redesign");const cookieConsent=e.target.closest("ui-cookie-consent");const modal=e.target.closest("ui-modal");if(document.documentElement.classList.contains("-navtoggle-expanded")&&!loginBar&&!toggle&&!cookieConsent&&!modal){LoginBar.prototype.updateHeaderLoginButton(false);document.removeEventListener("click",
Hansa.loginbar.handleClickOutside);Hansa.loginbar.hide()}};
LoginBar.prototype.show=function(){if(!this.loginbarElement)return;if(this.toggled)this.loginbarElement.classList.add("-toggled");this.loginbarElement.classList.remove("-hidden");this.loginbarElement.classList.add("-expanded");var toggle=document.getElementById("login-button");if(toggle)toggle.active=true;LoginBar.prototype.updateHeaderLoginButton(true);SharedComponents.helpers.nextFrame(function(){if(window.matchMedia("(max-width: 1023px)").matches)document.documentElement.classList.add("-navtoggle-expanded");document.addEventListener("click",
LoginBar.prototype.handleClickOutside)})};LoginBar.prototype.hide=function(forced){var toggle=document.getElementById("login-button");if(toggle)toggle.active=false;if(window.matchMedia("(max-width: 1023px)").matches)document.documentElement.classList.remove("-navtoggle-expanded");document.removeEventListener("click",LoginBar.prototype.handleClickOutside);if(this.loginbarElement){this.loginbarElement.classList.add("-hidden");forced=forced||false;if(forced)this.loginbarElement.classList.remove("-expanded")}};
LoginBar.prototype.forcedLoginToggle=function(){var isDesktop=window.matchMedia("(min-width: 1024px)").matches;this.toggled=true;if(isDesktop)UI.whenDOMReady(function(){var mainMenu=document.querySelector("ui-nav#nav-main");if(mainMenu)mainMenu.close();var loginWidgetTabs=this.loginbarElement?.querySelector("login-widget ui-tabs");var activeView=loginWidgetTabs&&loginWidgetTabs.views.getActiveView();if(activeView)UI.focusInteractiveElement(activeView)}.bind(this));window.scrollTo(0,0);if(isDesktop&&
this.isExpanded()&&this.loginbarElement)this.loginbarElement.classList.toggle("is-animated");this.show()};var LoginTypes={CERTIFICATE:"CERTIFICATE",MOBILE_ID:"MOBILE_ID",PIN_CALCULATOR:"PIN_CALCULATOR",SMART_ID:"SMART_ID"};
UI.whenDOMReady(()=>{if(document.documentElement.classList.contains("redesign"))return;const loginBarToggle=document.getElementById("login-button");const loginWidget=document.querySelector("login-widget");if(loginBarToggle&&Hansa.loginbar&&Hansa.loginbar.loginbarElement&&Hansa.loginbar.isExpanded())loginBarToggle.active=true;const focusHandleOnTabChange=event=>{if(event instanceof CustomEvent){const view=event.target.getActiveView();UI.focusInteractiveElement(view.firstElementChild)}};if(loginWidget){loginWidget.tabs.views.addEventListener("change",
focusHandleOnTabChange);loginWidget.tabs.views.dispatchEvent(new CustomEvent("change"))}SharedComponents.eventBus.addEventListener("menu-toggle",function(e){if(e.detail)switch(e.detail.for){case "nav-mobile-login":if(e.detail.active)if(!Hansa.loginbar.initialized)Hansa.loginbar.init();else Hansa.loginbar.show();else Hansa.loginbar.hide();break;case "nav-desktop-login":if(Swedbank.isAuthenticated)logout();else Hansa.loginbar.forcedLoginToggle();break;default:if(window.matchMedia("(max-width: 1023px)").matches&&
Hansa.loginbar)Hansa.loginbar.hide();break}});window.matchMedia("(max-width: 1023px)").addListener(function(){const mobileToggle=document.querySelector("ui-navtoggle[for\x3dnav-mobile-login]");if(Hansa.loginbar&&mobileToggle&&window.matchMedia("(max-width: 1023px)").matches)SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:Hansa.loginbar.isExpanded(),for:"nav-mobile-login",group:"navigation"})})});
UI.whenDOMReady(async()=>{if(!document.documentElement.classList.contains("redesign"))return;const modalController=document.querySelector("ui-modal-controller");const topModal=await new Promise(resolve=>{setTimeout(()=>{resolve(modalController.getActiveTopModalWindow())})});let isTopModalActive=topModal?.isActive();const loginWidget=document.querySelector("login-widget");const loginButton=document.getElementById("page-header__login");LoginBar.prototype.updateHeaderLoginButton(!!Hansa.loginbar&&Hansa.loginbar.loginbarElement&&
Hansa.loginbar.isExpanded());const focusHandleOnTabChange=event=>{if(event instanceof CustomEvent){const view=event.target.getActiveView();UI.focusInteractiveElement(view.firstElementChild)}};const sendLoginOverlayToFDP=active=>{if(!Swedbank.FDPAdapter.isFDPEnabled()||isTopModalActive)return;const fdpAdapter=Swedbank.FDPAdapter.getInstance();const isActive=active&&Hansa.loginbar.isExpanded();fdpAdapter.postToParentApp({type:isActive?Swedbank.FDPAdapter.messageTypes.OverlayOpened:Swedbank.FDPAdapter.messageTypes.OverlayClosed,
payload:{animate:false,blockScroll:true,closable:true,partial:true}})};SharedComponents.eventBus.addEventListener("modal-close-enter",()=>{if(!Hansa.loginbar)return;const isLoginIsActiveOnMobile=Hansa.loginbar.isExpanded()&&window.matchMedia("(max-width: 1023.98px)").matches;isTopModalActive=false;isLoginIsActiveOnMobile&&sendLoginOverlayToFDP(true)});SharedComponents.eventBus.addEventListener("modal-open-enter",()=>{isTopModalActive=true});if(loginWidget){loginWidget.tabs.views.addEventListener("change",
focusHandleOnTabChange);loginWidget.tabs.views.dispatchEvent(new CustomEvent("change"))}const handleLoginButtonClick=()=>{SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:false});if(Swedbank.isAuthenticated)logout();else if(window.matchMedia("(max-width: 1023.98px)").matches)toggleMobileLoginWidget(Hansa.loginbar.isHidden());else Hansa.loginbar.forcedLoginToggle()};const toggleMobileLoginWidget=active=>{LoginBar.prototype.updateHeaderLoginButton(active);if(active)if(!Hansa.loginbar.initialized)Hansa.loginbar.init();
else Hansa.loginbar.show();else Hansa.loginbar.hide();sendLoginOverlayToFDP(active)};if(loginButton)loginButton.addEventListener("click",handleLoginButtonClick);window.matchMedia("(max-width: 1023.98px)").addListener(()=>{const isMobile=window.matchMedia("(max-width: 1023.98px)").matches;if(Hansa.loginbar&&isMobile){SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:false});toggleMobileLoginWidget(Hansa.loginbar.isExpanded()&&!Hansa.loginbar.isHidden());return}if(Hansa.loginbar&&
!isMobile)toggleMobileLoginWidget(Hansa.loginbar.loginbarElement?.classList.contains("-login-visible"));const loginButton=document.getElementById("page-header__login");loginButton.classList.toggle("-activated",!!Hansa.loginbar&&Hansa.loginbar.isExpanded());loginButton.querySelector("ui-caption").pos=isMobile?"left":"right";loginButton.querySelector("ui-icon").glyph=Swedbank.isAuthenticated?"log-out":"log-in"})});
function getApplicationName(){if(document.navForm.pageId!=null&&document.navForm.pageId.value.indexOf(".")>-1)return document.navForm.pageId.value.substring(0,document.navForm.pageId.value.indexOf("."));else if(document.navForm.pageId!=null&&document.navForm.pageId.value.length>0)return document.navForm.pageId.value;else return"unknown"};
var BankNameResolver=function(accountNumberField,bankNameContainer,onEndCallback,onStartCallback,onInvalidAccountCallback){var self=this;loadingMessage='\x3cins class\x3d"loader"\x3e\x3c/ins\x3e';this.onEndCallback=onEndCallback;this.onStartCallback=onStartCallback;this.onInvalidAccountCallback=onInvalidAccountCallback;this.accountNumberField=accountNumberFieldToJQuery(accountNumberField);this.bankNameContainer=jQuery("#"+bankNameContainer);this.bankNameErrorContainer=jQuery('\x3cdiv class\x3d"validation-message"\x3e').insertAfter(this.bankNameContainer);
this.skipErrorMessage=false;this.accountNumberField.on("change",function(){self.getBankNameAjax()})};function accountNumberFieldToJQuery(accountNumberField){var split=accountNumberField.split(".");if(split.length>1)return jQuery("#"+split[0]+"\\."+split[1]);else return null}BankNameResolver.prototype.showErrorMessage=function(){this.bankNameErrorContainer.text(Swedbank.Labels("invalidAccountNumberInserted")).show();this.bankNameErrorContainer.parent().addClass("validation-error")};
BankNameResolver.prototype.hideErrorMessage=function(){this.bankNameErrorContainer.hide();this.bankNameErrorContainer.parent().removeClass("validation-error")};BankNameResolver.prototype.updateBankName=function(bank){if(bank&&bank.bankName){this.bankNameContainer.html(bank.bankName);this.hideErrorMessage()}else{this.bankNameContainer.html("");this.showErrorMessage()}if(this.onEndCallback)this.onEndCallback(bank)};
BankNameResolver.prototype.getBankNameAjax=function(){this.bankNameContainer.html(this.loadingMessage);AccountNumber.formatField(this.accountNumberField);var account=this.accountNumberField.val();if(account===""){this.bankNameContainer.html("");this.hideErrorMessage();return false}else if(AccountNumber.isValid(account)){if(this.onStartCallback)this.onStartCallback();var that=this;makeAjaxRequest(document.mainForm,{pageId:"shared.ajaxResponse",getBank:true,accountNumber:account},function(result){that.updateBankName(result.responseJSON);
return false})}else{if(this.onInvalidAccountCallback)this.onInvalidAccountCallback();this.bankNameContainer.html("");if(!this.skipErrorMessage)this.showErrorMessage();return false}};
var DataTable={};
(function($){DataTable.sort=function(id,param,action,isAjax){doAction(id,"sort",param,action,isAjax)};DataTable.pageSize=function(id,param,action,isAjax){doAction(id,"pageSize",param,action,isAjax)};DataTable.pageNumber=function(id,param,action,isAjax){doAction(id,"pageNumber",param,action,isAjax)};DataTable.filter=function(id,action,isAjax){doAction(id,"filter","true",action,isAjax)};DataTable.initiateCheckBoxSelection=function(){$("html").on("click","td :checkbox",function(){DataTable.refreshSelectAllCheckbox($(this).closest("table"))});$("html").on("click",
"#select_all",function(){DataTable.selectAll(this)})};DataTable.selectAll=function(source){var toSelect=source.checked;$(source).closest("table").find("td :checkbox").each(function(){if(this.checked!==toSelect){this.checked=toSelect;$(this).trigger("change")}})};DataTable.refreshSelectAllCheckbox=function(table){table.find("#select_all").prop("checked",!(table.find("td :checkbox").filter(":not(:checked)").length>0))};DataTable.autoAlign=function(){var $table=$(this);var datatypes=[];$table.find("tr.titleRow th").each(function(){datatypes.push({type:"",
count:0,detectType:function(value){var type=!value?undefined:value.match(/^-?[\d\s]+([.,][\d\s]+)?([A-Z]{3})?$/)?"number":"text";this._updateType(type)},_updateType:function(newType){if(this._isTypeKnown())return;this.count++;this.type=newType},_isTypeKnown:function(){return this.type=="text"||this.count>=3}})});datatypes.allKnown=function(){for(var index=0;index<this.length;index++)if(!this[index]._isTypeKnown())return false;return true};if(!datatypes.length)return;$table.find("tr.dataRow").each(function(){$(this).children("td").each(function(index){datatypes[index].detectType($.trim($(this).text()))});
if(datatypes.allKnown())return false});$table.find("tr").each(function(){$(this).children("td,th").each(function(index){$(this).addClass(datatypes[index].type)})})};function doAction(id,type,param,action,isAjax){var $wrapper=$("#complextable-"+id);function addTableParams(adder){$wrapper.find('input[type\x3d"text"]').each(function(){adder(id+"|filter",$(this).data("filter")+"|"+$(this).val())});$wrapper.find(":checkbox:checked").each(function(){adder($(this).attr("name"),$(this).val())})}if(!isAjax){var $form=
Swedbank.Forms.generateAdditionalForm(id+"Form",{});addTableParams(function(name,value){$('\x3cinput type\x3d"hidden"/\x3e').attr("name",name).val(value).appendTo($form)});runLinkAction($form[0],"",id+"|"+type,param,action,"true")}else{var params={};if(action)params[action]=true;params[id+"|"+type]=param;addTableParams(function(name,value){params[name]=params[name]||[];params[name].push(value)});makeAjaxRequest(document.mainForm,params,function(response){$wrapper.html(response.responseText)})}}DataTable.createExpandableTable=
function(){if($(".expandable-table").length)$(".expandable-table:not(.table-expandable-enabled)").each(function(){var $table=$(this).addClass("table-expandable-enabled");if(!$table.is("#depositsProducts, #loansProducts, #cardsProducts, #currentAccounts, #leasingProducts, #pensionsProducts, #investmentsProducts, #investmentsAccounts")){var spanrows=0;$("tr",$table).each(function(){var $row=$(this);if($row.hasClass("extra-row")){var $td=$row.find("td");$td.attr("colspan",parseInt($td.attr("colspan"))+
1)}else{if($row.parents("table").length===1){$td=$("th:last-child, td:last-child",$row).filter(function(){return $(this).closest("table").is($table)});$td=$td.prop("tagName")==="TH"?$("\x3cth/\x3e"):$("\x3ctd/\x3e").append('\x3cspan class\x3d"expander-button" /\x3e');var rowspan=$("td:first-child",$row).attr("rowspan");if(typeof rowspan!==typeof undefined&&rowspan!==false&&rowspan!="1"){$td.attr("rowspan",rowspan);rowspan=parseInt(rowspan);spanrows=rowspan}if(spanrows==0||spanrows==rowspan&&rowspan!=
"1")$row.append($td.addClass("expander"));if(spanrows>0)spanrows--}if(!$("td:first-child",$row).attr("rowspan")&&!$row.next().hasClass("extra-row")){$row.find(".expander-button").remove();$row.addClass("static-row")}}})}$(".expander-button",$table).each(function(){$(this).parents("tr").addClass("row-expand")});function toggleRow(el,$table){var $row=$(el,$table).closest("tr");if($row.parents("table").length===1)if($row.hasClass("open-row"))$("tr",$table).removeClass("open-row");else{$("tr",$table).removeClass("open-row");
if($row.next(".extra-row",$table).length>0)var $hiddenContent=$row.nextUntil(".static-row, .row-expand",$table);else var $hiddenContent=$row.nextUntil(".row-expand",$table);$.each(getRows($row,$table),function(i,$row){$row.addClass("open-row")});if(Swedbank.Viewport.isMobile())$row.scrollTo("slow",-60);$row.nextUntil($hiddenContent).addBack().add($hiddenContent).addClass("open-row").removeAttr("style")}}$("tr:not(.extra-row, .sub-header-row, .totals, .total-row, .static-row)",$table).on("click",function(e){if(e.target.nodeName!=
"A"&&e.target.nodeName!="INPUT"&&e.target.nodeName!="TH"&&e.target.nodeName!="SPAN")toggleRow(this,$table)});$(".expander-button",$table).on("click",function(){toggleRow(this,$table)});$("td",$table).on("mouseenter",function(){var $el=$(this),$tr=$el.parent();if(!$tr.isInside("tfoot"))$.each(getRows($tr),function(i,$row){if($row.hasClass("row-expand")){$row.addClass("hover");$row.nextUntil(".extra-row").addClass("hover")}})}).on("mouseleave",function(){$("tr",$table).removeClass("hover")});function getRows($tr){var rows=
[],$tbody=$tr.parent(),index=$tr.index(),rowspan=0;if($tr.hasClass("extra-row")||$("td:first-child",$tr).attr("rowspan")>1)var $row=$tr;else var $row=$tr.prevAll("tr").filter(function(){return $("td:first-child",this).attr("rowspan")>1});var rindex=$row.index();$row.each(function(index){if(index==0)rowspan=$(this).find("td[rowspan]").attr("rowspan")||0});rowspan=parseInt(rowspan);if(rowspan==1)rowspan=0;if(index>rindex+rowspan)rows.push($tr);else for(var i=0;i<rowspan;i++)rows.push($("tr:eq("+(rindex+
i)+")",$tbody));return rows}})};DataTable.createExpandableComparisonTable=function(){if($(".comparison-table.-expandable").length)$(".comparison-table.-expandable:not(.comparison-table-expandable-enabled)").each(function(){var $table=$(this).addClass("comparison-table-expandable-enabled");$(".row-expand",$table).each(function(){$row=$(this).addClass("open-row");$("th:last-child, td:last-child",$row).append('\x3cspan class\x3d"expander-button" /\x3e')});$(".expander-button",$table).on("click",function(){toggleRow(this,
$table)});toggleRow=function(button,$table){$row=$(button).parents("tr",$table);if($row.hasClass("open-row")){$row.removeClass("open-row");$row.nextUntil(".row-expand").addClass("-hidden")}else{$row.addClass("open-row");$row.nextUntil(".row-expand").removeClass("-hidden");if(Swedbank.Viewport.isMobile())$row.scrollTo("slow",-60)}}})};DataTable.processComparisonTable=function(){if($(".comparison-table").length)$(".comparison-table").each(function(){var $table=$(this);if($table.parent().parent().hasClass("responsive-table-container"))$table.parent().parent().addClass("container");
else if($table.parent().hasClass("responsive-table-wrapper"))$table.parent().addClass("container");else $table.wrap('\x3cdiv class\x3d"container"/\x3e')})};DataTable.loadCallback=()=>{$(DataTable.createExpandableTable);$(DataTable.createExpandableComparisonTable);$(DataTable.processComparisonTable);$("table.dataTable").each(DataTable.autoAlign);DataTable.initiateCheckBoxSelection()}})(jQuery);
if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",DataTable.loadCallback);UI.whenDOMReady(DataTable.loadCallback)}else Swedbank.PageLoad.onEach(DataTable.loadCallback);
var Swedbank=Swedbank||{};Swedbank.events=Swedbank.events||function($){jQuery(document).on("messageReceivedEvent",function(event,triggerParam){if(triggerParam.messageType==="USER_NOTIFICATION")UI.dispatchCustomEvent(document,"notifications-update",triggerParam);else if(triggerParam.messageType==="CHAT_MESSAGE")jQuery(document).trigger("chatMessageEvent",[triggerParam]);else if(triggerParam.messageType==="KNOCK_MESSAGE")jQuery(document).trigger("knockMessageEvent",[triggerParam])})}(jQuery);
(function($){var countries;var cachedNumbers={};function getCountry(identification){return countries.filter(function(country){return $.isNumeric(identification)?Number(country.dialCode)==Number(identification):country.iso2==identification})[0]}function getLocalDialCode(){return{"EE":372,"LV":371,"LT":370}[Swedbank.country]}function sortByRelevantCountries(countries){var countryOrder=["ee","lv","lt","ru","fi","se"];var currentCountry=Swedbank.country;if(currentCountry!=null)var currentCountry=Swedbank.country.toLowerCase();
countryOrder.splice(0,0,countryOrder.splice(countryOrder.indexOf(currentCountry),1)[0]);countryOrder.forEach(function(code,codeIndex){var countryIndex;countries.forEach(function(country,index){if(country.iso2==code)countryIndex=index});countries.splice(codeIndex,0,countries.splice(countryIndex,1)[0])});return countries}function createDialCodeMarkup(country){return'\x3cdiv class\x3d"dial-flag '+country.iso2+'"/\x3e'+'\x3cspan class\x3d"dial-code"\x3e +'+country.dialCode+"\x3c/span\x3e"}window.PhoneNumber=
function(number){if(cachedNumbers[number])$.extend(this,cachedNumbers[number]);else{this.number=number;cachedNumbers[number]=this}};PhoneNumber.prototype.clean=function(removePlusCharacter){var cleanedNumber=this.number.replace(/[^0-9+]/g,"");if(removePlusCharacter)cleanedNumber=cleanedNumber.replace(/^(\+|00)/,"");return cleanedNumber};PhoneNumber.prototype.getDialCode=function(){var dialCode;if(this.hasDialCode()){var number=this.clean(true);var i=4;while(i>0&&!getCountry(dialCode)){dialCode=number.substr(0,
i);i--}}return dialCode||getLocalDialCode()};PhoneNumber.prototype.getCountry=function(){if(!this.country){var dialCode=this.getDialCode();this.country=dialCode==1?getCountry(this.isCanadian()?"ca":"us"):getCountry(dialCode)}return this.country};PhoneNumber.prototype.getLocalNumber=function(){var country=this.getCountry();return this.hasDialCode()&&typeof country!=="undefined"?this.clean(true).substr(country.dialCode.length):this.number};PhoneNumber.prototype.hasDialCode=function(){return/^(\+{1,4}|00)/.test(this.clean())};
PhoneNumber.prototype.validate=function(){var validationRules={"ee":{length:[7,8],firstDigitRange:[3,9]},"lv":{length:[8,8],firstDigitRange:[2,6]},"lt":{length:[8,8],firstDigitRange:[2,8]},"default":{length:[6,12],firstDigitRange:[1,9]}};var ruleSet=validationRules[this.getCountry().iso2]||validationRules["default"];var localNumber=this.getLocalNumber();var errorLabel;if(!Number(localNumber))errorLabel="phoneNumberInvalid";if(localNumber.length<ruleSet.length[0]||localNumber.length>ruleSet.length[1])errorLabel=
"phoneNumberWrongLength";if(localNumber[0]&&(localNumber[0]<ruleSet.firstDigitRange[0]||localNumber[0]>ruleSet.firstDigitRange[1]))errorLabel="phoneNumberWrongFirstDigit";return Swedbank.Labels(errorLabel)||true};PhoneNumber.prototype.getAreaCode=function(){var number=this.clean(true);return Number(number.substr(1,3))};PhoneNumber.prototype.isCanadian=function(){var CANADIAN_AREA_CODES=[403,587,780,250,604,778,236,204,431,506,709,902,782,226,249,289,343,365,416,437,519,613,647,705,807,905,418,438,
450,514,579,581,819,873,306,639,867];return CANADIAN_AREA_CODES.includes(this.getAreaCode())};function PhoneField(field){this.$=$(field);this.options=$.extend({dialCodePicker:true,dialCodeField:"",valueWithDialCode:true},this.$.data());this.picker=new DialCodePicker(this.$,this.options);this.createValueTrackingField();this.validateOnChange();this.$.trigger("change")}PhoneField.prototype.createValueTrackingField=function(){var self=this;this.$trackerField=$("\x3cinput/\x3e",{name:this.$.attr("name"),
type:"hidden"}).insertAfter(this.$);this.$.removeAttr("name").on("change keyup paste",function(){var number=new PhoneNumber(this.value);var country;if(number.hasDialCode())country=number.getCountry();else if(self.$trackerField.val())country=(new PhoneNumber(self.$trackerField.val())).getCountry();else country=self.picker.selectedCountry;if(typeof country!=="undefined")self.updateValue(country.dialCode)});this.picker.$.on("dialcodechange",function(event,country){self.updateValue(country.dialCode)})};
PhoneField.prototype.updateValue=function(dialCode){var self=this;var number=new PhoneNumber(self.$.val());var localNumber=number.getLocalNumber();self.$trackerField.val(function(){return self.options.valueWithDialCode&&localNumber?"+"+dialCode+localNumber:localNumber}).trigger("change")};PhoneField.prototype.validateOnChange=function(){var self=this;self.hasBeenEdited=false;self.$.on("change",function(){var number=new PhoneNumber(self.$trackerField.val());var country=number.getCountry();if(number.number)this.value=
number.getLocalNumber();self.picker.select(country);if(self.hasBeenEdited){var validationResult=number.validate();setTimeout(function(){self.$.trigger("validationchange",[validationResult===true,validationResult])},100)}self.hasBeenEdited=true})};function DialCodeList(){var self=this;this.$list=$('\x3cul class\x3d"dial-code-list"\x3e').prependTo("body");this.$list.data("instance",this);countries.forEach(this.addCountryOption,this);this.keyboardTracker();$("body").untilUnload("click",function(event){if(!self.$list.find(event.target).length&&
!$(event.target).is(".dial-code-picker, .dial-code-picker *"))self.close()})}DialCodeList.prototype.addCountryOption=function(country){var self=this;country.$=$("\x3cli\x3e",{text:country.name}).appendTo(this.$list);country.$.prepend(createDialCodeMarkup(country));country.$.on("click",function(){self.picker.select(country);self.close()})};DialCodeList.prototype.open=function(allowedCountries){var selectedCountry=this.picker.selectedCountry;allowedCountries=allowedCountries||[];if(allowedCountries.length){$(".dial-code-list \x3e li").hide();
allowedCountries.forEach(function(country){$(".dial-code-list \x3e li:has(."+country+")").show()})}else $(".dial-code-list \x3e li").show();this.$list.show();this.$list.css("z-index",this.picker.$.getZIndex()+10);if(selectedCountry.$!=undefined){selectedCountry.$.siblings(".active").removeClass("active");selectedCountry.$.addClass("active");this.scrollTo(selectedCountry.$)}};DialCodeList.prototype.close=function(){this.$list.remove()};DialCodeList.prototype.keyboardTracker=function(){var self=this;
var enteredCharacters="";var characterResetTimeout;var callback=function(event){if(self.$list.is(":visible")){var character=String.fromCharCode(event.which).toLowerCase();enteredCharacters+=character;var matchedCountries=countries.filter(function(country){return country.name.toLowerCase().startsWith(enteredCharacters)||country.dialCode==enteredCharacters});clearTimeout(characterResetTimeout);characterResetTimeout=setTimeout(function(){enteredCharacters=""},1800);if(matchedCountries.length)self.scrollTo(matchedCountries.first().$,
"fast")}};$(document).untilUnload("keypress",callback)};DialCodeList.prototype.scrollTo=function($target,scrollDuration){this.$list.animate({scrollTop:$target.position().top+this.$list.scrollTop()},scrollDuration||0)};DialCodeList.prototype.positionBy=function($field){if(this.picker.$.is(".modal-window *")||this.picker.$.is("#bankOfferContentHtml *")||this.picker.$.is(".ui-modal__window *"))this.$list.css({position:"fixed",top:$field.offsetInViewport().top+$field.outerHeight(),left:$field.offset().left});
else this.$list.css({top:$field.offset().top+$field.outerHeight(),left:$field.offset().left})};function DialCodePicker($input,options){var self=this;this.$input=$input;this.$=$('\x3cdiv class\x3d"dial-code-picker"\x3e').insertBefore($input);this.selectedCountry=null;var currentNumber=new PhoneNumber($input.val());var currentCountry=currentNumber.getCountry();if(typeof currentCountry!=="undefined")this.select(currentCountry);if(options.dialCodePicker&&this.getAllowedCountries().length!=1)this.$.addClass("dial-code-selection-enabled").click(function(){var dropdown=
new DialCodeList;dropdown.picker=self;dropdown.positionBy(self.$);if(dropdown.$list.is(":hidden")||dropdown.picker!==self)dropdown.open(self.getAllowedCountries());else dropdown.close()});else this.$.addClass("dial-code-selection-disabled")}DialCodePicker.prototype.getAllowedCountries=function(){var allowedCountries=[];if(this.$input.data("allowedCountries"))allowedCountries=this.$input.data("allowedCountries").toLowerCase().split(",");return allowedCountries};DialCodePicker.prototype.select=function(country){this.$.html(createDialCodeMarkup(country));
this.selectedCountry=country;this.$.trigger("dialcodechange",country)};$.fn.addDialCodePicker=function(){var $fields=this;if($fields.length)Swedbank.Countries.fetch().then(countryData=>{countries=sortByRelevantCountries(countryData);$fields.each(function(){try{new PhoneField(this)}catch(e){}})});return this};$.fn.removeDialCodePicker=function(){var $fields=this;if($fields.length)$fields.each(function(){$(this).find("input.phone-field").each(function(){var $input=$(this);if($input.prev().hasClass("dial-code-picker")){$input.unbind("click");
$input.attr("name",$input.next().attr("name"));$(this).prev().remove();$(this).next().remove()}})});return this};const legacyDialCodePickerInit=()=>{requestAnimationFrame(()=>{jQuery("#mainForm").find("input.phone-field").addDialCodePicker()})};if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",legacyDialCodePickerInit);legacyDialCodePickerInit()}else Swedbank.PageLoad.onEach(legacyDialCodePickerInit);Swedbank.PageLoad.onFirst(function(){$("body").on("validationchange",
".phone-field",function(event,isValid,validationResult){var $field=$(this);if(event.isDefaultPrevented())return;$field.next(".validation-message").remove();if(isValid)$field.parents("dd,div:first").removeClass("validation-error");else{$field.parents("dd,div:first").addClass("validation-error");$field.after('\x3cdiv class\x3d"validation-message"\x3e'+validationResult+"\x3c/div\x3e")}})})})(jQuery);
(function(){var Offers=Swedbank.Offers={};Offers.sendStatus=function(bankOfferUniqueId,status,cbOrPageId,comment){var offerDetailPageId="";var callback;if(typeof cbOrPageId==="string")callback=function(){Swedbank.Navigation.goTo(cbOrPageId)};else if(typeof cbOrPageId!=="function")callback=function(){};else callback=cbOrPageId;if(Swedbank.Navigation.isPrivate())offerDetailPageId="private.home.important.offers.offerdetail";if(Swedbank.Navigation.isBusiness())offerDetailPageId="business.useful.offerdetail";
$("navForm").request({parameters:{pageId:offerDetailPageId,offerUniqueId:bankOfferUniqueId},onComplete:function(response){$("navForm").request({parameters:{pageId:offerDetailPageId,field1:"answer_bank",value1:"true",field2:"answerType",value2:status,commentBox:comment||"Pla\u010diau"},onComplete:callback})}})}})();
(function(){var Limits=Swedbank.Limits={};Limits.limit=[];Limits.addLimit=function(limitId,limit){Limits.limit[limitId]=parseInt(limit)};Limits.getLimit=function(limitId){return typeof Limits.limit[limitId]==="undefined"?0:Limits.limit[limitId]};Limits.hasLimit=function(limitId){var limit=Limits.getLimit(limitId);return limit>0?true:false};Limits.link=function(limitId,url1,url2){return Limits.hasLimit(limitId)?url1:url2}})();
Swedbank.Network={ipToLong:function(ip){var numeric=ip.split(".");return((+numeric[0]*256+ +numeric[1])*256+ +numeric[2])*256+ +numeric[3]},longToIp:function(numeric){var ip=numeric%256;for(var i=3;i>0;i--){numeric=Math.floor(numeric/256);ip=numeric%256+"."+ip}return ip},isInSubnet:function(ip,ipOrMask){var parts=(ipOrMask||"").split("/");if(parts.length==1)return ip==ipOrMask;var maskIp=Swedbank.Network.ipToLong(parts[0]);var ipNumber=Swedbank.Network.ipToLong(ip);var freedom=Math.pow(2,32-parseInt(parts[1]));
return ipNumber>maskIp&&ipNumber<maskIp+freedom-1}};
var spoilersLoadCallback=()=>{const detachSpoilerContent=article=>{const heading=article.querySelector("h3");let siblings=[];if(heading&&article.querySelector(".form-button-bar",".disclaimer")){let elem=heading.nextElementSibling;while(elem){if(elem.matches(".form-button-bar, .disclaimer"))break;siblings.push(elem);elem=elem.nextElementSibling;elem.parentNode.removeChild(elem.previousElementSibling)}}return siblings};document.querySelectorAll(".offer").forEach(offer=>{if(offer.classList.contains("-force-no-spoiler"))return;
const article=offer.querySelector("article");if(article&&!article.querySelector(".spoiler")){const children=detachSpoilerContent(article);if(!children.length)return;const spoiler=UI.createElement({tagName:"ui-curtain",attributes:{layout:"spoiler",mobile:"mobile"},children:children});article.insertBefore(spoiler,article.querySelector("h3").nextElementSibling)}})};if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",spoilersLoadCallback);UI.whenDOMReady(spoilersLoadCallback)}else Swedbank.PageLoad.onEach(spoilersLoadCallback);
var menuResetCallback=()=>{const mainNav=document.querySelector("ui-nav#nav-main");if(window.matchMedia("(min-width: 1024px)").matches&&mainNav)mainNav.close();UI.dispatchCustomEvent(document.body,"menu-toggle",{active:false,group:"navigation"})};if(Swedbank.isUiSpaEnabled){SharedComponents.eventBus.addEventListener("spa-navigation-complete",menuResetCallback);UI.whenDOMReady(menuResetCallback)}else Swedbank.PageLoad.onEachUnload(menuResetCallback);
(function(l,g){var C=function(a,d){var c={},f;for(f in a)c[f]=d[f]&&0===d[f].length%2?d[f].concat(a[f]):a[f];return c},r=function(a){for(var d={},c=0;c<a.length;c++)d[a[c].toUpperCase()]=a[c];return d},x=function(a,d){return"string"===typeof a?-1!==p(d).indexOf(p(a)):!1},p=function(a){return a.toLowerCase()},v=function(a,d){if("string"===typeof a)return a=a.replace(/^\s\s*/,"").replace(/\s\s*$/,""),"undefined"===typeof d?a:a.substring(0,255)},q=function(a,d){for(var c=0,f,b,m,e,t,k;c<d.length&&!t;){var y=
d[c],z=d[c+1];for(f=b=0;f<y.length&&!t;)if(t=y[f++].exec(a))for(m=0;m<z.length;m++)k=t[++b],e=z[m],"object"===typeof e&&0<e.length?2===e.length?this[e[0]]="function"==typeof e[1]?e[1].call(this,k):e[1]:3===e.length?this[e[0]]="function"!==typeof e[1]||e[1].exec&&e[1].test?k?k.replace(e[1],e[2]):g:k?e[1].call(this,k,e[2]):g:4===e.length&&(this[e[0]]=k?e[3].call(this,k.replace(e[1],e[2])):g):this[e]=k?k:g;c+=2}},w=function(a,d){for(var c in d)if("object"===typeof d[c]&&0<d[c].length)for(var f=0;f<d[c].length;f++){if(x(d[c][f],
a))return"?"===c?g:c}else if(x(d[c],a))return"?"===c?g:c;return a},A={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2E3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},B={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],["version",["name","Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],["version",["name","Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],["name",
"version"],[/opios[\/ ]+([\w\.]+)/i],["version",["name","Opera Mini"]],[/\bopr\/([\w\.]+)/i],["version",["name","Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,
/(weibo)__([\d\.]+)/i],["name","version"],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],["version",["name","UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],["version",["name","WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],["version",["name","WeChat"]],[/konqueror\/([\w\.]+)/i],["version",["name","Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],["version",["name","IE"]],[/yabrowser\/([\w\.]+)/i],["version",["name","Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[["name",/(.+)/,"$1 Secure Browser"],
"version"],[/\bfocus\/([\w\.]+)/i],["version",["name","Firefox Focus"]],[/\bopt\/([\w\.]+)/i],["version",["name","Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],["version",["name","Coc Coc"]],[/dolfin\/([\w\.]+)/i],["version",["name","Dolphin"]],[/coast\/([\w\.]+)/i],["version",["name","Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/fxios\/([-\w\.]+)/i],["version",["name","Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[["name","360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],
[["name",/(.+)/,"$1 Browser"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],["name","version"],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],["name"],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[["name","Facebook"],"version"],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],
["name","version"],[/\bgsa\/([\w\.]+) .*safari\//i],["version",["name","GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],["version",["name","Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[["name","Chrome WebView"],"version"],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],["version",["name","Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],["name","version"],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],
["version","name"],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],["name",["version",w,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[["name","Netscape"],"version"],[/mobile vr; rv:([\w\.]+)\).+firefox/i],["version",["name","Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,
/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],
[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",p]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",p]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],
["model",["vendor","Samsung"],["type","tablet"]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],["model",["vendor","Samsung"],["type","mobile"]],[/\((ip(?:hone|od)[\w ]*);/i],["model",["vendor","Apple"],["type","mobile"]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],["model",["vendor","Apple"],["type","tablet"]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],["model",["vendor","Huawei"],["type",
"tablet"]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],["model",["vendor","Huawei"],["type","mobile"]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],
[["model",/_/g," "],["vendor","Xiaomi"],["type","tablet"]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],["model",["vendor","OPPO"],["type","mobile"]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],["model",["vendor","Vivo"],["type","mobile"]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],["model",["vendor","Realme"],["type","mobile"]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],
["model",["vendor","Motorola"],["type","mobile"]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],["model",["vendor","Motorola"],["type","tablet"]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],["model",["vendor","LG"],["type","tablet"]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],["model",["vendor","LG"],["type","mobile"]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],
["model",["vendor","Lenovo"],["type","tablet"]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[["model",/_/g," "],["vendor","Nokia"],["type","mobile"]],[/(pixel c)\b/i],["model",["vendor","Google"],["type","tablet"]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],["model",["vendor","Google"],["type","mobile"]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],["model",["vendor","Sony"],["type","mobile"]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],
[["model","Xperia Tablet"],["vendor","Sony"],["type","tablet"]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],["model",["vendor","OnePlus"],["type","mobile"]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[["model",/(.+)/g,"Fire Phone $1"],["vendor","Amazon"],["type","mobile"]],[/(playbook);[-\w\),; ]+(rim)/i],["model","vendor",["type","tablet"]],
[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],["model",["vendor","ASUS"],["type","tablet"]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],["model",["vendor","ASUS"],["type","mobile"]],[/(nexus 9)/i],["model",["vendor","HTC"],["type","tablet"]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],
["vendor",["model",/_/g," "],["type","mobile"]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],["model",["vendor","Acer"],["type","tablet"]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],["model",["vendor","Meizu"],["type","mobile"]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],["model",["vendor","Sharp"],["type","mobile"]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,
/(jolla)/i,/(oppo) ?([\w ]+) bui/i],["vendor","model",["type","mobile"]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],["vendor","model",["type","tablet"]],[/(surface duo)/i],["model",["vendor","Microsoft"],["type","tablet"]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],["model",
["vendor","Fairphone"],["type","mobile"]],[/(u304aa)/i],["model",["vendor","AT\x26T"],["type","mobile"]],[/\bsie-(\w*)/i],["model",["vendor","Siemens"],["type","mobile"]],[/\b(rct\w+) b/i],["model",["vendor","RCA"],["type","tablet"]],[/\b(venue[\d ]{2,7}) b/i],["model",["vendor","Dell"],["type","tablet"]],[/\b(q(?:mv|ta)\w+) b/i],["model",["vendor","Verizon"],["type","tablet"]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],["model",["vendor","Barnes \x26 Noble"],["type","tablet"]],[/\b(tm\d{3}\w+) b/i],
["model",["vendor","NuVision"],["type","tablet"]],[/\b(k88) b/i],["model",["vendor","ZTE"],["type","tablet"]],[/\b(nx\d{3}j) b/i],["model",["vendor","ZTE"],["type","mobile"]],[/\b(gen\d{3}) b.+49h/i],["model",["vendor","Swiss"],["type","mobile"]],[/\b(zur\d{3}) b/i],["model",["vendor","Swiss"],["type","tablet"]],[/\b((zeki)?tb.*\b) b/i],["model",["vendor","Zeki"],["type","tablet"]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[["vendor","Dragon Touch"],"model",["type","tablet"]],[/\b(ns-?\w{0,9}) b/i],
["model",["vendor","Insignia"],["type","tablet"]],[/\b((nxa|next)-?\w{0,9}) b/i],["model",["vendor","NextBook"],["type","tablet"]],[/\b(xtreme_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[["vendor","Voice"],"model",["type","mobile"]],[/\b(lvtel\-)?(v1[12]) b/i],[["vendor","LvTel"],"model",["type","mobile"]],[/\b(ph-1) /i],["model",["vendor","Essential"],["type","mobile"]],[/\b(v(100md|700na|7011|917g).*\b) b/i],["model",["vendor","Envizen"],["type","tablet"]],[/\b(trio[-\w\. ]+) b/i],["model",["vendor",
"MachSpeed"],["type","tablet"]],[/\btu_(1491) b/i],["model",["vendor","Rotor"],["type","tablet"]],[/(shield[\w ]+) b/i],["model",["vendor","Nvidia"],["type","tablet"]],[/(sprint) (\w+)/i],["vendor","model",["type","mobile"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],["model",["vendor","Zebra"],["type","tablet"]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],["model",["vendor","Zebra"],["type","mobile"]],
[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],["vendor","model",["type","console"]],[/droid.+; (shield) bui/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation [345portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],["model",["vendor","Microsoft"],["type","console"]],[/smart-tv.+(samsung)/i],["vendor",["type","smarttv"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],
[["vendor","LG"],["type","smarttv"]],[/(apple) ?tv/i],["vendor",["model","Apple TV"],["type","smarttv"]],[/crkey/i],[["model","Chromecast"],["vendor","Google"],["type","smarttv"]],[/droid.+aft(\w)( bui|\))/i],["model",["vendor","Amazon"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[["vendor",v],["model",v],["type","smarttv"]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],
[["type","smarttv"]],[/((pebble))app/i],["vendor","model",["type","wearable"]],[/droid.+; (glass) \d/i],["model",["vendor","Google"],["type","wearable"]],[/droid.+; (wt63?0{2,3})\)/i],["model",["vendor","Zebra"],["type","wearable"]],[/(quest( 2)?)/i],["model",["vendor","Facebook"],["type","wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],["vendor",["type","embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],["model",["type","mobile"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],
["model",["type","tablet"]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[["type","tablet"]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[["type","mobile"]],[/(android[-\w\. ]{0,9});.+buil/i],["model",["vendor","Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],["version",["name","Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,
/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]{1,9})\b.+(gecko)/i],["version","name"]],os:[[/microsoft (windows) (vista|xp)/i],["name","version"],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],["name",["version",w,A]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[["name","Windows"],["version",w,A]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],
[["version",/_/g,"."],["name","iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[["name","Mac OS"],["version",/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],["version","name"],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],["name","version"],[/\(bb(10);/i],["version",["name","BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],["version",
["name","Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],["version",["name","Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],["version",["name","webOS"]],[/crkey\/([\d\.]+)/i],["version",["name","Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,
/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],["name","version"],[/(sunos) ?([\w\.\d]*)/i],[["name","Solaris"],
"version"],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],["name","version"]]},h=function(a,d){"object"===typeof a&&(d=a,a=g);if(!(this instanceof h))return(new h(a,d)).getResult();var c=a||("undefined"!==typeof l&&l.navigator&&l.navigator.userAgent?l.navigator.userAgent:""),f=d?C(B,d):B;this.getBrowser=function(){var b={};b.name=g;b.version=g;q.call(b,c,f.browser);var m=b.version;m="string"===
typeof m?m.replace(/[^\d\.]/g,"").split(".")[0]:g;b.major=m;return b};this.getCPU=function(){var b={};b.architecture=g;q.call(b,c,f.cpu);return b};this.getDevice=function(){var b={};b.vendor=g;b.model=g;b.type=g;q.call(b,c,f.device);return b};this.getEngine=function(){var b={};b.name=g;b.version=g;q.call(b,c,f.engine);return b};this.getOS=function(){var b={};b.name=g;b.version=g;q.call(b,c,f.os);return b};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),
os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return c};this.setUA=function(b){c="string"===typeof b&&255<b.length?v(b,255):b;return this};this.setUA(c);return this};h.VERSION="1.0.2";h.BROWSER=r(["name","version","major"]);h.CPU=r(["architecture"]);h.DEVICE=r("model vendor type console mobile smarttv tablet wearable embedded".split(" "));h.ENGINE=h.OS=r(["name","version"]);"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=
h),exports.UAParser=h):"function"===typeof define&&define.amd?define(function(){return h}):"undefined"!==typeof l&&(l.UAParser=h);var n="undefined"!==typeof l&&(l.jQuery||l.Zepto);if(n&&!n.ua){var u=new h;n.ua=u.getResult();n.ua.get=function(){return u.getUA()};n.ua.set=function(a){u.setUA(a);a=u.getResult();for(var d in a)n.ua[d]=a[d]}}})("object"===typeof window?window:this);
var Controls={shadowContainer:null,applyShadowing:function(e,ignoreLoading){if(e==null)return;var $element=typeof e==="string"?jQuery("#"+e):jQuery(e);var shadowElement=Controls.getShadowElement($element);var zIndex=$element==null?1E4:Number($element.zIndex())+1;shadowElement.zIndex(zIndex);if(!ignoreLoading){jQuery("html").addClass("-loading");jQuery(shadowElement).addClass("-loading")}},removeShadowing:function(ignoreLoading){if(Controls.shadowContainer!=null)Controls.shadowContainer.hide();if(!ignoreLoading){jQuery("html").removeClass("-loading");
jQuery(Controls.shadowContainer).removeClass("-loading")}},reloadControl:function(container,controlId,params,userCallbacks,exceptionContainerId){var callbacks={onFailure:function(){},onRefresh:function(){}};jQuery.extend(callbacks,userCallbacks||{});var parameters={controlId:controlId,pageId:"controls"};jQuery.extend(parameters,params||{});var $container=jQuery("#"+container);Controls.applyShadowing($container);makeAjaxRequest(document.mainForm,parameters,function(transport){Controls.removeShadowing();
var json=transport.responseJSON;if(json!=null&&json.exception){if(typeof parameters.exceptionContainerTarget!="undefined")$container=jQuery("#"+parameters.exceptionContainerTarget);var exceptionsContainer=$container.find(exceptionContainerId!=null?exceptionContainerId:"._exceptionsContainer").first();if(exceptionsContainer){exceptionsContainer.show();exceptionsContainer.html(json.exception);callbacks.onFailure(json)}}else{if(controlId==="CommunicationControl"){[].forEach.call(document.querySelectorAll("ui-navtoggle"),
function(toggle){if(toggle.active)toggle.animated=false});SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:false})}$container.html("");$container.replaceWith(transport.responseText);callbacks.onRefresh()}})},executeControl:function(container,controlId,params,userCallbacks,exceptionContainerId,ignoreLoading){var callbacks={onFailure:function(json){},onSuccess:function(transport){}};jQuery.extend(callbacks,userCallbacks||{});var parameters={controlId:controlId,pageId:"controls"};
jQuery.extend(parameters,params||{});var $container=jQuery("#"+container);if($container){Controls.applyShadowing($container,ignoreLoading);makeAjaxRequest(document.mainForm,parameters,function(transport){Controls.removeShadowing(ignoreLoading);var json=transport.responseJSON;if(json!=null&&json.exception){var exceptionsContainer=$container.find(exceptionContainerId!=null?exceptionContainerId:"._exceptionsContainer").first();if(exceptionsContainer){exceptionsContainer.show();exceptionsContainer.html(json.exception)}callbacks.onFailure(json)}else callbacks.onSuccess(transport)})}},
executeJsonControl:function(container,controlId,params,config){var configuration={onFailure:function(json){},onSuccess:function(json){}};Object.extend(configuration,config||{});var parameters={controlId:controlId,pageId:"controls"};jQuery.extend(parameters,params||{});var $container=jQuery("#"+container);Controls.applyShadowing($container);makeAjaxRequest(document.mainForm,parameters,function(transport){Controls.removeShadowing();var json=transport.responseJSON;if(json!=null&&json.errors){configuration.onFailure(json);
jQuery(json.errors).each(function(){ErrorMessage.add(this.message)})}else{configuration.onSuccess(json);jQuery(json.warnings).each(function(){WarningMessage.add(this.toString())});jQuery(json.messages).each(function(){SuccessMessage.add(this.toString())});jQuery(json.infos).each(function(){InfoMessage.add(this.toString())})}},{headers:{accept:"application/vnd.swedbank+json;version\x3d2"}})},getShadowElement:function(e){var position=e==null?false:e.offset();var callerVisible=false;if(position)callerVisible=
position.left>0&&position.top>0;var shadowContainer=Controls.shadowContainer;if(shadowContainer==null){shadowContainer=jQuery("\x3cdiv/\x3e",{"class":"loading-control"});var loadingImage=jQuery("\x3cins/\x3e",{"class":"loader"});jQuery(document.body).append(shadowContainer)}else shadowContainer.show();if(callerVisible)jQuery(shadowContainer).offset(position);else shadowContainer.addClass("-shadow-loading");Controls.shadowContainer=shadowContainer;return shadowContainer}};
(function($){if(Swedbank.isUiSpaEnabled)return;const FORMDATA_USABLE=typeof FormData.prototype.set==="function";var originalActions={navigateTo:window.navigateTo,doSubmit:window.doSubmit,runLinkAction:window.runLinkAction,Navigate:{to:window.Navigate.to}};var spaActions={navigateTo:function(pageId,paramName1,paramValue1,paramName2,paramValue2){var params={"pageId":pageId||Swedbank.Navigation.pageId,"field1":paramName1,"value1":paramValue1,"field2":paramName2,"value2":paramValue2};setPageId(document.navForm,
pageId);spaAjax(document.navForm,params,false)},doSubmit:function(control,pageId,paramValue1,paramName2,paramValue2){var params={"pageId":pageId||Swedbank.Navigation.pageId,"field1":control?control.name:undefined,"value1":isEmpty(paramValue1)?"true":paramValue1,"field2":paramName2,"value2":paramValue2};spaAjax(document.mainForm,params,true)},runLinkAction:function(form,pageId,paramName1,paramValue1,paramName2,paramValue2,anchor){var params={"pageId":pageId||Swedbank.Navigation.pageId,"field1":paramName1,
"value1":isEmpty(paramValue1)?paramName1:paramValue1,"field2":paramName2,"value2":isEmpty(paramValue2)?paramName2:paramValue2};spaAjax(form,params,true,anchor)},Navigate:{to:function(pageId,params,form){spaAjax(form||document.navForm,$.extend(params,{pageId:pageId}),form!==document.navForm)}}};var dynamicActions={navigateTo:function(){return methodCall("navigateTo",document.navForm,arguments)},doSubmit:function(){return methodCall("doSubmit",document.mainForm,arguments)},runLinkAction:function(){return methodCall("runLinkAction",
arguments[0],arguments)},Navigate:{to:function(){return methodCall("Navigate.to",arguments[2]||document.navForm,arguments)}}};Swedbank.SPA={switchSinglePageMode:function(flag){$.extend(true,window,flag?dynamicActions:originalActions)},OriginalActions:originalActions};handleHistoryPopstate();function spaAjax(form,params,checkReadyness,anchor){if(HTMLCollection.prototype.isPrototypeOf(form)){Swedbank.warn("HTMLFormElement is expected but HTMLCollection is given as a form. The last element from the collection is going to be taken as a form instead of whole collection");
form=form[form.length-1]}TimeoutNotifier.prolongSessionWithoutRequest();var isFormInvalid=!!form.validator?!form.checkValidity():typeof $(form).valid==="function"&&$(form).hasClass(".jquery-form-validation")&&!$(form).valid();if(isFormInvalid)return;if(checkReadyness){if(!readyToSubmit())return;setSubmitTime()}if(Swedbank.chatStartable!==null)Swedbank.chatStartable=false;binaryAwareRequest();function binaryAwareRequest(){Swedbank.toggleLoader(true);var xhr=new XMLHttpRequest;xhr.open("POST",form.action,
true);xhr.setRequestHeader("X-Single-Page-Navigation","true");xhr.responseType="arraybuffer";xhr.onload=onLoad;sendRequest();function creteFormData(){var $emptyFileFields=$(form).find("input[type\x3dfile]:not([disabled])").filter(function(i,e){return $(e).val()===""});$emptyFileFields.attr("disabled",true);var formData=new FormData(form);formData.append("navigation_timestamp",(new Date).toString());$emptyFileFields.attr("disabled",false);return formData}function sendRequest(){var data;if(FORMDATA_USABLE){data=
creteFormData();$.each(params,function(key,value){data.set(key,value)})}else{xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");data=$.param($.extend($(form).serializeObject(),params))}xhr.send(data)}function onLoad(){Swedbank.toggleLoader(false);window.lastSubmitTime=0;if(this.status===200)if(xhr.getResponseHeader("Content-Type").startsWith("text/html"))handleAsTextWith(updatePageContent);else handleFileDownload(xhr)}function handleAsTextWith(callback){var blob=new Blob([xhr.response],
{type:xhr.getResponseHeader("Content-Type")});var reader=new FileReader;reader.onload=function(){callback(reader.result)};reader.readAsText(blob)}}function handleFileDownload(xhr){var filename="";var disposition=xhr.getResponseHeader("Content-Disposition");if(disposition&&disposition.indexOf("attachment")!==-1){var filenameRegex=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/;var matches=filenameRegex.exec(disposition);if(matches!=null&&matches[1])filename=matches[1].replace(/['"]/g,"")}var contentType=
xhr.getResponseHeader("Content-Type");var blob=!/Edge/.test(navigator.userAgent)&&typeof File==="function"?new File([xhr.response],filename,{type:contentType}):new Blob([xhr.response],{type:contentType});if(typeof window.navigator.msSaveOrOpenBlob!=="undefined")window.navigator.msSaveOrOpenBlob(blob,filename);else{var URL=window.URL||window.webkitURL;var downloadUrl=URL.createObjectURL(blob);var a;if(filename){a=document.createElement("a");if(typeof a.download==="undefined")window.location=downloadUrl;
else{a.href=downloadUrl;a.download=filename;document.body.appendChild(a);a.click()}}else window.location=downloadUrl;setTimeout(function(){URL.revokeObjectURL(downloadUrl);if(a&&a.parentNode)a.parentNode.removeChild(a)},100)}}function updatePageContent(resp){Swedbank.PageLoad.prepareForPageLoad();updateReferrer();updateLastPageId();if(Swedbank.chatStartable!==null)Swedbank.chatStartable=true;if(typeof Swedbank.canCheckProactiveChatState!=="undefined"){jQuery(document).ready(clearProactiveTimeouts);
if(Swedbank.canCheckProactiveChatState)jQuery(document).ready(checkProactiveChatState)}var $response=$(resp);moveToHead("meta,title");var $content=$("#content");var mainNav=document.getElementById("nav-main");var spoeBar=document.querySelector("spoe-bar");if(!anchor)window.scrollTo(0,0);$content.html($response);changeHistoryState();Swedbank.PageLoad.pageLoaded();if(spoeBar)spoeBar.rebuildSPOEBar();if(Swedbank.User)SharedComponents.eventBus.dispatchCustomEvent("update-spoe");if(mainNav)mainNav.selectMenuItemById(Swedbank.Navigation.pageId);
function moveToHead(selector){var $elements=$response.appendTo("\x3cdiv/\x3e").parent().find(selector).detach();if($elements.length){var $pageHead=$("head");$pageHead.find(selector).remove();$pageHead.append($elements);$response=$elements.end().children()}}function changeHistoryState(){if(!isComingFromPopState(params)){var url=Swedbank.Navigation.url;if(anchor)url+="#"+anchor;history.pushState({pageId:params.pageId},Swedbank.Navigation.pageId,url)}}}}function updateReferrer(){Swedbank.Navigation.referrer=
window.location.href}function updateLastPageId(){Swedbank.Navigation.lastPageId=Swedbank.Navigation.pageId}function handleHistoryPopstate(){window.onpopstate=function(event){if(event.state===null&&document.location.href.indexOf("#")>-1){event.preventDefault();return false}if(isCreatedWithSpa())spaAjax(document.navForm,history.state,false);else location.reload()}}function isCreatedWithSpa(){return history.state!==null}function isComingFromPopState(params){return history.state===params}function getActionsObject(targetPageId,
hasTarget,form){if(!FORMDATA_USABLE&&$(form).find(":file").length)return originalActions;if(hasTarget)return originalActions;return isSpaCompatible(targetPageId||Swedbank.Navigation.pageId)?spaActions:originalActions}function methodCall(name,form,args){var pageId;var isDoSubmit=name=="doSubmit";var isRunLinkAction=name=="runLinkAction";fixAndSetPageId(isDoSubmit||isRunLinkAction?1:0);if(!pageId)if(isRunLinkAction){lookupPageIdAtIndex(2);lookupPageIdAtIndex(4)}else{lookupPageIdAtIndex(1);lookupPageIdAtIndex(3)}function lookupPageIdAtIndex(index){if(args[index]==
"pageId")fixAndSetPageId(index+1)}function fixAndSetPageId(fromIndex){pageId=args[fromIndex]=(args[fromIndex]||"").replace(/\//g,".")}var hasTarget=!!args[isDoSubmit?5:isRunLinkAction?7:6];var actionsObject=getActionsObject(pageId,hasTarget,form);if(name.indexOf(".")!==-1){var parts=name.split(".");for(var i=0;i<parts.length-1;i++)actionsObject=actionsObject[parts[i]];name=parts[parts.length-1]}return actionsObject[name].apply(null,args)}function isSpaCompatible(pageId){if(!pageId)return false;var parts=
pageId.split(".");var nodes=[Swedbank.Menu.menuStructure];var node;var depth=0;var currentPath=parts[depth];var isSpa=false;while(true){node=nodes.filter(o=>o["id"]===currentPath)[0];if(!node)return false;isSpa=node.spa===true||node.spa===false?node.spa:isSpa;if(node.id==pageId||!node.children||++depth>=parts.length)return isSpa;currentPath+="."+parts[depth];nodes=node.children}}Swedbank.PageLoad.onEachUnload(function(){$("table").stickyTableHeaders("destroy");if($.datepicker&&$.datepicker.initialized){$(document).off("mousedown",
$.datepicker._checkExternalClick);$.datepicker.initialized=false}if(typeof Highcharts!=="undefined"){if(Highcharts.charts)Highcharts.charts.forEach(chart=>{if(chart)chart.destroy()});Highcharts=HighchartsAdapter=undefined}if(typeof ChartsComponents!=="undefined"&&ChartsComponents.Highcharts)if(ChartsComponents.Highcharts.charts)ChartsComponents.Highcharts.charts.forEach(chart=>{if(chart)chart.destroy()});Swedbank.PageConfig={};try{const cookieConsent=Swedbank.UICookies.getConsentElem();cookieConsent.destroyUnwantedCookies();
cookieConsent.destroyUnwantedStorage()}catch(e){}$(document).off("touchstart.jcrop-ios");if(typeof $.fn.parallax==="function")$('[data-parallax\x3d"scroll"]').parallax("destroy")})})(jQuery);
(function(){var ip=Swedbank.ip=function(){var listeners=[];var statement={set:"all"};return{paymentsListPageLink:"",allAccountsData:[],currency:[],currencyField:[],labels:{},isBalanceVisible:"",countries:[],multipleAccounts:false,creditorAccountName:"",preparedResult:"",smartPaymentLastTrxStatus:"",countryLocale:"",addDebugData:false,askPassword:false,showError:function(messageLabel){var errorMsg=this.setErrorMessage(messageLabel);jQuery("#errorMessageBox").show();jQuery("#errorMessage").addClass("errorMsg").html(errorMsg);
window.location.hash="#errorMessage"},setErrorMessage:function(messageLabel){return'\x3clabel id\x3d"error-msg"\x3e'+messageLabel+"\x3c/label\x3e"},hideAllMessages:function(){jQuery("#error-msg").remove();jQuery("#errorMessageBox").hide()},setAllAccountsData:function(data){this.allAccountsData=JSON.parse(data)},setLabels:function(labels){jQuery.extend(this.labels,labels)}}}()})();
Swedbank.LoanApplication=class{static application(app){const applications={["small-loan"]:{type:Swedbank.country==="LT"?"CONSUMER_LOAN_QUICK":"SMALL_LOAN",prevType:Swedbank.country==="LT"?"CONSUMER_LOAN_QUICK":"SMALL_LOAN"},["home-small-loan"]:{type:Swedbank.country==="LT"?"CONSUMER_LOAN_QUICK":"SMALL_LOAN",prevType:Swedbank.country==="LT"?"CONSUMER_LOAN_QUICK":"SMALL_LOAN"},["home-loan"]:{type:Swedbank.country==="LV"?"MORTGAGE_LOAN":"HOUSING_LOAN",prevType:Swedbank.country==="LV"?"MORTGAGE_LOAN":
"HOUSING_LOAN"},["credit-line"]:{type:"PCL",prevType:"PCL"},["car-lease"]:{type:"CAR_LEASE",prevType:"CAR_LEASE"},["car-loan"]:{type:Swedbank.country==="LT"?"CONSUMER_LOAN_QUICK":"SMALL_LOAN",prevType:Swedbank.country==="LT"?"CONSUMER_LOAN_QUICK":"SMALL_LOAN"}};return applications[app]}static submitLoanApp(pageId,params){const mainForm=document.mainForm;if(params.application){params.type=params.application.type;params.prevType=params.application.prevType;delete params.application}params.infoAtBegin=
true;setPageId(mainForm,pageId);_fillForm(mainForm,params);mainForm.submit()}};
Swedbank.ContactData=class{static get ACTION(){return"getMdmContactInformationAsJson"}static get PAGE_ID(){return"private.home.important.aml"}static get restService(){return Swedbank.RestService.get()}static get fetchAllowed(){return Swedbank.isAuthenticated&&Swedbank.Navigation.isPrivate()}static async fetchContacts(){if(this.fetchAllowed)return await this.restService.callAction(this.ACTION,{pageId:this.PAGE_ID}).then(response=>response.contactInformation).catch(()=>{});else return{}}static async getContacts(){const contacts=
await Swedbank.ContactData.fetchContacts();return{email:contacts.email||"",phone:contacts.primaryPhoneNumber||""}}static async getEmail(){const contacts=await Swedbank.ContactData.getContacts();return contacts.email||""}static async getPhone(){const contacts=await Swedbank.ContactData.getContacts();return contacts.phone||""}};
Swedbank.SimpleTablePagination=class SimpleTablePagination{constructor(pagination,table){if(!pagination||!table){console.error("Pagination or table element is missing.");return}SimpleTablePagination.pagination=pagination;SimpleTablePagination.table=table;if(SimpleTablePagination.tableRows.length<=SimpleTablePagination.pageSize)SimpleTablePagination.pagination.hide();else SimpleTablePagination.pagination.show();SimpleTablePagination.setTableRowsDataAttributes();SimpleTablePagination.pagination.addEventListener("change",
SimpleTablePagination.paginationListener)}static set pagination(pagination){this._pagination=pagination}static get pagination(){return this._pagination}static set table(table){this._table=table}static get table(){return this._table}static get pageSize(){return SimpleTablePagination.pagination.pageSize}static get tableRows(){return SimpleTablePagination.table.querySelectorAll("tbody tr")}static setTableRowsDataAttributes(){let page=1;this.tableRows.forEach((row,index)=>{if(index<SimpleTablePagination.pageSize)row.dataset.page=
page.toString();else{if(index%SimpleTablePagination.pageSize===0)page++;row.dataset.page=page.toString();UI.hide(row)}})}static paginationListener(event){const currentPage=event.detail.currentPage;SimpleTablePagination.pagination.currentPage=currentPage;SimpleTablePagination.pagination.pageSize=event.detail.pageSize;SimpleTablePagination.setTableRowsDataAttributes();SimpleTablePagination.setTableRowsVisibility(currentPage)}static setTableRowsVisibility(currentPage){this.tableRows.forEach(row=>currentPage===
+row.dataset.page?UI.show(row):UI.hide(row))}};
SharedComponents.eventBus.addEventListener("spa-navigation-start",()=>Swedbank.toggleLoader(true));SharedComponents.eventBus.addEventListener("spa-navigation-complete",()=>Swedbank.toggleLoader(false));SharedComponents.eventBus.addEventListener("spa-navigation-failed",()=>Swedbank.toggleLoader(false));SharedComponents.eventBus.addEventListener("loading-start",()=>Swedbank.toggleLoader(true));SharedComponents.eventBus.addEventListener("loading-complete",()=>Swedbank.toggleLoader(false));
SharedComponents.eventBus.addEventListener("application-changed",()=>Swedbank.toggleLoader(true));SharedComponents.eventBus.addEventListener("language-changed",()=>Swedbank.toggleLoader(true));
Swedbank.UIAwards=class{static get sortStatus(){return{YES:"yes",NO:"no"}}constructor(container,modal,filterElem=null,curtain=null){if(!container)throw new Error("First argument should be HTMLElement container.");if(!modal)throw new Error("Second argument should be UIModal element.");this.container=container;this.modal=modal;this.filterElem=filterElem;this.curtain=curtain;this.offers=this.container.querySelectorAll("ui-award");this.views=this.modal.querySelector("ui-views");this.details=this.modal.querySelector("ui-awarddetails");
this.filtered=false;this.index=0}setupDetailsModal(){const parentTab=this.container.closest("ui-tab");if(parentTab&&parentTab.hasAttribute("label-badge"))parentTab.labelBadge=String(this.offers.length);this.container.addEventListener("award-open",this._handleFeatureOpen.bind(this));this.details.prevBtn.addEventListener("click",this._handlePrev.bind(this));this.details.nextBtn.addEventListener("click",this._handleNext.bind(this));if(this.filterElem){const checkboxes=this.filterElem.querySelectorAll('[type\x3d"checkbox"]');
[].forEach.call(checkboxes,checkbox=>{const value=checkbox.value;const sum=this.container.querySelectorAll(`ui-award[data-${this.filterElem.dataset.sortBy}*="${value}"]`).length;const counterElem=this.container.querySelector(`span[data-count-label="${value}"]`);checkbox.dataset.count=String(sum);if(sum>0&&counterElem)UI.setInnerText(counterElem,`(${sum})`);else UI.hide(checkbox.parentElement);checkbox.addEventListener("click",this.filtrate.bind(this))});if([].filter.call(checkboxes,c=>c.checked).length>
0)this.filtrate()}}_handleFeatureOpen(event){const award=event.target;const link=award.getInnerLink();if(link&&link.href)return;this.index=award.awardId;this.views.selectByIndex(this.index);this._handleButtonsDisplay();this.modal.open()}_handleButtonsDisplay(){if(this.filtered){this.details.nextBtn.disabled=!this.views.querySelector("ui-view:nth-child("+(this.index+1)+') ~ ui-view[data-sorted\x3d"yes"]');this.details.prevBtn.disabled=this.views.querySelector("ui-view:nth-child("+(this.index+1)+")")===
this.views.querySelector('ui-view[data-sorted\x3d"yes"]')}else{this.details.nextBtn.disabled=this.index===this.views.children.length-1;this.details.prevBtn.disabled=this.index===0}}_handlePrev(event){event.preventDefault();if(this.filtered)while(--this.index&&this.index>=0){if(this.views.children[this.index].dataset.sorted===Swedbank.UIAwards.sortStatus.YES)break}else this.index--;this.views.selectByIndex(this.index);this._handleButtonsDisplay()}_handleNext(event){event.preventDefault();if(this.filtered)while(++this.index<
this.views.children.length){if(this.views.children[this.index].dataset.sorted===Swedbank.UIAwards.sortStatus.YES)break}else this.index++;this.views.selectByIndex(this.index);this._handleButtonsDisplay()}filtrate(){const checkedBoxes=this.filterElem.querySelectorAll('[type\x3d"checkbox"]:checked');const values=[].map.call(checkedBoxes,c=>c.value);const allAwards=this.container.querySelectorAll("ui-award");[].forEach.call(allAwards,award=>{const view=this.views.children[award.awardId];let matched=values.length===
0;for(let i=0;i<values.length;i++)if(award.dataset[this.filterElem.dataset.sortBy].includes(values[i])){matched=true;break}if(matched){award.show();view.dataset.sorted=Swedbank.UIAwards.sortStatus.YES}else{award.hide();view.dataset.sorted=Swedbank.UIAwards.sortStatus.NO}});this.filtered=values.length>0;if(this.curtain&&!this.curtain.open)this.curtain.activate()}};
Swedbank.UIModals={open:function(modalId,params){var _params=params||{};var modal=document.getElementById(modalId);if(!modal){console.error("Modal with id "+modalId+" does not exists");return}modal.classList.add("-legacy");var placeholders=modal.querySelector(".modal-messages");if(!placeholders){var html='\x3cdiv class\x3d"modal-messages"\x3e'+'\x3cdiv id\x3d"modalErrorMessagesContainer" style\x3d"display:none" class\x3d"error-message-container"\x3e\x3cdiv id\x3d"modalErrorMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+
'\x3cdiv id\x3d"modalLoginErrorMessagesContainer" style\x3d"display:none" class\x3d"error-message-container"\x3e\x3cdiv id\x3d"modalLoginErrorMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+'\x3cdiv id\x3d"modalWarningMessagesContainer" style\x3d"display:none" class\x3d"warning-message-container"\x3e\x3cdiv id\x3d"modalWarningMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+'\x3cdiv id\x3d"modal-login-error" style\x3d"display:none" class\x3d"warning-message-container"\x3e\x3cdiv id\x3d"modal-login-warning"\x3e\x3c/div\x3e\x3c/div\x3e'+
'\x3cdiv id\x3d"modalInfoMessagesContainer" style\x3d"display:none" class\x3d"info-message-container"\x3e\x3cdiv id\x3d"modalInfoMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+'\x3cdiv id\x3d"modalSuccessMessagesContainer" style\x3d"display:none" class\x3d"success-message-container"\x3e\x3cdiv id\x3d"modalSuccessMessage"\x3e\x3c/div\x3e\x3c/div\x3e'+"\x3c/div\x3e";var modalBody=modal.querySelector(".ui-modal__body");if(modalBody)modalBody.insertAdjacentHTML("afterbegin",html)}UI.dispatchCustomEvent(document.body,
"modal-open",{selector:"#"+modalId,params:_params})},close:function(modalId){document.getElementById(modalId).close()},closeActive:function(){UI.dispatchCustomEvent(document.body,"modal-close-top")},alert:function(title,options){let defaults={description:null,trustedSource:false};options=Object.assign(defaults,options||{});if(options.trustedSource){title=UI.createElement({tagName:"div",children:[title]},true);if(options.description)options.description=UI.createElement({tagName:"div",children:[options.description]},
true)}return new Promise(function(){UI.dispatchCustomEvent(document.body,"modal-open",{type:"alert",content:{title:title,description:options.description}})})},confirm:function(title,options){let defaults={description:null,showCloseAction:false,trustedSource:false,buttons:"yesNo"};options=Object.assign(defaults,options||{});if(options.trustedSource){title=UI.createElement({tagName:"div",children:[title]},true);if(options.description)options.description=UI.createElement({tagName:"div",children:[options.description]},
true)}return new Promise(function(resolve){UI.dispatchCustomEvent(document.body,"modal-open",{type:"confirmation",content:{title:title,description:options.description},params:{compact:!options.showCloseAction,attributes:getConfirmationButtons(),onAction:function(e){let modal=e.target;switch(e.detail.type){case "accept":resolve();modal.close();break;case "decline":modal.close();break}}}})});function getConfirmationButtons(){let buttons=options.buttons;if(SharedComponents.helpers.isPlainObject(buttons)&&
"label-accept"in buttons&&"label-decline"in buttons)return buttons;else if(buttons==="confirmDecline")return{"label-accept":Swedbank.Labels("btnConfirm"),"label-decline":Swedbank.Labels("btnDecline")};else return{"label-accept":Swedbank.Labels("yes"),"label-decline":Swedbank.Labels("no")}}},getActive:function(){var modals=document.querySelectorAll("ui-modal.-active");if(modals.length>0)return modals[modals.length-1];return null},loadContent:function(params){const pageId=params.pageId||Swedbank.Navigation.pageId||
"";if(["business","private"].indexOf(pageId)===0)params.securityId="";return makeAjaxRequest(document.mainForm,params,function(response){const json=response.responseJSON;if(json&&json.exception){console.error(json.exception);return}const container=document.createElement("div");container.innerHTML=response.responseText.replace(/name="navForm"/g,'name\x3d"__fakeNavForm__"');const queryParamLists=container.querySelectorAll(".query-params-list");Swedbank.Forms.generateDefinitionListClasses(queryParamLists);
document.body.appendChild(container);SharedComponents.helpers.rebuildScripts(container).then(()=>{const content=container.querySelector("#content");UI.dispatchCustomEvent(document.body,"modal-open",{type:"page",content:content||container})}).catch(e=>console.error(e)).finally(()=>{if(container.parentNode==document.body)document.body.removeChild(container)})})},loadPage:function(pageId){Swedbank.UIModals.loadContent({pageId:pageId})},modalResetCallback:()=>{const modalController=document.querySelector("ui-modal-controller");
if(modalController)[].forEach.call(modalController.getActiveModals(),modal=>{const cookieConsentElem=modal.closest("ui-cookie-consent");if(cookieConsentElem&&!cookieConsentElem.hasConsentGiven()&&!cookieConsentElem.forceHide)return;modal.close()})}};if(Swedbank.isUiSpaEnabled)SharedComponents.eventBus.addEventListener("spa-navigation-start",Swedbank.UIModals.modalResetCallback);else Swedbank.PageLoad.onEachUnload(Swedbank.UIModals.modalResetCallback);
Swedbank.UIProducts={openHandler:function(event){var product=event.target;if(product.pageId)if(product.dataset.paramName&&product.dataset.paramValue)navigateTo(product.pageId,product.dataset.paramName,product.dataset.paramValue);else navigateTo(product.pageId);else if(product.externalUrl)window.open(product.externalUrl)}};document.addEventListener("product-open",Swedbank.UIProducts.openHandler);
class SinglePageService{constructor(){this.originalActions={navigateTo:window.navigateTo,runLinkAction:window.runLinkAction,doSubmit:window.doSubmit,Navigate:{to:window.Navigate.to}};this.handlePopState=this.handlePopState.bind(this)}static get DEBUG(){return true}static get XHR_RESPONSE_TYPES(){return{ARRAY_BUFFER:"arraybuffer",DOCUMENT:"document",TEXT:"text",JSON:"json",BLOB:"blob"}}static get NAVIGATION_FUNCS(){return{navigateTo:"navigateTo",linkAction:"linkAction",doSubmit:"doSubmit"}}static get(){if(!this._instance)this._instance=
new SinglePageService;return this._instance}get currentPageId(){return Swedbank.Navigation.pageId}get currentPageUrl(){return Swedbank.Navigation.url}async handlePopState(event){SinglePageService.DEBUG&&console.log(event);if(!event.state&&window.location.href.indexOf("#")>-1){event.preventDefault();return}if(history.state!==null&&history.state.pageId){const {pageId,...params}=history.state;await this.navigateTo(history.state.pageId,params)}else window.location.reload()}getFormParams(form){const fdata=
new FormData(form);fdata.set("navigation_timestamp",(new Date).toString());return fdata}getContentElement(){return document.getElementById("content")}async navigateTo(pageId){const args=[].slice.call(arguments,1);pageId=this._getPageIdFromArgs(args)||pageId;if(this.isSpaCompatible(pageId))await this.navigate(pageId,document.navForm,args,SinglePageService.NAVIGATION_FUNCS.navigateTo);else if(SharedComponents.helpers.isPlainObject(arguments[1]))await this.originalActions.Navigate.to(arguments[0],arguments[1],
arguments[2]);else await this.originalActions.navigateTo(...arguments)}async runLinkAction(form,pageId){const args=[].slice.call(arguments,2);pageId=this._getPageIdFromArgs(args)||pageId;if(this.isSpaCompatible(pageId))await this.navigate(pageId,form,args,SinglePageService.NAVIGATION_FUNCS.linkAction);else await this.originalActions.runLinkAction(...arguments)}async doSubmit(control,pageId){const args=[].slice.call(arguments,2);let pid=this._getPageIdFromArgs(args)||pageId;if(this.isSpaCompatible(pageId)){pid=
pageId||this.currentPageId;if(control!=="string"&&control.getAttribute("name")){args[0]=control.getAttribute("name");args[1]="true"}if(typeof control==="string")pid=control;await this.navigate(pid,document.mainForm,args,SinglePageService.NAVIGATION_FUNCS.doSubmit)}else await this.originalActions.doSubmit(...arguments)}navigate(pageId,form,args,func){if(!pageId)pageId=this.currentPageId;if(!this.isSpaCompatible(pageId)){Swedbank.SpaService.disable();return null}SinglePageService.DEBUG&&console.log(`SpaService -> ${func} -> ${pageId}, 'from:' ${this.currentPageUrl}`);
if(this.xhr){SinglePageService.DEBUG&&console.log("%cXHR aborted()","color: green; background-color: yellow;");this.xhr.abort()}SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-start",{from:this.currentPageId,to:pageId});let anchor=this._getAnchor(args);if(anchor)form.action+="#"+anchor;this.setIbankFormParams(form,args);let params=this._parseArguments(args);return this.fetchPage(pageId,form,params).then(async fragment=>{SinglePageService.DEBUG&&console.log(fragment);const start=performance.now();
this.replaceInHead(fragment,"title,meta");await this.replaceContent(fragment);this.updateHistoryState(pageId,params,anchor);SinglePageService.DEBUG&&console.log(`SpaService -> ${func} -> ${pageId} -> Success`,`/ Now url is: ${this.currentPageUrl}`);Swedbank.Navigation.referrer=window.location.href;Swedbank.Navigation.lastPageId=Swedbank.Navigation.pageId;this.xhr=null;SinglePageService.DEBUG&&console.log("%cxhr \x3d null (spa completed)","color: green; background-color: yellow;");SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-complete",
{pageId:pageId});const end=performance.now();SinglePageService.DEBUG&&console.log(`%cperf: ${end-start}`,"color:lightblue;background-color:black")}).catch(err=>{SinglePageService.DEBUG&&console.log(`SpaService -> ${func} -> ${pageId} -> Failure`);SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-failed",{pageId:pageId});console.error(err);throw err;})}fetchPage(pageId,form,params={}){const requestParams=Object.assign({pageId:pageId},params);return this.makeSpaRequest(requestParams,form)}makeSpaRequest(data,
form){return new Promise((resolve,reject)=>{this.xhr=new XMLHttpRequest;const url=this._convertPageIdToUrl(data.pageId);this.xhr.open("POST",url,true);this.xhr.setRequestHeader("X-Single-Page-Navigation","true");this.xhr.responseType=SinglePageService.XHR_RESPONSE_TYPES.ARRAY_BUFFER;this.xhr.onload=res=>{if(this.xhr.status===200)this.handleSpaResponse(this.xhr,resolve);if([404,503].indexOf(this.xhr.status)>-1)SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-failed")};this.xhr.onerror=
e=>{console.error(e);SharedComponents.eventBus.dispatchCustomEvent("spa-navigation-failed")};const formData=this.getFormParams(form);Object.entries(data).forEach(([key,value])=>formData.set(key,value));this.xhr.send(formData)})}handleSpaResponse(xhr,onComplete){if(xhr.getResponseHeader("Content-Type").indexOf("text/html")===0)this.handlePageLoaded(xhr,onComplete);else this.handleFileLoaded(xhr,onComplete)}handlePageLoaded(xhr,onComplete){const blob=new Blob([xhr.response],{type:xhr.getResponseHeader("Content-Type")});
const reader=new FileReader;reader.onload=()=>{let template=document.createElement("template");template.innerHTML=reader.result;onComplete(template.content)};reader.readAsText(blob)}handleFileLoaded(xhr,onComplete){let filename=null;const disposition=xhr.getResponseHeader("Content-Disposition");if(disposition&&disposition.indexOf("attachment")!==-1){const filenameRegex=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/;const matches=filenameRegex.exec(disposition);if(matches!=null&&matches[1])filename=matches[1].replace(/['"]/g,
"")}const blob=new File([xhr.response],filename,{type:xhr.getResponseHeader("Content-Type")});const url=URL.createObjectURL(blob);const a=UI.createElement({tagName:"a",attributes:{href:url,download:filename}});document.body.appendChild(a);a.dispatchEvent(new MouseEvent("click"));a.remove()}_parseArguments(args){if(SharedComponents.helpers.isPlainObject(args[0]))return args[0];else{const cleanedArgs=[...args].filter(el=>el!==undefined);return SharedComponents.helpers.arrayToObject(cleanedArgs)}}_getAnchor(args){if(SharedComponents.helpers.isPlainObject(args[0])&&
args[1])return args[1];else return args[4]||""}_getPageIdFromArgs(args){let index=args.indexOf("pageId");return index>-1?args[++index]:null}_convertPageIdToUrl(pageId){if(!pageId)return"";return`/${pageId.replace(/\./g,"/")};jsessionid=${Swedbank.Navigation.getSessionId()}`}setIbankFormParams(form,args){if(SharedComponents.helpers.isPlainObject(args[0]))this.createDynamicParameterFields(form,args);else{if(form.field1)form.field1.value=args[0]||"";if(form.value1)form.value1.value=args[1]||args[0];
if(form.field2)form.field2.value=args[2]||"";if(form.value2)form.value2.value=args[3]||args[2]}}createDynamicParameterFields(form,params){let idx=0;Object.entries(params[0]).forEach(([name,value],i)=>{++idx;const field=form.querySelector(`[name="field${idx}"]`);const val=form.querySelector(`[name="value${idx}"]`);if(!field){const fieldElem=UI.createElement({tagName:"input",attributes:{type:"hidden",value:String(name),name:"field"+idx}});const valueElem=UI.createElement({tagName:"input",attributes:{type:"hidden",
value:String(value),name:"value"+idx}});form.appendChild(fieldElem);form.appendChild(valueElem)}else{field.value=name;val.value=value}});for(let i=idx+1;!!document.navForm[`field${i}`];i++){form[`field${i}`].value="";form[`value${i}`].value=""}}replaceInHead(fragment,selector){const newElements=fragment.querySelectorAll(selector);SinglePageService.DEBUG&&console.log(newElements);if(!newElements.length)return;const oldElements=document.head.querySelectorAll(selector);[].forEach.call(oldElements,node=>
document.head.removeChild(node));[].forEach.call(newElements,node=>document.head.appendChild(node))}replaceContent(fragment){const content=this.getContentElement();content.innerHTML="";content.appendChild(document.importNode(fragment,true));return SharedComponents.helpers.rebuildScripts(content)}updateHistoryState(pageId,params,anchor){if(this.isComingFromSamePage(pageId))return;let url=this.currentPageUrl;if(anchor)url+="#"+anchor;try{const data=Object.assign({pageId:pageId},params);history.pushState(data,
this.currentPageId,url)}catch(e){console.error(e)}}isComingFromSamePage(pageId){return history.state&&history.state.pageId===pageId}isSpaCompatible(pageId){pageId=pageId||Swedbank.Navigation.pageId;if(!pageId||!Swedbank.Menu)return false;const parts=pageId.split(".");let nodes=[Swedbank.Menu.menuStructure];let node;let depth=0;let currentPath=parts[depth];let isSpa=false;while(true){node=nodes.filter(n=>n.id===currentPath)[0];if(!node)return false;isSpa=node.hasOwnProperty("spa")?node.spa:isSpa;if(node.id===
pageId||!node.children||++depth>=parts.length)return isSpa;currentPath+="."+parts[depth];nodes=node.children}}enable(){window.navigateTo=this.navigateTo.bind(this);window.runLinkAction=this.runLinkAction.bind(this);window.doSubmit=this.doSubmit.bind(this);window.Navigate.to=this.navigateTo.bind(this);SharedComponents.eventBus.addEventListener("popstate",this.handlePopState)}disable(){window.navigateTo=this.originalActions.navigateTo;window.runLinkAction=this.originalActions.runLinkAction;window.doSubmit=
this.originalActions.doSubmit;window.Navigate.to=this.originalActions.Navigate.to;SharedComponents.eventBus.removeEventListener("popstate",this.handlePopState)}}
if(SinglePageService.DEBUG){SharedComponents.eventBus.addEventListener("spa-navigation-start",e=>{console.log("spa-navigation-start",e.detail)});SharedComponents.eventBus.addEventListener("spa-navigation-complete",e=>{console.log("spa-navigation-complete",e.detail)});SharedComponents.eventBus.addEventListener("spa-navigation-failed",e=>{console.error("spa-navigation-failed",e.detail)})}Swedbank.SpaService=SinglePageService.get();if(Swedbank.isUiSpaEnabled)Swedbank.SpaService.enable();
Swedbank.AnnotationService=class{static get restService(){if(!this._restService)this._restService=Swedbank.RestService.get();return this._restService}static isRead(id){const result=false;Swedbank.log(`Annotation ${id} is${!result?" not":""} read`);return Promise.resolve(result)}static dismiss(id){const params={id:id,pageId:"annotation.api.page"};Swedbank.log(`Annotation ${id} is dismissed`);return Promise.resolve(params)}};SharedComponents.UIAnnotation.defineService(Swedbank.AnnotationService);
var Swedbank=Swedbank||{};
Swedbank.AccountService=function(){function AccountService(){}AccountService.get=function(){if(!this._instance)this._instance=new AccountService;return this._instance};AccountService.prototype.isChatVisible=function(){return document.getElementById("chat")&&document.getElementById("chat").classList.contains("-maximized")};AccountService.prototype.onCloseChat=function(){return Swedbank.UIModals.confirm(Swedbank.Labels("customerChangeWillCloseChat")).then(function(){var endChat=document.getElementById("end-chat");
if(endChat)endChat.click()})};AccountService.prototype.isLiveChatVisible=function(){if(typeof Swedbank.communication==="undefined")return false;const chatbox=Swedbank.communication.virtualAssistant.getControl();return chatbox&&chatbox.hasLiveAgent()};AccountService.prototype.onCloseLiveChat=function(customerId,onProceed,onDecline){const chatbox=Swedbank.communication.virtualAssistant.getControl();if(!chatbox){onProceed();return}this.setCustomerControlValue(Swedbank.User.currentCustomerId);SharedComponents.ConfirmationDialogTemplate.create({content:UI.html`
          <h2>${chatbox.getLabel("CHANGE_ACCOUNT_NOTIFICATION")}</h2>
        `,labelAccept:chatbox.getLabel("ACCEPT_ACCOUNT_CHANGE"),labelDecline:chatbox.getLabel("DECLINE_ACCOUNT_CHANGE")}).prompt({onAccept:function(){this.setCustomerControlValue(customerId);chatbox.destroy("AccountChange");onProceed()}.bind(this),onDecline:onDecline})};AccountService.prototype.setCustomerControlValue=function(customerId){const select=document.getElementById("selectCustomers");if(select){const dropdown=select.closest("ui-dropdown");if(dropdown)dropdown.value=customerId}};AccountService.prototype.setCustomer=
function(customerId,saveDefault){if(this.isLiveChatVisible())this.onCloseLiveChat(customerId,function(){this.onChangeCustomer(customerId,saveDefault)}.bind(this));else if(this.isChatVisible())this.onCloseChat().then(function(){this.onChangeCustomer(customerId,saveDefault)}.bind(this));else this.onChangeCustomer(customerId,saveDefault)};AccountService.prototype.onChangeCustomer=function(id,saveDefault){Swedbank.User.currentCustomerId=id;Swedbank.AdobeTracking.setIdRefreshNeeded();var form=document.navForm;
form.customerChanged.value="true";form.saveDefaultCustomer.value=saveDefault||undefined;form.customer.value=id;form.submit()};return AccountService}();
Swedbank.RestService=function(){var ERROR_CONNECTION_TIMEOUT=0;var MAX_RETRY_COUNT_ON_ERROR=5;function RestService(){}RestService.DEBUG=false;RestService.get=function(){if(!this._instance)this._instance=new RestService;return this._instance};RestService.prototype.buildResponseHandler=function(key,onSuccess,onError){return function(result){var content;if(result.hasOwnProperty(key))if(typeof result[key]==="string")try{content=JSON.parse(result[key])}catch(e){content=result[key]}else content=result[key];
else content=result;if(!content){onSuccess(content);return}var error=null;if(content.exception)error={message:content.exception,type:"exception",data:content};else if(content.error||content.errors)error={message:content.error||(typeof content.errors[0]==="string"?content.errors[0]:content.errors[0].message),type:"error",data:content};else if(content.state==="ERROR")error={message:content.messages.length?content.messages[0].label:"",type:"error",data:content};else if(content.techError)error={message:content.techError,
type:"techError",data:content};if(error&&typeof onError==="function"){if(RestService.DEBUG)console.error(error);onError(error)}else onSuccess(content)}};RestService.prototype.buildRequestData=function(action,params){var data={pageId:params&&params.hasOwnProperty("pageId")?params.pageId:this.getPageId()};if(action)data[action]="true";if(params)for(var key in params){if(!params.hasOwnProperty(key))continue;data[key]=params[key]}return data};RestService.prototype.getSessionId=function(){return Swedbank.Navigation.getSessionId()};
RestService.prototype.getAttributesCheckNumber=function(){return Swedbank.commonRequestParams.attributesCheckNumber};RestService.prototype.getSecurityId=function(){return Swedbank.commonRequestParams.securityId};RestService.prototype.getPageId=function(){return null};RestService.prototype.callAction=function(action,params,requestType){if(RestService.DEBUG)console.log("RestService -\x3e callAction  -\x3e",action,"-\x3e request",params);return this.performRequest(this.buildRequestData(action,params),
requestType).then(function(result){if(RestService.DEBUG)console.log(result);return new Promise(function(resolve,reject){this.buildResponseHandler(action,function(response){if(RestService.DEBUG)console.log("RestService -\x3e callAction  -\x3e",action,"-\x3e success",response);resolve(response)},function(response){if(RestService.DEBUG)console.log("RestService -\x3e callAction  -\x3e",action,"-\x3e error",response);reject(response)})(result)}.bind(this))}.bind(this))};RestService.prototype.makeJSONRequest=
function(data,onSuccess,onError){var additionalData=document.mainForm?window.getSessionParams():Swedbank.commonRequestParams;var requestData=Object.assign({},{request_timestamp:(new Date).toString()},additionalData,data);var xhr=new XMLHttpRequest;var url=[data.hasOwnProperty("url")?data.url:location.pathname.split(";jsessionid\x3d").shift(),this.getSessionId()].join(";jsessionid\x3d");if(!data.hasOwnProperty("url"))url=Swedbank.Navigation.url;xhr.addEventListener("load",function(event){onSuccess(event.target.responseText)});
xhr.addEventListener("error",function(event){onError(event.target.responseText)});xhr.open("POST",url);xhr.setRequestHeader("Content-Type","application/json");xhr.send(JSON.stringify(requestData));return xhr};RestService.prototype.performRequest=function(params,requestType){return new Promise(function(resolve,reject){if(requestType==="json")return this.makeJSONRequest(params,resolve,reject);else this.makeAjaxRequestWithRetry(params,resolve,reject,1)}.bind(this))};RestService.prototype.makeAjaxRequestWithRetry=
function(data,onSuccess,onError,retryCount){var self=this;retryCount=retryCount||1;if(RestService.DEBUG)console.log("RestService -\x3e makeAjaxRequestWithRetry  -\x3e retryCount:",retryCount);makeAjaxRequestWithSuccessCallback(document.mainForm,data).then(onSuccess).catch(function(response){if(response.status==ERROR_CONNECTION_TIMEOUT)if(retryCount<MAX_RETRY_COUNT_ON_ERROR)self.makeAjaxRequestWithRetry(data,onSuccess,onError,retryCount+1);else{if(RestService.DEBUG)console.log("RestService -\x3e makeAjaxRequestWithRetry  -\x3e Retry count exceeded");
onError(new Error("Retry count exceeded"))}else{if(RestService.DEBUG)console.log("RestService -\x3e makeAjaxRequestWithRetry  -\x3e error:",response);onError(new Error(response))}})};return RestService}();
Swedbank.CryptoService=Swedbank.CryptoService||class{static get(){if(!this._instance)this._instance=new Swedbank.CryptoService;return this._instance}getService(){if(this.service)return Promise.resolve(this.service);else return this._isWebEidSupported().then(isWebEid=>{if(isWebEid)this.service=this._webEidPlugin();else this.service=this._hwcryptoPlugin();return this.service})}_isWebEidSupported(){return webeid.status().then(response=>function(response){if(response&&response.extension!=null&&response.library!=
null&&response.nativeApp!=null){console.log("using web-eid plugin");return Promise.resolve(true)}else return Promise.resolve(false)}).catch(error=>{console.log("web-eid plugin not found, using hwcrypto plugin");return Promise.resolve(false)})}_webEidPlugin(){let webEidObj=webeid;function _hexToBase64(str){return btoa(String.fromCharCode.apply(null,str.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))}function _base64ToHex(str){const raw=atob(str);let result=
"";for(let i=0;i<raw.length;i++){const hex=raw.charCodeAt(i).toString(16);result+=hex.length===2?hex:"0"+hex}return result.toUpperCase()}return{getVersion:function(){return"web-eid"},getCertificate:function(options){if(typeof options!=="object")return Promise.reject(new Error(INVALID_ARGUMENT));if(options&&!options.lang)options.lang="en";return webEidObj.getSigningCertificate(options).then(function(result){let certificateBase64=result.certificate;let hex=_base64ToHex(certificateBase64);return{certificateBase64,
hex:hex}})},sign:function(certificate,hash,options){if(typeof options!=="object")return Promise.reject(new Error(INVALID_ARGUMENT));if(options&&!options.lang)options.lang="en";if(!hash.type||!hash.value&&!hash.hex)return Promise.reject(new Error(INVALID_ARGUMENT));if(hash.hex&&!hash.value)hash.value=_hexToBase64(hash.hex);return webEidObj.sign(certificate.certificateBase64,hash.value,hash.type,options).then(function(result){return{hex:_base64ToHex(result.signature)}})},getError:function(error){var link=
Swedbank.Labels("hwcryptoReadMoreInstructionLink");switch(error.code){case webEidObj.ErrorCode.ERR_WEBEID_USER_CANCELLED:return SharedComponents.UISigning.labels.HWCRYPTO_USER_CANCEL;default:console.log("Swedbank.CryptoService -\x3e sign -\x3e error:",error);return SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_DEFAULT_ERROR,link)}}}}_hwcryptoPlugin(){let hwcrypto=window.hwcrypto();return{getVersion:function(){return"Hwcrypto"},getCertificate:function(options){return hwcrypto.getCertificate(options)},
sign:function(certificate,arg,options){return hwcrypto.sign(certificate,arg,options)},getError:function(error){let errorMessage=error&&error.message?error.message:"";var link=Swedbank.Labels("hwcryptoReadMoreInstructionLink");switch(errorMessage){case "no_certificates":SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_NO_CERTIFICATES,link);case "user_cancel":return SharedComponents.UISigning.labels.HWCRYPTO_USER_CANCEL;case "driver_error":SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_DRIVER_ERROR,
link);case "no_implementation":SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_NO_IMPLEMENTATION,link);case "default_error":case "technical_error":case "not_allowed":SharedComponents.UISigning.prototype.prepareLabel(SharedComponents.UISigning.labels.HWCRYPTO_DEFAULT_ERROR,link);default:return errorMessage}}}}};
Swedbank.SigningService=function(){function SigningService(restService,cryptoService){this.rest=restService;this.cryptoService=cryptoService}SigningService.get=function(){if(!this._instance)this._instance=new SigningService(Swedbank.RestService.get(),Swedbank.CryptoService.get());return this._instance};SigningService.LANG="ENG";SigningService.DEBUG=false;SigningService.METHODS={CERTIFICATE:"CERTIFICATE",MOBILE_ID:"MOBILE_ID",DIGIPASS:"DIGIPASS",PIN_CALCULATOR:"PIN_CALCULATOR",ADVANCED_PIN_CALCULATOR:"ADVANCED_PIN_CALCULATOR",
SMART_ID:"SMART_ID",SMART_ID_NQ:"SMART_ID_NQ",SMART_ID_Q:"SMART_ID_Q",SIMPLE_ID:"SIMPLE_ID",EPARAKSTS_MOBILE:"EPARAKSTS_MOBILE"};SigningService.prototype.isDigipass=function(method){return[SigningService.METHODS.DIGIPASS,SigningService.METHODS.PIN_CALCULATOR,SigningService.METHODS.ADVANCED_PIN_CALCULATOR].indexOf(String(method).toUpperCase())>-1};SigningService.prototype.isSmartId=function(method){return[SigningService.METHODS.SMART_ID,SigningService.METHODS.SMART_ID_Q,SigningService.METHODS.SMART_ID_NQ].indexOf(String(method).toUpperCase())>
-1};SigningService.prototype.isMobileId=function(method){return method===SigningService.METHODS.MOBILE_ID};SigningService.prototype.isSimpleId=function(method){return method===SigningService.METHODS.SIMPLE_ID};SigningService.prototype.isCertificate=function(method){return method===SigningService.METHODS.CERTIFICATE};SigningService.prototype.cancel=function(){this.canceled=true;this.actualRequestId=null;clearTimeout(this.pollTimeout);this.setPolSessionCode("")};SigningService.prototype.runSingingProcess=
function(onInit,onProceed,onComplete,onError,customParams){this.getSigningMethod().then(function(signingMethod){onInit({signingMethod:signingMethod,title:null,status:null});this.sign(signingMethod,onProceed,onComplete,onError,customParams)}.bind(this),onError)};SigningService.prototype.sign=function(signingMethod,onInit,onComplete,onError,customParams){if(this.signingInProgress)return;this.signingInProgress=true;this.canceled=false;if(!signingMethod.confirmationRequired){this.rest.callAction("initiate",
customParams).then(onComplete,onError);return}if(this.isDigipass(signingMethod.method)){this.rest.callAction("initiate",Object.assign({},customParams)).then(function(result){onInit({method:signingMethod.method,id:result.challengeID,title:null,status:null})}).catch(function(response){onError(response)});return}if(this.isCertificate(signingMethod.method)){this.signWithCert({lang:this.getLanguage()},customParams,onComplete,onError);return}var actualRequestId=performance.now();this.actualRequestId=actualRequestId;
this.initPolling(this.buildPollingHandler(signingMethod.method,onInit,onComplete,onError,customParams,actualRequestId))};SigningService.prototype.buildSuccessHandler=function(method,nextCall,onInit,onComplete,onBusinessError,onUserError){var attempt=0;return function(result){if(this.canceled)return;attempt++;switch(result.status){case "wait":this.setPolSessionCode("1");onInit({status:result.statusLabel,id:result.challengeID,method:method,sessionCode:"1"});this.pollTimeout=setTimeout(nextCall,attempt===
1?this.getFirstPollTimeout(method):this.getRegularPollTimeout(method));break;case "done":this.setPolSessionCode("1");onComplete(result);break;case "businessError":onBusinessError(result);break;default:onUserError(result)}}.bind(this)};SigningService.prototype.buildUserErrorHandler=function(callback){return function(){if(SigningService.DEBUG)console.log("SigningService -\x3e onUserError",arguments);if(typeof callback==="function")callback.apply(null,arguments)}};SigningService.prototype.buildTechnicalErrorHandler=
function(callback){return function(){if(SigningService.DEBUG)console.log("SigningService -\x3e onTechnicalError",arguments);if(typeof callback==="function")callback.apply(null,arguments)}};SigningService.prototype.buildBusinessErrorHandler=function(callback){return function(){if(SigningService.DEBUG)console.log("SigningService -\x3e onBusinessError",arguments);if(typeof callback==="function")callback.apply(null,arguments)}};SigningService.prototype.buildPollingHandler=function(method,onInit,onComplete,
onError,customParams,actualRequestId){var progressHandler=function(){if(SigningService.DEBUG)console.log("SigningService -\x3e NextCall");if(actualRequestId!==this.actualRequestId){if(this.canceled)onComplete({canceled:true});return}this.doPoll(this.buildSuccessHandler(method,progressHandler,onInit,onComplete,this.buildBusinessErrorHandler(onError),this.buildUserErrorHandler(onError)),this.buildTechnicalErrorHandler(onError),this.buildBusinessErrorHandler(onError),customParams)}.bind(this);return progressHandler};
SigningService.prototype.signWithCert=function(options,customParams,onComplete,onError){var cryptoService=Swedbank.CryptoService.get();var restService=this.rest;var signingService=this;globalSigningId=performance.now();var localSigningId=globalSigningId;return cryptoService.getService().then(cryptoService=>cryptoService.getCertificate(options)).then(function(certificate){return restService.callAction("initiate",Object.assign({"signForm.certValue":certificate.hex},customParams)).then(function(result){if(globalSigningId!==
localSigningId){console.warn("Breaking signing flow due to signingId inconsistency");return{then:function(){}}}else return cryptoService.getService().then(cryptoService=>{return cryptoService.sign(certificate,{hex:result.hash,type:result.hashType||"SHA-256"},options)})})}).then(function(signRes){return restService.callAction("confirmCode",{"signingCode":signRes.hex}).then(function(result){if(result.status==="wait"){let request=signingService.getSigningMethod();request.then(function(signingMethod){var actualRequestId=
performance.now();signingService.actualRequestId=actualRequestId;signingService.setPolSessionCode("1");signingService.buildPollingHandler(signingMethod.method,()=>{},onComplete,onError,{},actualRequestId).call()})}else if(typeof onError==="function")onError.apply(null,[result.statusLabel])})}).catch(function(error){onError(error)})};SigningService.prototype.confirmCode=function(params){return this.rest.callAction("confirmCode",params)};SigningService.prototype.setPolSessionCode=function(code){this.pollSessCode=
code};SigningService.prototype.initPolling=function(pollFunction){this.setPolSessionCode("");pollFunction()};SigningService.prototype.doPoll=function(onSuccess,onTechnicalError,onBusinessError,customParams){var params={pollDate:(new Date).getTime(),pollSessCode:this.pollSessCode||"",raw:false};params=Object.assign(params,customParams);return this.rest.callAction(this.pollSessCode?"poll":"initiate",params).then(function(result){onSuccess(result)},function(error){if(error instanceof Error)onTechnicalError(error);
else onBusinessError(error)})};SigningService.prototype.getSigningMethod=function(){return this.rest.callAction("signingMethod",{})};SigningService.prototype.getLanguage=function(){switch(SigningService.LANG){case "EST":return"et";case "LAT":return"lv";case "LIT":return"lt";case "RUS":return"ru";case "ENG":default:return"en"}};SigningService.prototype.getFirstPollTimeout=function(method){if(Swedbank.sessionStorage.get("UI_TEST")==="true")return 0;if(this.isMobileId(method))return 5E3;else return 2E3};
SigningService.prototype.getRegularPollTimeout=function(method){if(Swedbank.sessionStorage.get("UI_TEST")==="true")return 1;if(this.isMobileId(method))return 2E3;else return 1E3};return SigningService}();
Swedbank.UIOffers={closeHandler:function(event){const offerElement=event.target;if(!event.defaultPrevented){Swedbank.UIOffers.sendStatus(event.detail.id,event.detail.status,Swedbank.Navigation.pageId);offerElement.classList.add("-hidden")}},sendStatus:function(bankOfferUniqueId,status,cbOrPageId,comment){Swedbank.Offers.sendStatus(bankOfferUniqueId,status,cbOrPageId,comment)},contentHelper:function(customer){const offers=document.querySelectorAll('ui-offer[data-helper\x3d"true"]');const segment=customer.customerSegment;
const age=customer.customerAge;if(offers&&offers.length)offers.forEach(function(offer){const targetSegment=offer.dataset.csp;const targetAge=offer.dataset.age;const segmentContent=offer.querySelectorAll("[data-csp]");const ageContent=offer.querySelectorAll("[data-age]");const nonTargetContent=offer.querySelectorAll('[data-default\x3d"true"]');if(targetSegment)Swedbank.UIOffers.segmentCheck(offer,targetSegment,segment);else if(targetAge)Swedbank.UIOffers.ageCheck(offer,targetAge,age);else if(segmentContent&&
segmentContent.length&&Swedbank.UIOffers.validSegment(segmentContent,segment))segmentContent.forEach(function(content){Swedbank.UIOffers.segmentCheck(content,content.dataset.csp,segment)});else if(ageContent&&ageContent.length&&Swedbank.UIOffers.validAge(ageContent,age))ageContent.forEach(function(content){Swedbank.UIOffers.ageCheck(content,content.dataset.age,age)});else if(nonTargetContent&&nonTargetContent.length)nonTargetContent.forEach(function(content){content.classList.remove("-hidden")})})},
segmentCheck:function(element,targetSegment,segment){if(targetSegment===segment){if(element.classList.contains("-hidden"))element.classList.remove("-hidden")}else element.classList.add("-hidden")},validSegment:function(contents,segment){let valid=false;contents.forEach(function(content){if(content.dataset.csp===segment)valid=true});return valid},ageCheck:function(element,targetAge,age){const startAge=parseInt(targetAge.split("-")[0]);const endAge=parseInt(targetAge.split("-")[1]);if(age>=startAge&&
age<=endAge){if(element.classList.contains("-hidden"))element.classList.remove("-hidden")}else element.classList.add("-hidden")},validAge:function(contents,age){let valid=false;contents.forEach(function(content){const startAge=parseInt(content.dataset.age.split("-")[0]);const endAge=parseInt(content.dataset.age.split("-")[1]);if(age>=startAge&&age<=endAge)valid=true});return valid},consentCheck:function(){const offers=document.querySelectorAll("ui-offer[data-consent]");offers.forEach(offer=>{const restService=
Swedbank.RestService.get();const params={isConsentAllowedAjax:true,consentCode:offer.dataset.consent,pageId:"private.home.important.gdpr2"};restService.performRequest(params).then(response=>{if(response){const allowed=response.consentAllowed;if(!allowed){const parent=offer.parentElement;offer.remove();if(!parent.children.length&&parent.textContent.trim()==="")parent.hide()}}})})}};document.addEventListener("offer-close",Swedbank.UIOffers.closeHandler);
Swedbank[Symbol("cookies")]={"NECESSARY":["COOKIE_CONSENT","leavePopup","simpleLogin","loginWidget","hanza","general","advanced","smartLogin","lastApp","JSESSIONID","hanzaLoginTab","securityId","language","LS_JSESSIONID_","ONBOARDING_JSESSIONID","TS01"],"ANALYTICAL":["s_cc","s_sq","s_vi","s_fid","s_ecid","AMCV","SSID","SSSC","SSRT","SSPV","SSOD","SSLB","__ssp__history__session","__ssa__data","_cls_s","_cls_v","eventbucket","gb.sid","db.botDetection","gb.lastReferrer","gb.cors_ready","gb.record.bychange.enabled",
"gb.record.bychange.prev_th","gb.domrecord.bychange.enabled","gb.domrecord.bychange.prev_th","gb_unbound.app.conf","gb_unbound.res.pending","gb_unbound.res.all","gb_unbound.cls_v_expr","gb.psn","gb.btabid"],"TARGETING":["scp","scpa","businessDirectMarketingChannelsPopup","hidePublicFeedbackWidget"]};
Swedbank[Symbol("storage")]={"NECESSARY":["fromBusinessLoanPage","win-scroll-offset","openChatInContactsPage","Esamount","Esgoal","plmenu","p2pNewAgreement","p2pCompanySwitching","application-leaving-reason","countriesCodesStorageEST","countriesCodesStorageLAT","countriesCodesStorageLIT","countriesCodesStorageENG","countriesCodesStorageRUS","all-assets-opened","ui-spa-debug"],"ANALYTICAL":["mcrvalue"],"TARGETING":["abandonedid","abandonedcard","pinLogsB","pinLogsP","loungekeyinfo","ltYouthUser"]};
SharedComponents.UICookieConsent.warn=Swedbank.warn;SharedComponents.UICookieConsent.whitelist=Object.keys(SharedComponents.UICookieConsent.categories).reduce((collection,category)=>{collection[category]=[...Swedbank[Swedbank.sym("cookies")][category],...Swedbank[Swedbank.sym("storage")][category]];return collection},{});
Swedbank.UICookies=class{static getConsentElem(){return document.getElementById("cookie-consent")}static get COOKIES_CHECK_INTERVAL(){return 200}static forceShowConsent(){const modal=Swedbank.UIModals.getActive();if(modal&&modal.order!==1)modal.close();try{this.getConsentElem().showInfoView()}catch(e){Swedbank.error("ui-cookie-consent element not found",e)}}static eraseCookie(name,options){this.createCookie(name,"",0,options)}static createCookie(name,value,days=365,options){const params=Object.assign({},
{path:"/"},options||{});const today=new Date;today.setTime(today.getTime()+days*24*60*60*1E3);const expires="expires\x3d"+today.toUTCString();const samesite=window.location.protocol==="https:"?"SameSite\x3dStrict":"";const secure=window.location.protocol==="https:"?"Secure":"";const domain="domain\x3d"+SharedComponents.browser.resolveMainDomain();const cookieQuery=[`${name}=${value}`,`path=${params.path}`,domain,expires,samesite,secure].filter(q=>q.trim()).join(";");document.cookie=cookieQuery}static readCookie(name){const nameEQ=
name+"\x3d";const ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)===" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0)return c.substring(nameEQ.length,c.length)}return null}static areCookiesEnabled(){let r=false;this.createCookie("testing","Hello",1,{});if(this.readCookie("testing")!=null){r=true;this.eraseCookie("testing",{})}return r}};
UI.whenDOMReady(()=>{const cookieConsent=Swedbank.UICookies.getConsentElem();cookieConsent.prefix=Swedbank.localStorage.prefix+":";const rest=Swedbank.RestService.get();if(cookieConsent){cookieConsent.languageSwitcher=lang=>{Swedbank.LanguageBar.switchLanguage(lang,"languageChanged")};cookieConsent.destroyUnwantedCookies();cookieConsent.destroyUnwantedStorage();setInterval(()=>{cookieConsent.destroyUnwantedCookies();cookieConsent.destroyUnwantedStorage()},Swedbank.UICookies.COOKIES_CHECK_INTERVAL);
cookieConsent.addEventListener("cookie-consent-changed",event=>{const consentData=JSON.stringify(cookieConsent.buildConsentValuesFromCheckboxes());const params={pageId:"shared.cookies",consent:consentData,maxAge:cookieConsent.expiresDays,setConsent:"setConsent"};const localFallback=()=>{if(!cookieConsent.hasConsentGiven())Swedbank.UICookies.createCookie(SharedComponents.UICookieConsent.CONSENT_NAME,consentData,cookieConsent.expiresDays)};const success=resp=>{if(resp.status==="OK")Swedbank.log("Cookies consent is set from server.");
else localFallback()};const failure=err=>{localFallback();console.error(err)};rest.performRequest(params,success,failure,"json");if(cookieConsent.getPlugin("analytics").hasTargetingAccepted()){const hash=SharedComponents.Digest.uuidv4();Swedbank.UICookies.createCookie("scp",hash,cookieConsent.expiresDays);Swedbank.UICookies.createCookie("scpa","true",cookieConsent.expiresDays)}if(cookieConsent.getPlugin("analytics").hasAnalyticsAccepted())try{Swedbank.AdobeTracking.whenAnalyticsScriptsReady(null)}catch(err){Swedbank.error("Adobe Analytics error: "+
err)}})}});
Swedbank.ApplicationBar=Swedbank.ApplicationBar||class{constructor(){this.initApp=this.applicationBar?this.activeApplication:Swedbank.ApplicationBar.types.PRIVATE}static get types(){return{PRIVATE:"private",BUSINESS:"business",ABOUT:"about"}}static switchToPrivate(){const applicationChangedCallback=()=>{Swedbank.sessionStorage.set("applicationSwitchingFromBusiness",true,{expiresIn:"2 minutes"});SharedComponents.eventBus.removeEventListener("application-changed",applicationChangedCallback)};const bar=
new Swedbank.ApplicationBar;bar.target=this.types.PRIVATE;SharedComponents.eventBus.addEventListener("application-changed",applicationChangedCallback);bar.applicationSwitchHandler()}get applicationBar(){if(this.isRedesign())return document.querySelector((this.isDesktop()?".page-header__wrapper":".page-header__tool-bar")+" .page-header__environment");else return document.getElementById("application-bar")}get activeApplication(){if(this.isRedesign()){const activeApp=this.applicationBar.querySelector(".page-header__environment-link:disabled");
return activeApp?activeApp.dataset.target:Swedbank.ApplicationBar.types.ABOUT}else return this.applicationBar.value}get target(){return this._target||Swedbank.ApplicationBar.types.PRIVATE}set target(value){this._target=value}isRedesign(){return document.documentElement.classList.contains("redesign")}isDesktop(){return window.matchMedia("(min-width: 1024px)").matches}setApplicationParams(target,params){this.target=target;this.applicationBar.dataset.params=params?JSON.stringify(params):"{}"}_allowAppSwitchingStrategy(){const chat=
document.getElementById("chat");if(chat&&chat.offsetParent!==null){const confirmationMessage=Swedbank.Labels("applicationChangeWillCloseChat");const endChat=document.getElementById("end-chat");if(endChat){endChat.click();Swedbank.UIModals.confirm(confirmationMessage).then(()=>{Swedbank.UIModals.open("switch-application-modal")})}}else Swedbank.UIModals.open("switch-application-modal");const allowAppModal=document.getElementById("switch-application-modal");if(allowAppModal)allowAppModal.addEventListener("modal-close",
()=>{this.applicationBar.value=this.initApp})}_commonSwitchingStrategy(target){SharedComponents.eventBus.dispatchCustomEvent("application-changed");const params=JSON.parse(this.applicationBar.dataset.params||"{}");params["navigation"]="yes";Navigate.to(target,params,document.mainForm)}isLiveChatVisible(){return Swedbank.communication.virtualAssistantEnabled&&Swedbank.communication.virtualAssistant.getControl().hasLiveAgent()}onCloseLiveChat(onProceed){const chatbox=Swedbank.communication.virtualAssistant.getControl();
if(!chatbox){onProceed();return}SharedComponents.ConfirmationDialogTemplate.create({content:UI.html`
          <h2>${chatbox.getLabel("CHANGE_ENVIRONMENT_NOTIFICATION")}</h2>
        `,labelAccept:chatbox.getLabel("ACCEPT_ENVIRONMENT_CHANGE"),labelDecline:chatbox.getLabel("DECLINE_ENVIRONMENT_CHANGE")}).prompt({onAccept:()=>{chatbox.destroy("EnvironmentChange");onProceed()}})}applicationSwitchHandler(event){if(event)this.target=event.target.value||event.target.dataset.target;if(this.target===Swedbank.ApplicationBar.types.ABOUT){this._commonSwitchingStrategy(this.target);return}const allowAppSwitching=document.getElementById("allow-app-switching");if(allowAppSwitching)this._allowAppSwitchingStrategy();
else if(this.isLiveChatVisible())this.onCloseLiveChat(()=>{this._commonSwitchingStrategy(this.target)});else this._commonSwitchingStrategy(this.target)}};
UI.whenDOMReady(()=>{const bar=new Swedbank.ApplicationBar;const applyButton=document.getElementById("choose-application-apply-button");const cancelButton=document.getElementById("choose-application-cancel-button");const logoutButton=document.getElementById("choose-application-logout-button");if(bar.isRedesign()){const buttons=document.querySelectorAll("button.page-header__environment-link");buttons.forEach(button=>{button.addEventListener("click",event=>{event.preventDefault();bar.applicationSwitchHandler(event)})})}else{if(bar&&
bar.applicationBar)bar.applicationBar.addEventListener("change",bar.applicationSwitchHandler.bind(bar));const envLinks=document.querySelectorAll("a.environment-link");envLinks.forEach(link=>{link.addEventListener("click",event=>{event.preventDefault();bar.applicationSwitchHandler(event)})})}if(applyButton)applyButton.addEventListener("click",()=>{const selectedOption=document.querySelector("input[name\x3d'applicationSwitching']:checked");if(selectedOption){const form=document.navForm;form.allowAppSwitching.value=
selectedOption.value;if(Swedbank.isUiSpaEnabled)Swedbank.SpaService.originalActions.navigateTo(Swedbank.Navigation.pageId);else Swedbank.SPA.OriginalActions.navigateTo(Swedbank.Navigation.pageId)}});if(logoutButton)logoutButton.addEventListener("click",()=>{Swedbank.UIModals.close("switch-application-modal");document.navForm.action+="?forceLogout\x3dtrue";Navigate.to(bar.applicationBar.dataset.target||bar.target)});if(cancelButton)cancelButton.addEventListener("click",()=>{Swedbank.UIModals.close("switch-application-modal");
bar.applicationBar.value=bar.initApp})});
Swedbank.LanguageBar=Swedbank.LanguageBar||class{get languageBar(){const isRedesign=document.documentElement.classList.contains("redesign");return document.querySelector((isRedesign?".page-header__tool-bar":".page-header__wrapper")+" .page-header__language")}static switchLanguage(lang,changed=null){if(document.navForm.language.value!==lang){SharedComponents.eventBus.dispatchCustomEvent("language-changed");if(Swedbank.isUiSpaEnabled)Swedbank.SpaService.originalActions.navigateTo(null,"language",lang,
changed);else Swedbank.SPA.OriginalActions.navigateTo(null,"language",lang,changed)}}};
UI.whenDOMReady(()=>{const bar=new Swedbank.LanguageBar;if(bar&&bar.languageBar)bar.languageBar.addEventListener("change",e=>{Swedbank.LanguageBar.switchLanguage(e.target.value)});const mobileBar=document.getElementById("select-language");if(mobileBar)mobileBar.addEventListener("change",e=>{Swedbank.LanguageBar.switchLanguage(e.target.value)});if(document.documentElement.classList.contains("redesign")){const langItems=document.querySelectorAll("button.ui-navitem__lang-item");langItems.forEach(item=>
{item.addEventListener("click",event=>{event.preventDefault();Swedbank.LanguageBar.switchLanguage(event.target.value)})})}});
Swedbank.Loading=function(){function LoadingController(){}LoadingController.prototype=Object.create(null);LoadingController.prototype.constructor=LoadingController;Object.setPrototypeOf(LoadingController,null);LoadingController.prototype.runQueue=function(){if(this.progress)return this.progress;this.progress=this.queue.shift();if(this.progress){Swedbank.toggleLoader(true);this.progress.then(function(){this.progress=null;this.runQueue()}.bind(this))}else Swedbank.toggleLoader(false)};LoadingController.prototype.waitUntil=
function(entry){if(!this.queue)this.queue=[];this.queue.push(entry);this.runQueue();return entry};return new LoadingController}();
Swedbank.Search=Swedbank.Search||class{static submitSearch(callback=()=>{}){ErrorMessage.clear();const searchQueryValue=Swedbank.Search.getSearchQueryValue();Swedbank.sessionStorage.set("searchQuery",searchQueryValue);Swedbank.Search.makeSearch(searchQueryValue,callback);SharedComponents.eventBus.dispatchCustomEvent("menu-toggle",{active:false});return false}static getSearchElement(){return document.querySelector("ui-navsearch")}static getSearchQueryValue(){const searchElement=Swedbank.Search.getSearchElement();
const value=searchElement.input.value.trim();document.getElementById("content-search-query").value=value;return value}static getNewSearchQuery(query){if(query){let searchCriteria=query.split(":");if(searchCriteria.length>0&&searchCriteria[0]==="new")return searchCriteria[1]}return null}static makeSearch(searchQueryValue,callback){const contentSearchResults=document.getElementById("content-search-results");if(searchQueryValue==="")contentSearchResults.innerHTML="";else{const newSearchQuery=this.getNewSearchQuery(searchQueryValue);
const useNewSearch=newSearchQuery!==null;const params={pageId:Swedbank.Navigation.pageId.split(".")[0]+(useNewSearch?".home.search":".search"),searchQuery:useNewSearch?newSearchQuery:searchQueryValue,search:true};Swedbank.toggleLoader(true);makeAjaxRequest(document.mainForm,params,response=>{if(response.responseJSON===undefined)contentSearchResults.innerHTML=response.responseText;callback(searchQueryValue);Swedbank.toggleLoader(false)})}}};
class UIPercentChange extends SharedComponents.UIElement{static get props(){return{attributes:{"value":String,"default":String,"decimals":{type:Number,default:2}}}}render(){const status=UI.createElement({tagName:"ui-status"});const value=parseFloat(this.value);if(value<0)status.type="inactive";else if(value>0)status.type="active";else status.type="default";this.innerText="";if(this.default&&Number.isNaN(value))status.setInnerText(`${this.default}%`);else if(Number.isNaN(value))status.setInnerText("-");
else status.setInnerText(`${value.toFixed(this.decimals)}%`);this.appendChild(status)}}UIPercentChange.defineElement("ui-percentchange");
var Swedbank=Swedbank||{};
class SPOEAccountChanger extends SharedComponents.UIElement{static get props(){return{attributes:{fieldId:{name:"field-id",type:String,default:SharedComponents.Digest.randomId()}},children:{control:{selector:"select"}}}}get accountChangeFormName(){return this._accountChangeFormName||""}set accountChangeFormName(value){this._accountChangeFormName=value}get accountChangeCallback(){return this._accountChangeCallback||null}set accountChangeCallback(fn){this._accountChangeCallback=fn}getAccountTitle(id,
cut){if(!this.isShowAccountChanger())return"";const account=[].filter.call(Swedbank.User.accounts,account=>{return account.id===id})[0];if(!account)return"";const accountTitle=account.alias||account.number;if(cut&&accountTitle.length>10)return accountTitle.split(" ")[0].substring(0,5)+"***"+accountTitle.split(" ")[0].slice(-3);return accountTitle}setSelectedOptionContent(target,id,cut){const option=target.options&&target.options[target.selectedIndex];if(option)option.innerText=this.getAccountTitle(id,
cut)}setAccountChangeConfig(formName,callback){this.accountChangeFormName=formName;this.accountChangeCallback=callback}isShowAccountChanger(){return!!(Swedbank.User&&Swedbank.User.accounts&&Swedbank.User.accounts.length)}buildAccountField(){return UI.html`
      <ui-field layout="inline">
        <select id="${this.fieldId}" data-event="spoe-account-change">
          ${Swedbank.User.accounts.map(entry=>{return UI.html`
              <option value="${entry.id}" selected="${entry.id===Swedbank.User.currentAccountId}">
                ${document.createTextNode(this.getAccountTitle(entry.id,window.matchMedia("screen and (min-width: 1024px)").matches&&entry.id===Swedbank.User.currentAccountId))}
              </option>
            `})}  
        </select>
      </ui-field>
    `}rebuildAccountChanger(){this.desktopMediaQueryList.removeListener(this.handleSmallDesktopMediaChanges);if(this.isShowAccountChanger()){this.rebuildChildren(this.buildAccountField());UI.show(this);this.setAccountChangeConfig("navForm",null);this.desktopMediaQueryList.addListener(this.handleSmallDesktopMediaChanges);this.handleSmallDesktopMediaChanges()}else{UI.detachChildNodes(this);UI.hide(this)}}handleAccountChange(event){const form=document.forms[this.accountChangeFormName];if(typeof this.accountChangeCallback===
"function")this.accountChangeCallback();if(!event.detail||!form)return;form.elements.account.value=event.detail.originalEvent.target.value;form.submit()}handleSmallDesktopMediaChanges(){if(this.desktopMediaQueryList.matches){this.setSelectedOptionContent(this.control,this.control.value,true);this.control.addEventListener("mouseenter",this.handleMouseoverDropdown);this.control.addEventListener("mouseleave",this.handleMouseoverDropdown)}else{this.setSelectedOptionContent(this.control,this.control.value,
false);this.control.removeEventListener("mouseenter",this.handleMouseoverDropdown);this.control.removeEventListener("mouseleave",this.handleMouseoverDropdown)}}handleMouseoverDropdown(event){this.setSelectedOptionContent(this.control,this.control.value,event.type==="mouseleave")}handleUpdate(){this.rebuildAccountChanger()}hydrate(){this.changeObserver=new SharedComponents.EventObserver({name:"change"});this.changeObserver.observe(this);this.handleUpdate=this.handleUpdate.bind(this);this.handleMouseoverDropdown=
this.handleMouseoverDropdown.bind(this);this.handleSmallDesktopMediaChanges=this.handleSmallDesktopMediaChanges.bind(this);this.desktopMediaQueryList=window.matchMedia("screen and (min-width: 1024px)");SharedComponents.eventBus.addEventListener("update-spoe",this.handleUpdate);this.addEventListener("spoe-account-change",this.handleAccountChange.bind(this));this.rebuildAccountChanger()}}SPOEAccountChanger.defineElement("spoe-account-changer",UI.css`
    spoe-account-changer {
      display: block;
    }
    
    spoe-account-changer ui-field .ui-field__label:empty {
      display: none;
    }
    
    @media screen and (min-width: 1024px) {
      spoe-account-changer {
        display: flex;
        height: 100%;
        align-items: center;
      }
      
      spoe-account-changer ui-field[layout="inline"] .ui-field__control {
        flex-shrink: 0;
      }
      
      spoe-account-changer ui-field[layout="inline"] select {
        width: 130px;
      }
      
      spoe-account-changer ui-field[layout="inline"] .ui-field__control,
      spoe-account-changer ui-field[layout="inline"] select {
        min-width: unset;
        max-width: unset;
      }
    }
    
    @media screen and (min-width: 768px) and (max-width: 1023.98px) {
      spoe-account-changer ui-field[layout="inline"] select {
        max-width: 300px;
        width: 300px;
      }
    }
    
    @media screen and (max-width: 767px) {
      spoe-account-changer {
        display: block;
      }
      
      spoe-account-changer ui-field[layout="inline"] {
        margin-top: 0;
        padding: 10px 15px;
        border-top: 1px solid var(--ui-color-grey);
      }
    }
  `);Swedbank.SPOEAccountChanger=SPOEAccountChanger;
var Swedbank=Swedbank||{};class SPOECountryChanger extends SharedComponents.UIElement{static get props(){return{attributes:{fieldId:{name:"field-id",type:String,default:SharedComponents.Digest.randomId()}},children:{control:{selector:"select"}}}}get rest(){return Swedbank.RestService.get()}get accountService(){return Swedbank.AccountService.get()}isShowCountryChanger(){return!!(Swedbank.User&&Swedbank.User.spoeCountries&&Swedbank.User.spoeCountries.length)}buildCountryField(){return UI.html`
      <ui-field layout="inline" class="-text">
        <ui-dropdown layout="plain" hide-selected="true">
          <select id="${this.fieldId}" data-event="spoe-country-change">
            ${Swedbank.User.spoeCountries.map(entry=>{return UI.html`
                <option data-flag="${entry.toLowerCase()}" value="${entry}">
                  ${document.createTextNode(Swedbank.Labels("bankCountry"+entry))}
                </option>
              `})}
          </select>
        </ui-dropdown>
      </ui-field>
    `}rebuildCustomerChanger(){if(!this.isShowCountryChanger())return;this.rebuildChildren(this.buildCountryField())}onChangeCountry(country){this.rest.callAction("",{pageId:"business.spoe",country:country}).then(result=>{switch(result.message){case "success":const data={pageId:result.pageId,targetPageId:document.mainForm.pageId.value==="business.spoe.agreement"?"":document.mainForm.pageId.value,errorLanguage:result.language,spoeToken:result.spoeToken};const form=UI.createElement({tagName:"form",
attributes:{name:"spoeCountries",method:"post",action:result.url,class:"-hidden"},children:Object.keys(data).map(key=>{return{tagName:"input",attributes:{type:"hidden",name:key,value:data[key]}}})});this.appendChild(form);form.submit();break;case "failure":if(result.failureReason==="smartIdLevelTooLow")ErrorMessage.add(Swedbank.Labels("CERTIFICATE_LEVEL_TOO_LOW_SPOE"));else{document.navForm.appendChild(UI.createElement({tagName:"input",attributes:{name:"sessionExpirationReasonAjax",type:"hidden",
value:result.failureReason}}));if(Swedbank.isUiSpaEnabled)Swedbank.SpaService.originalActions.navigateTo("business");else Swedbank.SPA.OriginalActions.navigateTo("business")}break;default:break}})}handleUpdate(){this.rebuildCustomerChanger()}handleCountryChange(event){if(!(event.detail&&event.detail.originalEvent&&event.detail.originalEvent.target))return;if(this.accountService.isChatVisible())this.accountService.onCloseChat().then(()=>{this.onChangeCountry(event.detail.originalEvent.target.value)});
else this.onChangeCountry(event.detail.originalEvent.target.value)}hydrate(){this.changeObserver=new SharedComponents.EventObserver({name:"change"});this.changeObserver.observe(this);this.handleUpdate=this.handleUpdate.bind(this);SharedComponents.eventBus.addEventListener("update-spoe",this.handleUpdate);this.addEventListener("spoe-country-change",this.handleCountryChange.bind(this));this.rebuildCustomerChanger()}}SPOECountryChanger.defineElement("spoe-country-changer",UI.css`
    spoe-country-changer {
      display: block;
    }
    
    spoe-country-changer ui-field .ui-field__label:empty {
      display: none;
    }
    
    spoe-country-changer .ui-option-plain.-control .ui-option-plain__label {
      max-width: unset;
    }
    
    spoe-country-changer ui-field[layout="inline"],
    spoe-country-changer ui-field button + .ui-dropdown__control {
      margin: 0;
    }
  `);Swedbank.SPOECountryChanger=SPOECountryChanger;
var Swedbank=Swedbank||{};
class SPOECustomerChanger extends SharedComponents.UIElement{static get props(){return{attributes:{layout:{type:String,default:SPOECustomerChanger.layouts.DEFAULT},fieldId:{name:"field-id",type:String,default:SharedComponents.Digest.randomId()}},children:{control:{selector:"select"}}}}static get layouts(){return{DEFAULT:"default",LIST:"list"}}get accountService(){return Swedbank.AccountService.get()}getSymbols(label){if(label){const arr=label.replace(/[\p{P}\p{S}]+/gu,"").trim().split(/\s+/).slice(0,2);
return arr.map(word=>word.charAt(0)).join("").toUpperCase()||" "}else return" "}isShowCustomerChanger(){return!!(Swedbank.User&&Swedbank.User.customers&&Swedbank.User.customers.length)}buildCustomerField(){return UI.html`
      <ui-field class="-text" layout="inline">
        <ui-dropdown layout="plain" maxlength="13">
          <select id="${this.fieldId}" data-event="spoe-customer-change">
            ${Swedbank.User.customers.map(entry=>{return UI.html`
                <option data-symbol="${this.getSymbols(entry.name)}" value="${entry.id}" selected="${entry.id===Swedbank.User.currentCustomerId}">
                  ${document.createTextNode(entry.name)}
                </option>
              `})}
          </select>
        </ui-dropdown>
      </ui-field>
    `}buildCustomersList(){return UI.html`
      <ul>
        ${Swedbank.User.customers.map(entry=>{return UI.html`
            <li class="${"spoe-customer-changer__list-item"+(entry.id===Swedbank.User.currentCustomerId?" -selected":"")}"
              data-event="spoe-customer-change"
              data-customerid="${entry.id}">
              <ui-icon-symbolic value="${this.getSymbols(entry.name)}" bgshape="square"
                color="${entry.id===Swedbank.User.currentCustomerId?"orange":null}">
              </ui-icon-symbolic>
              <span>${document.createTextNode(entry.name)}</span>
              <ui-icon glyph="agree" color="orange"></ui-icon>
            </li>
          `})}
      </ul>
    `}rebuildCustomerChanger(){if(!this.isShowCustomerChanger())return;this.rebuildChildren(this.layout===SPOECustomerChanger.layouts.DEFAULT?this.buildCustomerField():this.buildCustomersList())}handleUpdate(){this.rebuildCustomerChanger()}handleCustomerChange(event){if(!(event.detail&&event.detail.originalEvent&&event.detail.originalEvent.target))return;const eventHolder=UI.closestEventHolder(event.detail.originalEvent.target,this);if(!eventHolder)return;const nextCustomerId=eventHolder.getAttribute("data-customerid")||
eventHolder.value;if(Swedbank.User.currentCustomerId!==nextCustomerId)this.accountService.setCustomer(nextCustomerId)}hydrate(){this.changeObserver=new SharedComponents.EventObserver({name:"change"});this.clickObserver=new SharedComponents.EventObserver({name:"click"});this.changeObserver.observe(this);this.clickObserver.observe(this);this.handleUpdate=this.handleUpdate.bind(this);SharedComponents.eventBus.addEventListener("update-spoe",this.handleUpdate);this.addEventListener("spoe-customer-change",
this.handleCustomerChange.bind(this));this.rebuildCustomerChanger()}}SPOECustomerChanger.defineElement("spoe-customer-changer",UI.css`
    spoe-customer-changer {
      display: block;
    }
    
    spoe-customer-changer ui-field .ui-field__label:empty {
      display: none;
    }
    
    @media screen and (min-width: 1024px) {
      spoe-customer-changer {
        display: flex;
        align-items: center;
        height: 100%;
      }
      
      spoe-customer-changer ui-field,
      spoe-customer-changer ui-dropdown {
        width: 100%;
      }
    }
    
    @media screen and (max-width: 1023.98px) {
      spoe-customer-changer .spoe-customer-changer__list-item {
        display: flex;
        align-items: flex-start;
        border-top: 1px solid var(--ui-color-grey);
        padding: 13px 15px;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item > * + * {
        margin-left: 15px;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item > span {
        flex-grow: 1;
        font-size: 16px;
        line-height: 24px;
        word-break: break-word;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item > ui-icon-symbolic:first-child {
        width: 24px;
        height: 24px;
        flex-basis: 24px;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item > ui-icon[glyph="agree"] {
        visibility: hidden;
        width: 16px;
        height: 20px;
        padding-top: 4px;
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item.-selected > span {
        color: var(--ui-color-orange);
      }
    
      spoe-customer-changer .spoe-customer-changer__list-item.-selected > ui-icon[glyph="agree"] {
        visibility: visible;
      }
    }
  `);Swedbank.SPOECustomerChanger=SPOECustomerChanger;
var Swedbank=Swedbank||{};
class SPOEBar extends SharedComponents.UIElement{get accountChangeFormName(){return this._accountChangeFormName||""}set accountChangeFormName(value){this._accountChangeFormName=value}get accountChangeCallback(){return this._accountChangeCallback||null}set accountChangeCallback(fn){this._accountChangeCallback=fn}get rest(){return Swedbank.RestService.get()}get accountService(){return Swedbank.AccountService.get()}rebuildSPOEBar(){if(!Swedbank.User)return;const buildField=field=>{if(field){UI.prerenderElementsTree(field,
true);return field}};UI.rebuildChildren(this,[Swedbank.Navigation.isBusiness()&&this.buildCountryField(),this.buildCustomerField(),this.buildAccountField()].filter(buildField));this.smallDesktopMediaQueryList.removeListener(this.handleSmallDesktopMediaChanges);if(Swedbank.User.accounts&&Swedbank.User.accounts.length){this.setAccountChangeConfig("navForm",null);this.smallDesktopMediaQueryList.addListener(this.handleSmallDesktopMediaChanges);this.handleSmallDesktopMediaChanges()}}getAccountField(){return this.querySelector(".spoe-bar__account-field")&&
this.querySelector(".spoe-bar__account-field").querySelector("select")}getAccountTitle(id,cut){const accounts=Swedbank.User&&Swedbank.User.accounts;if(!accounts)return"";const account=[].filter.call(accounts,account=>{return account.id===id})[0];if(!account)return"";const accountTitle=account.alias||account.number;if(cut&&accountTitle.length>10)return accountTitle.split(" ")[0].substring(0,5)+"***"+accountTitle.split(" ")[0].slice(-3);return accountTitle}setSelectedOptionContent(target,id,cut){const option=
target.options&&target.options[target.selectedIndex];if(option)option.innerText=this.getAccountTitle(id,cut)}setAccountChangeConfig(formName,callback){this.accountChangeFormName=formName;this.accountChangeCallback=callback}isEteller(){return Swedbank.Navigation.pageId.indexOf("eteller")>-1}buildCountryField(){const countries=Swedbank.User&&Swedbank.User.spoeCountries;if(!countries||!countries.length)return;const el=UI.createElement({tagName:"ui-field",attributes:{class:"spoe-bar__country-field",layout:!this.mobileMediaQueryList.matches?
"inline":null,label:Swedbank.Labels("country")},children:[{tagName:"select",attributes:{id:"selectCountry"},children:[].map.call(countries,country=>{return{tagName:"option",attributes:{value:country||null},children:[country||""]}})}]});el.querySelector("select").addEventListener("change",this.handleCountryChange.bind(this));return el}buildCustomerField(){const customers=Swedbank.User&&Swedbank.User.customers;if(!customers||!customers.length)return;const el=UI.createElement({tagName:"ui-field",attributes:{class:"spoe-bar__customer-field",
layout:!this.mobileMediaQueryList.matches?"inline":null,label:!this.isEteller()?Swedbank.Labels("company"):null},children:[{tagName:"select",attributes:{id:"selectCustomers"},children:[].map.call(customers,customer=>{return{tagName:"option",attributes:{value:customer.id||null,selected:customer.id===Swedbank.User.currentCustomerId||null},children:[customer.name||""]}})}]});el.querySelector("select").addEventListener("change",this.handleCustomerChange.bind(this));return el}buildAccountField(){const accounts=
Swedbank.User&&Swedbank.User.accounts;if(!accounts||!accounts.length)return;const el=UI.createElement({tagName:"ui-field",attributes:{class:"spoe-bar__account-field",layout:!this.mobileMediaQueryList.matches?"inline":null,label:Swedbank.Labels("account")},children:[{tagName:"select",attributes:{id:"selectAccount"},children:[].map.call(accounts,account=>{return{tagName:"option",attributes:{value:account.id||null,selected:account.id===Swedbank.User.currentAccountId||null},children:[this.getAccountTitle(account.id,
this.smallDesktopMediaQueryList.matches&&account.id===Swedbank.User.currentAccountId)]}})}]});el.querySelector("select").addEventListener("change",this.handleAccountChange.bind(this));return el}onChangeCountry(country){this.rest.callAction("",{pageId:"business.spoe",country:country}).then(result=>{switch(result.message){case "success":const data={pageId:result.pageId,targetPageId:document.mainForm.pageId.value==="business.spoe.agreement"?"":document.mainForm.pageId.value,errorLanguage:result.language,
spoeToken:result.spoeToken};const form=UI.createElement({tagName:"form",attributes:{name:"spoeCountries",method:"post",action:result.url,class:"-hidden"},children:Object.keys(data).map(key=>{return{tagName:"input",attributes:{type:"hidden",name:key,value:data[key]}}})});this.appendChild(form);form.submit();break;case "failure":if(result.failureReason==="smartIdLevelTooLow")ErrorMessage.add(Swedbank.Labels("CERTIFICATE_LEVEL_TOO_LOW_SPOE"));else{document.navForm.appendChild(UI.createElement({tagName:"input",
attributes:{name:"sessionExpirationReasonAjax",type:"hidden",value:result.failureReason}}));if(Swedbank.isUiSpaEnabled)Swedbank.SpaService.originalActions.navigateTo("business");else Swedbank.SPA.OriginalActions.navigateTo("business")}break;default:break}})}handleCountryChange(event){if(!event.target)return;if(this.accountService.isChatVisible())this.accountService.onCloseChat().then(()=>{this.onChangeCountry(event.target.value)});else this.onChangeCountry(event.target.value)}handleCustomerChange(event){if(!event.target)return;
this.accountService.setCustomer(event.target.value)}handleAccountChange(event){const form=document.forms[this.accountChangeFormName];if(typeof this.accountChangeCallback==="function")this.accountChangeCallback();if(!event.target||!form)return;form.elements.account.value=event.target.value;form.submit()}handleSmallDesktopMediaChanges(){const select=this.getAccountField();if(this.smallDesktopMediaQueryList.matches){this.setSelectedOptionContent(select,select.value,true);select.addEventListener("mouseenter",
this.handleMouseoverDropdown);select.addEventListener("mouseleave",this.handleMouseoverDropdown)}else{this.setSelectedOptionContent(select,select.value,false);select.removeEventListener("mouseenter",this.handleMouseoverDropdown);select.removeEventListener("mouseleave",this.handleMouseoverDropdown)}}handleMouseoverDropdown(event){const select=this.getAccountField();this.setSelectedOptionContent(select,select.value,event.type==="mouseleave")}hydrate(){this.handleMouseoverDropdown=this.handleMouseoverDropdown.bind(this);
this.handleSmallDesktopMediaChanges=this.handleSmallDesktopMediaChanges.bind(this);this.mobileMediaQueryList=window.matchMedia("screen and (max-width: 1023px)");this.smallDesktopMediaQueryList=window.matchMedia("screen and (min-width: 1024px) and (max-width: 1210px)");this.rebuildSPOEBar()}}SPOEBar.defineElement("spoe-bar");Swedbank.SPOEBar=SPOEBar;
/*
 This is hwcrypto.js 0.0.13 generated on 2018-02-25 */
var hwcrypto=function hwcrypto(){var _debug=function(x){};_debug("hwcrypto.js activated");function hasExtensionFor(cls){return typeof window[cls]==="function"}function _hex2array(str){if(typeof str=="string"){var len=Math.floor(str.length/2);var ret=new Uint8Array(len);for(var i=0;i<len;i++)ret[i]=parseInt(str.substr(i*2,2),16);return ret}}function _array2hex(args){var ret="";for(var i=0;i<args.length;i++)ret+=(args[i]<16?"0":"")+args[i].toString(16);return ret.toLowerCase()}var extensionMap={"ee":"TokenSigning",
"lv":"eParakstsTokenSigning"};var digidoc_chrome=getExtension();var USER_CANCEL="user_cancel";var NO_CERTIFICATES="no_certificates";var INVALID_ARGUMENT="invalid_argument";var DRIVER_ERROR="driver_error";var TECHNICAL_ERROR="technical_error";var NO_IMPLEMENTATION="no_implementation";var NOT_ALLOWED="not_allowed";function getExtension(){for(var a in extensionMap)if(hasExtensionFor(extensionMap[a])){_debug("getExtension() "+extensionMap[a]);return extensionMap[a]}_debug("getExtension() default "+"TokenSigning");
return"TokenSigning"}function DigiDocExtension(){this._name="Chrome native messaging extension";var p=null;this.check=function(){return new Promise(function(resolve,reject){if(!hasExtensionFor(digidoc_chrome))return resolve(false);p=new window[digidoc_chrome];if(p)resolve(true);else resolve(false)})};this.getVersion=function(){return p.getVersion()};this.getCertificate=function(options){return p.getCertificate(options)};this.sign=function(cert,hash,options){return p.sign(cert,hash,options)}}function NoBackend(){this._name=
"No implementation";this.check=function(){return new Promise(function(resolve,reject){resolve(true)})};this.getVersion=function(){return Promise.reject(new Error(NO_IMPLEMENTATION))};this.getCertificate=function(){return Promise.reject(new Error(NO_IMPLEMENTATION))};this.sign=function(){return Promise.reject(new Error(NO_IMPLEMENTATION))}}var _backend=null;var fields={};function _testAndUse(Backend){return new Promise(function(resolve,reject){var b=new Backend;b.check().then(function(isLoaded){if(isLoaded){_debug("Using backend: "+
b._name);_backend=b;resolve(true)}else{_debug(b._name+" check() failed");resolve(false)}})})}function _autodetect(force){return new Promise(function(resolve,reject){_debug("Autodetecting best backend");if(typeof force==="undefined")force=false;if(_backend!==null&&!force)return resolve(true);if(hasExtensionFor(digidoc_chrome)){_testAndUse(DigiDocExtension).then(function(result){if(result)resolve(true)});return}resolve(_testAndUse(NoBackend))})}fields.use=function(backend){return new Promise(function(resolve,
reject){if(typeof backend==="undefined"||backend==="auto")_autodetect().then(function(result){resolve(result)});else if(backend==="chrome")resolve(_testAndUse(DigiDocExtension));else resolve(false)})};fields.debug=function(){return new Promise(function(resolve,reject){var hwversion="hwcrypto.js 0.0.13";_autodetect().then(function(result){_backend.getVersion().then(function(version){resolve(hwversion+" with "+_backend._name+" "+version)},function(error){resolve(hwversion+" with failing backend "+_backend._name)})})})};
fields.getCertificate=function(options){if(typeof options!=="object"){_debug("getCertificate options parameter must be an object");return Promise.reject(new Error(INVALID_ARGUMENT))}if(options&&!options.lang)options.lang="en";return _autodetect().then(function(result){if(location.protocol!=="https:"&&location.protocol!=="file:")return Promise.reject(new Error(NOT_ALLOWED));return _backend.getCertificate(options).then(function(certificate){if(certificate.hex&&!certificate.encoded)certificate.encoded=
_hex2array(certificate.hex);return certificate})})};fields.sign=function(cert,hash,options){if(arguments.length<2)return Promise.reject(new Error(INVALID_ARGUMENT));if(options&&!options.lang)options.lang="en";if(!hash.type||!hash.value&&!hash.hex)return Promise.reject(new Error(INVALID_ARGUMENT));if(hash.hex&&!hash.value){_debug("DEPRECATED: hash.hex as argument to sign() is deprecated, use hash.value instead");hash.value=_hex2array(hash.hex)}if(hash.value&&!hash.hex)hash.hex=_array2hex(hash.value);
return _autodetect().then(function(result){if(location.protocol!=="https:"&&location.protocol!=="file:")return Promise.reject(new Error(NOT_ALLOWED));return _backend.sign(cert,hash,options).then(function(signature){if(signature.hex&&!signature.value)signature.value=_hex2array(signature.hex);return signature})})};fields.NO_IMPLEMENTATION=NO_IMPLEMENTATION;fields.USER_CANCEL=USER_CANCEL;fields.NOT_ALLOWED=NOT_ALLOWED;fields.NO_CERTIFICATES=NO_CERTIFICATES;fields.TECHNICAL_ERROR=TECHNICAL_ERROR;fields.INVALID_ARGUMENT=
INVALID_ARGUMENT;return fields};
var webeid=function(exports){var Action;(function(Action){Action["WARNING"]="web-eid:warning";Action["STATUS"]="web-eid:status";Action["STATUS_ACK"]="web-eid:status-ack";Action["STATUS_SUCCESS"]="web-eid:status-success";Action["STATUS_FAILURE"]="web-eid:status-failure";Action["AUTHENTICATE"]="web-eid:authenticate";Action["AUTHENTICATE_ACK"]="web-eid:authenticate-ack";Action["AUTHENTICATE_SUCCESS"]="web-eid:authenticate-success";Action["AUTHENTICATE_FAILURE"]="web-eid:authenticate-failure";Action["GET_SIGNING_CERTIFICATE"]=
"web-eid:get-signing-certificate";Action["GET_SIGNING_CERTIFICATE_ACK"]="web-eid:get-signing-certificate-ack";Action["GET_SIGNING_CERTIFICATE_SUCCESS"]="web-eid:get-signing-certificate-success";Action["GET_SIGNING_CERTIFICATE_FAILURE"]="web-eid:get-signing-certificate-failure";Action["SIGN"]="web-eid:sign";Action["SIGN_ACK"]="web-eid:sign-ack";Action["SIGN_SUCCESS"]="web-eid:sign-success";Action["SIGN_FAILURE"]="web-eid:sign-failure"})(Action||(Action={}));var Action$1=Action;var ErrorCode;(function(ErrorCode){ErrorCode["ERR_WEBEID_ACTION_TIMEOUT"]=
"ERR_WEBEID_ACTION_TIMEOUT";ErrorCode["ERR_WEBEID_USER_TIMEOUT"]="ERR_WEBEID_USER_TIMEOUT";ErrorCode["ERR_WEBEID_VERSION_MISMATCH"]="ERR_WEBEID_VERSION_MISMATCH";ErrorCode["ERR_WEBEID_VERSION_INVALID"]="ERR_WEBEID_VERSION_INVALID";ErrorCode["ERR_WEBEID_EXTENSION_UNAVAILABLE"]="ERR_WEBEID_EXTENSION_UNAVAILABLE";ErrorCode["ERR_WEBEID_NATIVE_UNAVAILABLE"]="ERR_WEBEID_NATIVE_UNAVAILABLE";ErrorCode["ERR_WEBEID_UNKNOWN_ERROR"]="ERR_WEBEID_UNKNOWN_ERROR";ErrorCode["ERR_WEBEID_CONTEXT_INSECURE"]="ERR_WEBEID_CONTEXT_INSECURE";
ErrorCode["ERR_WEBEID_USER_CANCELLED"]="ERR_WEBEID_USER_CANCELLED";ErrorCode["ERR_WEBEID_NATIVE_INVALID_ARGUMENT"]="ERR_WEBEID_NATIVE_INVALID_ARGUMENT";ErrorCode["ERR_WEBEID_NATIVE_FATAL"]="ERR_WEBEID_NATIVE_FATAL";ErrorCode["ERR_WEBEID_ACTION_PENDING"]="ERR_WEBEID_ACTION_PENDING";ErrorCode["ERR_WEBEID_MISSING_PARAMETER"]="ERR_WEBEID_MISSING_PARAMETER"})(ErrorCode||(ErrorCode={}));var ErrorCode$1=ErrorCode;class MissingParameterError extends Error{constructor(message){super(message);this.name=this.constructor.name;
this.code=ErrorCode$1.ERR_WEBEID_MISSING_PARAMETER}}class ActionPendingError extends Error{constructor(message="same action for Web-eID browser extension is already pending"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_ACTION_PENDING}}class ActionTimeoutError extends Error{constructor(message="extension message timeout"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_ACTION_TIMEOUT}}const SECURE_CONTEXTS_INFO_URL="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts";
class ContextInsecureError extends Error{constructor(message="Secure context required, see "+SECURE_CONTEXTS_INFO_URL){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_CONTEXT_INSECURE}}class ExtensionUnavailableError extends Error{constructor(message="Web-eID extension is not available"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_EXTENSION_UNAVAILABLE}}var config=Object.freeze({VERSION:"2.0.1",EXTENSION_HANDSHAKE_TIMEOUT:1E3,NATIVE_APP_HANDSHAKE_TIMEOUT:5*
1E3,DEFAULT_USER_INTERACTION_TIMEOUT:2*60*1E3,MAX_EXTENSION_LOAD_DELAY:1E3});class NativeFatalError extends Error{constructor(message="native application terminated with a fatal error"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_NATIVE_FATAL}}class NativeInvalidArgumentError extends Error{constructor(message="native application received an invalid argument"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_NATIVE_INVALID_ARGUMENT}}
class NativeUnavailableError extends Error{constructor(message="Web-eID native application is not available"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_NATIVE_UNAVAILABLE}}class UnknownError extends Error{constructor(message="an unknown error occurred"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_UNKNOWN_ERROR}}class UserCancelledError extends Error{constructor(message="request was cancelled by the user"){super(message);this.name=
this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_USER_CANCELLED}}class UserTimeoutError extends Error{constructor(message="user failed to respond in time"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_USER_TIMEOUT}}class VersionInvalidError extends Error{constructor(message="invalid version string"){super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_VERSION_INVALID}}function tmpl(strings,requiresUpdate){return`Update required for Web-eID ${requiresUpdate}`}
class VersionMismatchError extends Error{constructor(message,versions,requiresUpdate){if(!message)if(!requiresUpdate)message="requiresUpdate not provided";else if(requiresUpdate.extension&&requiresUpdate.nativeApp)message=tmpl`${"extension and native app"}`;else if(requiresUpdate.extension)message=tmpl`${"extension"}`;else if(requiresUpdate.nativeApp)message=tmpl`${"native app"}`;super(message);this.name=this.constructor.name;this.code=ErrorCode$1.ERR_WEBEID_VERSION_MISMATCH;this.requiresUpdate=requiresUpdate;
if(versions){const {library,extension,nativeApp}=versions;Object.assign(this,{library,extension,nativeApp})}}}const errorCodeToErrorClass={[ErrorCode$1.ERR_WEBEID_ACTION_PENDING]:ActionPendingError,[ErrorCode$1.ERR_WEBEID_ACTION_TIMEOUT]:ActionTimeoutError,[ErrorCode$1.ERR_WEBEID_CONTEXT_INSECURE]:ContextInsecureError,[ErrorCode$1.ERR_WEBEID_EXTENSION_UNAVAILABLE]:ExtensionUnavailableError,[ErrorCode$1.ERR_WEBEID_NATIVE_INVALID_ARGUMENT]:NativeInvalidArgumentError,[ErrorCode$1.ERR_WEBEID_NATIVE_FATAL]:NativeFatalError,
[ErrorCode$1.ERR_WEBEID_NATIVE_UNAVAILABLE]:NativeUnavailableError,[ErrorCode$1.ERR_WEBEID_USER_CANCELLED]:UserCancelledError,[ErrorCode$1.ERR_WEBEID_USER_TIMEOUT]:UserTimeoutError,[ErrorCode$1.ERR_WEBEID_VERSION_INVALID]:VersionInvalidError,[ErrorCode$1.ERR_WEBEID_VERSION_MISMATCH]:VersionMismatchError};function deserializeError(errorObject){let error;if(typeof errorObject.code=="string"&&errorObject.code in errorCodeToErrorClass){const CustomError=errorCodeToErrorClass[errorObject.code];error=new CustomError}else error=
new UnknownError;for(const [key,value]of Object.entries(errorObject))error[key]=value;return error}class WebExtensionService{constructor(){this.loggedWarnings=[];this.queue=[];window.addEventListener("message",event=>this.receive(event))}receive(event){var _a,_b,_c,_d,_e,_f;if(!/^web-eid:/.test((_a=event.data)===null||_a===void 0?void 0:_a.action))return;const message=event.data;const suffix=(_c=(_b=message.action)===null||_b===void 0?void 0:_b.match(/success$|failure$|ack$/))===null||_c===void 0?
void 0:_c[0];const initialAction=this.getInitialAction(message.action);const pending=this.getPendingMessage(initialAction);if(message.action===Action$1.WARNING)(_d=message.warnings)===null||_d===void 0?void 0:_d.forEach(warning=>{if(!this.loggedWarnings.includes(warning)){this.loggedWarnings.push(warning);console.warn(warning)}});else if(pending)switch(suffix){case "ack":{clearTimeout(pending.ackTimer);break}case "success":{this.removeFromQueue(initialAction);(_e=pending.resolve)===null||_e===void 0?
void 0:_e.call(pending,message);break}case "failure":{const failureMessage=message;this.removeFromQueue(initialAction);(_f=pending.reject)===null||_f===void 0?void 0:_f.call(pending,failureMessage.error?deserializeError(failureMessage.error):failureMessage);break}}}send(message,timeout){if(this.getPendingMessage(message.action))return Promise.reject(new ActionPendingError);else if(!window.isSecureContext)return Promise.reject(new ContextInsecureError);else{const pending={message};this.queue.push(pending);
pending.promise=new Promise((resolve,reject)=>{pending.resolve=resolve;pending.reject=reject});pending.ackTimer=window.setTimeout(()=>this.onAckTimeout(pending),config.EXTENSION_HANDSHAKE_TIMEOUT);pending.replyTimer=window.setTimeout(()=>this.onReplyTimeout(pending),timeout);window.postMessage(message,"*");return pending.promise}}onReplyTimeout(pending){var _a;this.removeFromQueue(pending.message.action);(_a=pending.reject)===null||_a===void 0?void 0:_a.call(pending,new ActionTimeoutError)}onAckTimeout(pending){var _a;
clearTimeout(pending.replyTimer);this.removeFromQueue(pending.message.action);(_a=pending.reject)===null||_a===void 0?void 0:_a.call(pending,new ExtensionUnavailableError)}getPendingMessage(action){return this.queue.find(pm=>{return pm.message.action===action})}getInitialAction(action){return action.replace(/-success$|-failure$|-ack$/,"")}removeFromQueue(action){const pending=this.getPendingMessage(action);clearTimeout(pending===null||pending===void 0?void 0:pending.replyTimer);this.queue=this.queue.filter(pending=>
pending.message.action!==action)}}function sleep(milliseconds){return new Promise(resolve=>{setTimeout(()=>resolve(),milliseconds)})}const webExtensionService=new WebExtensionService;const initializationTime=+new Date;async function extensionLoadDelay(){const now=+new Date;await sleep(initializationTime+config.MAX_EXTENSION_LOAD_DELAY-now)}async function status(){await extensionLoadDelay();const timeout=config.EXTENSION_HANDSHAKE_TIMEOUT+config.NATIVE_APP_HANDSHAKE_TIMEOUT;const message={action:Action$1.STATUS,
libraryVersion:config.VERSION};try{const {library,extension,nativeApp}=await webExtensionService.send(message,timeout);return{library,extension,nativeApp}}catch(error){error.library=config.VERSION;throw error;}}async function authenticate(challengeNonce,options){await extensionLoadDelay();if(!challengeNonce)throw new MissingParameterError("authenticate function requires a challengeNonce");const timeout=config.EXTENSION_HANDSHAKE_TIMEOUT+config.NATIVE_APP_HANDSHAKE_TIMEOUT+((options===null||options===
void 0?void 0:options.userInteractionTimeout)||config.DEFAULT_USER_INTERACTION_TIMEOUT);const message={action:Action$1.AUTHENTICATE,libraryVersion:config.VERSION,challengeNonce,options};const {unverifiedCertificate,algorithm,signature,format,appVersion}=await webExtensionService.send(message,timeout);return{unverifiedCertificate,algorithm,signature,format,appVersion}}async function getSigningCertificate(options){await extensionLoadDelay();const timeout=config.EXTENSION_HANDSHAKE_TIMEOUT+config.NATIVE_APP_HANDSHAKE_TIMEOUT+
((options===null||options===void 0?void 0:options.userInteractionTimeout)||config.DEFAULT_USER_INTERACTION_TIMEOUT)*2;const message={action:Action$1.GET_SIGNING_CERTIFICATE,libraryVersion:config.VERSION,options};const {certificate,supportedSignatureAlgorithms}=await webExtensionService.send(message,timeout);return{certificate,supportedSignatureAlgorithms}}async function sign(certificate,hash,hashFunction,options){await extensionLoadDelay();if(!certificate)throw new MissingParameterError("sign function requires a certificate as parameter");
if(!hash)throw new MissingParameterError("sign function requires a hash as parameter");if(!hashFunction)throw new MissingParameterError("sign function requires a hashFunction as parameter");const timeout=config.EXTENSION_HANDSHAKE_TIMEOUT+config.NATIVE_APP_HANDSHAKE_TIMEOUT+((options===null||options===void 0?void 0:options.userInteractionTimeout)||config.DEFAULT_USER_INTERACTION_TIMEOUT)*2;const message={action:Action$1.SIGN,libraryVersion:config.VERSION,certificate,hash,hashFunction,options};const {signature,
signatureAlgorithm}=await webExtensionService.send(message,timeout);return{signature,signatureAlgorithm}}exports.Action=Action$1;exports.ErrorCode=ErrorCode$1;exports.authenticate=authenticate;exports.config=config;exports.getSigningCertificate=getSigningCertificate;exports.sign=sign;exports.status=status;Object.defineProperty(exports,"__esModule",{value:true});return exports}({});
var Swedbank=Swedbank||{};
Swedbank.SigningWidget=class extends SharedComponents.UIElement{static get props(){return{children:{view:"ui-signing"}}}get singingService(){return Swedbank.SigningService.get()}get restService(){return Swedbank.RestService.get()}sign(customLabels,customParams){this.view.setAttributes(Object.assign({"error":null,"error-actions":null,"label-cancel":SharedComponents.UISigning.labels.CANCEL_BUTTON_LABEL},customLabels||{}));this.singingService.runSingingProcess(this.handleSigningInit.bind(this),this.handleSigningProceed.bind(this),
this.handleSigningComplete.bind(this),this.handleSigningFailure.bind(this),customParams)}destroyView(){return this.runTransition({"-fade-out":true,"-slide-out":true},500).then(()=>{this.hide();this.view.setAttributes({"code":null,"error":null,"error-actions":null})})}buildView(){this.show();return this.runTransition({"-fade-in":true,"-slide-in":true},500)}handleSigningCancel(e){this.singingService.cancel();this.handleSigningCanceled({})}handleSigningCanceled(response){this.singingService.signingInProgress=
false;this.destroyView().then(()=>{this.dispatchCustomEvent("signing-canceled",response)})}handleSigningComplete(params){this.singingService.signingInProgress=false;this.destroyView().then(()=>{if(params&&params.canceled)this.dispatchCustomEvent("signing-canceled",{});else this.dispatchCustomEvent("signing-completed",params)})}handleSigningConfirm(){let signingService=this.singingService;if(signingService.signingInProgress)return;signingService.signingInProgress=true;const confirmButton=this.view.querySelector("[name\x3dui-signing-confirm]");
confirmButton.disabled=true;const params={signingCode:this.view.querySelector("input[name\x3dsigning-value]").value};let signingWidget=this;const signingPromise=signingService.confirmCode(params).then(result=>{if(result.status==="wait"){let request=signingWidget._signingMethod?Promise.resolve(signingWidget._signingMethod):signingService.getSigningMethod();request.then(function(signingMethod){var actualRequestId=performance.now();signingService.actualRequestId=actualRequestId;signingService.setPolSessionCode("1");
signingService.buildPollingHandler(signingMethod.method,()=>{},signingWidget.handleSigningComplete,signingWidget.handleSigningFailure,{},actualRequestId).call()})}else this.handleSigningFailure(result)}).catch(error=>{this.handleSigningFailure(error)});return UI.runWithLockingForm(signingPromise,confirmButton,this.view).then(()=>{confirmButton.disabled=true})}handleSigningFailure(error){this.singingService.signingInProgress=false;if(this.view.isMethodSupported(this._signingMethod.method))if(this.singingService.isCertificate(this._signingMethod.method))Swedbank.CryptoService.get().getService().then(service=>
service.getError(error)).then(errorMessage=>{this.view.setAttributes({"error":"error","error-actions":"error-actions","error-status":errorMessage,"trusted":"trusted"})});else this.view.setAttributes({"error":"error","error-actions":"error-actions","error-status":(error instanceof Error?null:error.message)||null,"trusted":null});else this.dispatchCustomEvent("signing-failed",error)}resolveButtonLabel(method){let key;switch(String(method)){case "SMART_ID_Q":case "SMART_ID_NQ":key="SMART_ID";break;case "PIN_CALCULATOR":case "ADVANCED_PIN_CALCULATOR":key=
"DIGIPASS";break;default:key=method}return SharedComponents.UISigning.labels[key+"_BUTTON_LABEL"]}resolveSignAction(){let request=this._signingMethod?Promise.resolve(this._signingMethod):this.singingService.getSigningMethod();return request.then(signingMethod=>{const label=this.resolveButtonLabel(signingMethod.method);return label?{id:"SIGN",label:label,disabled:false}:null})}handleSigningInit(config){this._signingMethod=config.signingMethod;if(this.view.isMethodSupported(this._signingMethod.method)&&
this._signingMethod.confirmationRequired){this.view.setAttributes({"method":this._signingMethod.method,"label-running":false,"label-code":config.title||null,"label-intro":config.status||null});[].forEach.call(this.view.querySelectorAll("input, button"),node=>{node.removeAttribute("disabled")});this.dispatchCustomEvent("signing-initiated",{hideActions:true});this.buildView()}else this.dispatchCustomEvent("signing-initiated",{hideActions:false})}handleSigningProceed(config){if(!this.view.isMethodSupported(config.method))return;
if(config.id)this.view.setAttributes({"code":config.id,"label-cancel":SharedComponents.UISigning.labels.CANCEL_BUTTON_LABEL,"label-confirm":this.singingService.isDigipass(config.method)?SharedComponents.UISigning.labels.DIGIPASS_CONFIRM:null});if(this.singingService.isDigipass(config.method))this.singingService.signingInProgress=false}render(){this.insertElements([{tagName:"ui-signing",classList:{"-frame-footer":true}}])}hydrate(){this.handleSigningConfirm=this.handleSigningConfirm.bind(this);this.handleSigningComplete=
this.handleSigningComplete.bind(this);this.handleSigningFailure=this.handleSigningFailure.bind(this);this.handleSigningCancel=this.handleSigningCancel.bind(this);this.view.addEventListener("confirm",this.handleSigningConfirm);this.view.addEventListener("cancel",this.handleSigningCancel)}};Swedbank.SigningWidget.defineElement("signing-widget");
Swedbank.FDPAdapter=class{static get messageTypes(){return{Navigation:"NAVIGATION",Initial:"INITIAL",HeightChanged:"HEIGHT_CHANGED",ModalClosed:"MODAL_CLOSED",ModalOpened:"MODAL_OPENED",OverlayOpened:"OVERLAY_OPENED",OverlayClosed:"OVERLAY_CLOSED",Click:"CLICK"}}static getInstance(){if(!this._instance)this._instance=new Swedbank.FDPAdapter;return this._instance}static isFDPEnabled(){return!Swedbank.isProduction&&window.parent!==window}handleNavigation(){if(!this.constructor.isFDPEnabled())return;
let currentUrl=null;if(Swedbank.Navigation.url!==currentUrl){currentUrl=Swedbank.Navigation.url;this.postToParentApp({type:this.constructor.messageTypes.Navigation,payload:{url:this.makeURLFDPFriendly(currentUrl),title:document.title,meta:this.getMetaDefinitions()}})}window.addEventListener("message",event=>{if(event.data.type!==this.constructor.messageTypes.Navigation)return;const nextUrl=event.data.payload?.url||"";if(!nextUrl){Swedbank.warn(`PostMessage URL is empty or incorrect: '${nextUrl}'`);
return}const pageId=this.makeURLIbankFriendly(nextUrl);switch(event.data.type){case this.constructor.messageTypes.Navigation:this.navigate(pageId);break}})}navigate(pageId){if(pageId!==Swedbank.Navigation.pageId)linkAction(pageId)}makeURLIbankFriendly(url=""){return url.replace(/\//,"").replace(/\//g,".")}makeURLFDPFriendly(url=""){return window.location.origin+url.replace(Swedbank.Navigation.sessionIdPattern,"")}postToParentApp(data,origin="*"){if(!this.constructor.isFDPEnabled())return;const sendMessage=
()=>window.parent.postMessage(data,origin);if(Swedbank.isUiSpaEnabled){sendMessage();return}Swedbank.PageLoad.onEach(sendMessage)}getMetaDefinitions(){return[].filter.call(document.querySelectorAll("meta"),m=>m["content"].toLowerCase()!=="text/html; charset\x3dutf-8").map(m=>UI.getAttributes(m))}static prepare(){if(!this.isFDPEnabled())return;const existsIframeController=document.querySelector("ui-iframe-controller");if(!existsIframeController){const iframeController=UI.createElement({tagName:"ui-iframe-controller",
attributes:{"root-selector":".page-content__wrapper"}});document.body.append(iframeController)}const anchor=document.querySelector("ui-anchor");UI.hide(anchor)}};
UI.whenDOMReady(()=>{const SCROLL_OFFSET=100;if(!Swedbank.isAuthenticated)setTimeout(()=>window.location.reload(),5400*1E3);SharedComponents.UIOffer.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,true);SharedComponents.UIVideo.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,true);SharedComponents.UICard.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,true);SharedComponents.UIAward.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,
true);SharedComponents.UIAwardDetails.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,true);SharedComponents.UIColumn.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,true);SharedComponents.UIProduct.registerPlugin("lazy-loading",SharedComponents.LazyLoadingPlugin,true);const init=()=>{const activatableElementsSelector=[":target",'ui-navtoggle[for\x3d"'+Swedbank.Navigation.getHash()+'"]'];const hashObject=Swedbank.Navigation.parseHash();const target=document.querySelector(activatableElementsSelector.join(","));
if(target)Swedbank.Navigation.activateTarget(target,SCROLL_OFFSET);else if(hashObject)Object.keys(hashObject).forEach(key=>{const elem=document.getElementById(hashObject[key]);if(!elem)return;Swedbank.Navigation.activateTarget(elem,SCROLL_OFFSET)});if(Swedbank.isForceLogout)Swedbank.UIModals.open("notificationPanel");const anchor=String(location.hash).substring(1);const el=document.getElementById(anchor);const y=el?el.offsetTop:0;window.scrollTo(0,y);const hashTarget=document.getElementById(Swedbank.Navigation.getHash());
if(hashTarget)Swedbank.Navigation.activateTarget(hashTarget,SCROLL_OFFSET);const spoeBar=document.querySelector("spoe-bar");if(spoeBar)spoeBar.rebuildSPOEBar();resolveGlobalFormValidator();Swedbank.Time.showDateSensitiveContent();if(!Swedbank.isProduction){const theme=UI.getTheme();theme&&UI.setTheme(theme)}Swedbank.FDPAdapter.prepare()};SharedComponents.eventBus.addEventListener("spa-navigation-start",event=>{Swedbank.PageConfig={};if(!event.detail.to.includes(".search"))Swedbank.Search.getSearchElement().deactivate()});
SharedComponents.eventBus.addEventListener("spa-navigation-complete",init);init();SharedComponents.UIPhoneField.setRules(Swedbank.country.toLowerCase())});function handleVaNavigation(){const fdpAdapter=Swedbank.FDPAdapter.getInstance();fdpAdapter.handleNavigation();const chatBox=document.querySelector("va-chatbox");if(!chatBox)return;chatBox.handleNavigationUpdate()}if(Swedbank.isUiSpaEnabled)SharedComponents.eventBus.addEventListener("spa-navigation-complete",handleVaNavigation);else Swedbank.PageLoad.onEach(handleVaNavigation);
window.addEventListener("popstate",handleVaNavigation);
Swedbank.UICookieConsentAnalytics=class{constructor(target){this.target=target;this.baseUrl="https://swedbankab.d3.sc.omtrdc.net/b/ss/"+(Swedbank.isProduction&&window.location.hostname.match(/^(www\.?)?swedbank\.(ee|lv|lt)$/)?"swedbankabbballcookieprod":"swedbankabbballcookiedev")+"/1/JS-2.9.0/";this.trackingObject={pccr:"true",pageName:"web"+Swedbank.Navigation.getBasePath(),g:window.location.origin+Swedbank.Navigation.getBasePath(),r:Swedbank.Navigation.removeSessionId(Swedbank.Navigation.referrer),
v1:"D\x3dpageName",c57:"D\x3dg",v57:"D\x3dg",c58:"D\x3dr",mcorgid:"AB12899B544ABE260A4C98BC@AdobeOrg",events:"event216",v139:"cookieconsent",pe:"lnk_o",pev2:"cookieConsentView",v97:Swedbank.country.toLowerCase(),v6:Swedbank.language.toLowerCase(),v0:Swedbank.AdobeTracking.getURLParamByName("cid")||Swedbank.AdobeTracking.getURLParamByName("WT.mc_id")||"",v76:Swedbank.AdobeTracking.getURLParamByName("WT.seg_4").replace(/.html/g,""),v90:Swedbank.AdobeTracking.getURLParamByName("SW.link")};switch(Swedbank.country){case "EE":this.trackingObject.v7=
"0010";break;case "LV":this.trackingObject.v7="0110";break;case "LT":this.trackingObject.v7="0210";break;default:break}this.trackingImage=this.target.createElement({tagName:"img",attributes:{alt:"",hidden:"hidden"}})}hasAnalyticsAccepted(){const categories=this.target.getSelectedCategories();return categories[SharedComponents.UICookieConsent.categories.ANALYTICAL]===SharedComponents.UICookieConsent.CATEGORY_ALLOWED}hasTargetingAccepted(){const categories=this.target.getSelectedCategories();return categories[SharedComponents.UICookieConsent.categories.TARGETING]===
SharedComponents.UICookieConsent.CATEGORY_ALLOWED}_buildTrackingUrl(){return this.baseUrl+"?"+SharedComponents.helpers.buildQueryString(this.trackingObject)}trackWithImage(params){if(Swedbank.sessionStorage.get("UI_TEST")==="true")return;Object.assign(this.trackingObject,params||{});this.trackingImage.setAttribute("src",this._buildTrackingUrl())}trackingClickHandler(params){Object.assign(this.trackingObject,{v74:"cookieconsent",events:"event146",pev2:"click"});delete this.trackingObject.v0;delete this.trackingObject.v76;
delete this.trackingObject.v90;this.trackWithImage(params||{})}render(){this.target.declineButton.dataset.wtLabel="Decline";this.target.acceptButton.dataset.wtLabel="Accept";this.target.saveChoiceButton.dataset.wtLabel="Save my choice";this.target.settings.wtLabel="Select your own cookies";const policyLinks=this.target.querySelectorAll(".ui-cookie-consent__about-cookie-link");[].forEach.call(policyLinks,function(link){link.dataset.wtLabel="Cookie Policy"})}hydrate(){if(this.hasAnalyticsAccepted())return;
this.target.insertAdjacentElement("afterend",this.trackingImage);if(!Swedbank.sessionStorage.get("cookie-first")){this.trackWithImage({});Swedbank.sessionStorage.set("cookie-first","true")}this.target.acceptButton.addEventListener("click",this.trackingClickHandler.bind(this,{v73:"button",v23:"accept-all"}));this.target.saveChoiceButton.addEventListener("click",this.trackingClickHandler.bind(this,{v73:"button",v23:"save-my-preferences"}));this.target.declineButton.addEventListener("click",this.trackingClickHandler.bind(this,
{v73:"button",v23:"decline-cookie-preferences"}));const policyLink=this.target.querySelector(".ui-cookie-consent__policy-link");policyLink.addEventListener("click",this.trackingClickHandler.bind(this,{v73:"link",v23:"cookie-principles"}));const entitiesLink=this.target.querySelector(".ui-cookie-consent__entities-link");entitiesLink.addEventListener("click",this.trackingClickHandler.bind(this,{v73:"link",v23:"swedbank-entities"}));const cookieListLink=this.target.querySelector(".ui-cookie-consent__cookie-link");
cookieListLink.addEventListener("click",this.trackingClickHandler.bind(this,{v73:"link",v23:"cookie-list"}));const analyticalCheckbox=document.getElementById("cookie-consent-category-"+SharedComponents.UICookieConsent.categories.ANALYTICAL);const targetingCheckbox=document.getElementById("cookie-consent-category-"+SharedComponents.UICookieConsent.categories.TARGETING);if(analyticalCheckbox)analyticalCheckbox.addEventListener("change",this.trackingClickHandler.bind(this,{v73:"checkbox",v23:"analytical-cookies"}));
if(targetingCheckbox)targetingCheckbox.addEventListener("change",this.trackingClickHandler.bind(this,{v73:"checkbox",v23:"targeting-cookies"}))}};SharedComponents.UICookieConsent.registerPlugin("analytics",Swedbank.UICookieConsentAnalytics,true);
var UISigningAnalytics=function(){function UISigningAnalytics(target){this.target=target}UISigningAnalytics.prototype.render=function(){var cancelButton=this.target.querySelector('button[name\x3d"ui-signing-cancel"]');var signingButton=this.target.querySelector('button[name\x3d"ui-signing-confirm"]');if(cancelButton)this.target.updateElement.call(cancelButton,{attributes:{"data-wt-label":"Cancel"}});if(signingButton)this.target.updateElement.call(signingButton,{attributes:{"data-wt-label":"Confirm"}})};
UISigningAnalytics.prototype.hydrate=function(){};return UISigningAnalytics}();SharedComponents.UISigning.registerPlugin("analytics",UISigningAnalytics,true);
var UITooltipExternalHandler=function(UITooltip){function UITooltipExternalHandler(target){this.target=target}UITooltipExternalHandler.prototype.render=function(){};UITooltipExternalHandler.prototype._ajaxHelpHandler=function(event){var tooltip=event.currentTarget;var helpId=event.currentTarget.getAttribute("help-id");var params={pageId:"help.smallhelp",labelId:helpId,helpId:Swedbank.Navigation.pageId};var content=tooltip.popoverElement.querySelector(".ui-tooltip__content");var loader=this._getLoader();
if(content!=null){content.appendChild(loader);tooltip.setAttribute("aria-busy","true");var restService=new Swedbank.RestService;restService.performRequest(params).then(function(response){content.innerHTML=response;tooltip.removeEventListener("modal-open",this._ajaxHelpHandler);tooltip.removeAttribute("aria-busy")}.bind(this))}};UITooltipExternalHandler.prototype._getLoader=function(){var loader=this.target.querySelector(".ui-tooltip__loader");if(loader)return loader;return this.target.createElement({tagName:"ui-icon",
attributes:{glyph:"loader"},classList:{"ui-tooltip__loader":true}})};UITooltipExternalHandler.prototype.hydrate=function(){this._ajaxHelpHandler=this._ajaxHelpHandler.bind(this);var tooltip=this.target;var helpId=tooltip.getAttribute("help-id");if(helpId)tooltip.addEventListener("modal-open",this._ajaxHelpHandler)};return UITooltipExternalHandler}(SharedComponents.UITooltip);SharedComponents.UITooltip.registerPlugin("openExternal",UITooltipExternalHandler,true);
Swedbank.UIWebinarRegistration=class extends SharedComponents.UIElement{static get props(){return{attributes:{form:{name:"form",type:String}},children:{content:{selector:"ui-offer"}}}}static get TEMPLATES(){return{"GOLD":{"EE":684,"LV":4477,"LT":4475},"PRIVATE_BANKING":{"EE":685,"LV":4478,"LT":4476},1:{"EE":686,"LV":4479,"LT":4477},2:{"EE":687,"LV":4480,"LT":4478}}}static get vip(){return"vip"}static get minAge(){return 18}get offersHelper(){return Swedbank.OffersHelper||{}}get segment(){return this.offersHelper.customerSegment||
""}get age(){return this.offersHelper.customerAge||0}get isVip(){return this.segment===Swedbank.UIWebinarRegistration.vip}get allowedAge(){return this.age>=Swedbank.UIWebinarRegistration.minAge}get templateId(){return Swedbank.UIWebinarRegistration.TEMPLATES[this.form][Swedbank.country]||null}get restService(){return Swedbank.RestService.get()}get sendButton(){return this.content.querySelector('button[type\x3d"button"]:not(.-destructive)')}sendData(){const environment=Swedbank.Navigation.isPrivate()?
"private":"business";const action=document.mainForm.action.replace(/^[^;]+(;.*)$/,`/${environment}$1`);const params={[action]:true,control:true,pageId:`${environment}.mail.sender`,templateId:this.templateId,coreId:Swedbank.isAuthenticated?Swedbank.User.currentCustomerId:""};this.restService.performRequest(params).then(response=>{if(response&&!response.data)this.rebuildChildren([UI.html`<h2>${response.answer}</h2>`]);else this.errorHandler(response)}).catch(error=>this.errorHandler(error))}errorHandler(error){this.rebuildChildren([UI.html`<ui-message type="error">${error.data.exception}</ui-message>`])}hydrate(){if(Swedbank.isAuthenticated&&
this.form&&this.templateId&&!this.isVip&&this.allowedAge)this.sendButton.addEventListener("click",()=>this.sendData());else{const parent=this.parentElement;this.remove();if(parent&&!parent.children.length)parent.remove()}}};Swedbank.UIWebinarRegistration.defineElement("ui-webinar-registration");
class UIDropdownCountryFiller{constructor(target){this.target=target}_buildCountryOption(country){return UI.createElement({tagName:"option",attributes:{"data-text":country.name,"data-flag":country.iso2,"value":`+${country.dialCode}`,"selected":Swedbank.country===country.iso2.toUpperCase()||null,"aria-label":country.name},children:[country.name]})}static sortByBalticRegion(countriesList){const order=["ee","lv","lt","ru","fi","se"];order.reverse();order.forEach(x=>{const country=countriesList.find(c=>
c.dataset.flag===x);const countryIndex=countriesList.indexOf(country);countriesList.splice(countryIndex,1);countriesList.unshift(country)})}render(){Swedbank.Countries.fetch().then(countries=>{const countriesList=[];countries.forEach(country=>countriesList.push(this._buildCountryOption(country)));UIDropdownCountryFiller.sortByBalticRegion(countriesList);switch(this.target.tagName){case "UI-PHONEFIELD":SharedComponents.UIPhoneField.setCountriesData(countries);UI.prerenderElementsTree(this.target.dropdown);
UI.rebuildChildren(this.target.dropdown.nativeSelect,countriesList);if(this.target.initialValue.indexOf("+")===0)this.target.update(this.target.initialValue);break;case "UI-DROPDOWN":default:UI.rebuildChildren(this.target.nativeSelect,countriesList);break}})}hydrate(){}}SharedComponents.UIDropdown.registerPlugin("country-filler",UIDropdownCountryFiller,false);SharedComponents.UIPhoneField.registerPlugin("country-filler",UIDropdownCountryFiller,false);
